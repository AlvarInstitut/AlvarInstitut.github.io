<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ca" xml:lang="ca" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>15. La clàusula ORDER BY | Bases de Dades </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="ca" />
<meta name="author" content="Àlvar Serrano Calduch" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" />
<meta name="generator" content="eXeLearning 2.6 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
</head>
<body class="exe-web-site" id="exe-node-10"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Omet navegació</a></p>
<div id="header" ><div id="headerContent">Bases de Dades</div></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Tema 6: SQL -  Consulta bàsica (part I)</a></li>
   <li><a href="objectius_i_coneixements_previs.html" class="no-ch">Objectius i Coneixements previs</a></li>
   <li><a href="1_introducci.html" class="no-ch">1. Introducció</a></li>
   <li><a href="2_ddl_i_dml.html" class="no-ch">2. DDL i DML</a></li>
   <li><a href="3_client_dbeaver_installaci_i_confiuraci.html" class="no-ch">3. Client DBeaver: instal·lació i confiuració</a></li>
   <li><a href="4_client_dbeaver_utilitzaci.html" class="no-ch">4. Client DBeaver: utilització</a></li>
   <li><a href="5_dades_dels_exemples_i_els_exercicis.html" class="no-ch">5. Dades dels exemples i els exercicis</a></li>
   <li><a href="6_operadors.html" class="no-ch">6. Operadors</a></li>
   <li><a href="7_funcions.html" class="daddy">7. Funcions</a>
   <ul class="other-section">
      <li><a href="71_formats_de_les_dates.html" class="no-ch">7.1 Formats de les dates</a></li>
      <li><a href="72_formats_dels_nmeros.html" class="no-ch">7.2 Formats dels números</a></li>
   </ul>
   </li>
   <li><a href="8_la_consulta_select.html" class="no-ch">8. La consulta SELECT</a></li>
   <li><a href="9_consulta_bsica.html" class="daddy">9. Consulta bàsica</a>
   <ul class="other-section">
      <li><a href="exercicis.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="10_lies_en_les_columnes.html" class="daddy">10. Àlies en les columnes</a>
   <ul class="other-section">
      <li><a href="exercicis0.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="11_la_clusula_where.html" class="daddy">11. La clàusula WHERE</a>
   <ul class="other-section">
      <li><a href="exercicis1.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="12_funcions_dagregat.html" class="daddy">12. Funcions d'agregat</a>
   <ul class="other-section">
      <li><a href="exercicis2.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="13_la_clusula_group_by.html" class="daddy">13. La clàusula GROUP BY</a>
   <ul class="other-section">
      <li><a href="exercicis3.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="14_la_clusula_having.html" class="daddy">14. La clàusula HAVING</a>
   <ul class="other-section">
      <li><a href="exercicis4.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li id="active"><a href="15_la_clusula_order_by.html" class="active daddy">15. La clàusula ORDER BY</a>
   <ul>
      <li><a href="exercicis5.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="16_el_predicat_distinct.html" class="daddy">16. El predicat DISTINCT</a>
   <ul class="other-section">
      <li><a href="exercicis6.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="17_la_clusula_limit__offset.html" class="daddy">17. La clàusula LIMIT .. OFFSET</a>
   <ul class="other-section">
      <li><a href="exercicis7.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="18_consulta_de_creaci_de_taules.html" class="daddy">18. Consulta de creació de taules</a>
   <ul class="other-section">
      <li><a href="exercicis8.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="19_ordre_amb_qu_sexecuta_una_sentncia_sql.html" class="no-ch">19. Ordre amb què s'executa una sentència SQL</a></li>
   <li><a href="exercicis_de_tot_el_tema_amb_els_resultats.html" class="no-ch">Exercicis de tot el tema, amb els resultats</a></li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="exercicis4.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="exercicis5.html" class="next"><span>Següent<span> &raquo;</span></span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">15. La clàusula ORDER BY</h1></div>
<div class="iDevice_wrapper FreeTextIdevice" id="id10">
<div class="iDevice emphasis0">
<div id="ta10_1" class="block iDevice_content">
<p> </p>
<p>Ordena les files del resultat respecte l'ordre especificat</p>
<p> </p>
<p class="titolet">Sintaxi</p>
<p class="codi">SELECT &lt;columnes&gt; <br /> FROM &lt;taules&gt; <br /> ORDER BY camp1 [ASC | DESC] { , camp2 [ASC | DESC] }</p>
<p>Ací tenim un exemple:</p>
<p class="codiSQL">SELECT nom_c, provincia <br /> FROM COMARQUES<br /> ORDER BY nom_c</p>
<p>S'ordenaran les files pel camp, en l'ordre marcat: ascendent o descendent (per defecte, ascendent). Si hi haguera un segon camp d'ordenació, aquest entraria en joc en cas de valors iguals del primer. Aquest segon podrà ser en ordre ascendent o descendent, independentment de l'ordre del primer camp.</p>
<p class="codiSQL">SELECT nom_c, provincia<br />FROM COMARQUES<br />ORDER BY provincia DESC, nom_c</p>
<p>Es podrà ordenar per qualsevol camp de la taula, estiga indexada per aquest camp o no. L'avantatge d'estar indexada respecte a un camp és la rapidesa en l'ordenació. Així, si tenim una taula gran i ordenem per un determinat camp, es perdrà temps en aquesta ordenació. Si contínuament estem ordenant per aquest camp, perdrem aquest temps moltes vegades. Aleshores seria convenient crear un índex. Però hem de recordar que la creació d'un índex ocupa espai. Per tant no és bona solució indexar per tots els camps. Únicament, en tot cas, per aquells que més s'ordene. Veurem la creació d'índex en la tercera part d'aquest tema.</p>
<p>I es pot especificar en l'ordenació, una expressió que agafe un o més d'un camp amb operadors i funcions. Es pot posar un camp o una expressió que no estiga en la llista de camps o expressions que es volen visualitzar (al costat del SELECT), encara que normalment sí que ho visualitzarem, per a poder comprovar que realment està ordenat pel que s'ha especificat. Per exemple, si volem ordenar per la densitat d'habitants de les poblacions, que es calcula dividint el número d'habitants per l'extensió:</p>
<p class="codiSQL">SELECT nom, poblacio, extensio<br />FROM POBLACIONS<br />ORDER BY poblacio/extensio DESC</p>
<blockquote>
<p>Observeu que estem ordenant per un camp (<b>poblacio / extensio</b>) que no estem visualitzant, encara que seria molt més il·lustratiu mostrar-lo</p>
</blockquote>
<p>Opcionalment, en el moment d'especificar el camp o l'expressió per la qual volem ordenar, si aquesta apareix en la llista de columnes a visualitzar, podrem posar senzillament el número d'ordre de la columna. Així, per exemple, podem fer el següent:</p>
<p class="codiSQL">SELECT nom, poblacio, extensio, poblacio/extensio<br />FROM POBLACIONS<br />ORDER BY 4 DESC</p>
<blockquote>
<p>On estem indicant que s'ordene de forma descendent per la quarta columna que va a visualitzar-se, és a dir, per <b>oblacio / extensio</b></p>
</blockquote>
<p>Hem d'observar que la clàusula ORDER BY és l'última, i que en cas d'haver clàusula GROUP BY, s'intentarà ordenar després d'haver agrupat. Per tant en cas de que la sentència continga un GROUP BY o s'haja utilitzat alguna funció d'agregat (que implica fer grups), només podrem posar en el ORDER BY camps que estiguen en el GROUP BY o que formen part d'una funció d'agregat. El raonament és el mateix que el fet en la clàusula GROUP BY o HAVING i l'error en cas de no respectar açò seria el matiex que el vist en aquell apartat.</p>
<p> </p>
<blockquote></blockquote>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextIdevice" id="id38">
<div class="iDevice emphasis0">
<div id="ta38_1" class="block iDevice_content">
<p class="titolet">Exemples</p>
<ol>
<li value="1">
<p>Traure tota la informació de les poblacions ordenades pel nom de la població.</p>
</li>
</ol>
<p class="codiSQL">SELECT *<br />FROM POBLACIONS<br />ORDER BY nom</p>
<p> </p>
<ol start="2">
<li>
<p>Traure tota la informació de les poblacions, ordenades pel nom de la comarca, i dins d'aquesta per l'altura (de forma descendent).</p>
</li>
</ol>
<p class="codiSQL">SELECT *<br />FROM POBLACIONS<br />ORDER BY nom_c, altura DESC</p>
<p> </p>
<ol start="3">
<li>
<p>Traure les comarques amb el número de pobles i total d'habitants, d'aquelles que tenen més de 10 pobles, ordenades pel número de pobles, i dins d'aquest pel total de població de forma descendent.</p>
</li>
</ol>
<p class="codiSQL">SELECT nom_c, COUNT(*), SUM(poblacio)<br />FROM POBLACIONS<br />GROUP BY nom_c<br />HAVING COUNT(*) &gt; 10<br />order by COUNT(*) , SUM(poblacio) DESC</p>
<p class="codiSQL">SELECT nom_c, COUNT(*), SUM(poblacio)<br />FROM POBLACIONS<br />GROUP BY nom_c<br />HAVING COUNT(*) &gt; 10<br />order by 2 , 3 DESC</p>
<p> </p>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="exercicis4.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="exercicis5.html" class="next"><span>Següent<span> &raquo;</span></span></a>
</div>
</div>
<div id="packageLicense" class="cc cc-by-nc-sa">
<p><span>Llicenciat sota la </span> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Llicència Creative Commons Reconeixement NoComercial CompartirIgual 3.0</a></p>
</div>
</div>
</div>
</div>
</body></html>