<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ca" xml:lang="ca" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>Exercicis de tot el tema | Bases de Dades </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="ca" />
<meta name="author" content="Àlvar Serrano Calduch" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" />
<meta name="generator" content="eXeLearning 2.6 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
</head>
<body class="exe-web-site" id="exe-node-20"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Omet navegació</a></p>
<div id="header" ><div id="headerContent">Bases de Dades</div></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Tema 7: Programació en PostgreSQL</a></li>
   <li><a href="objectius_i_coneixements_previs.html" class="no-ch">Objectius i Coneixements previs</a></li>
   <li><a href="0_nota_inicial.html" class="no-ch">0. Nota inicial</a></li>
   <li><a href="1_introducci.html" class="no-ch">1. Introducció</a></li>
   <li><a href="2_plpgsql.html" class="no-ch">2. PL/pgSQL</a></li>
   <li><a href="3_declaraci_de_variables.html" class="no-ch">3. Declaració de variables</a></li>
   <li><a href="4_instruccions.html" class="no-ch">4. Instruccions</a></li>
   <li><a href="5_funcions.html" class="daddy">5. Funcions</a>
   <ul class="other-section">
      <li><a href="exercicis.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="6_utilitzaci_de_cursors.html" class="daddy">6. Utilització de cursors</a>
   <ul class="other-section">
      <li><a href="exercicis0.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="7_missatges_i_excepcions.html" class="no-ch">7. Missatges i excepcions</a></li>
   <li><a href="8_triggers.html" class="daddy">8. Triggers</a>
   <ul class="other-section">
      <li><a href="exercicis1.html" class="no-ch">Exercicis</a></li>
   </ul>
   </li>
   <li><a href="9_creaci_daltres_objectes_basats_en_funcions.html" class="daddy">9. Creació d'altres objectes basats en funcions</a>
   <ul class="other-section">
      <li><a href="91_operadors.html" class="daddy">9.1 Operadors</a>
      <ul class="other-section">
         <li><a href="exercicis2.html" class="no-ch">Exercicis</a></li>
      </ul>
      </li>
      <li><a href="92_operadors_de_classe.html" class="no-ch">9.2 Operadors de classe</a></li>
      <li><a href="93_funcions_dagregat.html" class="daddy">9.3 Funcions d'agregat</a>
      <ul class="other-section">
         <li><a href="exercicis3.html" class="no-ch">Exercicis</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li id="active"><a href="exercicis_de_tot_el_tema.html" class="active no-ch">Exercicis de tot el tema</a></li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="exercicis3.html" class="prev"><span><span>&laquo; </span>Anterior</span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">Exercicis de tot el tema</h1></div>
<div class="iDevice_wrapper activityIdevice em_iDevice em_iDevice_activity" id="id28">
<div class="iDevice emphasis1" >
<img alt="" class="iDevice_icon" src="icon_activity.gif" /><h2 class="iDeviceTitle">Exercicis</h2><div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta28_42_2" class="block iDevice_content">
<p>En la Base de Dades <b>geo_grup_9999x</b>:<br /><br />7.1.- Crea una funció anomenada <b>DEU_</b><b>Q</b>, que traga els <strong>números del 1 al 10</strong> i els seus <strong>quadrats</strong>. (Utilitza <b>RAISE NOTICE</b>).<br /><br />7.2.- Fes una altra funció, <b>IMP</b>, que traga per pantalla els números <strong>imparells</strong> del 1 al 50. (Utilitza <b>RAISE NOTICE</b>).<br /><br />7.3.- Fes una funció anomenada <b>TAULA_MULT</b>, per a que traga la taula de multiplicar del <strong>paràmetre</strong> que se li ha de passar. (Utilitza <b>RAISE NOTICE</b>). Aquest podria ser el seu aspecte, en executar-la:</p>
<p style="text-align: center;"><img style="border: 1px solid black;" src="T7_5_e_1.png" width="466" height="399" /></p>
<p style="text-align: left;">7.4.- Fes una funció, anomenada <b>MAX2</b>, que tinga dos paràmetres <strong>numèrics</strong> i que <strong>torne el màxim</strong> entre aquestos dos. (Ara ja <b>no </b>s'ha d'utilitzar <b>RAISE NOTICE</b>).<br /><br />7.5.- Utilitza l'anterior per a crear <b>MAX3</b>. Has d'utilitzar obligatòriament la funció <strong>MAX2</strong><br /><br />7.6.- (<strong>Voluntari</strong>) Fes la funció <b>LAT_A_TEXT</b>, tenint en compte que ha de quedar com en la taula <b>POBLACIONS</b>. Segurament la dificultat més gran serà aconseguir que apareguen les cometes després dels minuts i dels segons.</p>
<p style="text-align: left;">7.7.- Fes una funció anomeneda <strong>POBLACIONS_ALTES</strong> que accepte 2 paràmetres, el primer de tipus text que serà una comarca, i el segon numèric que serà una altura. Ha de traure les poblacions de la comarca del primer paràmetre que són més altes que el segon paràmetre. Mostrarem el nom de la població i l'altura. Aquest podria ser el resultat en executar-se:</p>
<p style="text-align: center;"><img src="T7_6_Ex7.png" alt="" width="456" height="157" /></p>
<p>7.8.- Fes una funció anomenada <strong>COMARQUES_NUMPOBLES</strong> sense paràmetres que traga per pantalla les comarques ordenades alfabèticament amb el número de pobles de cadascuna</p>
<p style="text-align: center;"><img src="T7_6_Ex8.png" alt="" width="438" height="226" /></p>
<p>7.9.- Fes una funció anomenada <strong>COMARQUES_NUMPOBLES_NUMINSTITUTS</strong> sense paràmetres que traga per pantalla les comarques ordenades alfabèticament amb el número de pobles de cadascuna i el número d'instituts. En la consulta tindrem dos dificultats:</p>
<ul>
<li>Hem d'agafar totes les poblacions, fins i tot les que no tenen institut</li>
<li>Com que hem d'accedir als instituts, per a comptar els pobles haurem de comptar els pobles distints, i així si un poble té més d'un institut, no comptar-lo més d'una vegada</li>
</ul>
<p style="text-align: center;"><img src="T7_6_Ex9.png" alt="" width="604" height="226" /></p>
<p>7.10.- Fes una funció anomenada <strong>NUM_HABITANTS_COMARCA</strong> que accepte un paràmetre de tipus text, i torne el número d'habitants d'eixa comarca</p>
<p style="text-align: center;"><img src="T7_6_Ex10.png" alt="" width="399" height="195" /></p>
<p>7.11.- Fer la funció <strong>COMARQUES_NUMHABITANTS</strong> sense paràmetres per a traure per pantalla totes les comarques i el número d'habitants. En la consulta has d'utilitzar obligatòriament la funció anterior</p>
<p style="text-align: center;"><img src="T7_6_Ex11.png" alt="" width="497" height="224" /></p>
<p style="text-align: left;">7.12.- Crear un trigger anomenat <b>TR_ALT_POS</b> que controle que l'altura d'una nova població siga estrictament positiva. La funció en la qual es basa es pot anomenar <b>ALT_POS</b>.</p>
<p style="text-align: left;">7.13.- Modificar l'anterior per a que ho controle també quan es tracta d'una modificació.</p>
<p style="text-align: left;">7.14.- Crear un trigger anomenat <strong>TR_EXT_0_1000</strong> que controle que l'extensió d'un municipi (població) estiga obligatòriament entre 0 i 1000, i a de ser sempre, tant si s'insereix una nova població com si es modifica. Però en aquesta ocasió, en compte de traure un error, el que farem serà modificar aquest valor: si és major que 1000, li donarem el valor 1000, i si és negatiu li posarem 0. Ho aconseguirem modificant <strong>NEW.extensio</strong>, i com la funció del trigger torna sempre NEW, doncs agafarà el nou valor. Anomeneu a la funció <strong>EXT_0_1000</strong>. </p>
<p>7.15.- <strong>VOLUNTARI</strong>. En la taula POBLACIONS3 tenim controlat que la latitud introduïda siga correcta per mig del tipus lat, però no en la taula POBLACIONS, on és de tipus VARCHAR(50) i per tant es podria introduir una latitud incorrecta molt fàcilment. Crea un trigger que controle que quan s'introdueix o es modifica la <strong>latitud</strong> de <strong>POBLACIONS</strong> siga correcta. Per a això</p>
<ul>
<li>Els caràcter 1 i 2 han de ser els <strong>graus</strong>, que han d'estar entre 00 i 90</li>
<li>El caràcter 3 ha de ser <strong>º</strong></li>
<li>Els caràcters 4 i 5 formen els <strong>minuts</strong>, i han d'estar entre 00 i 59</li>
<li>El caràcter 6 ha de ser <strong>'</strong></li>
<li>Els caràcters 7 i 8 formen els <strong>segons</strong>, i han d'estar entre 00 i 59</li>
<li>El caràcter 9 ha de ser <strong>"</strong></li>
<li>El caràcter 10 ha de ser <strong>N</strong> o <strong>S</strong></li>
<li>Si no s'acompleix alguna de les restriccions anteriors, ha d'eixir un error dient que la latitud ha d'estar entre 00º00'00"N i 90º00'00"N , o entre 00º00'00"S i 90º00'00"S</li>
</ul>
<p style="text-align: left;">7.16.- Crear els dos <b>operadors de comparació</b> que quedaven per al tipus <b>lat</b>: <b>&lt; </b>i <b>&lt;=</b></p>
<p style="text-align: left;">7.17.- Crear la funció d'agregat <b>MIN </b>per al tipus de dades <b>lat</b>.</p>
<p style="text-align: left;"></p>
</div>
</div>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="exercicis3.html" class="prev"><span><span>&laquo; </span>Anterior</span></a>
</div>
</div>
<div id="packageLicense" class="cc cc-by-nc-sa">
<p><span>Llicenciat sota la </span> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Llicència Creative Commons Reconeixement NoComercial CompartirIgual 3.0</a></p>
</div>
</div>
</div>
</div>
</body></html>