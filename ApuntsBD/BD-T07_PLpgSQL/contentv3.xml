<?xml version="1.0" encoding="utf-8"?>

<instance xmlns="http://www.exelearning.org/content/v0.3" reference="2" version="0.3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://www.exelearning.org/content/v0.3 content.xsd" class="exe.engine.package.Package">
 <dictionary>
  <string role="key" value="_title"></string>
  <unicode value="Bases de Dades"></unicode>
  <string role="key" value="idevices"></string>
  <list></list>
  <string role="key" value="_addPagination"></string>
  <bool value="0"></bool>
  <string role="key" value="_addSearchBox"></string>
  <bool value="0"></bool>
  <string role="key" value="_author"></string>
  <unicode value="Àlvar Serrano Calduch"></unicode>
  <string role="key" value="_backgroundImg"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextMode"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextPlace"></string>
  <unicode value=""></unicode>
  <string role="key" value="_description"></string>
  <unicode value=""></unicode>
  <string role="key" value="_docType"></string>
  <unicode value="XHTML"></unicode>
  <string role="key" value="_exportElp"></string>
  <bool value="0"></bool>
  <string role="key" value="_extraHeadContent"></string>
  <unicode value=""></unicode>
  <string role="key" value="_fieldValidationInfo"></string>
  <dictionary>
   <unicode role="key" value="all"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_title"></unicode>
     <unicode value="pp_lang"></unicode>
     <unicode value="pp_description"></unicode>
     <unicode value="pp_author"></unicode>
     <unicode value="pp_newlicense"></unicode>
    </list>
   </dictionary>
   <unicode role="key" value="procomun"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_learningResourceType"></unicode>
    </list>
    <unicode role="key" value="values_from_list"></unicode>
    <dictionary>
     <unicode role="key" value="pp_learningResourceType"></unicode>
     <list>
      <unicode value="master class"></unicode>
      <unicode value="closed exercise or problem"></unicode>
      <unicode value="real project"></unicode>
      <unicode value="didactic game"></unicode>
      <unicode value="webquest"></unicode>
      <unicode value="open problem"></unicode>
      <unicode value="simulation"></unicode>
      <unicode value="questionnaire"></unicode>
      <unicode value="conceptual map"></unicode>
     </list>
    </dictionary>
   </dictionary>
  </dictionary>
  <string role="key" value="_intendedEndUserRoleGroup"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleTutor"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_isChanged"></string>
  <bool value="0"></bool>
  <string role="key" value="_isTemplate"></string>
  <bool value="0"></bool>
  <string role="key" value="_lang"></string>
  <unicode value="ca"></unicode>
  <string role="key" value="_learningResourceType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_levelNames"></string>
  <list>
   <unicode value="Tema"></unicode>
   <unicode value="Secció"></unicode>
   <unicode value="Apartat"></unicode>
  </list>
  <string role="key" value="_name"></string>
  <unicode value="BD-T07_PLpgSQL"></unicode>
  <string role="key" value="_nextIdeviceId"></string>
  <int value="29"></int>
  <string role="key" value="_nextNodeId"></string>
  <int value="21"></int>
  <string role="key" value="_nodeIdDict"></string>
  <dictionary>
   <unicode role="key" value="0"></unicode>
   <instance class="exe.engine.node.Node" reference="4">
    <dictionary>
     <string role="key" value="_title"></string>
     <unicode value="Tema 7: Programació en PostgreSQL"></unicode>
     <string role="key" value="idevices"></string>
     <list>
      <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="1">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Free Text"></unicode>
        <string role="key" value="_author"></string>
        <unicode value="University of Auckland"></unicode>
        <string role="key" value="_purpose"></string>
        <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
        <string role="key" value="_tip"></string>
        <string value=""></string>
        <string role="key" value="content"></string>
        <instance class="exe.engine.field.TextAreaField" reference="3">
         <dictionary>
          <string role="key" value="_id"></string>
          <int value="1"></int>
          <string role="key" value="_idevice"></string>
          <reference key="1"></reference>
          <string role="key" value="_instruc"></string>
          <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
          <string role="key" value="_name"></string>
          <unicode value="Free Text"></unicode>
          <string role="key" value="anchor_names"></string>
          <list></list>
          <string role="key" value="anchors_linked_from_fields"></string>
          <dictionary></dictionary>
          <string role="key" value="buttonCaption"></string>
          <string value=""></string>
          <string role="key" value="content_w_resourcePaths"></string>
          <unicode content="true" value="
&lt;div style=&quot;text-align: center&quot;&gt;
&lt;img src=&quot;resources/Portada_SQL_PostgreSQL.png&quot; height=&quot;804&quot; width=&quot;711&quot; /&gt;
&lt;/div&gt;
"></unicode>
          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
          <int value="4"></int>
          <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
          <int value="2"></int>
          <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
          <int value="3"></int>
          <string role="key" value="htmlTag"></string>
          <string value="div"></string>
          <string role="key" value="images"></string>
          <instance class="exe.engine.galleryidevice.GalleryImages">
           <dictionary>
            <string role="key" value=".listitems"></string>
            <list>
             <instance class="exe.engine.galleryidevice.GalleryImage">
              <dictionary>
               <string role="key" value="_caption"></string>
               <instance class="exe.engine.field.TextField">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <int value="1506"></int>
                 <string role="key" value="_idevice"></string>
                 <none></none>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="content"></string>
                 <string value=""></string>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                </dictionary>
               </instance>
               <string role="key" value="_id"></string>
               <unicode value="21_1.25"></unicode>
               <string role="key" value="_imageResource"></string>
               <instance class="exe.engine.resource.Resource" reference="5">
                <dictionary>
                 <string role="key" value="_idevice"></string>
                 <reference key="1"></reference>
                 <string role="key" value="_package"></string>
                 <reference key="2"></reference>
                 <string role="key" value="_storageName"></string>
                 <string value="Portada_SQL_PostgreSQL.png"></string>
                 <string role="key" value="_userName"></string>
                 <string value="/tmp/tmpA4E03D/Portada_SQL_PostgreSQL.png"></string>
                 <string role="key" value="checksum"></string>
                 <string value="32d6946a3df7e95d394e1e053c046435"></string>
                 <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="warningMsg"></string>
                 <string value=""></string>
                </dictionary>
               </instance>
               <string role="key" value="_parent"></string>
               <reference key="3"></reference>
               <string role="key" value="_thumbnailResource"></string>
               <none></none>
               <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
               <int value="3"></int>
               <string role="key" value="makeThumbnail"></string>
               <bool value="0"></bool>
              </dictionary>
             </instance>
            </list>
            <string role="key" value="idevice"></string>
            <reference key="3"></reference>
           </dictionary>
          </instance>
          <string role="key" value="intlinks_to_anchors"></string>
          <dictionary></dictionary>
          <string role="key" value="nextImageId"></string>
          <int value="26"></int>
          <string role="key" value="parentNode"></string>
          <reference key="4"></reference>
         </dictionary>
        </instance>
        <string role="key" value="edit"></string>
        <bool value="0"></bool>
        <string role="key" value="emphasis"></string>
        <int value="0"></int>
        <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
        <int value="7"></int>
        <string role="key" value="icon"></string>
        <string value=""></string>
        <string role="key" value="id"></string>
        <unicode value="21"></unicode>
        <string role="key" value="lastIdevice"></string>
        <bool value="0"></bool>
        <string role="key" value="parentNode"></string>
        <reference key="4"></reference>
        <string role="key" value="systemResources"></string>
        <list></list>
        <string role="key" value="undo"></string>
        <bool value="1"></bool>
        <string role="key" value="userResources"></string>
        <list>
         <reference key="5"></reference>
        </list>
        <string role="key" value="version"></string>
        <int value="0"></int>
       </dictionary>
      </instance>
     </list>
     <string role="key" value="_id"></string>
     <unicode value="0"></unicode>
     <string role="key" value="_package"></string>
     <reference key="2"></reference>
     <string role="key" value="anchor_fields"></string>
     <list></list>
     <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
     <int value="2"></int>
     <string role="key" value="exportType"></string>
     <string value="website"></string>
     <string role="key" value="last_full_node_path"></string>
     <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL"></string>
     <string role="key" value="parent"></string>
     <none></none>
     <string role="key" value="top_anchors_linked_from_fields"></string>
     <list></list>
     <string role="key" value="children"></string>
     <list>
      <instance class="exe.engine.node.Node" reference="8">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Objectius i Coneixements previs"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="6">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Objectius"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="Universitat d'Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="Els Objectius descriuen els resultats esperats de l'aprenentatge 
 i haurien de definir allò que els alumnes seran  capaços de fer 
 quan hagen completat les tasques d'aprenentatge."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="objectives"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="7">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="21_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="6"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Escriu els objectius d'aprenentatge per a aquest recurs."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Objectius"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;
Com tots els SGBD, PostgreSQL ofereix la possibilitat d'afegir funcions, triggers, ...
&lt;/p&gt;
&lt;p&gt;
Per a poder fer aquestos fragments de codi, en PostgreSQL es poden fer en molts llenguatges. Triarem un en concret, el PL/pgSQL i el veurem amb una determinada profunditat. Una vegada coneguda la seua sintaxi, crearem funcions escrites en aquest llenguatge. Insistirem en les funcions que utilitzen cursors.
&lt;/p&gt;
&lt;p&gt;
Especial èmfasi, també, en la construcció de triggers, per ser elements que ajuden a definir millor una Base de Dades.
&lt;/p&gt;
&lt;p&gt;
Finalment acabarem de construir objectes que es basen en funcions.
&lt;/p&gt;
&lt;p&gt;
Els objectius, per tant seran: 
&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	Conéixer la possibilitat de crear funcions amb més d'un llenguatge&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;
	Dominar la sintaxi de PL/pgSQL&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;
	Crear funcions en PL/pgSQL&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;
	Utilització correcta de cursors&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;
	Creació de triggers&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;
	Creació d'altres objectes, com operadors, operadors de classe i funcions d'agregat&lt;/li&gt;
&lt;/ul&gt;

"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="7"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="8"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="objectives"></unicode>
           <string role="key" value="id"></string>
           <unicode value="0"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="parentNode"></string>
           <reference key="8"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="9">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Coneixements previs"></unicode>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_purpose"></string>
           <unicode value="El requisit de coneixements previs es refereix 
 als coneixements que els alumnes haurien de tindre per estar completar 
 l'aprenentatge. Exemples de coneixements previs poden ser: &lt;ul&gt;
&lt;li&gt;    Alumnes han de tindre un nivell 4 (alt) d'anglès&lt;/li&gt;
&lt;li&gt;    Alumnes han de poder muntar eines electròniques&lt;/li&gt;&lt;/ul&gt;
"></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="preknowledge"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="10">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="22_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="9"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Descriu els coneixements requerits pels alumnes 
 que haurien de tindre per completar aquest aprenentatge. "></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Coneixements previs"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Els coneixements previs per a poder seguir aquest tema són 3:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Conèixer SQL (Tema 6)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Conèixer l'entorn d'un client de PostgreSQL, concretament DBeaver (Tema 6)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tenir coneixements de programació (mòdul de Programació).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tenir coneixements de Bases de Dades Relacionals&lt;/li&gt;
&lt;/ul&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="10"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="8"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="preknowledge"></unicode>
           <string role="key" value="id"></string>
           <unicode value="1"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="parentNode"></string>
           <reference key="8"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="1"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:Objectius%20i%20Coneixements%20previs"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="13">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="0. Nota inicial"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="11">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="12">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="11"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;En aquest tema també construirem molts objectes, per tant podem &quot;boicotejar-nos&quot; entre nosaltres si utilitzem tots el mateix usuari.&lt;/p&gt;
&lt;p&gt;És per això que en aquest tema tots els exemples i tots els exercicis els farem sobre un usuari (i contrasenya) i una Base de Dades anomenada &lt;strong&gt;geo_grup_9999x&lt;/strong&gt;, on heu de substituir &lt;strong&gt;grup&lt;/strong&gt; pel codi del vostre grup, &lt;strong&gt;9999&lt;/strong&gt; per les 4 últimes xifres del vostre DNI, i la &lt;strong&gt;x&lt;/strong&gt; per la lletra del vostre NIF. La connexió serà per tant:&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;Servidor: &lt;strong&gt;89.36.214.106&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;Usuari: &lt;strong&gt;geo_grup_9999x&lt;/strong&gt; (on &lt;strong&gt;grup&lt;/strong&gt; és el codi del vostre grup, &lt;strong&gt;9999&lt;/strong&gt; són les 4 últimes xifres del vostre DNI, i &lt;strong&gt;x&lt;/strong&gt; la vostra lletra del NIF)&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;Contrasenya: &lt;strong&gt;geo_grup_9999x &lt;/strong&gt;(el mateix d'abans)&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;Base de Dades: &lt;strong&gt;geo_grup_9999x&lt;/strong&gt; (el mateix d'abans)&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;En la Base de Dades &lt;strong&gt;geo_grup_9999x&lt;/strong&gt; ja teniu les taules de prova que estem utilitzant: &lt;strong&gt;COMARQUES&lt;/strong&gt;, &lt;strong&gt;POBLACIONS &lt;/strong&gt; i &lt;strong&gt;INSTITUTS&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Per a poder desenvolupar correctament el tema, us faran falta alguns altres objectes creats en el tema anterior, però observeu com ara no interferireu entre vosaltres.&lt;/p&gt;
&lt;p&gt;Ací teniu les sentències de creació dels objectes que us faran falta:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creació de la taula &lt;strong&gt;PROVINCIES&lt;/strong&gt; :&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;codi&quot;&gt;CREATE TABLE PROVINCIES AS&lt;br /&gt;SELECT provincia, SUM(poblacio) AS habitants, SUM(Q) AS instituts&lt;br /&gt;   FROM (COMARQUES INNER JOIN POBLACIONS ON COMARQUES.nom_c=POBLACIONS.nom_c)&lt;br /&gt;     LEFT JOIN (SELECT cod_m, count(*) AS Q&lt;br /&gt;                  FROM INSTITUTS&lt;br /&gt;                  GROUP BY cod_m) I ON POBLACIONS.cod_m=I.cod_m&lt;br /&gt;   GROUP BY provincia;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creació dels dominis&lt;strong&gt; hemi_lat&lt;/strong&gt;, &lt;strong&gt;graus_lat&lt;/strong&gt;, i &lt;strong&gt;min_seg&lt;/strong&gt; :&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;codi&quot;&gt;CREATE DOMAIN hemi_lat AS char(1)&lt;br /&gt;    CHECK (VALUE IN ('N','S'));&lt;br /&gt;&lt;br /&gt;CREATE DOMAIN graus_lat AS numeric(2)&lt;br /&gt;    CHECK (VALUE BETWEEN 0 AND 90);&lt;br /&gt;&lt;br /&gt;CREATE DOMAIN min_seg AS numeric(2)&lt;br /&gt;    CHECK (VALUE BETWEEN 0 AND 59);&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creació del tipus &lt;strong&gt;lat&lt;/strong&gt; :&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;codi&quot;&gt;CREATE TYPE lat AS (&lt;br /&gt;    h hemi_lat,&lt;br /&gt;    g graus_lat,&lt;br /&gt;    m min_seg,&lt;br /&gt;    s min_seg );&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creació de la taula &lt;strong&gt;POBLACIONS3&lt;/strong&gt; :&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;codi&quot;&gt;CREATE TABLE POBLACIONS3 (&lt;br /&gt;    nom VARCHAR(50) CONSTRAINT cp_pob3 PRIMARY KEY,&lt;br /&gt;    latitud lat,&lt;br /&gt;    comarca varchar(50) );&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="12"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="6"></int>
             <string role="key" value="parentNode"></string>
             <reference key="13"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="24"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="13"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="18"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:0.%20Nota%20inicial"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="16">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="1. Introducció"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="14">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="15">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="14"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;Una vegada vist amb suficient profunditat el SQL, anem a enfocar l'atac a una base de dades des d'un altre punt de vista. No com un comando que l'executem i ens dóna la resposta, sinó des d'un llenguatge procedimental, amb les estructures de control pròpies d'aquestos (condicionals, bucles, funcions, ...), però accedint òbviament a les dades. Ara, quan fem una consulta obtindrem un conjunt de dades al qual anomenarem &lt;strong&gt;cursor&lt;/strong&gt;, i que segurament l'haurem de recórrer des del principi fins al final per a fer el tractament que siga.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;La part bàsica de tot açò serà la construcció de funcions. Aquestes es poden construir utilitzant molts llenguatges, començant per &lt;b&gt;SQL&lt;/b&gt;, on agruparem en una funció unes quantes sentències SQL o una sentència complicada. Anem a veure algun exemple, sobre l'usuari &lt;b&gt;geo_grup_9999x&lt;/b&gt;, bé des de &lt;b&gt;psql &lt;/b&gt;o bé des d'una finestra de SQL de &lt;b&gt;DBeaver&lt;/b&gt;, que el que fa és sumar la població dels pobles de la comarca passada com a paràmetre. Hem utilitzat l'opció &lt;strong&gt;CREATE OR REPLACE&lt;/strong&gt;, així en cas que estiga ja creada, dons la substituirem.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION gent_com(text) RETURNS numeric AS '
        SELECT SUM(poblacio)
            FROM POBLACIONS
            WHERE nom_c=$1;
' LANGUAGE SQL;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I ara, així ens dirà quina és la població de &lt;b&gt;Baix Maestrat&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT gent_com('Baix Maestrat');&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;O una altra també interessant, on traurem totes les comarques amb la seua població, utilitzant la funció anterior:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT nom_c,gent_com(nom_c)
    FROM COMARQUES;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Però on realment traurem profit és amb els llenguatges procedimentals. Podríem triar entre molts: &lt;b&gt;C&lt;/b&gt;, &lt;b&gt;Tcl&lt;/b&gt;, &lt;b&gt;Perl&lt;/b&gt;, &lt;b&gt;Python&lt;/b&gt;, ... En aquest curs optarem per &lt;b&gt;PL/pgSQL&lt;/b&gt; (&lt;i&gt;ProceduraL PostGreSQL&lt;/i&gt;).&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En versions anteriors podia passar que s'haguera de preparar la Base de Dades per a utilitzar el llenguatge. És a dir, podia passar que no estiguera disponible el llenguatge de programació en la Base de Dades. Aleshores s'havia d'instal·lar amb la sentència:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE PROCEDURAL LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Però &lt;b&gt;no serà el nostre cas&lt;/b&gt;. Podem utilitzar sense problemes tant el llenguatge &lt;b&gt;SQL &lt;/b&gt;com el &lt;b&gt;PL/pgSQL&lt;/b&gt;, que és el que realment ens interessa.&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="15"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="16"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="2"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="16"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="2"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:1.%20Introducci%C3%B3"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="19">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="2. PL/pgSQL"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="17">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="18">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="17"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;b&gt;PL/pgSQL&lt;/b&gt; vol dir llenguatge procedural de PostgreSQL. Canvia respecte el que hem vist, que sempre ha estat interactiu. El PL/pgSQL ens permetrà construir funcions utilitzant un llenguatge procedimental, prou semblant al PASCAL i un poc paregut al Java. Podrem definir variables, crear bucles, ... però també incorporar sentències de SQL; podrem definir cursors, que seran variables que ens permetran agafar línia a línia el resultat d’un SELECT.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Una de les aplicacions és la creació de &lt;b&gt;TRIGGERS&lt;/b&gt;, que són mòduls de programa que s’activen quan s’acompleix una determinada condició de la Base de Dades, després de la inserció, modificació o esborrat en una determinada taula.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Qualsevol cosa que ens definim (funció, Trigger,...), fins i tot un bloc de codi dins d'un bloc més gran, tindrà la següent estructura:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;[DECLARE
    declaració de variables]
BEGIN
    Instruccions
END;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Tot anirà per blocs: bloc de declaracions de variables, bloc del cos de la funció o procediment. I les sentències de control també seran blocs, amb un principi (BEGIN) i un END al final. Totes les instruccions acaben en punt i coma.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Observeu que ací BEGIN i END no tenen el significat de SQL, és a dir no serviran per a començar o acabar una transacció.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Vejam un exemple (sobre l'usuari &lt;b&gt;geo_grup_9999x&lt;/b&gt;):&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION comentari() RETURNS void AS '
DECLARE
    i text := ''Joanet'';
BEGIN
    i:=''Hola, '' || i;
    RAISE NOTICE ''%'',i;
END; ' LANGUAGE PLPGSQL;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;b&gt; RAISE NOTICE&lt;/b&gt; serveix per traure un comentari per pantalla. En l'entorn de DBeaver veurem el resultat en la pestanya &lt;b&gt;Output&lt;/b&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Hem de ser conscients que aquesta consulta és de creació d'una funció. El resultat d'aquesta sentència és la creació de la funció, i per tant com a resultat únicament ens dirà que l'ha creada, si tot ha anat bé&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;b&gt;NOTA&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Hem posat dues cometes simples en compte d'una en les constants alfanumèriques perquè tota la funció va declarada entre cometes simples.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Però es pot modificar aquest delimitador de tota la funció, i en compte de que siga la cometa, que siga una cadena amb &lt;strong&gt;$&lt;/strong&gt; davant i darrere, per exemple &lt;strong&gt;$cos$&lt;/strong&gt;. Aleshores no caldria posar dues cometes simples&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION comentari() RETURNS void AS $cos$
DECLARE
    i text := 'Joanet';
BEGIN
    i:='Hola, ' || i;
    RAISE NOTICE '%',i;
END; $cos$
LANGUAGE plpgsql ;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Si han hagut errors, els haurem de corregir (si l'error és lògic, s'haurà creat igual la funció; i si en modificar-la només fem CREATE FUNCTION ... ens dirà que ja està creada; per això és convenient posar CREATE OR REPLACE FUNCTION ...).&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Quan ja no hi hagen errors, la podrem executar amb la sentència:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT comentari();&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Recordem que en l'entorn de &lt;strong&gt;DBeaver&lt;/strong&gt; veurem el resultat en la pestanya &lt;b&gt;Output&lt;/b&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_1.png&quot; alt=&quot;&quot; width=&quot;439&quot; height=&quot;272&quot; /&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="1507"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="3_1.36"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="20">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="17"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_2_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpA4E03D/T7_2_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="f79713b6d8a966b1a3b1869b1e2d9ad8"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="18"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="18"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="37"></int>
             <string role="key" value="parentNode"></string>
             <reference key="19"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="3"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="19"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="20"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="3"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:2.%20PL/pgSQL"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="23">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="3. Declaració de variables"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="21">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="22">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="21"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt; S'han de declarar totes (excepte les variables comptador dels bucles FOR, com ja veurem en el seu moment) en el bloc &lt;b&gt;DECLARE &lt;/b&gt;i els tipus vàlids són els de SQL (NUMERIC, CHAR, DATE, ...). També es poden declarar de subtipus definits per l’usuari, com per exemple &lt;b&gt;lat&lt;/b&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Aquesta és la sintaxi de declaració de variables:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;nom [CONSTANT] tipus [NOT NULL] [{DEFAULT | :=}expressió];&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Com veiem, i de forma opcional podem definir les variables com a:&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;&lt;b&gt;Constants&lt;/b&gt;, i aleshores el seu contingut no podrà variar (haurà de tenir valor inicial).&lt;/li&gt;
&lt;/ul&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;&lt;b&gt;No nul·les&lt;/b&gt;, i aleshores una assignació del valor nul donarà un error (haurà de tenir valor inicial).&lt;/li&gt;
&lt;/ul&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;&lt;b&gt;Amb un valor inicial&lt;/b&gt; (a les variables declarades com a constants només se'ls podran donar valors amb aquesta clàusula).&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per exemple:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;DECLARE
    v1 VARCHAR;
    v2 CONSTANT TEXT := 'Hola';
    v3 NUMERIC(5) := 0;
    v4 DATE NOT NULL DEFAULT '7-7-77';
    v5 lat;
    vec6 NUMERIC(5)[];&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Si tenim, com en l'últim exemple, una variable que és d'un tipus compost, la manera d'accedir a un camp serà separant la variable i el camp per un punt: &lt;b&gt;v5.h&lt;/b&gt;. Ara no farà falta posar la variable entre parèntesis, com ens tocava fer en les sentències SQL.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;L'àmbit de les variables és el bloc on es declaren i els blocs &quot;fills&quot;, és a dir aquells blocs definits dins del bloc on està definida la variable. Si se'ls dóna un valor inicial, aquest valor s'assigna cada vegada que s'entra dins del bloc (no al principi de l'execució de la funció). Això pot ser important, ja que en la mateixa execució de la funció si s'entra més d'una vegada en el bloc, pot tenir resultats diferents.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per exemple: Utilitzem la funció que ja tenim creada &lt;b&gt;gent_com&lt;/b&gt; (població de la comarca especificada). La utilitzem per a inicialitzar una variable en el DECLARE, i executem aquest bloc dues vegades. Només ens queda canviar la comarca entre les dues passades.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION moltes_pobl() RETURNS void AS $cos$
DECLARE aux text := 'Marina Alta';
BEGIN
FOR i IN 1..2 LOOP
    DECLARE
        n numeric := gent_com(aux);
    BEGIN
        RAISE NOTICE 'Comarca %: % habitants',aux,n;
    END;
    IF i=1 THEN
        aux:='Marina Baixa';
    END IF;
END LOOP;
END; $cos$
LANGUAGE 'plpgsql';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I per a veure el resultat:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT moltes_pobl();&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Recordeu que el resultat que traiem amb &lt;b&gt;RAISE NOTICE&lt;/b&gt; es veu en la pestanya de &lt;b&gt;Messages&lt;/b&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Com veurem un poc més avant, a les funcions se'ls poden passar paràmetres, però en el moment de definir-los tenim l'opció de posar només de quin tipus són. La manera de nomenar-los dins de la funció, d'aquesta manera, és &lt;b&gt;$1&lt;/b&gt;, &lt;b&gt;$2&lt;/b&gt;, ... Per a no haver d'utilitzar uns noms tan impersonals, podem posar àlies en la zona de declaració:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION iva(numeric) RETURNS numeric AS '
BEGIN
    RETURN $1 * 0.16;
END; ' LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT iva(200);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ja que estem en la zona de declaració de variables, anem a acabar de comentar la manera de definir variables.&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;&lt;b&gt; %TYPE&lt;/b&gt; permet definir variables del tipus equivalent a una altra variable (&lt;b&gt;v1 v2%TYPE;&lt;/b&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;La utilitat real és que jo puc definir una variable del mateix tipus que un camp d'una determinada taula, i no cal que recorde de quin tipus era aquell. Per exemple:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;v_lat poblacions.lat%TYPE;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;&lt;b&gt; %ROWTYPE&lt;/b&gt; : la variable serà de tipus &lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;b&gt;fila &lt;/b&gt;&lt;/span&gt;de la taula esmentada.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Podrem utilitzar la variable amb camps, ja que equival a tota la fila.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION loc_pobl(text) RETURNS void AS $cos$
DECLARE f poblacions%ROWTYPE;
BEGIN
    SELECT * INTO f FROM POBLACIONS WHERE nom=$1;
    RAISE NOTICE 'Població: %',f.nom;
    RAISE NOTICE 'Latitud: %',f.latitud;
    RAISE NOTICE 'Longitud: %',f.longitud;
END; $cos$
LANGUAGE 'plpgsql';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT loc_pobl('Llucena');&lt;/code&gt;&lt;code&gt;&lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt;RECORD &lt;/b&gt;és també de tipus &lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;b&gt;fila&lt;/b&gt;&lt;/span&gt;, però agafa la seua estructura en el moment d'efectuar-se la sentència select. És per tant molt més versàtil.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION loc_pobl_2(text) RETURNS void AS $cos$
DECLARE f RECORD;
BEGIN
    SELECT * INTO f FROM POBLACIONS WHERE nom=$1;
    RAISE NOTICE 'Població: %',f.nom;
    RAISE NOTICE 'Latitud: %',f.latitud;
    RAISE NOTICE 'Longitud: %',f.longitud;
END; $cos$
LANGUAGE 'plpgsql';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT loc_pobl_2('Llucena');&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="22"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="23"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="5"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="23"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="4"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:3.%20Declaraci%C3%B3%20de%20variables"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="26">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="4. Instruccions"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="24">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="25">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="24"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Les instruccions que van a continuació encara no les podrem practicar, perquè han de formar part d'alguna funció. Les podrem practicar a partir de la pregunta següent&lt;/p&gt;
&lt;/div&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="25"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="26"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="23"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="26"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="27">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="28">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="27"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;b&gt;Assignació&lt;/b&gt;: es pot fer de dues maneres&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Directa, amb l’operador &lt;b&gt;:=&lt;/b&gt; (a := 10; b := a * 0.5; )&lt;/li&gt;
&lt;li&gt;Assignar el resultat d’una consulta (una única fila) a una variable o variables amb &lt;b&gt;INTO&lt;/b&gt;. INTO pot anar abans o després de les columnes seleccionades:&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT Max(altura) INTO a FROM POBLACIONS;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT INTO a Max(altura) FROM POBLACIONS;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT Max(altura),Min(altura),Avg(altura) INTO a,b,c
    FROM POBLACIONS;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;b&gt;Condicional &lt;/b&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;IF condició
    THEN
        Sentències;
    [ELSE
        sentències;]
END IF;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;També es pot utilitzar &lt;b&gt;ELSIF &lt;/b&gt;que equival a un ELSE seguit de IF. D'aquesta manera només hi haurà un END IF al final. És la cosa més pareguda al CASE.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;IF condició1
    THEN Sentències1;
ELSIF condició2
    THEN Sentències2;
ELSE
    Sentències3;
END IF;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;b&gt;Bucles&lt;/b&gt;: s’aconsegueixen per mig de &lt;b&gt;LOOP ...... END LOOP;&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;b&gt; Bucle incondicional&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;LOOP
    Sentències
END LOOP;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;tal i com està, el bucle és infinit; per eixir &lt;b&gt;EXIT &lt;/b&gt;o &lt;b&gt;EXIT WHEN cond&lt;/b&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;br /&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;b&gt; Bucle FOR&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;FOR variable IN [REVERSE] valor_mín .. valor_màx LOOP
    Sentències
END LOOP;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;La variable comptador no s'ha de declarar i només té validesa dins del bucle.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;br /&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;b&gt; Bucle WHILE&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;WHILE condició LOOP
    Sentències
END LOOP;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;b&gt; Sentències SQL&lt;/b&gt;: es poden executar sense problema totes aquelles sentències que no tornen cap resultat (INSERT, UPDATE, DELETE, CREATE TABLE, ...). La sentència SELECT, que sí que torna un valor s'ha d'utilitzar amb la clàusula INTO (com ja hem vist), o dins de PERFORM (com ara veurem).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;b&gt; Execució d'altres funcions&lt;/b&gt;. En moltes ocasions ens farà falta executar una altra funció. Si aquesta torna un valor la posarem dins d'una sentència (assignació, en una condició, ...). Però i si no torna cap valor? El mateix podríem dir d'una sentència SELECT (encara que la utilitat d'açò és més dubtosa). Ho farem per mig de PERFORM, que executa una sentència, ignorant el possible valor tornat per aquesta.&lt;/p&gt;
&lt;p&gt;Per exemple (recordeu que &lt;b&gt;loc_pobl,&lt;/b&gt; la funció creada en la pregunta anterior, no torna cap valor, sinó que ho trau per pantalla):&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;PERFORM loc_pobl('Aín');&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;PERFORM (SELECT * FROM POBLACIONS);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;b&gt; Execució en forma dinàmica&lt;/b&gt;. Hi haurà ocasions en que la sentència SQL la voldrem construir en temps d'execució, és a dir de forma dinàmica. Això ens ho permet &lt;b&gt;EXECUTE&lt;/b&gt;, que el que fa es passar la cadena de caràcters que va a continuació al motor SQL.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;EXECUTE 'SELECT ' || $2 || ' FROM ' || $1;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;De moment no fa res, perquè el resultat de la sentència es perd, però ja veurem més avant la seua aplicació. Un altre exemple, on esborraríem les files d'una taula on un camp coincideix amb un valor (tot passat com a paràmetres):&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;EXECUTE 'DELETE FROM ' || $1 || ' WHERE ' || $2 || ' = ' || $3;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="28"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="26"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="6"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="26"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="5"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:4.%20Instruccions"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="31">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="5. Funcions"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="29">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="30">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="29"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt; &lt;/p&gt;
&lt;p&gt;En PL/pgSQL no hi ha procediments. Només hi ha funcions, encara que puguem declarar-les per a que no tornen cap valor (&lt;i&gt;&lt;b&gt;void&lt;/b&gt;&lt;/i&gt;).&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;La diferència per tant entre un procediment i una funció és que la segona torna un valor, mentre que el primer no. Però en PL/pgSQL només hi ha funcions.&lt;/p&gt;
&lt;p&gt;La sintaxi general (i en principi per a qualsevol llenguatge) de la instrucció de creació de funcions és la següent:&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;CREATE [OR REPLACE] FUNCTION nom_funció [(llista_paràmetres)] RETURNS tipus_del_valor_tornat AS '&lt;br /&gt;
&lt;blockquote&gt;instruccions&lt;/blockquote&gt;
' LANGUAGE llenguatge;&lt;/div&gt;
&lt;p&gt;on el llenguatge potser un dels definits (SQL, PL/pgSQL, ...).&lt;/p&gt;
&lt;p&gt;El cos de la funció pot anar entre cometes simples, o entre un separador que comence i acabe per &lt;b&gt;$&lt;/b&gt; (per exemple &lt;b&gt;$cos$&lt;/b&gt;) i que ha de ser igual al principi i al final, com veurem en un exemple més avant.&lt;/p&gt;
&lt;p&gt;Concretament, en el cas de PL/pgSQL, podem refinar un poc més la sintaxi&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;CREATE [OR REPLACE] FUNCTION nom_funció [(llista_paràmetres)]&lt;br /&gt;
&lt;blockquote&gt;RETURNS tipus_del_valor_tornat AS '&lt;/blockquote&gt;
[DECLARE&lt;br /&gt;
&lt;blockquote&gt;declaració de variables]&lt;/blockquote&gt;
BEGIN&lt;br /&gt;
&lt;blockquote&gt;instruccions&lt;br /&gt;RETURN expressió&lt;/blockquote&gt;
END;&lt;br /&gt;' LANGUAGE plpgsql;&lt;/div&gt;
&lt;p&gt;Si la funció torna un valor (i per tant l'hem declarada com a que retorna un valor), la instrucció que ens permet retornar el valor és &lt;b&gt;RETURN &lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Per exemple, anem a crear una funció que passe de pessetes a euros. Ho podem fer sobre la Base de Dades &lt;b&gt;geo_999x&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE FUNCTION EUROS(n int4) RETURNS numeric AS '
BEGIN
    RETURN ROUND(n/166.386,2);
END; ' LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT euros(1000);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Els tipus de dades de tornada pot ser qualsevol, fins i tot un creat per l'usuari. I si volem que torne més d'un valor, podríem crear un tipus compost que abarque els valors que volem que torne.&lt;/p&gt;
&lt;p&gt;Tenim la possibilitat de posar noms als paràmetres (en el cas anterior n), o no, i aleshores la manera de fer-los referència és per mig de &lt;b&gt;$1&lt;/b&gt; per al primer paràmetre, &lt;b&gt;$2&lt;/b&gt; per al segon, ... Així la mateixa funció, sense gastar nom de paràmetre quedaria:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION EUROS2(int4) RETURNS numeric AS '
BEGIN
    RETURN ROUND($1/166.386,2);
END; ' LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Anem a veure un altre exemple: una funció que puga convertir una latitud en format text al tipus de dades que ens vam crear en el tema 6, part 3, el tipus &lt;b&gt;lat&lt;/b&gt;. Les instruccions estan en el punt 0 (Nota inicial)&lt;/p&gt;
&lt;p&gt;I ara anem a fer la funció que passa de tipus &lt;strong&gt;Text&lt;/strong&gt; a tipus &lt;strong&gt;lat&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION text_a_lat(text) RETURNS lat as $COS$
DECLARE
    aux lat;
BEGIN
    IF $1 IS NOT NULL THEN
        aux.g := SUBSTR($1,1,STRPOS($1,'º')-1);
        aux.m := SUBSTR($1, STRPOS($1,'º')+1, STRPOS($1,'''') - STRPOS($1,'º')-1);
        aux.s := SUBSTR($1, STRPOS($1,'''')+1, STRPOS($1,'&quot;') - STRPOS($1,'''')-1);
        aux.h := SUBSTR($1,STRPOS($1,'&quot;')+1);
    ELSE aux := (NULL,NULL,NULL,NULL);
    END IF;
    RETURN aux;
END; $COS$
LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Hem posat &lt;b&gt;$COS$&lt;/b&gt; per a delimitar el cos de la funció, per evitar problemes amb les moltes cometes que hi ha. I quan busquem la cometa, doncs en posem 4: la primera i l'última són obligatòries i delimiten la constant alfanumèrica. I al mig en posem 2 més per a marcar la cometa.&lt;/p&gt;
&lt;p&gt;Podem provar a veure si va bé:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT nom,latitud,text_a_lat(latitud),nom_c FROM POBLACIONS;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Si la funció va bé, fins i tot la podríem utilitzar per omplir la taula &lt;b&gt;POBLACIONS3&lt;/b&gt; (està creada en el punt &lt;strong&gt;0. Nota inicial&lt;/strong&gt;), que l'havíem creada amb el tipus &lt;strong&gt;lat&lt;/strong&gt; (ens convindria eliminar primer les possibles files que hi hagen creades).&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;DELETE FROM POBLACIONS3;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;INSERT INTO POBLACIONS3
    SELECT nom,text_a_lat(latitud),nom_c FROM POBLACIONS;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;La funció inversa sembla més fàcil. L'únic problema, en tot cas, és controlar que minuts i segons sempre siguen de dues xifres. I en tot cas llevar espais en blanc que queden pel mig. I haurem d'anar amb compte amb la cometa.&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="30"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="31"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="7"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="31"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="32">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="33">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="32"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;b&gt;Nota&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;En les pràctiques següents en moltes ocasions es diu &quot;traure per pantalla&quot;. I són funcions que no tenen paràmetre ni tornen cap valor. Encara que açò no serà el normal en PostgreSQL, per a practicar pot anar bé. La manera de crear aquestes funcions és com en el següent exemple, en el qual creem una funció que trau per pantalla el número PI:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION traure_pi() RETURNS void as $COS$
begin
    raise notice 'El número PI és: %',PI();
end; $COS$
LANGUAGE 'plpgsql';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En aquesta ocasió hem posat moltes paraules en minúscules, per a demostrar que no importen majúscules i minúscules.&lt;/p&gt;
&lt;p&gt;El resultat, si és que ho fem des de DBeaver, el veurem fent una altra consulta SQL posant&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt; SELECT traure_pi();&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;i el resultat el veuríem en la pestanya &lt;b&gt;Output&lt;/b&gt;, ja que hem provocat traure un missatge.&lt;/p&gt;
&lt;p&gt;Com veieu estem utilitzant la sentència &lt;strong&gt;RAISE NOTICE&lt;/strong&gt;, que la veurem millor en la pregunta 7 d'aquest tema, però que ja podem avançar que el que fa és traure una línia en la pestanya de missatges amb el començament &lt;strong&gt;NOTICE:&lt;/strong&gt;. Posarem entre cometes simples el text que volem mostrar, i per a traure el contingut d'una variable, posarem entre les cometes un &lt;strong&gt;%&lt;/strong&gt;, i al final, separat per coma la variable de la qual volem mostrar el contingut. Podem posar més d'un %, i al final haurem de posar (separades per comes) tantes variables o expressions com % hem posat entre cometes. Ho veurem millor en els següents exemples.&lt;/p&gt;
&lt;p&gt;Un altre exemple, també d'una funció que no torna res, sinó que &quot;trau per pantalla&quot; els números del 1 al 10:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION deu() RETURNS VOID as $COS$
BEGIN
    FOR i IN 1..10 LOOP
        RAISE NOTICE '%',i;
    END LOOP;
END; $COS$
LANGUAGE 'plpgsql';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Quan l'executem:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT deu();&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Ens eixirà aquest resultat en la pestanya de Output:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_1.png&quot; alt=&quot;&quot; width=&quot;349&quot; height=&quot;286&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Una variant seria traure els números del1 al 10 i el seu doble. Observeu com posem 2 vegades &lt;strong&gt;%&lt;/strong&gt;, i després posem 2 coses a mostrar, separades per comes: &lt;strong&gt;i , i*2&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION deu_doble() RETURNS VOID as $COS$
BEGIN
    FOR i IN 1..10 LOOP
        RAISE NOTICE 'Número: %. Doble: %',i,i*2;
    END LOOP;
END; $COS$
LANGUAGE 'plpgsql';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT deu_doble();&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_2.png&quot; alt=&quot;&quot; width=&quot;397&quot; height=&quot;303&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="1495"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="8_1.38"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="34">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="32"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_5_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpA4E03D/T7_5_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="741a02acebbdfe3885a523a95aee6764"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="33"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="1512"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="8_1.39"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="35">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="32"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_5_2.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpA4E03D/T7_5_2.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="7aa7f8acf34f11badb4a01587f741117"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="33"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="33"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="40"></int>
             <string role="key" value="parentNode"></string>
             <reference key="31"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="8"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="31"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="34"></reference>
            <reference key="35"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="6"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:5.%20Funcions"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="38">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercicis"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.genericidevice.GenericIdevice" reference="36">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Exercicis"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="Universitat d'Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="Una activitat pot ser definida com una tasca o conjunt de tasques 
 que l'alumne ha de realitzar. Donar una redacció clara de la tasca i considereu 
 el que pot ajudar o obstaculitzar l'assoliment de la tasca."></unicode>
              <string role="key" value="_tip"></string>
              <unicode value=""></unicode>
              <string role="key" value="class_"></string>
              <unicode value="activity"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="1"></int>
              <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
              <int value="11"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="37">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="24_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="36"></reference>
                 <string role="key" value="_instruc"></string>
                 <unicode value="Descriu les tasques que els alumnes haurien de completar."></unicode>
                 <string role="key" value="_name"></string>
                 <unicode value="Activitat"></unicode>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="buttonCaption"></string>
                 <string value=""></string>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;p&gt;En la Base de Dades &lt;b&gt;geo_grup_9999x&lt;/b&gt;:&lt;br /&gt;&lt;br /&gt;7.1.- Crea una funció anomenada &lt;b&gt;DEU_&lt;/b&gt;&lt;b&gt;Q&lt;/b&gt;, que traga els &lt;strong&gt;números del 1 al 10&lt;/strong&gt; i els seus &lt;strong&gt;quadrats&lt;/strong&gt;. (Utilitza &lt;b&gt;RAISE NOTICE&lt;/b&gt;).&lt;br /&gt;&lt;br /&gt;7.2.- Fes una altra funció, &lt;b&gt;IMP&lt;/b&gt;, que traga per pantalla els números &lt;strong&gt;imparells&lt;/strong&gt; del 1 al 50. (Utilitza &lt;b&gt;RAISE NOTICE&lt;/b&gt;).&lt;br /&gt;&lt;br /&gt;7.3.- Fes una funció anomenada &lt;b&gt;TAULA_MULT&lt;/b&gt;, per a que traga la taula de multiplicar del &lt;strong&gt;paràmetre&lt;/strong&gt; que se li ha de passar. (Utilitza &lt;b&gt;RAISE NOTICE&lt;/b&gt;). Aquest podria ser el seu aspecte, en executar-la:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_e_1.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;466&quot; height=&quot;399&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;br /&gt;7.4.- Fes una funció, anomenada &lt;b&gt;MAX2&lt;/b&gt;, que tinga dos paràmetres &lt;strong&gt;numèrics&lt;/strong&gt; i que &lt;strong&gt;torne el màxim&lt;/strong&gt; entre aquestos dos. (Ara ja &lt;b&gt;no &lt;/b&gt;s'ha d'utilitzar &lt;b&gt;RAISE NOTICE&lt;/b&gt;). Podeu comprovar el seu funcionament fent per exemple &lt;strong&gt;SELECT MAX(5,7);   SELECT MAX(15,7)&lt;/strong&gt;. Sempre ha de mostrar el màxim dels dos.&lt;br /&gt;&lt;br /&gt;7.5.- Utilitza l'anterior per a crear &lt;b&gt;MAX3&lt;/b&gt;. Has d'utilitzar obligatòriament la funció &lt;strong&gt;MAX2&lt;/strong&gt;&lt;br /&gt;&lt;br /&gt;7.6.- (&lt;strong&gt;Voluntari&lt;/strong&gt;) Fes la funció &lt;b&gt;LAT_A_TEXT&lt;/b&gt;, tenint en compte que ha de quedar com en la taula &lt;b&gt;POBLACIONS&lt;/b&gt;. Segurament la dificultat més gran serà aconseguir que apareguen les cometes després dels minuts i dels segons.&lt;/p&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="1499"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="9_24_2.19"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="39">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="36"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_5_e_1.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpA4E03D/T7_5_e_1.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="fd5226397947507dafa0f605614fcbae"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="37"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                   </list>
                   <string role="key" value="idevice"></string>
                   <reference key="37"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="20"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="38"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value="activity"></unicode>
              <string role="key" value="id"></string>
              <unicode value="9"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="parentNode"></string>
              <reference key="38"></reference>
              <string role="key" value="systemResources"></string>
              <list>
               <string value="common.js"></string>
              </list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="39"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="11"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:5.%20Funcions:Exercicis"></string>
           <string role="key" value="parent"></string>
           <reference key="31"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="42">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="6. Utilització de cursors"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="40">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="41">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="40"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;Un cursor és una variable que ens permet desplaçar-nos per les files d’una consulta de SQL.&lt;/p&gt;
&lt;p&gt;Hi ha dos tipus de cursors, els &lt;b&gt;explícits &lt;/b&gt;i els &lt;b&gt;implícits&lt;/b&gt;.&lt;/p&gt;
&lt;p&gt;Els explícits s'han de declarar expressament en la zona de declaracions. Els implícits no, seran únicament una sentència SQL que guarda el resultat en una variable. Porten implícita tota la mecànica dels cursors (declarar, obrir, utilitzar, tancar) que haurem de fer en els explícits.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;CURSORS IMPLÍCITS&lt;/p&gt;
&lt;p&gt;Consistiran en una sentència SQL dins d'un procediment o funció PL/pgSQL. Han de &lt;b&gt;tornar només un valor&lt;/b&gt; (&lt;b&gt;només una fila&lt;/b&gt;), i es guardaran en una variable per mig del &lt;b&gt;INTO &lt;/b&gt;de la sentència SQL. Per exemple, la següent funció tornarà el número de poblacions.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE FUNCTION quantes() RETURNS INTEGER AS '
DECLARE
    N INTEGER;
BEGIN
    SELECT COUNT(*) INTO N FROM POBLACIONS;
    RETURN N;
END;
' LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT quantes();&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Però ara ho fa per l'eixida normal&lt;br /&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;CURSORS EXPLÍCITS&lt;/p&gt;
&lt;p&gt;Aquestos cursors s'han de declarar, bé en la zona de declaracions, bé en el moment d'obrir-los, com veurem més avant. I en la zona d’instruccions, primer haurem d’obrir (&lt;b&gt;OPEN&lt;/b&gt;) el cursor (que és quan es farà la consulta SQL, guardant-se en una zona de memòria i quedant-se situat el cursor en la primera fila). Després ens anirem desplaçant fila a fila per fer un determinat tractament (&lt;b&gt;FETCH&lt;/b&gt;: torna el valor i se situa a la següent fila). Per últim l’haurem de tancar (&lt;b&gt;CLOSE&lt;/b&gt;).&lt;/p&gt;
&lt;p&gt;En la declaració del cursor seguirem la següent sintaxi:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;&lt;i&gt;nom &lt;/i&gt;CURSOR [&lt;i&gt;paràmetres&lt;/i&gt;] {FOR | IS} &lt;i&gt;sentència_select&lt;/i&gt;&lt;/div&gt;
&lt;p&gt;Encara que també tenim la possibilitat de definir-lo únicament com a &lt;strong&gt;refcursor&lt;/strong&gt; (referència a cursor), sense dir quina és la sentència select. Aleshores l'haurem de definir en el moment d'obrir-lo. També tenim la possibilitat de passar-li un paràmetre. Ací tenim alguns exemples de definició de cursors:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;DECLARE&lt;br /&gt;
&lt;blockquote&gt;cur1 refcursor;&lt;br /&gt;cur2 CURSOR FOR SELECT nom,altura FROM POBLACIONS;&lt;br /&gt;cur3 CURSOR(p1 varchar) FOR&lt;br /&gt;
&lt;blockquote&gt;SELECT nom,altura FROM POBLACIONS WHERE nom=p1;&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;La manera d'obrir-lo depèn de la manera com s'havia declarat. Si només s'havia posat &lt;i&gt;&lt;b&gt;refcursor &lt;/b&gt;&lt;/i&gt;s'haurà de col·locar la consulta. Si tenia paràmetres s'hauran de posar entre parèntesi. Aquesta seria una manera d'obrir els 3 cursors definits anteriorment:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;BEGIN&lt;br /&gt;
&lt;blockquote&gt;OPEN cur1 FOR SELECT * FROM POBLACIONS;&lt;br /&gt;OPEN cur2;&lt;br /&gt;OPEN cur3('Vistabella');&lt;br /&gt;....&lt;/blockquote&gt;
END;&lt;/div&gt;
&lt;p&gt;Hi ha una altra manera d'obrir els cursors definits com a &lt;i&gt;&lt;b&gt;refcursor&lt;/b&gt;&lt;/i&gt;, que permet especificar la consulta totalment en temps d'execució. Ací en tenim un exemple:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;s := 'SELECT nom FROM ' || $1;&lt;br /&gt;OPEN cur1 FOR EXECUTE s;&lt;/div&gt;
&lt;p&gt;on la taula consultada ve donada com a paràmetre de la funció.&lt;/p&gt;
&lt;p&gt;Per accedir als distints camps de les successives files del cursor ho farem per mig de la sentència &lt;b&gt;FETCH cur INTO var1 [, var2, ...]&lt;/b&gt; i aleshores tindrem els valors disponibles en les variables var1 (, var2, ...) que estaran prèviament declarades del mateix tipus. Així en l'exemple de dalt, tenim que el cursor &lt;i&gt;&lt;b&gt;cur2 &lt;/b&gt;&lt;/i&gt;està definit en base a una sentència SQL que torna dues columnes (&lt;i&gt;&lt;b&gt;nom &lt;/b&gt;&lt;/i&gt;i &lt;i&gt;&lt;b&gt;altura&lt;/b&gt;&lt;/i&gt;). La sentència hauria de ser&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;FETCH cur2 INTO v_nom, v_altura&lt;/div&gt;
&lt;p&gt;on &lt;b&gt;v_nom&lt;/b&gt; i &lt;b&gt;v_altura&lt;/b&gt; serien respectivament de tipus &lt;b&gt;varchar &lt;/b&gt;i &lt;b&gt;numeric &lt;/b&gt;&lt;/p&gt;
&lt;p&gt;També podríem haver definir una variable de tipus &lt;b&gt;RECORD&lt;/b&gt;. En aquest exemple suposem que la variable &lt;b&gt;f &lt;/b&gt;és de tipus &lt;b&gt;RECORD &lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;FETCH cur2 INTO f&lt;/div&gt;
&lt;p&gt;Després, per a accedir a un camp, posarem &lt;b&gt;f.&lt;i&gt;nom_camp&lt;/i&gt;&lt;/b&gt;.&lt;/p&gt;
&lt;p&gt;Per a tancar el cursor utilitzarem la sentència &lt;b&gt;CLOSE&lt;/b&gt;.&lt;/p&gt;
&lt;p&gt;L'habitual serà recórrer tot el cursor. El següent exemple trau tots els noms de les poblacions d'una comarca introduïda com a paràmetre de la funció, utilitzant un cursor:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE FUNCTION pobl_com(text) RETURNS void AS $cos$
DECLARE
    v_nom VARCHAR;
    cur CURSOR FOR SELECT nom FROM POBLACIONS
                  		WHERE nom_c = $1
                    	ORDER BY nom;
BEGIN
    OPEN cur;
    FETCH cur INTO v_nom;
    WHILE v_nom IS NOT NULL LOOP
        RAISE NOTICE '%',v_nom;
        FETCH cur INTO v_nom;
    END LOOP;
    CLOSE cur;
END; $cos$ 
LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;La manera d'utilitzar aquesta funció serà:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT pobl_com('Plana Alta');&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Per a aquestes ocasions en les quals hem de recórrer totalment un cursor, tenim una variant del &lt;b&gt;FOR &lt;/b&gt;que ens serà molt útil.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;FOR var_fila IN sentència_select LOOP&lt;/div&gt;
&lt;p&gt;on &lt;b&gt;var_fila&lt;/b&gt; és una variable de tipus &lt;b&gt;RECORD&lt;/b&gt;, i que anirà agafant els valors de les diferents files (fixeu-vos que s'ha de declarar, en contra de les variables comptador d'un bucle &lt;b&gt;FOR &lt;/b&gt;normal). Hem d'observar que en el cas del bucle FOR hem de declarar la sentència SELECT en el mateix moment de crear el FOR, és a dir, no podem utilitzar un cursor definit en la zona de declaracions.&lt;/p&gt;
&lt;p&gt;Quan utilitzem el bucle FOR per a recórrer un cursor no caldrà fer l'acció d'obrir, ni de situar-nos al següent, ni de tancar, ja que es fan de forma implícita en el bucle. Reconstruïm l'exemple anterior:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE FUNCTION pobl_com_2(text) RETURNS void AS $cos$
DECLARE
    f RECORD;
BEGIN
    FOR f IN SELECT nom FROM POBLACIONS
                WHERE nom_c = $1
                ORDER BY nom
    LOOP
        RAISE NOTICE '%',f.nom;
    END LOOP;
END;
$cos$ LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Si volguérem construir la sentència SELECT en temps d'execució, posaríem EXECUTE, encara que açò potser siga massa avançat per a aquest curs:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;FOR f IN EXECUTE 'SELECT nom FROM ' || $1 LOOP&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Anem a veure un exemple. Volem calcular la &lt;b&gt;MEDIANA &lt;/b&gt;de l'altura de les poblacions. La mediana es defineix com el valor que està al mig de tots si el número d’elements és imparell (1, 2, &lt;b&gt;3&lt;/b&gt;, 4, 10), i com la mitjana entre els dos valors centrals si el número és parell (1, 2, &lt;b&gt;3&lt;/b&gt;, &lt;b&gt;4&lt;/b&gt;, 10, 20) -&amp;gt; &lt;b&gt;3’5&lt;/b&gt; , tenint en compte sempre que han d'estar ordenats. És suficient amb que entengueu el seu funcionament.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION MEDIANA() RETURNS NUMERIC AS $cos$
DECLARE
    cur CURSOR FOR SELECT altura FROM POBLACIONS
                    ORDER BY altura;
    aux INT2;
    aux1 INT2;
    i INT2;
    n INT2;
    n1 INT2;
BEGIN
    OPEN cur;
    SELECT COUNT(altura) INTO n FROM POBLACIONS;
    IF MOD(n,2) = 0
        THEN n1 := n;
        ELSE n1 := n+1;
    END IF;
    FOR i IN 1..n1/2 LOOP
        FETCH cur INTO aux;
    END LOOP;
    IF MOD(n,2) = 0 THEN
        FETCH cur INTO aux1;
        aux := (aux + aux1) / 2;
    END IF;
    RETURN aux;
END;
$cos$ LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT MEDIANA();&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="41"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="42"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="10"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="42"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="7"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:6.%20Utilitzaci%C3%B3%20de%20cursors"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="45">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercicis"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.genericidevice.GenericIdevice" reference="43">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Exercicis"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
              <string role="key" value="_tip"></string>
              <unicode value=""></unicode>
              <string role="key" value="class_"></string>
              <unicode value="activity"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="1"></int>
              <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
              <int value="11"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="44">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="41_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="43"></reference>
                 <string role="key" value="_instruc"></string>
                 <unicode value="Describe the tasks the learners should complete."></unicode>
                 <string role="key" value="_name"></string>
                 <unicode value="Activity"></unicode>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="buttonCaption"></string>
                 <string value=""></string>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;p&gt;7.7.- Fes una funció anomenada &lt;strong&gt;POBLACIONS_ALTES&lt;/strong&gt; que accepte 2 paràmetres, el primer de tipus text que serà una comarca, i el segon numèric que serà una altura. Ha de traure les poblacions de la comarca del primer paràmetre que són més altes que el segon paràmetre. Mostrarem el nom de la població i l'altura. Aquest podria ser el resultat en executar-se:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_6_Ex7.png&quot; alt=&quot;&quot; width=&quot;456&quot; height=&quot;157&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;7.8.- Fes una funció anomenada &lt;strong&gt;COMARQUES_NUMPOBLES&lt;/strong&gt; sense paràmetres que traga per pantalla les comarques ordenades alfabèticament amb el número de pobles de cadascuna&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_6_Ex8.png&quot; alt=&quot;&quot; width=&quot;438&quot; height=&quot;226&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;7.9.- Fes una funció anomenada &lt;strong&gt;COMARQUES_NUMPOBLES_NUMINSTITUTS&lt;/strong&gt; sense paràmetres que traga per pantalla les comarques ordenades alfabèticament amb el número de pobles de cadascuna i el número d'instituts. En la consulta tindrem dos dificultats:&lt;/p&gt;
&lt;ul&gt;
&lt;li style=&quot;text-align: justify;&quot;&gt;Hem d'agafar totes les poblacions, fins i tot les que no tenen institut&lt;/li&gt;
&lt;li style=&quot;text-align: justify;&quot;&gt;Com que hem d'accedir als instituts, per a comptar els pobles haurem de comptar els pobles &lt;strong&gt;distints&lt;/strong&gt;, i així si un poble té més d'un institut, no comptar-lo més d'una vegada&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_6_Ex9.png&quot; alt=&quot;&quot; width=&quot;604&quot; height=&quot;226&quot; /&gt;&lt;/p&gt;
&lt;p&gt;7.10.- Fes una funció anomenada &lt;strong&gt;NUM_HABITANTS_COMARCA&lt;/strong&gt; que accepte un paràmetre de tipus text, i torne el número d'habitants d'eixa comarca&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_6_Ex10.png&quot; alt=&quot;&quot; width=&quot;399&quot; height=&quot;195&quot; /&gt;&lt;/p&gt;
&lt;p&gt;7.11.- Fer la funció &lt;strong&gt;COMARQUES_NUMHABITANTS&lt;/strong&gt; sense paràmetres per a traure per pantalla totes les comarques i el número d'habitants. En la consulta has d'utilitzar obligatòriament la funció anterior&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_6_Ex11.png&quot; alt=&quot;&quot; width=&quot;497&quot; height=&quot;224&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="1496"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="25_41_2.41"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="46">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="43"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_6_Ex9.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpA4E03D/T7_6_Ex9.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="1ccf835c0596375d5ff980ea96699ad7"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="44"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="1504"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="25_41_2.42"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="47">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="43"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_6_Ex8.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpA4E03D/T7_6_Ex8.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="52457d7a1205a53b6c464a83417c895a"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="44"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="1509"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="25_41_2.43"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="48">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="43"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_6_Ex10.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpA4E03D/T7_6_Ex10.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="1549fe47a6cec202e830265c59ef41d6"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="44"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="1513"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="25_41_2.44"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="49">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="43"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_6_Ex7.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpA4E03D/T7_6_Ex7.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="d65546067924b68b4b8b7c24ba6f7f28"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="44"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="1515"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="25_41_2.45"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="50">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="43"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_6_Ex11.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpA4E03D/T7_6_Ex11.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="1fd86bca736c6703664424e6a23a2ae9"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="44"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                   </list>
                   <string role="key" value="idevice"></string>
                   <reference key="44"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="46"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="45"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value="activity"></unicode>
              <string role="key" value="id"></string>
              <unicode value="25"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <unicode value="activity"></unicode>
              <string role="key" value="parentNode"></string>
              <reference key="45"></reference>
              <string role="key" value="systemResources"></string>
              <list>
               <string value="common.js"></string>
              </list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="46"></reference>
               <reference key="47"></reference>
               <reference key="48"></reference>
               <reference key="49"></reference>
               <reference key="50"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="17"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:6.%20Utilitzaci%C3%B3%20de%20cursors:Exercicis"></string>
           <string role="key" value="parent"></string>
           <reference key="42"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="53">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="7. Missatges i excepcions"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="51">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="52">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="51"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Al llarg dels exemples i exercicis que hem fet fins ara, ens ha vingut molt bé traure algun missatge, per veure com anava l'execució de les funcions. El que feem era provocar un aconteixement, en aquest cas una notícia, un avís. Podem utilitzar la mateixa sentència per a provocar també un error, amb el conseqüent avortament de l'execució de la funció. Anem a veure-ho amb més detall.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;RAISE nivell 'format' [,variable1[,...]];&lt;/div&gt;
&lt;p&gt;En nivell posarem un dels següents: &lt;b&gt;DEBUG&lt;/b&gt;, &lt;b&gt;LOG&lt;/b&gt;, &lt;b&gt;INFO&lt;/b&gt;, &lt;b&gt;NOTICE&lt;/b&gt;, &lt;b&gt;WARNING &lt;/b&gt;o &lt;b&gt;EXCEPTION&lt;/b&gt;, on la major part només donen un avís (amb l'encapçalament corresponent). Però &lt;b&gt;EXCEPTION &lt;/b&gt;a més de traure l'avís avorta l'execució.&lt;/p&gt;
&lt;p&gt;En format posarem una cadena amb el comentari que vulguem. Podrem posar &lt;b&gt;%&lt;/b&gt; les vegades que vulguem, i se substituiran pel contingut de les variables que tinguem a continuació.&lt;/p&gt;
&lt;p&gt;Així, per exemple, creem una funció de salutació:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION SALUTACIO() RETURNS VOID as $COS$
DECLARE
    s1 text := 'Joanet';
    s2 date := CURRENT_DATE;
BEGIN
    RAISE NOTICE 'Hola';
    RAISE NOTICE 'Hola, %. Avui és %',s1,s2;
    RAISE NOTICE 'Què tal?';
END; $COS$
LANGUAGE 'plpgsql';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Si ara fem:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT SALUTACIO();&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Provocarà la següent eixida (en la pestanya &lt;strong&gt;Output&lt;/strong&gt;):&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;Hola, Joanet. Avui es 2022-02-14&lt;br /&gt;Què tal?&lt;/div&gt;
&lt;p&gt;En canvi si la canviem el primer RAISE NOTICE per un &lt;strong&gt;RAISE EXCEPTION&lt;/strong&gt;, i posem un altre RAISE NOTICE davant:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION SALUTACIO() RETURNS VOID as $COS$
DECLARE
    s1 text := 'Joanet';
    s2 date := CURRENT_DATE;
BEGIN
    RAISE NOTICE 'Hola';
    RAISE EXCEPTION 'Hola, %. Avui és %',s1,s2;
    RAISE NOTICE 'Què tal?';
END;
$COS$ LANGUAGE 'plpgsql';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Només trauria el primer Hola, i després donaria un error amb el missatge que li hem posat:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_3.png&quot; alt=&quot;&quot; width=&quot;580&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;
&lt;p&gt;I no trauria això de &lt;strong&gt;Què tal?&lt;/strong&gt;, perquè ja s'ha avortat la funció. És a dir, hem provocat nosaltres l'error&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="1518"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="11_1.7"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="54">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="51"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_5_3.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpA4E03D/T7_5_3.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="0cd175d06fd2034c6c3010ce6cd00c42"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="52"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="52"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="8"></int>
             <string role="key" value="parentNode"></string>
             <reference key="53"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="11"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="53"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="54"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="8"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:7.%20Missatges%20i%20excepcions"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="57">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="8. Triggers"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="55">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="56">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="55"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;Un &lt;b&gt;TRIGGER &lt;/b&gt;o &lt;b&gt;disparador &lt;/b&gt;és un procediment que se dispara quan s’acompleix una determinada condició que afecta a la Base de Dades: quan s’actualitza una o més d’una fila d’una determinada taula. En el moment de crear el trigger especificarem una funció que s'executarà quan es produesca l'event. Aquesta funció pot estar escrita en qualsevol llenguatge de programació instal·lat, i ha de tornar un valor especial: &lt;i&gt;&lt;b&gt;trigger&lt;/b&gt;&lt;/i&gt;. Juguem per tant a dues bandes. Primer amb la funció que s'executarà, i quan aquesta estiga creada, el trigger pròpiament dit.&lt;/p&gt;
&lt;p&gt;La sintaxi de creació del &lt;i&gt;trigger &lt;/i&gt;és:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;CREATE TRIGGER nom_trig &lt;br /&gt;
&lt;blockquote&gt;{BEFORE | AFTER} {INSERT | DELETE | UPDATE} [OR {INSERT | DELETE |UPDATE} ...]&lt;br /&gt;ON nom_taula&lt;br /&gt;[FOR EACH {ROW | STATEMENT}]&lt;br /&gt;EXECUTE PROCEDURE nom_funció ([paràmetres]);&lt;/blockquote&gt;
&lt;/div&gt;
&lt;p&gt;Lamentablement no tenim l’opció &lt;b&gt;OR REPLACE&lt;/b&gt;, que ens permetria no haver d’esborrar el &lt;i&gt;trigger &lt;/i&gt;en cas de voler refer-lo (cosa prou normal). Per tant, en el cas tan habitual de voler refer un &lt;i&gt;trigger&lt;/i&gt;, primer l'haurem d'esborrar (&lt;b&gt;DROP TRIGGER&lt;/b&gt;) i després tornar a fer-lo, &lt;strong&gt;encara que si és una modificació en la funció no cal tocar el&lt;/strong&gt; &lt;i&gt;trigger&lt;/i&gt;.&lt;/p&gt;
&lt;p&gt;&lt;b&gt; BEFORE o AFTER&lt;/b&gt; indiquen quan s’ha d’activar el &lt;i&gt;trigger&lt;/i&gt;: abans de produir-se l’acció d’inserir, esborrar o modificar, o després.&lt;/p&gt;
&lt;p&gt;&lt;b&gt;INSERT&lt;/b&gt;, &lt;b&gt;DELETE &lt;/b&gt;o &lt;b&gt;UPDATE &lt;/b&gt;indiquen quina acció d’actualització de la taula provoca (o pot provocar) el &lt;i&gt;trigger&lt;/i&gt;.&lt;/p&gt;
&lt;p&gt;Una actualització pot afectar més d’una fila. Aleshores ens plantegem si s’ha de disparar el &lt;i&gt;trigger &lt;/i&gt;per a cada actualització de cada fila, o si només una vegada (abans o després d’actualitzar). Ho podrem especificar per mig de &lt;b&gt;FOR EACH ROW&lt;/b&gt; o &lt;b&gt;FOR EACH STATEMENT&lt;/b&gt;. L'opció per defecte és la segona.&lt;/p&gt;
&lt;p&gt;Suposem que volem activar un disparador sempre abans d’inserir sobre la taula &lt;b&gt;T1&lt;/b&gt;, per a cada fila, per si la introducció no fóra correcta:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;CREATE TRIGGER trigger1 BEFORE INSERT ON T1 FOR EACH ROW&lt;br /&gt;
&lt;blockquote&gt;EXECUTE PROCEDURE ...;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;p&gt;I ara que volem activar un altre després d’esborrar un conjunt de files (per exemple per a actualitzar una altra taula):&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;CREATE TRIGGER trigger2 AFTER DELETE ON T1 FOR EACH STATEMENT&lt;br /&gt;
&lt;blockquote&gt;EXECUTE PROCEDURE ...;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;p&gt;Anem a parlar ara de la funció que es crida quan es dispara el &lt;i&gt;trigger&lt;/i&gt;. És una funció especial, escrita en qualsevol llenguatge definit, que com hem comentat abans ha de tornar obligatòriament un valor &lt;b&gt;TRIGGER&lt;/b&gt;. De fet, amb la utilitat PgAdmin existeix l'objecte &lt;b&gt;TRIGGER FUNCTION&lt;/b&gt; diferenciat de les funcions normals. Aquesta funció pot tenir paràmetres, i òbviament hauran de coincidir aquestos en la definició de la funció i en la definició del &lt;i&gt;trigger&lt;/i&gt;.&lt;/p&gt;
&lt;p&gt;Quan s'arriba a la funció, que nosaltres sempre la definirem en PL/pgSQL, s'han definit unes quantes variables especials. Anem a comentar-les:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt;NEW&lt;/b&gt;: de tipus RECORD. Conté la fila que va a inserir-se o la nova informació, si va a actualitzar-se&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt;OLD&lt;/b&gt;: de tipus RECORD. Conté la fila que va a esborrar-se o la informació vella, si va a actualitzar-se.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt; TG_NAME&lt;/b&gt;: de tipus NAME. Conté el nom del trigger que s'ha disparat i ha cridat aquesta funció (podria ser que més d'un trigger apunte a una funció, però nosaltres no ho contemplarem)&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt; TG_WHEN&lt;/b&gt;: de tipus TEXT. Indica quan actua el trigger, BEFORE o AFTER.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt; TG_LEVEL&lt;/b&gt;: de tipus TEXT. Indica de quina manera actua, ROW o STATEMENT.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt; TG_OP&lt;/b&gt;: de tipus TEXT. Indica quin event ha provocat el trigger: INSERT, UPDATE o DELETE&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt; TG_RELID&lt;/b&gt;: de tipus OID. Conté l'identificador de la taula que ha provocat el trigger (podria ser més d'una).&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt; TG_RELNAME&lt;/b&gt;: de tipus TEXT. Conté el nom de la taula que ha provocat el trigger&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt; TG_NARGS&lt;/b&gt;: de tipus INTEGER. Indica el nombre de paràmetres que se li passen.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt; TG_ARGV[ ]&lt;/b&gt;: de tipus VECTOR de TEXT. Vector que conté els paràmetres.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; Aquesta és una relació de variables prou extensiva. En la pràctica nosaltres només utilitzarem &lt;strong&gt;NEW&lt;/strong&gt;, &lt;strong&gt;OLD&lt;/strong&gt; i en tot cas &lt;strong&gt;TG_OP&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Una funció de trigger ha de tornar o bé null, o bé un RECORD amb la mateixa estructura que la fila de la taula.&lt;/p&gt;
&lt;p&gt;Si un trigger de nivell de fila (&lt;i&gt;for each row&lt;/i&gt;) torna un valor nul, no s'efectuaran més operacions (si és un delete, que esborra més d'una fila, si la funció torna nul ja no s'intentaran esborrar més files). En canvi si torna una cosa distinta de nul, aleshores es procedirà a l'actualització amb aquest valor. Així, per curar en salut, podem fer que l'última línia de la funció de trigger siga &lt;b&gt;RETURN NEW;&lt;/b&gt; Açò pot ser molt útil, ja que si és una inserció o actualització podríem fins i tot modificar la fila NEW per a que agafe els valors que nosaltres volem (per exemple: &lt;b&gt;NEW.sou := NEW.sou + 500&lt;/b&gt; si estiguérem actualitzant el sou d'un empleat).&lt;/p&gt;
&lt;p&gt;Els valors tornats per una funció trigger de nivell de &lt;i&gt;&lt;b&gt;statement &lt;/b&gt;&lt;/i&gt;són sempre ignorats, igual que un AFTER de nivell de fila (ja és massa tard per actuar), i per tant millor posar que tornen nul.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Anem a veure un exemple, per impedir que es modifique el nombre d'habitants d'una localitat en més de 50000 persones (augmentant o disminuint). Només té sentit el control quan es modifique la columna &lt;b&gt;poblacio&lt;/b&gt;. No té sentit ni en inserir ni en esborrar una fila. I ens convé abans d’actualitzar, per poder impedir-ho.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE FUNCTION val_50000() RETURNS TRIGGER AS $cos$
BEGIN
    IF abs(NEW.poblacio - OLD.poblacio) &amp;gt; 50000 THEN
        RAISE EXCEPTION 'Massa diferència. No pot ser!!';
    END IF;
    RETURN NEW;
END; $cos$ 
LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE TRIGGER tr_val_50000 BEFORE UPDATE ON POBLACIONS
    FOR EACH ROW
    EXECUTE PROCEDURE val_50000();&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Podríem comprovar el funcionament del trigger actualitzant alguna fila de la taula POBLACIONS:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;UPDATE POBLACIONS
    SET poblacio = 1000
    WHERE nom='Castelló de la Plana';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Com veieu estem intentant actualitzar la població de Castelló de la Plana a 1.000 habitants. Com que la població actual és de 173.841, hi haurà una diferència de més de 50.000 habitants, i per tant el trigger impedirà l'actualització:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_8_1.png&quot; alt=&quot;&quot; width=&quot;773&quot; height=&quot;268&quot; /&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="1508"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="12_1.19"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="58">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="55"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_8_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpA4E03D/T7_8_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="390de53685b490f4f77c71375d318942"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="56"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="56"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="20"></int>
             <string role="key" value="parentNode"></string>
             <reference key="57"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="12"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="57"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="58"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="59">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="60">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="59"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;b&gt;Nota&lt;/b&gt;&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;En DBeaver veurem els triggers en la taula a la qual afecten.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_8_2.png&quot; alt=&quot;&quot; width=&quot;1207&quot; height=&quot;716&quot; /&gt;&lt;/p&gt;
&lt;/div&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="1494"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="15_1.27"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="61">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="59"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_8_2.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpA4E03D/T7_8_2.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="6277100b987160cb673aae7bf2ad492c"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="60"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="60"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="28"></int>
             <string role="key" value="parentNode"></string>
             <reference key="57"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="15"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="57"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="61"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="62">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="63">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="62"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt; &lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Mirem un altre exemple: un trigger que actualitza automàticament el nombre d'instituts de la taula &lt;b&gt;PROVINCIES &lt;/b&gt;(teniu la sentència de creació en la pregunta 0 d'aquest tema) quan s'insereix o s'esborra un institut. Primer s'haurà de mirar la província de l'institut que s'està introduint o esborrant, i després s'incrementa o decrementa el nombre d'instituts de la província:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION act_inst() RETURNS TRIGGER AS $cos$
DECLARE aux text;
BEGIN
    IF TG_OP='INSERT'
    THEN
        SELECT provincia INTO aux FROM POBLACIONS,COMARQUES
            WHERE POBLACIONS.nom_c=COMARQUES.nom_c AND
                POBLACIONS.cod_m = NEW.cod_m;
        UPDATE PROVINCIES
            SET instituts = instituts + 1
            WHERE provincia = aux;
    ELSE
        SELECT provincia INTO aux FROM POBLACIONS,COMARQUES
            WHERE POBLACIONS.nom_c=COMARQUES.nom_c AND
                POBLACIONS.cod_m = OLD.cod_m;
        UPDATE PROVINCIES
            SET instituts = instituts - 1
            WHERE provincia = aux;
    END IF;
    RETURN NEW;
END; $cos$ 
LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE TRIGGER tr_act_inst AFTER INSERT OR DELETE ON INSTITUTS
    FOR EACH ROW
    EXECUTE PROCEDURE act_inst();&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Podrem comprovar-ho, per exemple, introduint un nou registre. Abans de l'actualització, el contingut de la taula PROVINCIES és:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_8_3.png&quot; style=&quot;border: 1px solid black; display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;345&quot; height=&quot;114&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Inserim ara el nou institut, corresponent a Castelló (el codi del municipi és 12040)&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;INSERT INTO INSTITUTS VALUES
    ('12004299','IES MARJALERIA','CAMÍ LA PLANA','S/N',12003,12040);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El contingut de la taula PROVINCIES és ara:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_8_4.png&quot; style=&quot;border: 1px solid black; display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;344&quot; height=&quot;117&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Un últim exemple per a veure el de &lt;b&gt;FOR EACH STATEMENT&lt;/b&gt;. Intentarem fer un trigger per a que actualitze la població de les províncies. Ara anem a plantejar-lo de manera que calcule una altra vegada el total de les poblacions. Per tant, segurament és millor calcular-ho quantes menys vegades millor; és a dir, si es fan unes quantes actualitzacions de les poblacions, doncs calcular al final de totes elles (i no després de cadascuna).&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION act_pobl() RETURNS TRIGGER AS $cos$
BEGIN
	UPDATE PROVINCIES
	SET habitants = (SELECT SUM(poblacio)
    					FROM COMARQUES,POBLACIONS
    					WHERE COMARQUES.nom_c=POBLACIONS.nom_c and
    						provincia=PROVINCIES.provincia);
	RETURN NEW;
END; $cos$
LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE TRIGGER tr_act_pobl AFTER INSERT OR DELETE OR UPDATE
	ON POBLACIONS FOR EACH STATEMENT
	EXECUTE PROCEDURE act_pobl();&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per a poder comprovar el resultat del trigger anem a fer una operació d'actualització. Per exemple anem a incrementar cada població de la comarca de l'Alcalatén en 10.000 habitants (recordeu que ja tenim un trigger que impedeix augmentar en més de 50.000).&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;UPDATE POBLACIONS
    SET poblacio = poblacio + 10000
    WHERE nom_c = 'Alcalatén';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Com que la comarca té 9 pobles, la població de la província de Castelló haurà augmentat en 90.000 habitants:&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;img src=&quot;resources/T7_8_5.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;345&quot; height=&quot;115&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;No oblidem executar l'operació de restar 10.000 habitants als pobles de la comarca de l'Alcalatén, i llevar l'institut de la Marjaleria, per deixar les coses com estaven (encara que només són dades de prova molt desactualitzades).&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;UPDATE POBLACIONS
    SET poblacio = poblacio - 10000
    WHERE nom_c = 'Alcalatén';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;DELETE FROM INSTITUTS
    WHERE codi = '12004299';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;br /&gt;Per esborrar un trigger, utilitzarem la instrucció &lt;b&gt;DROP TRIGGER&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;codi&quot; style=&quot;text-align: justify;&quot;&gt;DROP TRIGGER nom_trigger ON nom_taula;&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;La modificació d'un trigger (&lt;b&gt;ALTER TRIGGER)&lt;/b&gt; només permet canviar el nom d'aquest trigger.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Pot ser molt útil en ocasions desactivar un &lt;i&gt;trigger&lt;/i&gt;, de manera que no tinga efecte durant una temporada, i tornar a activar-lo més avant. Està clar que sempre podríem esborrar-lo i tornar a crear-lo quan faça falta, però serà més còmoda la desactivació. Aquesta operació es fa en l'&lt;b&gt;ALTER TABLE&lt;/b&gt; de la taula a la qual implica el &lt;i&gt;trigger&lt;/i&gt;.&lt;/p&gt;
&lt;div class=&quot;codi&quot; style=&quot;text-align: justify;&quot;&gt;ALTER TABLE nom_taula [ENABLE | DISABLE] TRIGGER [nom_trigger | ALL | USER ];&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Com es pot comprovar, la sentència permet activar o desactivar un &lt;i&gt;trigger &lt;/i&gt;en concret, o tots els &lt;i&gt;triggers &lt;/i&gt;(caldrà tenir privilegis de superusuari, ja que açò inclouria els &lt;i&gt;triggers &lt;/i&gt;implicits que fan acomplir les restriccions d'integritat, i això només ho podria fer un superusuari), o els &lt;i&gt;triggers &lt;/i&gt;d'usuari, que són els que no són per implementar les claus externes.&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="1498"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="13_1.48"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="64">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="62"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_8_4.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpA4E03D/T7_8_4.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="b8d338428c94b42ce40cf1de91dbcd4a"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="63"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="1502"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="13_1.49"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="65">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="62"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_8_3.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpA4E03D/T7_8_3.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="24583d90862d2e1b37fb67e4f05f6ba8"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="63"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="1511"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="13_1.50"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="66">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="62"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_8_5.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpA4E03D/T7_8_5.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="ecfba965430044fb81ebd8ea6cd36bb9"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="63"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="63"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="51"></int>
             <string role="key" value="parentNode"></string>
             <reference key="57"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="13"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="57"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="64"></reference>
            <reference key="65"></reference>
            <reference key="66"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="9"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:8.%20Triggers"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="69">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercicis"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.genericidevice.GenericIdevice" reference="67">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Exercicis"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="Universitat d'Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="Una activitat pot ser definida com una tasca o conjunt de tasques 
 que l'alumne ha de realitzar. Donar una redacció clara de la tasca i considereu 
 el que pot ajudar o obstaculitzar l'assoliment de la tasca."></unicode>
              <string role="key" value="_tip"></string>
              <unicode value=""></unicode>
              <string role="key" value="class_"></string>
              <unicode value="activity"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="1"></int>
              <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
              <int value="11"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="68">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="29_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="67"></reference>
                 <string role="key" value="_instruc"></string>
                 <unicode value="Descriu les tasques que els alumnes haurien de completar."></unicode>
                 <string role="key" value="_name"></string>
                 <unicode value="Activitat"></unicode>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="buttonCaption"></string>
                 <string value=""></string>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;p&gt;En la Base de Dades &lt;b&gt;geo_grup_9999x&lt;/b&gt;:&lt;br /&gt;&lt;br /&gt;7.12.- Crear un trigger anomenat &lt;b&gt;TR_ALT_POS&lt;/b&gt; que controle que l'altura d'una nova població siga estrictament positiva. La funció en la qual es basa es pot anomenar &lt;b&gt;ALT_POS&lt;/b&gt;. &lt;br /&gt;&lt;br /&gt;7.13.- Modificar l'anterior per a que ho controle també quan es tracta d'una modificació.&lt;/p&gt;
&lt;p&gt;7.14.- Crear un trigger anomenat &lt;strong&gt;TR_EXT_0_1000&lt;/strong&gt; que controle que l'extensió d'un municipi (població) estiga obligatòriament entre 0 i 1000, i a de ser sempre, tant si s'insereix una nova població com si es modifica. Però en aquesta ocasió, en compte de traure un error, el que farem serà modificar aquest valor: si és major que 1000, li donarem el valor 1000, i si és negatiu li posarem 0. Ho aconseguirem modificant NEW.extensio, i com la funció del trigger torna sempre NEW, doncs agafarà el nou valor. Anomeneu a la funció &lt;strong&gt;EXT_0_1000&lt;/strong&gt;. &lt;/p&gt;
&lt;p&gt;7.15.- &lt;strong&gt;VOLUNTARI&lt;/strong&gt;. En la taula POBLACIONS3 tenim controlat que la latitud introduïda siga correcta per mig del tipus lat, però no en la taula POBLACIONS, on és de tipus VARCHAR(50) i per tant es podria introduir una latitud incorrecta molt fàcilment. Crea un trigger que controle que quan s'introdueix o es modifica la &lt;strong&gt;latitud&lt;/strong&gt; de &lt;strong&gt;POBLACIONS&lt;/strong&gt; siga correcta. Per a això&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Els caràcters 1 i 2 han de ser els &lt;strong&gt;graus&lt;/strong&gt;, que han d'estar entre 00 i 90&lt;/li&gt;
&lt;li&gt;El caràcter 3 ha de ser &lt;strong&gt;º&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Els caràcters 4 i 5 formen els &lt;strong&gt;minuts&lt;/strong&gt;, i han d'estar entre 00 i 59&lt;/li&gt;
&lt;li&gt;El caràcter 6 ha de ser&lt;strong&gt; '&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Els caràcters 7 i 8 formen els &lt;strong&gt;segons&lt;/strong&gt;, i han d'estar entre 00 i 59&lt;/li&gt;
&lt;li&gt;El caràcter 9 ha de ser &lt;strong&gt;&quot;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;El caràcter 10 ha de ser &lt;strong&gt;N&lt;/strong&gt; o &lt;strong&gt;S&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Si no s'acompleix alguna de les restriccions anteriors, ha d'eixir un error dient que la latitud ha d'estar entre 00º00'00&quot;N i 90º00'00&quot;N , o entre 00º00'00&quot;S i 90º00'00&quot;S&lt;br /&gt; &lt;/li&gt;
&lt;/ul&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="68"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="69"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value="activity"></unicode>
              <string role="key" value="id"></string>
              <unicode value="14"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="parentNode"></string>
              <reference key="69"></reference>
              <string role="key" value="systemResources"></string>
              <list>
               <string value="common.js"></string>
              </list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="12"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:8.%20Triggers:Exercicis"></string>
           <string role="key" value="parent"></string>
           <reference key="57"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="72">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="9. Creació d'altres objectes basats en funcions"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="70">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="71">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="70"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;Ara que ja sabem crear funcions, i ho hem practicat fins i tot per a crear triggers, podríem plantejar-nos crear altres objectes, com operadors, operadors de classe, funcions d'agregat, ..., per als quals hem d'utilitzar funcions. Així és com veurem l'extensibilitat de PostgreSQL, com és de versàtil i ens podem crear objectes a la nostra mida.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt; &lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;b&gt;Nota&lt;/b&gt;&lt;/span&gt;&lt;br /&gt;En pgAdmin 1.18.1 o qualsevol altra versió, no es visualitzen per defecte tots els tipus d'objectes de la Base de Dades. Només hem d'anar al menú &lt;i&gt;&lt;b&gt;Fitxer -&amp;gt; Opcions&lt;/b&gt;&lt;/i&gt; i en la pestanya &lt;b&gt;Visualitza &lt;/b&gt;(&lt;b&gt;&lt;i&gt;Browser&lt;/i&gt;&lt;/b&gt;) triar els objectes que volem.&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="71"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="72"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="16"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="72"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="10"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:9.%20Creaci%C3%B3%20d%27altres%20objectes%20basats%20en%20funcions"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="75">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="9.1 Operadors"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="73">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="74">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="73"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;Per a definir un nou operador especificarem el símbol que utilitzarem, el o els operands i la funció que l'implementa.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;La sintaxi és:&lt;/p&gt;
&lt;div class=&quot;codi&quot; style=&quot;text-align: justify;&quot;&gt;CREATE OPERATOR name (&lt;br /&gt;
&lt;blockquote&gt;PROCEDURE = funcname&lt;br /&gt;[, LEFTARG = lefttype ] [, RIGHTARG = righttype ]&lt;br /&gt;[, COMMUTATOR = com_op ] [, NEGATOR = neg_op ]&lt;br /&gt;...&lt;/blockquote&gt;
)&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Hi ha més opcions, que per a la utilitat d'aquest curs obviarem.&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;En el nom de l'operador posarem un o més d'un caràcters de la següent llista:&lt;/li&gt;
&lt;/ul&gt;
&lt;div align=&quot;center&quot; style=&quot;text-align: justify;&quot;&gt;&lt;b&gt; + - * / &amp;lt; &amp;gt; = ~ ! @ # % ^ &amp;amp; | ` ?&lt;/b&gt;&lt;/div&gt;
&lt;p style=&quot;margin-left: 60px; text-align: justify;&quot;&gt;Hi ha algunes limitacions, que podem veure en la documentació.&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;Sempre hem de posar la funció que implementa l'operador.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;Si l'operador és d'un únic operand, l'haurem d'especificar (el de la dreta o de l'esquerra, el que preferim). Si és de dos operands s'hauren d'especificar els dos.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;&lt;b&gt;COMMUTATOR &lt;/b&gt;indica un altre operador que funciona igual canviant l'ordre dels paràmetres (en numèrics el commutador de &lt;b&gt;&amp;lt;&lt;/b&gt; és &lt;b&gt;&amp;gt;&lt;/b&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;&lt;b&gt;NEGATOR &lt;/b&gt;indica un altre operador equivalent a negar aquest (en numèrics el negador de &lt;b&gt;&amp;lt;&lt;/b&gt; és &lt;b&gt;&amp;gt;=&lt;/b&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per exemple anem a crear l'operador &lt;b&gt;MÀXIM &lt;/b&gt;(&lt;b&gt;/|&lt;/b&gt;) que calcula el màxim entre dos números. Utilitzarem la funció &lt;b&gt;MAX2 &lt;/b&gt;que ja tenim creada (és l'exercici 7.4)&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OPERATOR /| (
	PROCEDURE = MAX2, LEFTARG = numeric, RIGHTARG = numeric);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Podem comprovar el seu funcionament amb la sentència:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT 23 /| 15;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Recordem que els operadors estan definits per a determinats operands. Així, per exemple, la següent sentència no funcionarà perquè no tenim definit l'operador per a operands de text:&lt;/p&gt;
&lt;div class=&quot;codi&quot; style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;SELECT 'Alfa' /| 'Beta';&lt;/span&gt;&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt; &lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Tampoc tenim definits els operands de comparació per al tipus &lt;b&gt;lat&lt;/b&gt;, que havíem creat. I per tant coses com aquesta no funcionen:&lt;/p&gt;
&lt;p class=&quot;codiSQL&quot; style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;SELECT * FROM POBLACIONS3 &lt;br /&gt;WHERE latitud &amp;gt; '(N,40,0,0)';&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I si li posem el tipus del qual es tracta:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT * FROM POBLACIONS3
	WHERE latitud &amp;gt; '(N,40,0,0)'::lat
	ORDER BY nom;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;potser no funcionen bé. Encara que sembla que va bé la cosa:&lt;/p&gt;
&lt;p&gt;&lt;img style=&quot;border: 1px solid black; display: block; margin-left: auto; margin-right: auto;&quot; src=&quot;resources/T7_9_1_1.png&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;el que ha fet en realitat és una comparació caràcter a caràcter&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per a demostrar que no funciona bé inserim una ciutat que estiga a l'hemisferi sud: Rio de Janeiro (ja havíem quedat que no importava si es deteriorava la Base de Dades).&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;INSERT INTO POBLACIONS3
	VALUES('Rio de Janeiro','(S,22,56,58)'::lat, NULL);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I si tornem a executar la sentència d'abans:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT * FROM POBLACIONS3
	WHERE latitud &amp;gt; '(N,40,0,0)'::lat
	ORDER BY nom;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;ara ja es veu que va malament:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_9_1_2.png&quot; style=&quot;border: 1px solid black; display: block; margin-left: auto; margin-right: auto;&quot; height=&quot;384&quot; width=&quot;491&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Anem a intentar crear tots els operadors de comparació del tipus &lt;b&gt;lat &lt;/b&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Començarem per les funcions. No considerem quan un operand és nul, per fer-los més senzills. La d'igualtat és fàcil, ja que dos latituds són iguals si ho són tots els membres. Observeu que no hi ha problema per fer la comparació &lt;b&gt;$1.h=$2.h&lt;/b&gt;, ja que són del domini &lt;b&gt;hemi_lat&lt;/b&gt; basat en el tipus caràcter:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE FUNCTION igual (lat,lat) RETURNS bool AS '
BEGIN
	RETURN $1.h=$2.h AND $1.g=$2.g AND $1.m=$2.m AND $1.s=$2.s;
END; '
LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I ara l'operador:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OPERATOR =
	(LEFTARG = lat,
	RIGHTARG = lat,
	PROCEDURE = igual,
	COMMUTATOR = = ,
	NEGATOR = &amp;lt;&amp;gt;);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Observeu que hem posat el commutador igual a ell mateix i el negador a l'operador distint, encara que no el tenim definit.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ara aquesta instrucció ja funciona:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT * FROM POBLACIONS3 
	WHERE latitud = '(N,39,59,10)';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;i fins i tot sap que ha de convertir a lat la cadena de caràcters (ja que només té un operador = amb un operand tipus &lt;b&gt;lat&lt;/b&gt;).&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;La funció &lt;b&gt;distint &lt;/b&gt;només ha de negar l'igual. I ja podem gastar l'operador:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE FUNCTION distint (lat,lat) RETURNS bool AS '
BEGIN
	RETURN NOT ($1 = $2);
END; ' 
LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OPERATOR &amp;lt;&amp;gt;
	(LEFTARG = lat,
	RIGHTARG = lat,
	PROCEDURE = distint,
	COMMUTATOR = &amp;lt;&amp;gt; ,
	NEGATOR = = );&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;&lt;u&gt;Nota important&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Enguany tenim creades moltes Bases de Dades perquè l'alumnat és molt extens, i potser tenim un poc saturat el servidor.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Siga per l'anterior o per alguna altra causa, estem detectant una sobrecàrrega entre les crides als operadors nous que estem creant.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per aquesta raó, encara que queda molt clara la funció &lt;strong&gt;distint&lt;/strong&gt; (quan no són iguals), en compte d'utilitzar l'operador = serà millor cridar a la funció igual (en definitiva, l'operador = crida a la funció igual, per tant ens estalviem un pas). Com que anirem fent tots els operadors de comparació, si cridem sempre a les funcions i no a altres operadors, al final ens estalviarem molts passos.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per això, millor fer aquesta versió de la funció &lt;strong&gt;distint(lat,lat)&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION distint(lat, lat) RETURNS bool AS $cos$
BEGIN
	RETURN NOT igual($1,$2);
END; &lt;br /&gt;$cos$ LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;L'operador &lt;b&gt;major &lt;/b&gt;és un poc més complicat. Hem de considerar una latitud major si està més al nord. Per tant a l'hemisferi nord quan més graus més al nord, però a l'hemisferi sud és al revés.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE FUNCTION major (lat1 lat, lat2 lat) RETURNS bool AS $cos$
DECLARE
	aux bool;
BEGIN
	IF lat1.h='N' AND lat2.h='S' THEN aux := TRUE;
	ELSIF lat1.h='S' AND lat2.h='N' THEN aux := FALSE;
	ELSIF lat1.h='N' AND lat2.h='N' THEN 				-- Hemisferi NORD
		IF lat1.g &amp;gt; lat2.g THEN aux := TRUE;
		ELSIF lat1.g &amp;lt; lat2.g THEN aux := FALSE;
		ELSE
			IF lat1.m &amp;gt; lat2.m THEN aux := TRUE;
			ELSIF lat1.m &amp;lt; lat2.m THEN aux := FALSE;
			ELSE
				IF lat1.s &amp;gt; lat2.s THEN aux := TRUE;
				ELSE aux := FALSE; -- si són iguals és fals
				END IF;
			END IF;
		END IF;
	ELSE 								-- Hemisferi SUD, al revés que al NORD
		IF lat1.g &amp;lt; lat2.g THEN aux := TRUE;
		ELSIF lat1.g &amp;gt; lat2.g THEN aux := FALSE;
		ELSE
			IF lat1.m &amp;lt; lat2.m THEN aux := TRUE;
			ELSIF lat1.m &amp;gt; lat2.m THEN aux := FALSE;
			ELSE
				IF lat1.s &amp;lt; lat2.s THEN aux := TRUE;
				ELSE aux := FALSE;
				END IF;
			END IF;
		END IF;
	END IF;
	RETURN aux;
END; $cos$ 
LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Segurament podria haver quedat més curt, però així crec que s'entén molt bé. Ara l'operador:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OPERATOR &amp;gt;
	(LEFTARG = lat,
	RIGHTARG = lat,
	PROCEDURE = major,
	COMMUTATOR = &amp;lt; ,
	NEGATOR = &amp;lt;= );&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Podríem provar-lo així:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT * FROM POBLACIONS3 
	WHERE latitud &amp;gt; '(N,40,0,0)'
	ORDER BY NOM;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;i podrem comprovar que Rio de Janeiro no apareixerà.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Afortunadament tots els altres operadors es poden derivar dels que ja tenim:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION major_igual (lat,lat) RETURNS bool AS '
BEGIN
	RETURN ($1 &amp;gt; $2) OR ($1=$2);
END; ' LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-processing&quot; style=&quot;text-align: justify;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OPERATOR &amp;gt;=
	(LEFTARG = lat,
	RIGHTARG = lat,
	PROCEDURE = major_igual,
	COMMUTATOR = &amp;lt;= ,
	NEGATOR = &amp;lt; );&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I el &lt;b&gt;menor &lt;/b&gt;seria negant el major o igual i el &lt;b&gt;menor o igual&lt;/b&gt; negant el major.&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;&lt;u&gt;Nota important&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per la mateixa raó de la nota anterior, millor fer aquesta versió de la funció &lt;strong&gt;major_igual(lat,lat)&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION major_igual (lat,lat) RETURNS bool AS '
BEGIN
	RETURN major($1,$2) OR igual($1,$2);
END; ' LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I exactament igual amb les funcions &lt;strong&gt;menor(lat,lat)&lt;/strong&gt; i &lt;strong&gt;menor_igual(lat,lat)&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="1501"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="17_1.32"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="76">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="73"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T7_9_1_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpA4E03D/T7_9_1_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="223312fb8806c9c896b57a99ef14580e"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="74"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="1519"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="17_1.33"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="77">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="73"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T7_9_1_2.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpA4E03D/T7_9_1_2.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="46181e45417a59740fb9034e07b90106"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="74"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="74"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="34"></int>
                <string role="key" value="parentNode"></string>
                <reference key="75"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="17"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parentNode"></string>
              <reference key="75"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="76"></reference>
               <reference key="77"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="13"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:9.%20Creaci%C3%B3%20d%27altres%20objectes%20basats%20en%20funcions:9.1%20Operadors"></string>
           <string role="key" value="parent"></string>
           <reference key="72"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="80">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Exercicis"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.genericidevice.GenericIdevice" reference="78">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Exercicis"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
                 <string role="key" value="_tip"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="class_"></string>
                 <unicode value="activity"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="1"></int>
                 <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
                 <int value="11"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="79">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="41_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="78"></reference>
                    <string role="key" value="_instruc"></string>
                    <unicode value="Describe the tasks the learners should complete."></unicode>
                    <string role="key" value="_name"></string>
                    <unicode value="Activity"></unicode>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="buttonCaption"></string>
                    <string value=""></string>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;p&gt;En la Base de Dades &lt;strong&gt;geo_grup_9999x&lt;/strong&gt;:&lt;br /&gt;&lt;br /&gt;7.16.- Crear els dos &lt;b&gt;operadors de comparació&lt;/b&gt; que quedaven per al tipus &lt;b&gt;lat&lt;/b&gt;: &lt;b&gt;&amp;lt; &lt;/b&gt;i &lt;b&gt;&amp;lt;=&lt;/b&gt;. Primer haureu de crear les 2 funcions que queden: &lt;strong&gt;menor(lat,lat)&lt;/strong&gt; i &lt;strong&gt;menor_igual(lat,lat)&lt;/strong&gt;&lt;/p&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="79"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="80"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value="activity"></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="27"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <unicode value="activity"></unicode>
                 <string role="key" value="parentNode"></string>
                 <reference key="80"></reference>
                 <string role="key" value="systemResources"></string>
                 <list>
                  <string value="common.js"></string>
                 </list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="19"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:9.%20Creaci%C3%B3%20d%27altres%20objectes%20basats%20en%20funcions:9.1%20Operadors:Exercicis"></string>
              <string role="key" value="parent"></string>
              <reference key="75"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="83">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="9.2 Operadors de classe"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="81">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="82">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="81"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt; &lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Hem fet els operadors de comparació per a un nou tipus de dades que hem creat, però a pesar d'això, no podem ordenar per un camp d'aquest tipus, és a dir, consultes com la següent encara no funcionen:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT *
	FROM POBLACIONS3
	ORDER BY latitud DESC;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;observeu com la primera és Rio de Janeiro, quan havia de ser l'última.&lt;/p&gt;
&lt;p&gt;&lt;img style=&quot;border: 1px solid black; display: block; margin-left: auto; margin-right: auto;&quot; src=&quot;resources/T7_9_2_1.png&quot; height=&quot;200&quot; width=&quot;493&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ens falta un pas més, construir un &lt;b&gt;OPERADOR DE CLASSE&lt;/b&gt; (&lt;i&gt;&lt;b&gt;OPERATOR CLASS&lt;/b&gt;&lt;/i&gt;), que permetrà indexar per un camp d'aquest tipus. Això suposarà que podrem ordenar de forma ascendent o descendent, i que podrem crear índex formats per camps d'aquest tipus; fins i tot podrà ser, a partir d'aquest moment, clau principal.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Una vegada tenim &lt;b&gt;tots &lt;/b&gt;els operadors de comparació, només ens resta crear una funció de suport a l'operador i definir pròpiament l'operador de classe.&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;b&gt;Nota &lt;/b&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Abans de continuar, estigueu segurs que teniu tots els operadors creats, incloent &lt;b&gt;&amp;lt;&lt;/b&gt; i &lt;b&gt;&amp;lt;=&lt;/b&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt; &lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;La funció de suport ha de tenir dos paràmetres del tipus que volem, i tornar -1, 1 o 0, depenent de si el primer operand és menor, major o igual que el segon, respectivament.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION lat_cmp(lat1 lat,lat2 lat) RETURNS integer AS $cos$
BEGIN
	IF lat1 &amp;lt; lat2 THEN return -1;
	ELSEIF lat1 &amp;gt; lat2 THEN return 1;
	ELSE return 0;
	END IF;
END;
$cos$ LANGUAGE 'plpgsql';&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ara ja podem definir l'operador de classe. Haurem de tenir &lt;b&gt;privilegis d'administració&lt;/b&gt; (per evitar que qualsevol usuari puga crear operadors de classe). Haurem d'especificar:&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;El tipus de dades per a qui definim l'operador de classe.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;El mètode d'indexació que utilitzarem (normalment &lt;b&gt;btree&lt;/b&gt;, &lt;i&gt;&lt;b&gt;b-arbre&lt;/b&gt;&lt;/i&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;L'estratègia d'ordenació, especificant quins són els nostres operadors i associant-los a números.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;També haurem d'especificar la funció de suport.&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Lamentablement no teniu privilegis d'administració, per tant aquesta part no la podreu fer, únicament us podreu fiar. La definició de l'operador de classe quedarà així :&lt;/p&gt;
&lt;div class=&quot;codi&quot; style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;color: #000000;&quot;&gt;CREATE OPERATOR CLASS lat_op_cl DEFAULT&lt;/span&gt;&lt;br /&gt;
&lt;blockquote&gt;&lt;span style=&quot;color: #000000;&quot;&gt;FOR TYPE lat USING btree AS&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #000000;&quot;&gt; OPERATOR 1 &amp;lt;,&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #000000;&quot;&gt; OPERATOR 2 &amp;lt;=,&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #000000;&quot;&gt; OPERATOR 3 =,&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #000000;&quot;&gt; OPERATOR 4 &amp;gt;=,&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #000000;&quot;&gt; OPERATOR 5 &amp;gt;,&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #000000;&quot;&gt; FUNCTION 1 lat_cmp(lat, lat);&lt;/span&gt;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Si esteu molt molt interessats i voleu comprovar-lo, m'ho dieu a mi i us crearé aquest operador de classe.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ara ja ens funcionaria la següent sentència:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT *
	FROM POBLACIONS3
	ORDER BY latitud DESC;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;observeu com estem ordenant de forma ascendent, i la primera és Rio de Janeiro:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_9_2_2.png&quot; height=&quot;663&quot; width=&quot;854&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I fins i tot, si fóra el cas, podríem definir el camp &lt;b&gt;latitud &lt;/b&gt;com a clau principal, que no és el cas perquè ja és &lt;b&gt;nom&lt;/b&gt;.&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="1503"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="18_1.32"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="84">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="81"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T7_9_2_2.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpA4E03D/T7_9_2_2.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="1dc26d96a3f084e2d2326a889e5af246"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="82"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="1517"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="18_1.33"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="85">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="81"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T7_9_2_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpA4E03D/T7_9_2_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="978f86cd28657be3fe56acb7cc75ff9a"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="82"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="82"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="34"></int>
                <string role="key" value="parentNode"></string>
                <reference key="83"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="18"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parentNode"></string>
              <reference key="83"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="84"></reference>
               <reference key="85"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="14"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:9.%20Creaci%C3%B3%20d%27altres%20objectes%20basats%20en%20funcions:9.2%20Operadors%20de%20classe"></string>
           <string role="key" value="parent"></string>
           <reference key="72"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="88">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="9.3 Funcions d'agregat"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="86">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="87">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="86"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;En PostgreSQL també podem definir funcions d'agregat, de l'estil de &lt;b&gt;MAX&lt;/b&gt;, &lt;b&gt;SUM&lt;/b&gt;, &lt;b&gt;AVG&lt;/b&gt;, ... Podem fer-ho sobre qualsevol tipus, existent o definit per l'usuari&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Una funció d'agregat vindrà definida pel seu nom i pel tipus de dades. Per això encara no funciona la sentència&lt;/p&gt;
&lt;div class=&quot;codi&quot; style=&quot;text-align: justify;&quot;&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;SELECT MAX(latitud)&lt;/span&gt;&lt;br /&gt;
&lt;blockquote&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;FROM POBLACIONS3;&lt;/span&gt;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;ja que &lt;b&gt;MAX &lt;/b&gt;no està definida sobre el tipus de dades nou.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;A banda del tipus de dades, podrem jugar amb un tipus de dades intern, mentre es calcula la funció d'agregat, que no té per què ser igual al tipus de dades de la funció. I la funció d'agregat vindrà definida per una o dues funcions: una funció de transició d'estat (&lt;i&gt;&lt;b&gt;sfunc&lt;/b&gt;&lt;/i&gt;) que anirà calculant l'estat intern mentre van arribant nous valors; i opcionalment una altra funció final (&lt;i&gt;&lt;b&gt;ffunc&lt;/b&gt;&lt;/i&gt;) per a fer un últim càlcul i donar el valor final (per exemple en la mitjana &lt;i&gt;&lt;b&gt;sfunc &lt;/b&gt;&lt;/i&gt;anirà calculant la suma dels valors, i &lt;i&gt;&lt;b&gt;ffunc &lt;/b&gt;&lt;/i&gt;haurà de dividir pel nombre total d'elements).&lt;/p&gt;
&lt;div class=&quot;codi&quot; style=&quot;text-align: justify;&quot;&gt;sfunc( estat-intern, següent-item-dades ) ---&amp;gt; següent-estat-intern&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;codi&quot; style=&quot;text-align: justify;&quot;&gt;ffunc( estat-intern ) ---&amp;gt; valor-final&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Opcionalment també podrem donar un valor inicial. La sintaxi és:&lt;/p&gt;
&lt;div class=&quot;codi&quot; style=&quot;text-align: justify;&quot;&gt;CREATE AGGREGATE nom (&lt;br /&gt;
&lt;blockquote&gt;BASETYPE = tipus_dades,&lt;br /&gt;SFUNC = sfunc,&lt;br /&gt;STYPE = tipus_dades_intern&lt;br /&gt;[ , FINALFUNC = ffunc ]&lt;br /&gt;[ , INITCOND = condició_inicial ]&lt;br /&gt;[ , SORTOP = operador_ordenació ]&lt;/blockquote&gt;
)&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Anem a crear la funció d'agregat MAX per al tipus de dades lat. Comencem per la funció d'estat, que en aquest cas senzillament anirà agafant el màxim. És, per tant, com la funció que calcula el màxim de dos números, però en lat. No tindrem en consideració els valors nuls, per no complicar la cosa.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE FUNCTION MAX2(lat1 lat,lat2 lat) RETURNS lat AS $cos$
BEGIN
	IF lat2 &amp;gt; lat1 THEN RETURN lat2;
	ELSE RETURN lat1;
	END IF;
END; $cos$ 
LANGUAGE plpgsql;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ara ja va la funció d'agregat:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE AGGREGATE MAX (
	BASETYPE = lat,
	SFUNC = MAX2,
	STYPE = lat,
	INITCOND = '(S,90,0,0)');&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Hem posat com a valor inicial el pol sud, per evitar el problema dels nuls. Si tot ha anat bé, ja podrem fer consultes com la del principi d'aquesta pregunta.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT MAX(latitud)
    FROM POBLACIONS3;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Si havíem creat també l'operador de classe, les podrem complicar ordenant-les. Per exemple, podem traure la latitud màxima de cada comarca, ordenades de nord a sud:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-processing&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT comarca,MAX(latitud)
	FROM POBLACIONS3
	GROUP BY comarca
	ORDER BY MAX(latitud) DESC;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="87"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="88"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="19"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parentNode"></string>
              <reference key="88"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="15"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:9.%20Creaci%C3%B3%20d%27altres%20objectes%20basats%20en%20funcions:9.3%20Funcions%20d%27agregat"></string>
           <string role="key" value="parent"></string>
           <reference key="72"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="91">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Exercicis"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.genericidevice.GenericIdevice" reference="89">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Exercicis"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="Universitat d'Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="Una activitat pot ser definida com una tasca o conjunt de tasques 
 que l'alumne ha de realitzar. Donar una redacció clara de la tasca i considereu 
 el que pot ajudar o obstaculitzar l'assoliment de la tasca."></unicode>
                 <string role="key" value="_tip"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="class_"></string>
                 <unicode value="activity"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="1"></int>
                 <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
                 <int value="11"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="90">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="35_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="89"></reference>
                    <string role="key" value="_instruc"></string>
                    <unicode value="Descriu les tasques que els alumnes haurien de completar."></unicode>
                    <string role="key" value="_name"></string>
                    <unicode value="Activitat"></unicode>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="buttonCaption"></string>
                    <string value=""></string>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;p&gt;En la Base de Dades &lt;strong&gt;geo_grup_9999x&lt;/strong&gt;:&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;7.17.- Crear la funció d'agregat &lt;b&gt;MIN &lt;/b&gt;per al tipus de dades &lt;b&gt;lat&lt;/b&gt;.&lt;/p&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="90"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="91"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value="activity"></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="20"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="91"></reference>
                 <string role="key" value="systemResources"></string>
                 <list>
                  <string value="common.js"></string>
                 </list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="16"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:9.%20Creaci%C3%B3%20d%27altres%20objectes%20basats%20en%20funcions:9.3%20Funcions%20d%27agregat:Exercicis"></string>
              <string role="key" value="parent"></string>
              <reference key="88"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="94">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Exercicis de tot el tema"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="92">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercicis"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="93">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="42_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="92"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;En la Base de Dades &lt;b&gt;geo_grup_9999x&lt;/b&gt;:&lt;br /&gt;&lt;br /&gt;7.1.- Crea una funció anomenada &lt;b&gt;DEU_&lt;/b&gt;&lt;b&gt;Q&lt;/b&gt;, que traga els &lt;strong&gt;números del 1 al 10&lt;/strong&gt; i els seus &lt;strong&gt;quadrats&lt;/strong&gt;. (Utilitza &lt;b&gt;RAISE NOTICE&lt;/b&gt;).&lt;br /&gt;&lt;br /&gt;7.2.- Fes una altra funció, &lt;b&gt;IMP&lt;/b&gt;, que traga per pantalla els números &lt;strong&gt;imparells&lt;/strong&gt; del 1 al 50. (Utilitza &lt;b&gt;RAISE NOTICE&lt;/b&gt;).&lt;br /&gt;&lt;br /&gt;7.3.- Fes una funció anomenada &lt;b&gt;TAULA_MULT&lt;/b&gt;, per a que traga la taula de multiplicar del &lt;strong&gt;paràmetre&lt;/strong&gt; que se li ha de passar. (Utilitza &lt;b&gt;RAISE NOTICE&lt;/b&gt;). Aquest podria ser el seu aspecte, en executar-la:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;border: 1px solid black;&quot; src=&quot;resources/T7_5_e_1.png&quot; width=&quot;466&quot; height=&quot;399&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;7.4.- Fes una funció, anomenada &lt;b&gt;MAX2&lt;/b&gt;, que tinga dos paràmetres &lt;strong&gt;numèrics&lt;/strong&gt; i que &lt;strong&gt;torne el màxim&lt;/strong&gt; entre aquestos dos. (Ara ja &lt;b&gt;no &lt;/b&gt;s'ha d'utilitzar &lt;b&gt;RAISE NOTICE&lt;/b&gt;).&lt;br /&gt;&lt;br /&gt;7.5.- Utilitza l'anterior per a crear &lt;b&gt;MAX3&lt;/b&gt;. Has d'utilitzar obligatòriament la funció &lt;strong&gt;MAX2&lt;/strong&gt;&lt;br /&gt;&lt;br /&gt;7.6.- (&lt;strong&gt;Voluntari&lt;/strong&gt;) Fes la funció &lt;b&gt;LAT_A_TEXT&lt;/b&gt;, tenint en compte que ha de quedar com en la taula &lt;b&gt;POBLACIONS&lt;/b&gt;. Segurament la dificultat més gran serà aconseguir que apareguen les cometes després dels minuts i dels segons.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;7.7.- Fes una funció anomeneda &lt;strong&gt;POBLACIONS_ALTES&lt;/strong&gt; que accepte 2 paràmetres, el primer de tipus text que serà una comarca, i el segon numèric que serà una altura. Ha de traure les poblacions de la comarca del primer paràmetre que són més altes que el segon paràmetre. Mostrarem el nom de la població i l'altura. Aquest podria ser el resultat en executar-se:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_6_Ex7.png&quot; alt=&quot;&quot; width=&quot;456&quot; height=&quot;157&quot; /&gt;&lt;/p&gt;
&lt;p&gt;7.8.- Fes una funció anomenada &lt;strong&gt;COMARQUES_NUMPOBLES&lt;/strong&gt; sense paràmetres que traga per pantalla les comarques ordenades alfabèticament amb el número de pobles de cadascuna&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_6_Ex8.png&quot; alt=&quot;&quot; width=&quot;438&quot; height=&quot;226&quot; /&gt;&lt;/p&gt;
&lt;p&gt;7.9.- Fes una funció anomenada &lt;strong&gt;COMARQUES_NUMPOBLES_NUMINSTITUTS&lt;/strong&gt; sense paràmetres que traga per pantalla les comarques ordenades alfabèticament amb el número de pobles de cadascuna i el número d'instituts. En la consulta tindrem dos dificultats:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hem d'agafar totes les poblacions, fins i tot les que no tenen institut&lt;/li&gt;
&lt;li&gt;Com que hem d'accedir als instituts, per a comptar els pobles haurem de comptar els pobles distints, i així si un poble té més d'un institut, no comptar-lo més d'una vegada&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_6_Ex9.png&quot; alt=&quot;&quot; width=&quot;604&quot; height=&quot;226&quot; /&gt;&lt;/p&gt;
&lt;p&gt;7.10.- Fes una funció anomenada &lt;strong&gt;NUM_HABITANTS_COMARCA&lt;/strong&gt; que accepte un paràmetre de tipus text, i torne el número d'habitants d'eixa comarca&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_6_Ex10.png&quot; alt=&quot;&quot; width=&quot;399&quot; height=&quot;195&quot; /&gt;&lt;/p&gt;
&lt;p&gt;7.11.- Fer la funció &lt;strong&gt;COMARQUES_NUMHABITANTS&lt;/strong&gt; sense paràmetres per a traure per pantalla totes les comarques i el número d'habitants. En la consulta has d'utilitzar obligatòriament la funció anterior&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_6_Ex11.png&quot; alt=&quot;&quot; width=&quot;497&quot; height=&quot;224&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;7.12.- Crear un trigger anomenat &lt;b&gt;TR_ALT_POS&lt;/b&gt; que controle que l'altura d'una nova població siga estrictament positiva. La funció en la qual es basa es pot anomenar &lt;b&gt;ALT_POS&lt;/b&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;7.13.- Modificar l'anterior per a que ho controle també quan es tracta d'una modificació.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;7.14.- Crear un trigger anomenat &lt;strong&gt;TR_EXT_0_1000&lt;/strong&gt; que controle que l'extensió d'un municipi (població) estiga obligatòriament entre 0 i 1000, i a de ser sempre, tant si s'insereix una nova població com si es modifica. Però en aquesta ocasió, en compte de traure un error, el que farem serà modificar aquest valor: si és major que 1000, li donarem el valor 1000, i si és negatiu li posarem 0. Ho aconseguirem modificant &lt;strong&gt;NEW.extensio&lt;/strong&gt;, i com la funció del trigger torna sempre NEW, doncs agafarà el nou valor. Anomeneu a la funció &lt;strong&gt;EXT_0_1000&lt;/strong&gt;. &lt;/p&gt;
&lt;p&gt;7.15.- &lt;strong&gt;VOLUNTARI&lt;/strong&gt;. En la taula POBLACIONS3 tenim controlat que la latitud introduïda siga correcta per mig del tipus lat, però no en la taula POBLACIONS, on és de tipus VARCHAR(50) i per tant es podria introduir una latitud incorrecta molt fàcilment. Crea un trigger que controle que quan s'introdueix o es modifica la &lt;strong&gt;latitud&lt;/strong&gt; de &lt;strong&gt;POBLACIONS&lt;/strong&gt; siga correcta. Per a això&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Els caràcter 1 i 2 han de ser els &lt;strong&gt;graus&lt;/strong&gt;, que han d'estar entre 00 i 90&lt;/li&gt;
&lt;li&gt;El caràcter 3 ha de ser &lt;strong&gt;º&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Els caràcters 4 i 5 formen els &lt;strong&gt;minuts&lt;/strong&gt;, i han d'estar entre 00 i 59&lt;/li&gt;
&lt;li&gt;El caràcter 6 ha de ser &lt;strong&gt;'&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Els caràcters 7 i 8 formen els &lt;strong&gt;segons&lt;/strong&gt;, i han d'estar entre 00 i 59&lt;/li&gt;
&lt;li&gt;El caràcter 9 ha de ser &lt;strong&gt;&quot;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;El caràcter 10 ha de ser &lt;strong&gt;N&lt;/strong&gt; o &lt;strong&gt;S&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Si no s'acompleix alguna de les restriccions anteriors, ha d'eixir un error dient que la latitud ha d'estar entre 00º00'00&quot;N i 90º00'00&quot;N , o entre 00º00'00&quot;S i 90º00'00&quot;S&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;7.16.- Crear els dos &lt;b&gt;operadors de comparació&lt;/b&gt; que quedaven per al tipus &lt;b&gt;lat&lt;/b&gt;: &lt;b&gt;&amp;lt; &lt;/b&gt;i &lt;b&gt;&amp;lt;=&lt;/b&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;7.17.- Crear la funció d'agregat &lt;b&gt;MIN &lt;/b&gt;per al tipus de dades &lt;b&gt;lat&lt;/b&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="1497"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="28_42_2.51"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="95">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="92"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_6_Ex9.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpA4E03D/T7_6_Ex9.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="1ccf835c0596375d5ff980ea96699ad7"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="93"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="1500"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="28_42_2.52"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="96">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="92"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_5_e_1.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpA4E03D/T7_5_e_1.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="fd5226397947507dafa0f605614fcbae"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="93"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="1505"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="28_42_2.53"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="97">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="92"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_6_Ex8.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpA4E03D/T7_6_Ex8.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="52457d7a1205a53b6c464a83417c895a"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="93"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="1510"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="28_42_2.54"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="98">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="92"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_6_Ex10.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpA4E03D/T7_6_Ex10.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="1549fe47a6cec202e830265c59ef41d6"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="93"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="1514"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="28_42_2.55"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="99">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="92"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_6_Ex7.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpA4E03D/T7_6_Ex7.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="d65546067924b68b4b8b7c24ba6f7f28"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="93"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="1516"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="28_42_2.56"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="100">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="92"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_6_Ex11.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpA4E03D/T7_6_Ex11.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="1fd86bca736c6703664424e6a23a2ae9"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="93"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="93"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="57"></int>
              <string role="key" value="parentNode"></string>
              <reference key="94"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="28"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="94"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="95"></reference>
            <reference key="96"></reference>
            <reference key="97"></reference>
            <reference key="98"></reference>
            <reference key="99"></reference>
            <reference key="100"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="20"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20Programaci%C3%B3%20en%20PostgreSQL:Exercicis%20de%20tot%20el%20tema"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
     </list>
    </dictionary>
   </instance>
   <unicode role="key" value="1"></unicode>
   <reference key="8"></reference>
   <unicode role="key" value="10"></unicode>
   <reference key="72"></reference>
   <unicode role="key" value="11"></unicode>
   <reference key="38"></reference>
   <unicode role="key" value="12"></unicode>
   <reference key="69"></reference>
   <unicode role="key" value="13"></unicode>
   <reference key="75"></reference>
   <unicode role="key" value="14"></unicode>
   <reference key="83"></reference>
   <unicode role="key" value="15"></unicode>
   <reference key="88"></reference>
   <unicode role="key" value="16"></unicode>
   <reference key="91"></reference>
   <unicode role="key" value="17"></unicode>
   <reference key="45"></reference>
   <unicode role="key" value="18"></unicode>
   <reference key="13"></reference>
   <unicode role="key" value="19"></unicode>
   <reference key="80"></reference>
   <unicode role="key" value="2"></unicode>
   <reference key="16"></reference>
   <unicode role="key" value="20"></unicode>
   <reference key="94"></reference>
   <unicode role="key" value="3"></unicode>
   <reference key="19"></reference>
   <unicode role="key" value="4"></unicode>
   <reference key="23"></reference>
   <unicode role="key" value="5"></unicode>
   <reference key="26"></reference>
   <unicode role="key" value="6"></unicode>
   <reference key="31"></reference>
   <unicode role="key" value="7"></unicode>
   <reference key="42"></reference>
   <unicode role="key" value="8"></unicode>
   <reference key="53"></reference>
   <unicode role="key" value="9"></unicode>
   <reference key="57"></reference>
  </dictionary>
  <string role="key" value="_objectives"></string>
  <unicode value=""></unicode>
  <string role="key" value="_preknowledge"></string>
  <unicode value=""></unicode>
  <string role="key" value="_templateFile"></string>
  <string value=""></string>
  <string role="key" value="backgroundImgTile"></string>
  <bool value="0"></bool>
  <string role="key" value="currentNode"></string>
  <reference key="75"></reference>
  <string role="key" value="dublinCore"></string>
  <instance class="exe.engine.package.DublinCore">
   <dictionary>
    <string role="key" value="contributors"></string>
    <unicode value=""></unicode>
    <string role="key" value="coverage"></string>
    <unicode value=""></unicode>
    <string role="key" value="creator"></string>
    <unicode value=""></unicode>
    <string role="key" value="date"></string>
    <unicode value=""></unicode>
    <string role="key" value="description"></string>
    <unicode value=""></unicode>
    <string role="key" value="format"></string>
    <unicode value=""></unicode>
    <string role="key" value="identifier"></string>
    <unicode value=""></unicode>
    <string role="key" value="language"></string>
    <unicode value="ca"></unicode>
    <string role="key" value="publisher"></string>
    <unicode value=""></unicode>
    <string role="key" value="relation"></string>
    <unicode value=""></unicode>
    <string role="key" value="rights"></string>
    <unicode value=""></unicode>
    <string role="key" value="source"></string>
    <unicode value=""></unicode>
    <string role="key" value="subject"></string>
    <unicode value=""></unicode>
    <string role="key" value="title"></string>
    <unicode value=""></unicode>
    <string role="key" value="type"></string>
    <unicode value=""></unicode>
   </dictionary>
  </instance>
  <string role="key" value="exe.engine.package.Package.persistenceVersion"></string>
  <int value="16"></int>
  <string role="key" value="exportMetadataType"></string>
  <string value="LOMES"></string>
  <string role="key" value="exportSource"></string>
  <bool value="1"></bool>
  <string role="key" value="footer"></string>
  <unicode value=""></unicode>
  <string role="key" value="isChanged"></string>
  <bool value="0"></bool>
  <string role="key" value="isLoading"></string>
  <bool value="0"></bool>
  <string role="key" value="license"></string>
  <unicode value="creative commons: attribution - non commercial - share alike 3.0"></unicode>
  <string role="key" value="lom"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list></list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg"></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <string value="d9be84aa-42f6-4b7e-ab65-119a88734962"></string>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Bases de Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="101">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2016-04-03"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Metadades de data de creaci\xc3\xb3"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="102">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="103">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOMv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="101"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="102"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="103"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOMv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <none></none>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="yes"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="lomEs"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list></list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg"></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <string value="d9be84aa-42f6-4b7e-ab65-119a88734962"></string>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Bases de Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="104">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2016-04-03"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Metadades de data de creaci\xc3\xb3"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="105">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="106">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOM-ESv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="104"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="105"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="106"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOM-ESv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <instance class="exe.engine.lom.lomsubs.accessSub">
       <dictionary>
        <string role="key" value="accessType"></string>
        <instance class="exe.engine.lom.lomsubs.accessTypeSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOM-ESv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="uniqueElementName"></string>
          <string value="accessType"></string>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.accessTypeValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="universal"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
        <string role="key" value="description"></string>
        <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list>
           <instance class="exe.engine.lom.lomsubs.LangStringSub">
            <dictionary>
             <string role="key" value="language"></string>
             <string value="ca"></string>
             <string role="key" value="valueOf_"></string>
             <unicode value="Per defecte"></unicode>
            </dictionary>
           </instance>
          </list>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="access"></string>
       </dictionary>
      </instance>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="creative commons: attribution - non commercial - share alike"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <string value="rights"></string>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="mxmlforcemediaonly"></string>
  <bool value="0"></bool>
  <string role="key" value="mxmlheight"></string>
  <string value=""></string>
  <string role="key" value="mxmlprofilelist"></string>
  <string value=""></string>
  <string role="key" value="mxmlwidth"></string>
  <string value=""></string>
  <string role="key" value="release"></string>
  <string value="2.6"></string>
  <string role="key" value="resources"></string>
  <dictionary>
   <string role="key" value="0cd175d06fd2034c6c3010ce6cd00c42"></string>
   <list>
    <reference key="54"></reference>
   </list>
   <string role="key" value="1549fe47a6cec202e830265c59ef41d6"></string>
   <list>
    <reference key="48"></reference>
    <reference key="98"></reference>
   </list>
   <string role="key" value="1ccf835c0596375d5ff980ea96699ad7"></string>
   <list>
    <reference key="46"></reference>
    <reference key="95"></reference>
   </list>
   <string role="key" value="1dc26d96a3f084e2d2326a889e5af246"></string>
   <list>
    <reference key="84"></reference>
   </list>
   <string role="key" value="1fd86bca736c6703664424e6a23a2ae9"></string>
   <list>
    <reference key="50"></reference>
    <reference key="100"></reference>
   </list>
   <string role="key" value="223312fb8806c9c896b57a99ef14580e"></string>
   <list>
    <reference key="76"></reference>
   </list>
   <string role="key" value="24583d90862d2e1b37fb67e4f05f6ba8"></string>
   <list>
    <reference key="65"></reference>
   </list>
   <string role="key" value="32d6946a3df7e95d394e1e053c046435"></string>
   <list>
    <reference key="5"></reference>
   </list>
   <string role="key" value="390de53685b490f4f77c71375d318942"></string>
   <list>
    <reference key="58"></reference>
   </list>
   <string role="key" value="46181e45417a59740fb9034e07b90106"></string>
   <list>
    <reference key="77"></reference>
   </list>
   <string role="key" value="52457d7a1205a53b6c464a83417c895a"></string>
   <list>
    <reference key="47"></reference>
    <reference key="97"></reference>
   </list>
   <string role="key" value="6277100b987160cb673aae7bf2ad492c"></string>
   <list>
    <reference key="61"></reference>
   </list>
   <string role="key" value="741a02acebbdfe3885a523a95aee6764"></string>
   <list>
    <reference key="34"></reference>
   </list>
   <string role="key" value="7aa7f8acf34f11badb4a01587f741117"></string>
   <list>
    <reference key="35"></reference>
   </list>
   <string role="key" value="978f86cd28657be3fe56acb7cc75ff9a"></string>
   <list>
    <reference key="85"></reference>
   </list>
   <string role="key" value="b8d338428c94b42ce40cf1de91dbcd4a"></string>
   <list>
    <reference key="64"></reference>
   </list>
   <string role="key" value="d65546067924b68b4b8b7c24ba6f7f28"></string>
   <list>
    <reference key="49"></reference>
    <reference key="99"></reference>
   </list>
   <string role="key" value="ecfba965430044fb81ebd8ea6cd36bb9"></string>
   <list>
    <reference key="66"></reference>
   </list>
   <string role="key" value="f79713b6d8a966b1a3b1869b1e2d9ad8"></string>
   <list>
    <reference key="20"></reference>
   </list>
   <string role="key" value="fd5226397947507dafa0f605614fcbae"></string>
   <list>
    <reference key="39"></reference>
    <reference key="96"></reference>
   </list>
  </dictionary>
  <string role="key" value="root"></string>
  <reference key="4"></reference>
  <string role="key" value="scolinks"></string>
  <bool value="0"></bool>
  <string role="key" value="scowsinglepage"></string>
  <bool value="0"></bool>
  <string role="key" value="scowwebsite"></string>
  <bool value="0"></bool>
  <string role="key" value="style"></string>
  <unicode value="caminas 3.1"></unicode>
  <string role="key" value="tempFile"></string>
  <bool value="0"></bool>
 </dictionary>
</instance>