<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ca" xml:lang="ca" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>2.3.1 CF: Utilització des de l'entorn de Firebase | Bases de Dades </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="ca" />
<meta name="author" content="Àlvar Serrano Calduch" />
<meta name="generator" content="eXeLearning 2.7 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
</head>
<body class="exe-web-site" id="exe-node-56"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Omet navegació</a></p>
<div id="header" ><div id="headerContent">Bases de Dades</div></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Tema 7: Bases de Dades NoSQL</a></li>
   <li><a href="1__introducci.html" class="no-ch">1 - Introducció</a></li>
   <li class="current-page-parent"><a href="2__firebase.html" class="current-page-parent daddy">2 - Firebase</a>
   <ul>
      <li><a href="21_creaci_duna_aplicaci.html" class="no-ch">2.1 Creació d'una aplicació</a></li>
      <li><a href="22_realtime_database_rd.html" class="daddy">2.2 Realtime Database (RD)</a>
      <ul class="other-section">
         <li><a href="221_rd_utilitzaci_des_de_lentorn_de_firebase.html" class="no-ch">2.2.1 RD: Utilització des de l'entorn de Firebase</a></li>
         <li><a href="222_rd_utilitzaci_des_de_java.html" class="daddy">2.2.2 RD: Utilització des de Java</a>
         <ul class="other-section">
            <li><a href="2221_rdjava_connexi_des_de_java.html" class="no-ch">2.2.2.1 RD-Java: Connexió des de Java</a></li>
            <li><a href="2222_rdjava_accs_a_les_dades.html" class="no-ch">2.2.2.2 RD-Java: Accés a les dades</a></li>
            <li><a href="2223_rdjava_tot_lexemple.html" class="no-ch">2.2.2.3 RD-Java: Tot l'exemple</a></li>
         </ul>
         </li>
         <li><a href="223_rd_utilitzaci_des_dandroid.html" class="daddy">2.2.3 RD: Utilització des d'Android</a>
         <ul class="other-section">
            <li><a href="2231_rdandroid_connexi_des_dandroid.html" class="no-ch">2.2.3.1 RD-Android: Connexió des d'Android</a></li>
            <li><a href="2232_rdandroid_accs_a_les_dades.html" class="no-ch">2.2.3.2 RD-Android: Accés a les dades</a></li>
            <li><a href="2233_rdandroid_tot_lexemple.html" class="no-ch">2.2.3.3 RD-Android: Tot l'exemple</a></li>
         </ul>
         </li>
      </ul>
      </li>
      <li class="current-page-parent"><a href="23_cloud_firestore_cf.html" class="current-page-parent daddy">2.3 Cloud Firestore (CF)</a>
      <ul>
         <li id="active"><a href="231_cf_utilitzaci_des_de_lentorn_de_firebase.html" class="active no-ch">2.3.1 CF: Utilització des de l'entorn de Firebase</a></li>
         <li><a href="232_cf_utilitzaci_des_de_java.html" class="daddy">2.3.2 CF: Utilització des de Java</a>
         <ul class="other-section">
            <li><a href="2321_cfjava_connexi_des_de_java.html" class="no-ch">2.3.2.1 CF-Java: Connexió des de Java</a></li>
            <li><a href="2322_cfjava_accs_a_les_dades.html" class="no-ch">2.3.2.2 CF-Java: Accés a les dades</a></li>
            <li><a href="2323_cfjava_tot_lexemple.html" class="no-ch">2.3.2.3 CF-Java: Tot l'exemple</a></li>
         </ul>
         </li>
         <li><a href="233_cf_utilitzaci_des_dandroid.html" class="daddy">2.3.3 CF: Utilització des d'Android</a>
         <ul class="other-section">
            <li><a href="2331_cfandroid_connexi.html" class="no-ch">2.3.3.1 CF-Android: Connexió</a></li>
            <li><a href="2332_cfandroid_accs_a_les_dades.html" class="no-ch">2.3.3.2 CF-Android: Accés a les dades</a></li>
            <li><a href="2333_cfandroid_tot_lexemple.html" class="no-ch">2.3.3.3 CF-Android: Tot l'exemple</a></li>
         </ul>
         </li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="3__bases_de_dades_clauvalor.html" class="daddy">3 - Bases de Dades Clau-Valor</a>
   <ul class="other-section">
      <li><a href="31__installaci_de_redis.html" class="no-ch">3.1 - Instal·lació de Redis</a></li>
      <li><a href="32__utilitzaci_de_redis.html" class="daddy">3.2 - Utilització de Redis</a>
      <ul class="other-section">
         <li><a href="321__strings.html" class="no-ch">3.2.1 - Strings</a></li>
         <li><a href="322__keys.html" class="no-ch">3.2.2 - Keys</a></li>
         <li><a href="323__hash.html" class="no-ch">3.2.3 - Hash</a></li>
         <li><a href="324__list.html" class="no-ch">3.2.4 - List</a></li>
         <li><a href="325__set.html" class="no-ch">3.2.5 - Set</a></li>
         <li><a href="326__set_ordenat.html" class="no-ch">3.2.6 - Set ordenat</a></li>
      </ul>
      </li>
      <li><a href="33__connexi_des_de_java.html" class="no-ch">3.3 - Connexió des de Java</a></li>
   </ul>
   </li>
   <li><a href="4__mongodb.html" class="daddy">4 - MongoDB</a>
   <ul class="other-section">
      <li><a href="41__installaci_de_mongodb.html" class="no-ch">4.1 - Instal·lació de MongoDB</a></li>
      <li><a href="42__utilitzaci_de_mongodb.html" class="daddy">4.2 - Utilització de MongoDB</a>
      <ul class="other-section">
         <li><a href="421__tipus_de_dades.html" class="no-ch">4.2.1 - Tipus de dades</a></li>
         <li><a href="422__operacions_bsiques.html" class="no-ch">4.2.2 - Operacions bàsiques</a></li>
         <li><a href="423__operacions_dactualitzaci_avanada.html" class="daddy">4.2.3 - Operacions d'actualització avançada</a>
         <ul class="other-section">
            <li><a href="4231__set.html" class="no-ch">4.2.3.1 - $set</a></li>
            <li><a href="4232__unset.html" class="no-ch">4.2.3.2 - $unset</a></li>
            <li><a href="4233__rename.html" class="no-ch">4.2.3.3 - $rename</a></li>
            <li><a href="4234__inc.html" class="no-ch">4.2.3.4 - $inc</a></li>
            <li><a href="4235__elements_dun_array.html" class="no-ch">4.2.3.5 - Elements d'un array</a></li>
            <li><a href="4236__inserci_en_arrays_push.html" class="no-ch">4.2.3.6 - Inserció en Arrays: $push</a></li>
            <li><a href="4237__eliminaci_en_arrays_pop_i_pull.html" class="no-ch">4.2.3.7 - Eliminació en arrays: $pop i $pull</a></li>
            <li><a href="4238__upsert.html" class="no-ch">4.2.3.8 - Upsert</a></li>
         </ul>
         </li>
      </ul>
      </li>
      <li><a href="43__consulta_de_documents.html" class="daddy">4.3 - Consulta de documents</a>
      <ul class="other-section">
         <li><a href="431__parmetres_de_les_funcions_find_i_findone.html" class="no-ch">4.3.1 - Paràmetres de les funcions find() i findOne()</a></li>
         <li><a href="432__operadors_de_les_condicions.html" class="no-ch">4.3.2 - Operadors de les condicions</a></li>
         <li><a href="433__agregaci.html" class="no-ch">4.3.3 - Agregació</a></li>
      </ul>
      </li>
      <li><a href="44__connexi_des_de_java.html" class="no-ch">4.4 - Connexió des de Java</a></li>
   </ul>
   </li>
   <li><a href="exercicis.html" class="no-ch">Exercicis</a></li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="23_cloud_firestore_cf.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="232_cf_utilitzaci_des_de_java.html" class="next"><span>Següent<span> &raquo;</span></span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">2.3.1 CF: Utilització des de l'entorn de Firebase</h1></div>
<div class="iDevice_wrapper FreeTextIdevice" id="id207">
<div class="iDevice emphasis0">
<div id="ta207_85" class="block iDevice_content">
<p>Amb el <strong>Cloud Firestore</strong> ja podrem guardar més d'un document, i aniran agrupats en <strong>col·leccions</strong> de documents. En el següent vídeo anem a insistir en aquest aspecte dels documents, ja que és el més novedós.</p>
<p>Hem de fer la consideració de que encara que treballem sobre la mateixa Base de Dades de Firebase, <strong>des de Cloud Firestore no podrem accedir a les dades de Realtime Database, i a l'inrevés</strong>.</p>
<p style="text-align: center;"><object type="application/x-shockwave-flash" data="T7_Cloud_Firestore.swf" width="1200" height="820"><param name="src" value="T7_Cloud_Firestore.swf" /></object></p>
<p>Aquesta és l'estructura de dades que ens hem guardat en l'exemple:</p>
<p><img src="T7_2_3_1_1.png" style="display: block; margin-left: auto; margin-right: auto;" width="1238" height="1026" /></p>
<p>Observeu també que dins d'un document d'una col·lecció es pot començar una col·lecció i dins d'ella crear documents, etc. De manera que ho podem fer recursiu, i s'enriqueixen molt les possibilitats de disseny de la nostra Base de Dades. Anem a aprofundir en aquesta possibilitat de les subcol·leccions per a redissenyar les dades del nostre exemple del xat.</p>
</div>
</div>
</div>
<div class="iDevice_wrapper textIdevice" id="id194">
<div class="iDevice emphasis0" >
<div id="ta194_208_2" class="block iDevice_content">

</div>
</div>
</div>
<div class="iDevice_wrapper textIdevice" id="id195">
<div class="iDevice emphasis0" >
<div id="ta195_209_2" class="block iDevice_content">
<div class="exe-text"><p class="titolet">Subcol·leccions</p>
<p>Com es veia en l'última imatge, es poden crear subcol·leccions en un document, i aquestes col·leccions contenir a la seua vegada tots els documents que calga.</p>
<p>Aleshores ens redissenyarem el xat construït en la part de <strong>Realtime Database</strong>. En aquell moment vam posar tots els missatges del xat en un llista. Ens anava molt bé, perquè després posàvem un listener sobre la clau del xat que detectava tots els elements nous: el <strong>addChildEventListener()</strong>.</p>
<p>Tanmateix en el <strong>Cloud Firestore</strong> no tindrem el listener anterior. El que sí que disposarem és d'un listener que detecte els nous documents sobre una col·lecció. Aleshores anem a muntar cada missatge del xat com un nou document, que de moment només tindrà usuari i missatge.</p>
<p style="text-align: center;"><object width="1200" height="820" data="resources/T7_Cloud_Firestore_Subcoleccions.swf" type="application/x-shockwave-flash"><param name="src" value="T7_Cloud_Firestore_Subcoleccions.swf" /></object></p>
<p>Per tant, després de l'anterior tenim una col·lecció anomenada <strong>Xats</strong>, dins de la qual hi ha un document anomenat <strong>XatProva</strong>, dins del qual hi ha un camp anomenat <strong>nomXat </strong>i una col·lecció anomenada <strong>missatges</strong>, dins del qual hi ha dos documents, un d'ells amb nom <strong>0</strong> i un altre amb nom generat per Cloud Firestore</p>
<p style="text-align: center;"><img src="T7_2_3_1_2.png" alt="" width="1200" height="800" /></p>
<p></p></div>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="23_cloud_firestore_cf.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="232_cf_utilitzaci_des_de_java.html" class="next"><span>Següent<span> &raquo;</span></span></a>
</div>
</div>
</div>
</div>
</div>
</body></html>