<?xml version="1.0" encoding="utf-8"?>

<instance xmlns="http://www.exelearning.org/content/v0.3" reference="2" version="0.3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://www.exelearning.org/content/v0.3 content.xsd" class="exe.engine.package.Package">
 <dictionary>
  <string role="key" value="_title"></string>
  <unicode value="Accés a Dades"></unicode>
  <string role="key" value="idevices"></string>
  <list></list>
  <string role="key" value="_addPagination"></string>
  <bool value="0"></bool>
  <string role="key" value="_addSearchBox"></string>
  <bool value="0"></bool>
  <string role="key" value="_author"></string>
  <unicode value="Àlvar Serrano Calduch"></unicode>
  <string role="key" value="_backgroundImg"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextMode"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextPlace"></string>
  <unicode value=""></unicode>
  <string role="key" value="_description"></string>
  <unicode value=""></unicode>
  <string role="key" value="_docType"></string>
  <unicode value="XHTML"></unicode>
  <string role="key" value="_exportElp"></string>
  <bool value="0"></bool>
  <string role="key" value="_extraHeadContent"></string>
  <unicode value=""></unicode>
  <string role="key" value="_fieldValidationInfo"></string>
  <dictionary>
   <unicode role="key" value="all"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_title"></unicode>
     <unicode value="pp_lang"></unicode>
     <unicode value="pp_description"></unicode>
     <unicode value="pp_author"></unicode>
     <unicode value="pp_newlicense"></unicode>
    </list>
   </dictionary>
   <unicode role="key" value="procomun"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_learningResourceType"></unicode>
    </list>
    <unicode role="key" value="values_from_list"></unicode>
    <dictionary>
     <unicode role="key" value="pp_learningResourceType"></unicode>
     <list>
      <unicode value="master class"></unicode>
      <unicode value="closed exercise or problem"></unicode>
      <unicode value="real project"></unicode>
      <unicode value="didactic game"></unicode>
      <unicode value="webquest"></unicode>
      <unicode value="open problem"></unicode>
      <unicode value="simulation"></unicode>
      <unicode value="questionnaire"></unicode>
      <unicode value="conceptual map"></unicode>
     </list>
    </dictionary>
   </dictionary>
  </dictionary>
  <string role="key" value="_intendedEndUserRoleGroup"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleTutor"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_isChanged"></string>
  <bool value="0"></bool>
  <string role="key" value="_isTemplate"></string>
  <bool value="0"></bool>
  <string role="key" value="_lang"></string>
  <unicode value="ca"></unicode>
  <string role="key" value="_learningResourceType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_levelNames"></string>
  <list>
   <unicode value="Tema"></unicode>
   <unicode value="Secció"></unicode>
   <unicode value="Apartat"></unicode>
  </list>
  <string role="key" value="_name"></string>
  <unicode value="AD_Annex_Android"></unicode>
  <string role="key" value="_nextIdeviceId"></string>
  <int value="18"></int>
  <string role="key" value="_nextNodeId"></string>
  <int value="10"></int>
  <string role="key" value="_nodeIdDict"></string>
  <dictionary>
   <unicode role="key" value="0"></unicode>
   <instance class="exe.engine.node.Node" reference="4">
    <dictionary>
     <string role="key" value="_title"></string>
     <unicode value="Annex: Permanència en ANDROID"></unicode>
     <string role="key" value="idevices"></string>
     <list>
      <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="1">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Free Text"></unicode>
        <string role="key" value="_author"></string>
        <unicode value="University of Auckland"></unicode>
        <string role="key" value="_purpose"></string>
        <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
        <string role="key" value="_tip"></string>
        <string value=""></string>
        <string role="key" value="childs"></string>
        <list></list>
        <string role="key" value="content"></string>
        <instance class="exe.engine.field.TextAreaField" reference="3">
         <dictionary>
          <string role="key" value="_id"></string>
          <int value="1"></int>
          <string role="key" value="_idevice"></string>
          <reference key="1"></reference>
          <string role="key" value="_instruc"></string>
          <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
          <string role="key" value="_name"></string>
          <unicode value="Free Text"></unicode>
          <string role="key" value="anchor_names"></string>
          <list></list>
          <string role="key" value="anchors_linked_from_fields"></string>
          <dictionary></dictionary>
          <string role="key" value="buttonCaption"></string>
          <string value=""></string>
          <string role="key" value="content_w_resourcePaths"></string>
          <unicode content="true" value="&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_Portada.png&quot; width=&quot;800&quot; height=&quot;500&quot; alt=&quot;Permanencia Android&quot; /&gt;&lt;/p&gt;"></unicode>
          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
          <int value="4"></int>
          <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
          <int value="2"></int>
          <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
          <int value="3"></int>
          <string role="key" value="htmlTag"></string>
          <string value="div"></string>
          <string role="key" value="images"></string>
          <instance class="exe.engine.galleryidevice.GalleryImages">
           <dictionary>
            <string role="key" value=".listitems"></string>
            <list>
             <instance class="exe.engine.galleryidevice.GalleryImage">
              <dictionary>
               <string role="key" value="_caption"></string>
               <instance class="exe.engine.field.TextField">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <int value="5450"></int>
                 <string role="key" value="_idevice"></string>
                 <none></none>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="content"></string>
                 <string value=""></string>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                </dictionary>
               </instance>
               <string role="key" value="_id"></string>
               <unicode value="0_1.48"></unicode>
               <string role="key" value="_imageResource"></string>
               <instance class="exe.engine.resource.Resource" reference="5">
                <dictionary>
                 <string role="key" value="_idevice"></string>
                 <reference key="1"></reference>
                 <string role="key" value="_package"></string>
                 <reference key="2"></reference>
                 <string role="key" value="_storageName"></string>
                 <string value="Annex_Android_Portada.png"></string>
                 <string role="key" value="_userName"></string>
                 <string value="/tmp/tmpDNju3l/Annex_Android_Portada.png"></string>
                 <string role="key" value="checksum"></string>
                 <string value="ad06f1f9e2b0f0d08e84e70a4d7a02c3"></string>
                 <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="warningMsg"></string>
                 <string value=""></string>
                </dictionary>
               </instance>
               <string role="key" value="_parent"></string>
               <reference key="3"></reference>
               <string role="key" value="_thumbnailResource"></string>
               <none></none>
               <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
               <int value="3"></int>
               <string role="key" value="makeThumbnail"></string>
               <bool value="0"></bool>
              </dictionary>
             </instance>
            </list>
            <string role="key" value="idevice"></string>
            <reference key="3"></reference>
           </dictionary>
          </instance>
          <string role="key" value="intlinks_to_anchors"></string>
          <dictionary></dictionary>
          <string role="key" value="nextImageId"></string>
          <int value="49"></int>
          <string role="key" value="parentNode"></string>
          <reference key="4"></reference>
         </dictionary>
        </instance>
        <string role="key" value="edit"></string>
        <bool value="0"></bool>
        <string role="key" value="emphasis"></string>
        <int value="0"></int>
        <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
        <int value="7"></int>
        <string role="key" value="icon"></string>
        <string value=""></string>
        <string role="key" value="id"></string>
        <unicode value="0"></unicode>
        <string role="key" value="lastIdevice"></string>
        <bool value="0"></bool>
        <string role="key" value="parent"></string>
        <none></none>
        <string role="key" value="parentNode"></string>
        <reference key="4"></reference>
        <string role="key" value="systemResources"></string>
        <list></list>
        <string role="key" value="type"></string>
        <none></none>
        <string role="key" value="undo"></string>
        <bool value="1"></bool>
        <string role="key" value="userResources"></string>
        <list>
         <reference key="5"></reference>
        </list>
        <string role="key" value="version"></string>
        <int value="0"></int>
       </dictionary>
      </instance>
     </list>
     <string role="key" value="_id"></string>
     <unicode value="0"></unicode>
     <string role="key" value="_package"></string>
     <reference key="2"></reference>
     <string role="key" value="anchor_fields"></string>
     <list></list>
     <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
     <int value="2"></int>
     <string role="key" value="exportType"></string>
     <string value="website"></string>
     <string role="key" value="last_full_node_path"></string>
     <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID"></string>
     <string role="key" value="parent"></string>
     <none></none>
     <string role="key" value="top_anchors_linked_from_fields"></string>
     <list></list>
     <string role="key" value="children"></string>
     <list>
      <instance class="exe.engine.node.Node" reference="8">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="1 - Introducció"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="6">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="7">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="6"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;En un principi, en l'entorn d'Android la programació pot ser en Java o en Kotlin.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;En el cas de &lt;strong&gt;Java&lt;/strong&gt;, tot el que fem en Java ho podrem fer també en Android.&lt;/li&gt;
&lt;li&gt;En el cas de &lt;strong&gt;Kotlin&lt;/strong&gt;, com que les classes de Java són importables des de Kotlin, també podrem fer el que ja féiem, acoplant les coses al llenguatge, això sí&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Però la realitat és que sempre canvien les coses un poc, i per tant no podrem fer les coses exactament igual, sobretot amb la Base de Dades SQLite. A més hi haurà vegades que Android ens proporcionarà eines, classes, que ens poden facilitar les coses, com veurem també en els fitxers.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Estudiarem un poc tant la permanència en fitxers com la permanència en Bases de Dades. En aquest últim cas, farem menció especial de la Base de Dades SQLite, que per ser tan lleugera és una clara candidata a utilitzar-la per a guardar la Base de Dades en el dispositiu mòbil.&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="7"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="8"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="1"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="8"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="1"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:1%20-%20Introducci%C3%B3"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="11">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="2 - Permanència en fitxers"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="9">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="10">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="9"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;En el cas dels fitxers, el comportament en Android és similar que en Java. Per tant ho tenim fàcil.&lt;/p&gt;
&lt;p&gt;Insistirem en algun detall i mencionarem alguna utilitat.&lt;/p&gt;
&lt;p&gt;Per a practicar, ho farem sobre el següent exemple, en el qual senzillament col·locarem en un &lt;strong&gt;EditText&lt;/strong&gt; el contingut d'un fitxer de text. Encara que només anem a mostrar el contingut del fitxer, ho fem sobre un &lt;strong&gt;EditText&lt;/strong&gt; i no un &lt;strong&gt;TextView&lt;/strong&gt; per a poder després reutilitzar-lo en un exemple un poc més complex.&lt;/p&gt;
&lt;p&gt;Aquest exemple el desenvoluparem tant amb el llenguatge &lt;strong&gt;Java&lt;/strong&gt; com en &lt;strong&gt;Kotlin&lt;/strong&gt;. No cal que ho feu en els dos. Podeu triar només un. Però anem a fer l'exemple compatible per si voleu fer-lo en els dos.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;JAVA: &lt;/strong&gt;Crearem un projecte nou, anomenat &lt;strong&gt;EditorTextJava&lt;/strong&gt;. Per a poder copiar sense problemes els programes posteriors, posarem el domini &lt;strong&gt;example.com &lt;/strong&gt;, però cuideu que el paquet es diga &lt;strong&gt;com.example.editortext&lt;/strong&gt; (no &lt;strong&gt;com.example.editortextjava&lt;/strong&gt;, com us suggerirà en principi). Si no heu canviat el nom del paquet, cuideu que quan feu referència al fitxer, tingueu la ruta considerant el vostre nom de paquet.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;KOTLIN: &lt;/strong&gt;Crearem un projecte nou, anomenat &lt;strong&gt;EditorTextKotlin&lt;/strong&gt;. Per a poder copiar sense problemes els programes posteriors, posarem el domini &lt;strong&gt;example.com &lt;/strong&gt;, però cuideu que el paquet es diga &lt;strong&gt;com.example.editortext&lt;/strong&gt; (no &lt;strong&gt;com.example.editortextkotlin&lt;/strong&gt;, com us suggerirà en principi). Si no heu canviat el nom del paquet, cuideu que quan feu referència al fitxer, tingueu la ruta considerant el vostre nom de paquet.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;En l'&lt;strong&gt;activity_main.xml&lt;/strong&gt;, només posem el &lt;strong&gt;EditText&lt;/strong&gt;, que ocuparà tota la pantalla, i el text no estarà centrat, sinó cap amunt. Serà idèntic tant per la varsió en &lt;strong&gt;Java&lt;/strong&gt; com en la de &lt;strong&gt;Kotlin&lt;/strong&gt;.&lt;/p&gt;
&lt;div&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;EditText&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:inputType&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;textMultiLine&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:gravity&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;top&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;El programa principal, de moment no té res, així que el seu esquelet és el següent. Observeu que en Java hem incorporat el &lt;strong&gt;EditText&lt;/strong&gt; per a poder fer referència a ell. En kotlin no fa falta&lt;/p&gt;
&lt;table style=&quot;width: 100%;&quot; border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 50%; text-align: center;&quot;&gt;&lt;strong&gt;JAVA&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&quot;width: 50%; text-align: center;&quot;&gt;&lt;strong&gt;KOTLIN&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 50%;&quot;&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;pre&gt;&lt;code&gt;package com.example.editortext;

import androidx.appcompat.app.AppCompatActivity;
import android.os.Bundle;
import android.widget.EditText;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final EditText text = (EditText) findViewById(R.id.text);
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;td style=&quot;width: 50%;&quot;&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package com.example.editortext

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import kotlinx.android.synthetic.main.activity_main.*

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;On únicament fem referència a l'&lt;strong&gt;EditText&lt;/strong&gt; per a poder utilitzar-lo posteriorment.&lt;/p&gt;
&lt;p&gt;Podeu executar-lo per veure el seu aspecte.&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="10"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="11"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="2"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="11"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="12">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="13">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="12"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Classes de Java&lt;/p&gt;
&lt;p&gt;Podem utilitzar qualsevol de les classes de flux de dades per a accedir al fitxer, però en aquelles en les quals posem el nom del fitxer, és molt convenient posar tota la ruta, i evidentment que es tinguen permisos en el directori. Una bona idea, si no s'han de compartir, és posar el fitxer en la zona reservada per a l'aplicació que està en:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;/data/data/&lt;em&gt;paquet_de_la_aplicació&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I dins d'aquesta ruta és una costum utilitzar un altre directori per als fitxers anomenat &lt;strong&gt;files&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Així per exemple, si la nostra aplicació s'ha creat en un paquet anomenat &lt;strong&gt;com.example&lt;/strong&gt;.&lt;strong&gt;editortext&lt;/strong&gt; i volem accedir al fitxer &lt;strong&gt;notes.txt&lt;/strong&gt;, la ruta recomanada del fitxer seria:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;/data/data/&lt;strong&gt;com.example.&lt;/strong&gt;editortext/files/notes.txt&lt;/p&gt;
&lt;p&gt;És a dir, que si per exemple volem accedir a un fitxer de text (per tant ens convé &lt;em&gt;&lt;strong&gt;Reader&lt;/strong&gt;&lt;/em&gt;), i després volem decorar-lo amb &lt;em&gt;&lt;strong&gt;BufferedReader&lt;/strong&gt;&lt;/em&gt; per legir línia a línia, posaríem:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;BufferedReader f = new BufferedReader(new FileReader(&quot;/data/data/&lt;strong&gt;com.example.&lt;/strong&gt;editortext/files/notes.txt&quot;));&lt;/p&gt;
&lt;p&gt;I si el que volem és escriure en ell (&lt;em&gt;&lt;strong&gt;FileWriter&lt;/strong&gt;&lt;/em&gt;), però afegint al final i línia a línia (&lt;em&gt;&lt;strong&gt;PrintWriter&lt;/strong&gt;&lt;/em&gt;):&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;PrintWriter f = new PrintWriter(new FileWriter(&lt;span&gt;&quot;/data/data/&lt;/span&gt;&lt;span&gt;&lt;strong&gt;com.example.&lt;/strong&gt;editortext/files/notes.txt&quot;&lt;/span&gt;,true));&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Si en canvi volem accedir a un fitxer binari (&lt;em&gt;&lt;strong&gt;InputStream&lt;/strong&gt;&lt;/em&gt;), i llegir diferents tipus de dades (&lt;em&gt;&lt;strong&gt;DataInputStream&lt;/strong&gt;&lt;/em&gt;):&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;DataInputStream f = new DataInputStream(new FileInputStream(&quot;/data/data/&lt;span&gt;&lt;span&gt;&lt;strong&gt;com.example.&lt;/strong&gt;editortext&lt;/span&gt;&lt;/span&gt;/files/fitxer.dat&quot;));&lt;/p&gt;
&lt;p&gt; I per a escriure en ell diferents tipus de dades:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;DataOutputStream f = new DataOututStream(new FileOutputStream(&quot;/data/data/&lt;strong&gt;com.example.&lt;/strong&gt;editortext/files/fitxer.dat&quot;));&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Per a més comoditat hem utilitzat en aquestos apunts una versió anterior d'Android, concretament la 5.1 (API 22). A partir de la API 23 és necessari donar expressament el permís d'accedir en el &lt;strong&gt;AndroidManifest.xml&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong class=&quot;codi&quot;&gt;&amp;lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&amp;gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;En l'exemple inicial, per poder veure que accedim a un fitxer, podríem col·locar-lo a mà prèviament d'aquesta manera:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Editem el fitxer &lt;strong&gt;notes.txt&lt;/strong&gt; des de qualsevol editor de textos (per exemple Gedit o Notepad) posant el contingut que vulgueu.&lt;/li&gt;
&lt;li&gt;Posteriorment des de Android Studio anem a &lt;strong&gt;View -&amp;gt; Tool Windows -&amp;gt; Device File Explorer&lt;/strong&gt;. Ha d'estar el simulador en marxa.&lt;/li&gt;
&lt;li&gt;A la dreta ens apareixerà una finestra per explorar pel dispositiu. Ens situem en &lt;strong&gt;/data/data/&lt;/strong&gt;&lt;strong&gt;com.example.&lt;/strong&gt;&lt;strong&gt;editortext&lt;/strong&gt; (o el nom del paquet que hem posat).&lt;strong&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Si ja havíem executat el projecte, existirà el directori anterior, i el seu contingut serà únicament els subdirectoris &lt;strong&gt;cache&lt;/strong&gt; i &lt;strong&gt;code_cache&lt;/strong&gt;, segurament. Potser existesca el directori &lt;strong&gt;files&lt;/strong&gt;, o potser no.&lt;/li&gt;
&lt;li&gt;Si no existeix el directori &lt;strong&gt;files&lt;/strong&gt;, el creem dins de &lt;strong&gt;/data/data&lt;/strong&gt;&lt;strong&gt;/com.example.&lt;/strong&gt;&lt;strong&gt;editortext&lt;/strong&gt; , amb el botó de la dreta &lt;strong&gt;New --&amp;gt; Directory &lt;/strong&gt;, situats en el directori anterior.&lt;/li&gt;
&lt;li&gt;Estant situats en &lt;strong&gt;files&lt;/strong&gt;, pugem el fitxer &lt;strong&gt;notes.txt&lt;/strong&gt; amb el botó de la dreta i opció &lt;strong&gt;Upload&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Nota&lt;/p&gt;
&lt;p&gt;En versions anteriors de Adroid Studio es feia des de &lt;strong&gt;Tools -&amp;gt; Andoid -&amp;gt; Andoid Device Monitor&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Ara modifiquem el programeta inicial, fent que carregue el contingut del fitxer al EditText.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JAVA&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;pre&gt;&lt;code&gt;package com.example.editortext;

import androidx.appcompat.app.AppCompatActivity;
import android.os.Bundle;
import android.widget.EditText;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final EditText text = (EditText) findViewById(R.id.text);
        try {
            BufferedReader f = new BufferedReader(new FileReader(&quot;/data/data/com.example.editortext/files/notes.txt&quot;));
            String cont = &quot;&quot;;
            String linia = f.readLine();
            while (linia!=null) {
                cont += linia + &quot;\n&quot;;
                linia=f.readLine();
            }
            text.setText(cont);
            f.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;KOTLIN&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package com.example.editortext

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import kotlinx.android.synthetic.main.activity_main.*
import java.io.BufferedReader
import java.io.FileReader

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        val f = BufferedReader(FileReader(&quot;/data/data/com.example.editortext/files/notes.txt&quot;))
        var cont = &quot;&quot;
        var linia = f.readLine()
        while (linia != null) {
            cont += linia + &quot;\n&quot;
            linia = f.readLine()
        }
        text.setText(cont)
        f.close()
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Aquest podria ser el resultat:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_2_1.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;367&quot; height=&quot;609&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El següent vídeo mostra tot el procés, incloent la pujada del fitxer notes.txt al dispositiu.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;object type=&quot;application/x-shockwave-flash&quot; data=&quot;resources/AndroidDeviceFileExplorer.swf&quot; width=&quot;1000&quot; height=&quot;720&quot;&gt;&lt;param name=&quot;src&quot; value=&quot;resources/AndroidDeviceFileExplorer.swf&quot; /&gt;&lt;/object&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="5454"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="8_85.42"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="14">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="12"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="Annex_Android_2_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpDNju3l/Annex_Android_2_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="ebd1cb8664a0a500a9b668ab81c93036"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="13"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="5456"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="8_85.43"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="15">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="12"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="AndroidDeviceFileExplorer.swf"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpDNju3l/AndroidDeviceFileExplorer.swf"></string>
                    <string role="key" value="checksum"></string>
                    <string value="376551ba609e108483507157a6390318"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="13"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="13"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="44"></int>
             <string role="key" value="parentNode"></string>
             <reference key="11"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="8"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="11"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="14"></reference>
            <reference key="15"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="16">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="17">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="16"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Mètodes propis: openFileInput() i openFileOutput()&lt;/p&gt;
&lt;p&gt;Android ens proporciona uns mètodes que ens poden fer un poc més còmode l'accés al fitxer. Sobretot ho mencionem perquè la seua utilització està molt estesa.&lt;/p&gt;
&lt;p&gt;Es tracta de  &lt;strong&gt;openFileIntput&lt;/strong&gt;&lt;strong&gt; i openFileOutput&lt;/strong&gt;, ambdós estan en &lt;strong&gt;android.content.ContextWrapper&lt;/strong&gt;. La seua sintaxi és:&lt;/p&gt;
&lt;p class=&quot;code&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span style=&quot;font-size: large;&quot;&gt;public FileInputStream &lt;strong&gt;openFileInput &lt;/strong&gt;(String &lt;em&gt;nom&lt;/em&gt;)&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;code&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span style=&quot;font-size: large;&quot;&gt;&lt;span&gt;public FileOutputStream &lt;strong&gt;openFileOutput &lt;/strong&gt;(String &lt;em&gt;nom&lt;/em&gt;, int &lt;em&gt;mode&lt;/em&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Com veieu, en el primer cas accepta en un string el nom d'un fitxer i torna un &lt;strong&gt;FileInputStream&lt;/strong&gt;. Amb aquest &lt;strong&gt;InputStream&lt;/strong&gt; ja podem fer el que ens convinga: decorar-lo amb un &lt;strong&gt;&lt;em&gt;ObjectInputStream&lt;/em&gt;&lt;/strong&gt; o &lt;strong&gt;&lt;em&gt;DataInputStream&lt;/em&gt;&lt;/strong&gt;, o convertir-lo a &lt;em&gt;Reader&lt;/em&gt; amb &lt;em&gt;&lt;strong&gt;InputStreamReader&lt;/strong&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;En el segon cas torna un &lt;strong&gt;FileOutputStream&lt;/strong&gt; i accepta un segon paràmetre, a banda del nom del fitxer també posarem el mode d'obertura. Els diferents modes són:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MODE_PRIVATE&lt;/strong&gt; (0): és el mode per defecte, i si ja existeix el fitxer, matxacarà el seu contingut&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MODE_APPEND&lt;/strong&gt;: si ja existeix, no matxacarà el contingut, sinó que introduirà després.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MODE_WORLD_READABLE&lt;/strong&gt; i &lt;strong&gt;MODE_WORLD_WRITABLE&lt;/strong&gt; serveixen per a controlar els permisos. En principi no els utilitzarem.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Es pot comprovar que senzillament és un pas previ abans de tenir el InputStream o OutputStream. &lt;strong&gt;Per defecte&lt;/strong&gt;, si no posem la ruta del fitxer, aquest estarà en l'entorn del paquet de l'aplicació més concretament en el directori &lt;strong&gt;files&lt;/strong&gt;:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;/data/data/&lt;em&gt;paquet_de_la_aplicació&lt;/em&gt;/files&lt;/p&gt;
&lt;p&gt;Com ja és per defecte, si el volem ahí (que serà el més habitual), només haurem de posar el nom del fitxer. En el mateix exemple anterior, en què volíem al final un &lt;em&gt;BufferedReader&lt;/em&gt;, haurem de convertir el &lt;em&gt;InputStream&lt;/em&gt; que ens dóna &lt;em&gt;openFileInput&lt;/em&gt; en un &lt;em&gt;Reader&lt;/em&gt;, amb &lt;em&gt;InputStreamReader&lt;/em&gt;:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;BufferedReader f = new BufferedReader(new InputStreamReader(openFileInput(&quot;fitxer.txt&quot;)));&lt;/p&gt;
&lt;p&gt;I per a escriure, també com en l'exemple anterior:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;PrintWriter f = new PrintWriter(new OutputStreamWriter(openFileOutput(&quot;fitxer.txt&quot;,MODE_APPEND)));&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;I els exemples d'accés a fitxers binaris, en cas de lectura:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;DataInputStream f = new DataInputStream(openFileInput(&quot;fitxer.dat&quot;));&lt;/p&gt;
&lt;p&gt;i en cas d'escriptura (en aquest cas matxacant el possible contingut anterior):&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;DataOutputStream f = new DataOutputStream(openFileOutput(&quot;fitxer.dat&quot;,MODE_PRIVATE));&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;En el cas de l'exemple que estem utilitzant, podríem haver substituït la línia:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;BufferedReader f = new BufferedReader(new FileReader(&quot;/data/data/com.example.editortext/files/notes.txt&quot;));&lt;/p&gt;
&lt;p&gt;Per aquesta altra:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;BufferedReader f = new BufferedReader(new InputStreamReader(openFileInput(&quot;notes.txt&quot;)));&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="17"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="11"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="9"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="11"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="18">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_editionFolder"></string>
           <string value="text/edition/"></string>
           <string role="key" value="_editionResources"></string>
           <list>
            <string value="text.js"></string>
           </list>
           <string role="key" value="_exportFolder"></string>
           <none></none>
           <string role="key" value="_exportResources"></string>
           <list></list>
           <string role="key" value="_iDeviceDir"></string>
           <string value="text"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="text"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="19">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="51_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="18"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;KOTLIN&lt;/p&gt;
&lt;p&gt;En el cas de &lt;strong&gt;Kotlin&lt;/strong&gt; les coses queden molt més senzilles i còmodes. Encara que utilitzem les mateixes classes que en Java, aquestes tindran uns iteradors que faran les coses molt senzilles. També té mètodes per a poder llegir el fitxer sencer&lt;/p&gt;
&lt;h3&gt;Alguns mètodes de File:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;appendBytes&lt;/strong&gt;: afegeix un array de bytes al final del fitxer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;appendText&lt;/strong&gt;: afegeix un string al final del fitxer, podent especificar fins i tot la codificació&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;inputStream, bufferedReader, bufferedWriter, ...&lt;/strong&gt;: torna directament la classe especificada (sense haver de passar per un FileReader en el cas de BufferedReader)&lt;strong&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;copyTo&lt;/strong&gt;: copia el fitxer en un altre&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;copyRecursively&lt;/strong&gt;: copia el File i tots els seus possibles descendents&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;forEachLine&lt;/strong&gt;: agafa cada línia del fitxer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;readBytes&lt;/strong&gt;: llig de cop tot el fitxer i ho guarda en un array de bytes&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;readLines:&lt;/strong&gt; llig totes les línies del fitxer i les guarda en un List&lt;string&gt;&lt;/string&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;readText&lt;/strong&gt;: llig de cop tot el fitxer i ho guarda en un string&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;writeBytes&lt;/strong&gt;: escriu tot l'array de bytes&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;writeText&lt;/strong&gt;: escriu el string, fins i tot especificant la codificació&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Alguns dels mètodes són d'extremada utilitat, fent que la lectura i tractament del fitxer ens ocupe una única línia.&lt;/p&gt;
&lt;p&gt;Així per exemple, en l'exemple anterior, podem substituir les següents sentències:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;f = BufferedReader(FileReader(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/data/data/com.example.editortext/files/notes.txt&quot;&lt;/span&gt;))&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;var &lt;/span&gt;cont = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;var &lt;/span&gt;linia = f.readLine()&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;while &lt;/span&gt;(linia != &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;/span&gt;) {&lt;br /&gt;    cont += linia + &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;linia = f.readLine()&lt;br /&gt;}&lt;br /&gt;text.setText(cont)&lt;br /&gt;f.close()&lt;/pre&gt;
&lt;p&gt;Per aquestes:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;var &lt;/span&gt;cont = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&quot;&lt;br /&gt;&lt;/span&gt;File(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/data/data/com.example.editortext/files/notes.txt&quot;&lt;/span&gt;).&lt;span style=&quot;font-style: italic;&quot;&gt;forEachLine&lt;/span&gt;&lt;span style=&quot;color: #808080;&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;{ &lt;/span&gt;cont += &lt;span style=&quot;font-weight: bold;&quot;&gt;it&lt;/span&gt;+&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;br /&gt;&lt;/span&gt;text.setText(cont)&lt;/pre&gt;
&lt;p&gt;on hem agafat línia a línia, i per cadascuna traem el seu contingut més la baixada de línia.&lt;/p&gt;
&lt;p&gt;I encara més curt i còmode si llegim de cop tot el fitxer:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;text.setText(File(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/data/data/com.example.editortext/files/notes.txt&quot;&lt;/span&gt;).&lt;span style=&quot;font-style: italic;&quot;&gt;readText&lt;/span&gt;())&lt;/pre&gt;
&lt;p&gt;De manera que el programa quedaria així. Com veieu molt més còmode:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;package &lt;/span&gt;com.example.editortext&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.appcompat.app.AppCompatActivity&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.os.Bundle&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;kotlinx.android.synthetic.main.activity_main.*&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;java.io.File&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;MainActivity : AppCompatActivity() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreate(savedInstanceState: Bundle?) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)&lt;br /&gt;        setContentView(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;activity_main&lt;/span&gt;)&lt;br /&gt;        text.setText(File(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/data/data/com.example.editortext/files/notes.txt&quot;&lt;/span&gt;).&lt;span style=&quot;font-style: italic;&quot;&gt;readText&lt;/span&gt;())&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="19"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="11"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="17"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="11"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="2"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:2%20-%20Perman%C3%A8ncia%20en%20fitxers"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="22">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="2.1 - Exemple"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="20">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="21">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="20"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;Anem a treballar sobre un exercici senzill, ampliant el que hem fet fins ara. Mostrarem un EditText, però ara podrem fer anotacions que es podran guardar en un únic fitxer anomenat &lt;strong&gt;notes.txt&lt;/strong&gt;, i així no caldrà demanar ni el nom del fitxer ni navegar.&lt;/p&gt;
&lt;p&gt;Hi haurà tres botons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Obrir&lt;/strong&gt;: obrirà el contingut del fitxer &lt;strong&gt;notes.txt &lt;/strong&gt;i el mostrarà en el EditText&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Guardar&lt;/strong&gt;: guardarà el contingut del EditText en el fitxer &lt;strong&gt;notes.txt&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Esborrar&lt;/strong&gt;: únicament esborrarà el contingut del EditText.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Aquest podria ser l'aspecte:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_2_1_1.png&quot; style=&quot;border: 1px solid black;&quot; height=&quot;611&quot; width=&quot;369&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;El &lt;strong&gt;Activity_Main.xml&lt;/strong&gt;: ara contindrà, a banda de l'&lt;strong&gt;EditText&lt;/strong&gt;, un &lt;strong&gt;LinearLayout&lt;/strong&gt; horitzontal situat a la banda de baix, i que contindrà els 3 botons.&lt;strong&gt;&lt;br /&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;&lt;br /&gt;&amp;lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;    android:id=&quot;@+id/activity_main&quot;&lt;br /&gt;    android:layout_width=&quot;match_parent&quot;&lt;br /&gt;    android:layout_height=&quot;match_parent&quot;&lt;br /&gt;    tools:context=&quot;com.example.editortext.MainActivity&quot;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;EditText&lt;br /&gt;        android:text=&quot;&quot;&lt;br /&gt;        android:id=&quot;@+id/text&quot;&lt;br /&gt;        android:layout_width=&quot;match_parent&quot;&lt;br /&gt;        android:layout_height=&quot;match_parent&quot;&lt;br /&gt;        android:inputType=&quot;textMultiLine&quot;&lt;br /&gt;        android:gravity=&quot;top&quot; /&amp;gt;&lt;br /&gt;    &amp;lt;LinearLayout&lt;br /&gt;        android:orientation=&quot;horizontal&quot;&lt;br /&gt;        android:layout_width=&quot;wrap_content&quot;&lt;br /&gt;        android:layout_height=&quot;wrap_content&quot;&lt;br /&gt;        android:layout_alignParentBottom=&quot;true&quot;&lt;br /&gt;        android:gravity=&quot;center_horizontal&quot;&lt;br /&gt;        android:layout_centerHorizontal=&quot;true&quot;&amp;gt;&lt;br /&gt;        &amp;lt;Button&lt;br /&gt;            android:layout_width=&quot;wrap_content&quot;&lt;br /&gt;            android:layout_height=&quot;wrap_content&quot;&lt;br /&gt;            android:text=&quot;Obrir&quot;&lt;br /&gt;            android:id=&quot;@+id/obrir&quot; /&amp;gt;&lt;br /&gt;        &amp;lt;Button&lt;br /&gt;            android:layout_width=&quot;wrap_content&quot;&lt;br /&gt;            android:layout_height=&quot;wrap_content&quot;&lt;br /&gt;            android:text=&quot;Guardar&quot;&lt;br /&gt;            android:id=&quot;@+id/guardar&quot; /&amp;gt;&lt;br /&gt;        &amp;lt;Button&lt;br /&gt;            android:layout_width=&quot;wrap_content&quot;&lt;br /&gt;            android:layout_height=&quot;wrap_content&quot;&lt;br /&gt;            android:text=&quot;Esborrar&quot;&lt;br /&gt;            android:id=&quot;@+id/esborrar&quot; /&amp;gt;&lt;br /&gt;    &amp;lt;/LinearLayout&amp;gt;&lt;br /&gt;&amp;lt;/RelativeLayout&amp;gt;&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;En el programa principal, a banda de col·locar les coses, ens definim la variable &lt;strong&gt;PATH&lt;/strong&gt; que contindrà la ruta on volem col·locar el fitxer, i també el tractament dels 3 botons.&lt;/p&gt;
&lt;p&gt;Podeu comprovar que mirem primer l'existència de la ruta (podria ser que no existira el subdirectori &lt;strong&gt;files&lt;/strong&gt;, i aleshores el crearíem) i després es llig el fitxer línia a línia (amb un BufferedReader) i es col·loca en el EditText.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;package com.example.editortext;&lt;br /&gt;&lt;br /&gt;import android.support.v7.app.AppCompatActivity;&lt;br /&gt;import android.os.Bundle;&lt;br /&gt;import android.view.View;&lt;br /&gt;import android.widget.Button;&lt;br /&gt;import android.widget.EditText;&lt;br /&gt;&lt;br /&gt;import java.io.BufferedReader;&lt;br /&gt;import java.io.File;&lt;br /&gt;import java.io.FileNotFoundException;&lt;br /&gt;import java.io.FileReader;&lt;br /&gt;import java.io.FileWriter;&lt;br /&gt;import java.io.IOException;&lt;br /&gt;import java.io.PrintWriter;&lt;br /&gt;&lt;br /&gt;public class MainActivity extends AppCompatActivity {&lt;br /&gt;&lt;br /&gt;    String PATH = null;&lt;br /&gt;    @Override&lt;br /&gt;    protected void onCreate(Bundle savedInstanceState) {&lt;br /&gt;        super.onCreate(savedInstanceState);&lt;br /&gt;        setContentView(R.layout.activity_main);&lt;br /&gt;        PATH = &quot;/data/data/&quot; + getPackageName() + &quot;/files&quot;;&lt;br /&gt;        final EditText text = (EditText) findViewById(R.id.text);&lt;br /&gt;        Button button1= (Button) findViewById(R.id.obrir);&lt;br /&gt;        button1.setOnClickListener(new View.OnClickListener() {&lt;br /&gt;            @Override&lt;br /&gt;            public void onClick(View v) {&lt;br /&gt;                try {&lt;br /&gt;                    File dir = new File(PATH);&lt;br /&gt;                    if (!dir.exists())&lt;br /&gt;                        dir.mkdir();&lt;br /&gt;                    BufferedReader f = new BufferedReader(new FileReader(new File(dir,&quot;notes.txt&quot;)));&lt;br /&gt;                    String cont = &quot;&quot;;&lt;br /&gt;                    String linia = f.readLine();&lt;br /&gt;                    while (linia!=null) {&lt;br /&gt;                        cont += linia + &quot;\n&quot;;&lt;br /&gt;                        linia=f.readLine();&lt;br /&gt;                    }&lt;br /&gt;                    text.setText(cont);&lt;br /&gt;                    f.close();&lt;br /&gt;&lt;br /&gt;                } catch (FileNotFoundException e) {&lt;br /&gt;                    e.printStackTrace();&lt;br /&gt;                } catch (IOException e) {&lt;br /&gt;                    e.printStackTrace();&lt;br /&gt;                }&lt;br /&gt;            }&lt;br /&gt;        });&lt;br /&gt;        Button button2= (Button) findViewById(R.id.guardar);&lt;br /&gt;        button2.setOnClickListener(new View.OnClickListener() {&lt;br /&gt;            @Override&lt;br /&gt;            public void onClick(View v) {&lt;br /&gt;                try {&lt;br /&gt;                    File dir = new File(PATH);&lt;br /&gt;                    if (!dir.exists())&lt;br /&gt;                        dir.mkdir();&lt;br /&gt;                    PrintWriter f = new PrintWriter(new FileWriter(new File(dir,&quot;notes.txt&quot;)));&lt;br /&gt;                    f.write(text.getText().toString());&lt;br /&gt;                    f.close();&lt;br /&gt;&lt;br /&gt;                } catch (FileNotFoundException e) {&lt;br /&gt;                    e.printStackTrace();&lt;br /&gt;                } catch (IOException e) {&lt;br /&gt;                    e.printStackTrace();&lt;br /&gt;                }&lt;br /&gt;            }&lt;br /&gt;        });&lt;br /&gt;        Button button3= (Button) findViewById(R.id.esborrar);&lt;br /&gt;        button3.setOnClickListener(new View.OnClickListener() {&lt;br /&gt;            @Override&lt;br /&gt;            public void onClick(View v) {&lt;br /&gt;                text.setText(&quot;&quot;);&lt;br /&gt;            }&lt;br /&gt;        });&lt;br /&gt;    }&lt;br /&gt;}&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="5453"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="3_1.47"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="23">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="20"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="Annex_Android_2_1_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpDNju3l/Annex_Android_2_1_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="7f6a1f14a1413f35fe8d24e65397a590"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="21"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="21"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="48"></int>
                <string role="key" value="parentNode"></string>
                <reference key="22"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="3"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="22"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="23"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="3"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:2%20-%20Perman%C3%A8ncia%20en%20fitxers:2.1%20-%20Exemple"></string>
           <string role="key" value="parent"></string>
           <reference key="11"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="26">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="3 - Permanència en BD Relacionals"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="24">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="25">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="24"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;La permanència en Bases de Dades Relacionals la dividirem en dues parts, depenent on fem la connexió, és a dir, on estiga el Sistema Gestor de Bases de Dades.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Connexió remota&lt;/strong&gt;: la Base de Dades no està en la mateixa màquina, és a dir, no està en el dispositiu mòbil. Serà el tipus de connexió que faríem si connectàrem a Oracle, PostgreSQL o MySQL, ja que evidentment no instal·larem en el dispositiu mòbil aquestos SGBD.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Connexió local&lt;/strong&gt;: la Base de Dades està en el mateix dispositiu mòbil. És el cas de SQLite, que ja ve instal·lat per defecte en Android, per ser molt lleuger. Aleshores la Base de Dades estarà en el mateix dispositiu.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;En contra del que cabria esperar, la primera connexió és més fàcil, ja que les classes que hem vist per a Java ens serviran per a Android. Només haurem d'anar amb compte de permetre la connexió a Internet a l'aplicació i evidentment incloure en el projecte la classe corresponent al Driver JDBC del SGBD triat.&lt;/p&gt;
&lt;p&gt;En canvi, la connexió local resulta ser un poc més complicada, ja que no podrem utilitzar còmodament el driver que utilitzàvem per a SQLite, i ens obligarà a canviar les coses.&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="25"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="26"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="4"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="26"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="4"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:3%20-%20Perman%C3%A8ncia%20en%20BD%20Relacionals"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="29">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.1 - Connexió remota"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="27">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="28">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="27"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;Utilitzarem les mateixes classes que en Java. És a dir, el driver JDBC ens funcionarà bé, i tot serà igual que allà. Tan sols haurem de preocupar-nos de donar permís a l'aplicació de connectar-se a Internet, i evidentment acoplar-lo per a poder visualitzar les coses en Android.&lt;/p&gt;
&lt;p&gt;La veurem per a PostgreSQL, però seria senzillíssim fer-la per a Oracle o MySQL, senzillament canviant el driver JDBC i en tot cas la consulta d'accés.&lt;/p&gt;
&lt;p&gt;L'exemple que veurem serà molt senzill: ens connectem a una Base de Dades, consultem una taula i intentem veure el contingut en un EditText multilínia. Anirem comentant i solucionant els problemes que poden sorgir.&lt;/p&gt;
&lt;p&gt;El primer que farem serà dissenyar l'aplicació, dissenyar el layout, per a poder contenir les dades. Només ens plantegem un EditText per a visualitzar les dades.&lt;/p&gt;
&lt;p&gt;Sobre un projecte Android nou, anomenat &lt;strong&gt;ConnexioPostgreSQL&lt;/strong&gt;. Per a poder copiar sense problemes els programes posteriors, posarem el domini &lt;strong&gt;example.com&lt;/strong&gt;, i així el paquet es dirà &lt;strong&gt;com.example.connexiopostgresql&lt;/strong&gt;. Podeu copiar el layout &lt;strong&gt;activity_main.xml&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;&amp;lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&lt;/div&gt;
&lt;div&gt;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&lt;/div&gt;
&lt;div&gt;    android:layout_width=&quot;match_parent&quot;&lt;/div&gt;
&lt;div&gt;    android:layout_height=&quot;match_parent&quot;&lt;/div&gt;
&lt;div&gt;    tools:context=&quot;.MainActivity&quot; &amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;    &amp;lt;EditText
&lt;div&gt;        android:text=&quot;&quot;&lt;/div&gt;
&lt;div&gt;        android:id=&quot;@+id/text&quot;&lt;/div&gt;
&lt;div&gt;        android:layout_width=&quot;match_parent&quot;&lt;/div&gt;
&lt;div&gt;        android:layout_height=&quot;match_parent&quot;&lt;/div&gt;
&lt;div&gt;        android:inputType=&quot;textMultiLine&quot;&lt;/div&gt;
&lt;div&gt;        android:gravity=&quot;top&quot; /&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&amp;lt;/RelativeLayout&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Es pot observar que únicament hem muntat un EditText  amb el nom &lt;strong&gt;text&lt;/strong&gt;, que s'ajusta a tota la pantalla, i que és multilínia.&lt;/p&gt;
&lt;p&gt;El programa és senzill. Només hauríem de connectar, executar la sentència (com és un SELECT serà &lt;strong&gt;executeQuery&lt;/strong&gt; que retorna un &lt;strong&gt;ResultSet&lt;/strong&gt;), recórrer el ResultSet i anar afegint al EditText.&lt;/p&gt;
&lt;p&gt;Tenim, però, una complicació. Des de la versió 3 d'Android no es permet una connexió a Internet des del programa principal, i per tant haurem de muntar un &lt;strong&gt;thread&lt;/strong&gt; on es faça la connexió a PostgreSQL. Podríem estar temptats de fer-lo tot en el thread fill, però tenim una altra complicació, i és que només es poden canviar els controls del layout principal des del programa principal. És a dir, que el &lt;strong&gt;EditText&lt;/strong&gt; només es pot canviar des del &lt;strong&gt;MainActivity&lt;/strong&gt; (si no li hem canviat el nom, es dirà així).&lt;/p&gt;
&lt;p&gt;La solució serà omplir en el thread fill una estructura de dades, per exemple un &lt;strong&gt;ArrayList&lt;/strong&gt; de &lt;strong&gt;Strings&lt;/strong&gt;. I en el programa principal esperar a l'execució del thread fill, i després posar tot el ArrayList al EditText&lt;/p&gt;
&lt;h2&gt;JAVA&lt;/h2&gt;
&lt;div class=&quot;codi&quot;&gt;package com.example.connexiopostgresql;&lt;br /&gt;&lt;br /&gt;import java.sql.Connection;&lt;br /&gt;import java.sql.DriverManager;&lt;br /&gt;import java.sql.ResultSet;&lt;br /&gt;import java.sql.SQLException;&lt;br /&gt;import java.sql.Statement;&lt;br /&gt;import java.util.ArrayList;&lt;br /&gt;&lt;br /&gt;import android.support.v7.app.AppCompatActivity;&lt;br /&gt;import android.os.Bundle;&lt;br /&gt;import android.widget.EditText;&lt;br /&gt;&lt;br /&gt;public class MainActivity extends AppCompatActivity {&lt;br /&gt;    ArrayList&amp;lt;String&amp;gt; cont = null;&lt;br /&gt;&lt;br /&gt;    @Override&lt;br /&gt;    protected void onCreate(Bundle savedInstanceState) {&lt;br /&gt;        super.onCreate(savedInstanceState);&lt;br /&gt;        setContentView(R.layout.activity_main);&lt;br /&gt;&lt;br /&gt;        cont = new ArrayList&amp;lt;String&amp;gt;();&lt;br /&gt;&lt;br /&gt;        EditText text = (EditText) findViewById(R.id.text);&lt;br /&gt;&lt;br /&gt;// Des de la versió 3 d'Android, no es permet obrir una connexió des del thread principal.&lt;br /&gt;// Per tant s'ha de crear un nou.&lt;br /&gt;        sqlThread.start();&lt;br /&gt;&lt;br /&gt;// i ara esperem a que finalitze el thread fill unint-lo (join)&lt;br /&gt;        try {&lt;br /&gt;            sqlThread.join();&lt;br /&gt;        } catch (InterruptedException e) {&lt;br /&gt;            e.printStackTrace();&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;        for (int i=0;i&amp;lt;cont.size();i++)&lt;br /&gt;            text.append(cont.get(i) + &quot; &quot;);&lt;br /&gt;&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;    Thread sqlThread = new Thread() {&lt;br /&gt;        public void run() {&lt;br /&gt;            try {&lt;br /&gt;                Class.forName(&quot;org.postgresql.Driver&quot;);&lt;br /&gt;&lt;br /&gt;                Connection conn = DriverManager.getConnection(&quot;jdbc:postgresql://89.36.214.106:5432/geo_ad&quot;,&quot;geo_ad&quot;, &quot;geo_ad&quot;);&lt;br /&gt;&lt;br /&gt;                String sentencia = &quot;SELECT * FROM COMARCA ORDER BY 1&quot;;&lt;br /&gt;                Statement st = conn.createStatement();&lt;br /&gt;                ResultSet rs = st.executeQuery(sentencia);&lt;br /&gt;                while (rs.next()) {&lt;br /&gt;                    cont.add(rs.getString(1) + &quot; - &quot; + rs.getString(2) + &quot;\n&quot;);&lt;br /&gt;                }&lt;br /&gt;                rs.close();&lt;br /&gt;                conn.close();&lt;br /&gt;            } catch (SQLException se) {&lt;br /&gt;                System.out.println(&quot;No es pot connectar. Error: &quot; + se.toString());&lt;br /&gt;            } catch (ClassNotFoundException e) {&lt;br /&gt;                System.out.println(&quot;No es troba la classe. Error: &quot; + e.getMessage());&lt;br /&gt;            }&lt;br /&gt;        }&lt;br /&gt;    };&lt;br /&gt;}&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Per últim tan sols queda donar el permís d'accés a Internet. Hem de modificar l'arxiu &lt;strong&gt;AndroidManifest.xml&lt;/strong&gt;, i afegir en la penúltima línia (dins de &lt;strong&gt;manifest&lt;/strong&gt; però fora d'&lt;strong&gt;application&lt;/strong&gt;):&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;&amp;lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;I no ens hem d'oblidar d'afegir el driver JDBC de PostgreSQL al projecte. En &lt;strong&gt;Android Studio &lt;/strong&gt;ho podem fer copiant el driver al directori &lt;strong&gt;libs&lt;/strong&gt; (per tenir-ho més ordenat), i després amb el botó de la dreta sobre el fitxer triar &lt;strong&gt;Add as library&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Podria donar-se el cas que la versió del driver de PostgreSQL done problemes de compatibilitat amb API's antigues. Senzillament hauríem de pujar el nivell del &lt;strong&gt;minSdkVersion&lt;/strong&gt; en el &lt;strong&gt;build.gradle&lt;/strong&gt; que està dins de &lt;strong&gt;src&lt;/strong&gt;. En el cas de fer aquestos apunts, amb el driver de PostgreSQL &lt;strong&gt;postgresql-42.2.5.jar&lt;/strong&gt;, avisava que el mínim havia de ser &lt;strong&gt;26&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/Annex_Android_3_1_0.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;576&quot; height=&quot;37&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Canviant &lt;strong&gt;minSdkVersion&lt;/strong&gt; a &lt;strong&gt;26&lt;/strong&gt; desapareix l'error. Una altra solució, evidentment seria afegir una versió del driver anterior.&lt;/p&gt;
&lt;h2&gt;KOTLIN&lt;/h2&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.os.Bundle&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.appcompat.app.AppCompatActivity&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;kotlinx.android.synthetic.main.activity_main.*&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;java.sql.DriverManager&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;MainActivity : AppCompatActivity() {&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;internal var &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;cont&lt;/span&gt;: String = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private var &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;sqlThread&lt;/span&gt;: Thread = &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;object &lt;/span&gt;: Thread() {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;run() {&lt;br /&gt;&lt;br /&gt;                &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;conn = DriverManager.getConnection(&lt;br /&gt;                    &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;jdbc:postgresql://89.36.214.106:5432/geo_ad&quot;&lt;/span&gt;,&lt;br /&gt;                    &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;geo_ad&quot;&lt;/span&gt;,&lt;br /&gt;                    &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;geo_ad&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;                &lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;                &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;sentencia = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;SELECT * FROM COMARCA ORDER BY 1&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;                &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;st = conn.createStatement()&lt;br /&gt;                &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;rs = st.executeQuery(sentencia)&lt;br /&gt;                &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;while &lt;/span&gt;(rs.next()) {&lt;br /&gt;                    &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;cont&lt;/span&gt;+=(rs.getString(&lt;span style=&quot;color: #0000ff;&quot;&gt;1&lt;/span&gt;) + &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot; - &quot; &lt;/span&gt;+ rs.getString(&lt;span style=&quot;color: #0000ff;&quot;&gt;2&lt;/span&gt;) + &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;)&lt;br /&gt;                }&lt;br /&gt;                rs.close()&lt;br /&gt;                conn.close()&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;        }&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreate(savedInstanceState: Bundle?) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)&lt;br /&gt;        setContentView(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;activity_main&lt;/span&gt;)&lt;br /&gt;        &lt;br /&gt;        &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;// Des de la versió 3 d'Android, no es permet obrir una connexió des del thread principal.&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Per tant s'ha de crear un nou.&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;sqlThread&lt;/span&gt;.start()&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;// i ara esperem a que finalitze el thread fill unint-lo (join)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;try &lt;/span&gt;{&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;sqlThread&lt;/span&gt;.join()&lt;br /&gt;        } &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;catch &lt;/span&gt;(e: InterruptedException) {&lt;br /&gt;            e.printStackTrace()&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;            text.setText(&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;cont&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;La següent imatge mostra l'execució sobre el simulador:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;border: 1px solid black;&quot; src=&quot;resources/Annex_Android_3_1_1.png&quot; width=&quot;370&quot; height=&quot;612&quot; /&gt;&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="5452"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="5_1.66"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="30">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="27"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="Annex_Android_3_1_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpDNju3l/Annex_Android_3_1_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="7da466914065110155b0a8ef69cfe497"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="28"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="5459"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="5_1.67"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="31">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="27"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="Annex_Android_3_1_0.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpDNju3l/Annex_Android_3_1_0.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="3b19b0502331117b2541f1d2c89874d2"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="28"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="28"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="68"></int>
                <string role="key" value="parentNode"></string>
                <reference key="29"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="5"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="29"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="30"></reference>
               <reference key="31"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="5"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:3%20-%20Perman%C3%A8ncia%20en%20BD%20Relacionals:3.1%20-%20Connexi%C3%B3%20remota"></string>
           <string role="key" value="parent"></string>
           <reference key="26"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="34">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.2 - Connexió local"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="32">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="33">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="32"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;Com comentàvem, la connexió local resulta ser un poc més complicada, a causa de que el driver JDBC per a SQLite no funciona en Android.&lt;/p&gt;
&lt;p&gt;Hi ha per la xarxa un driver JDBC de SQLite per a Android anomenat SQLDroid, però el seu funcionament és inestable i en molts llocs no el recomanen.&lt;/p&gt;
&lt;p&gt;El que està més recomanat per la xarxa per a utilitzar SQLite són unes classe noves, que estudiarem a continuació.&lt;/p&gt;
&lt;p&gt;Per a poder practicar inicialment, ens crearem un nou projecte Android anomenat &lt;strong&gt;ConnexioSQLiteJava&lt;/strong&gt; o &lt;strong&gt;ConnexioSQLiteKotlin&lt;/strong&gt;, sobre el paquet &lt;strong&gt;com.example.connexiosqlitejava&lt;/strong&gt; o &lt;strong&gt;com.example.connexiosqlitekotlin &lt;/strong&gt;respectivament.&lt;/p&gt;
&lt;p&gt;Posarem, com en exemples anteriors, únicament un EditText per agafar el contingut d'una determinada taula, o millor dit, consulta. El &lt;strong&gt;activity_main.xml&lt;/strong&gt; quedarà així:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;EditText&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:inputType&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;textMultiLine&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:gravity&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;top&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;En el programa principal anirem col·locant totes les coses en el &lt;strong&gt;onCreate&lt;/strong&gt; sense muntar cap thread ja que no accedirem a Internet. Però com comentàvem, hem de crear unes classes noves&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="33"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="34"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="6"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="34"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="35">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="36">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="85"></int>
                <string role="key" value="_idevice"></string>
                <reference key="35"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Extends SQLiteOpenHelper&lt;/p&gt;
&lt;p&gt;Ens haurem de crear una &lt;strong&gt;nova classe&lt;/strong&gt; que herete (&lt;strong&gt;extends&lt;/strong&gt;) de la classe &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;. Li podem posar per exemple el nom &lt;strong&gt;SQLiteGestor&lt;/strong&gt;. En aquesta classe haurem d'implementar obligatòriament:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;El constructor. L'ajuda d'Android Studio ens el pot crear i no caldrà que el modifiquem&lt;/li&gt;
&lt;li&gt;El mètode &lt;strong&gt;onCreate&lt;/strong&gt;. Normalment l'utilitzarem per a crear les taules de la Base de Dades, ja que només es crida quan es crea la Base de Dades. Si no posem res estarem obligats a &quot;col·locar&quot; nosaltres el fitxer corresponent a la Base de Dades&lt;/li&gt;
&lt;li&gt;El mètode &lt;strong&gt;onUpdate&lt;/strong&gt;. Nosaltres ens aconformarem amb esborrar les taules i tornar a crear-les. En aplicacions més elaborades es podria guardar la informació en un històric, però per a nosaltres no valdrà la pena.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El millor que podem fer és que ens ajude Android Studio a crear el constructor i els 2 mètodes. Per tant, només amb posar que la nova classe és una extensió de &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt; i deixant-nos ajudar, ens apareixerà el següent &quot;esquelet&quot;.&lt;/p&gt;
&lt;h3&gt;JAVA&lt;/h3&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

import androidx.annotation.Nullable;

public class SQLiteGestor extends SQLiteOpenHelper {
    public SQLiteGestor(@Nullable Context context, @Nullable String name, @Nullable SQLiteDatabase.CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3&gt;KOTLIN&lt;/h3&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import android.content.Context
import android.database.sqlite.SQLiteDatabase
import android.database.sqlite.SQLiteOpenHelper

class SQLiteGestor( context: Context?, name: String?, factory: SQLiteDatabase.CursorFactory?, version: Int ) 
    : SQLiteOpenHelper(context, name, factory, version) {

    override fun onCreate(db: SQLiteDatabase) {

    }

    override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {

    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Com podem comprovar,tant en la versió Java com Kotlin, al constructor se li passen 4 paràmetres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Context&lt;/strong&gt;: normalment serà el context de l'aplicació principal.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Nom&lt;/strong&gt;: és el nom de la base de dades. Si no posem la ruta, l'obrirà (o crearà) en el directori
&lt;div class=&quot;codi2&quot;&gt;/data/data/&lt;em&gt;paquet_de_la_aplicacio&lt;/em&gt;/databases&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CursorFactory&lt;/strong&gt;: per a fabricar algun cursor en aquest moment. Normalment el deixarem a &lt;strong&gt;null&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Versió&lt;/strong&gt;: per a detectar si és una nova versió de la Base de Dades (i així aplicar &lt;strong&gt;onUpgrade&lt;/strong&gt;). Normalment el deixarem a &lt;strong&gt;1&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I com veieu, amb aquestos paràmetres crida al constructor de &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;. Per tant el constructor el deixarem exactament com està.&lt;/p&gt;
&lt;p&gt;El més habitual serà construir un objecte des del programa principal d'aquesta manera:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;private SQLiteGestor bdg = new SQLiteGestor(this,&quot;bd.sqlite&quot;,null,1);&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Anem a aplicar açò al nostre exemple il·lustratiu, el projecte &lt;strong&gt;ConnexioSQLite &lt;/strong&gt;(al final d'aquesta pregunta posarem el programa principal). En aquesta ocasió, en compte d'intentar copiar el fitxer &lt;strong&gt;Empleats.sqlite&lt;/strong&gt; en el directori&lt;strong&gt; /data/data/com.example.connexiosqlite/databases&lt;/strong&gt;, farem que es genere la taula &lt;strong&gt;EMPLEATS&lt;/strong&gt; quan es cree la primera vegada. Aleshores ens aprofitarem del mètode &lt;strong&gt;onCreate&lt;/strong&gt;. Li arriba un paràmetre que és justament la Base de Dades (&lt;strong&gt;SQLiteDatabase&lt;/strong&gt;). Sobre ella executem sentències que no tornen dades amb el mètode &lt;strong&gt;execSQL(&lt;em&gt;sentencia&lt;/em&gt;)&lt;/strong&gt;, que es veurà més avant. Així ens quedarà el mètode &lt;strong&gt;onCreate()&lt;/strong&gt; de la classe &lt;strong&gt;SQLiteGestor&lt;/strong&gt;. La versió en Java i en Kotlin queden idèntiques, canviant només els punts i coma del final&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;public void onCreate(SQLiteDatabase sqLiteDatabase) {
        String sql = &quot;CREATE TABLE EMPLEAT(&quot;
                + &quot;num INTEGER CONSTRAINT cp_emp PRIMARY KEY, &quot;
                + &quot;nom TEXT, &quot; + &quot;depart INTEGER, &quot; + &quot;edat INTEGER, &quot;
                + &quot;sou REAL &quot; + &quot;)&quot;;
        sqLiteDatabase.execSQL(sql);
        sqLiteDatabase.execSQL(&quot;INSERT INTO EMPLEAT VALUES (1,'Andreu',10,32,1000.0)&quot;);
        sqLiteDatabase.execSQL(&quot;INSERT INTO EMPLEAT VALUES (2,'Bernat',20,28,1200.0)&quot;);
        sqLiteDatabase.execSQL(&quot;INSERT INTO EMPLEAT VALUES (3,'Clàudia',10,26,1100.0)&quot;);
        sqLiteDatabase.execSQL(&quot;INSERT INTO EMPLEAT VALUES (4,'Damià',10,40,1500.0)&quot;);
    }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Ara la utilització des del programa principal serà:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;private SQLiteGestor bdg = new SQLiteGestor(this,&quot;Empleats.sqlite&quot;,null,1);&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;Però el programa principal l'escriurem després d'haver-ho vist tot.&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="36"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="34"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="10"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="34"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="37">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="38">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="85"></int>
                <string role="key" value="_idevice"></string>
                <reference key="37"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;SQLiteDatabase&lt;/p&gt;
&lt;p&gt;Amb el helper que hem construït heretant de &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;, ja ens podrem definir un objecte de tipus Base de Dades SQLite, que és el que utilitzarem: &lt;strong&gt;SQLiteDatabase&lt;/strong&gt;. Podrem fer-lo de 2 maneres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;bdg.&lt;strong&gt;getReadableDatabase()&lt;/strong&gt; obrim la Base de Dades només de lectura.&lt;/li&gt;
&lt;li&gt;bdg.&lt;strong&gt;getWritableDatabase() &lt;/strong&gt;l'obrim en mode escriptura.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ambdós tornen un objecte &lt;strong&gt;SQLiteDatabase&lt;/strong&gt;. Per exemple:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;SQLiteDatabase bd = bdg.getWritableDatabase();&lt;/p&gt;
&lt;p&gt;Sobre aquest objecte &lt;strong&gt;SQLiteDatabase&lt;/strong&gt; és on farem les operacions SQL. Distingirem, com en el cas de Java, entre les operacions que no tornen cap valor, sinó que serveixen per a modificar alguna taula (INSERT, DELETE, UPDATE, CREATE TABLE, ...)  i les que sí que tornen un valor, millor dit un conjunt de valors (SELECT).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;execSQL&lt;/strong&gt;: l'utilitzarem per a les que no tornen cap valor&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;query&lt;/strong&gt;: torna un cursor amb les dades. Es construeix posant com a paràmetres la taula, les columnes, condicions, ..., i així anirà construint la sentència SQL&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;rawQuery&lt;/strong&gt;: torna un cursor amb les dades. Com a paràmetre li posarem la sentència SQL i una possible llista de paràmetres (si no en posem el deixem a null)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; Per exemple una sentència de creació de una taula molt senzilla seria:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;bd.execSQL(&quot;CREATE TABLE T1 (C1 TEXT)&quot;);&lt;/p&gt;
&lt;p&gt; I una d'inserció en la taula anterior:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;bd.execSQL(&quot;INSERT INTO T1 VALUES('Hola')&quot;);&lt;/p&gt;
&lt;p&gt;D'aquest tipus són les sentències que havíem posat en el &lt;strong&gt;onCreate()&lt;/strong&gt; i &lt;strong&gt;onUpgrade()&lt;/strong&gt; de la classe Helper que ens construïm, per a crear les taules.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;És convenient tancar la Base de Dades quan s'acabe d'utilitzar.&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;bd.close();&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="38"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="34"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="11"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="34"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="39">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="40">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="85"></int>
                <string role="key" value="_idevice"></string>
                <reference key="39"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Cursor &lt;/p&gt;
&lt;p&gt;El resultat d'una sentència SELECT és un &lt;strong&gt;cursor&lt;/strong&gt;. I més concretament estarà apuntant &lt;strong&gt;abans&lt;/strong&gt; de tota l'estructura de dades tornada, és a dir, abans de la primera fila. Un cursor és pràcticament igual que un &lt;strong&gt;ResultSet&lt;/strong&gt; dels que utilitzàvem en Java, només que els mètodes seran lleugerament diferents.&lt;/p&gt;
&lt;p&gt;Inicialment està apuntant abans de la primera fila. Per a menejar-nos podem utilitzar el mètodes &lt;strong&gt;move&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;moveToFirst&lt;/strong&gt;&lt;strong&gt;()&lt;/strong&gt;: va al primer registre.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;moveToPrevious()&lt;/strong&gt;: va a l'anterior.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;moveToNext()&lt;/strong&gt;: va al següent.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;moveToLast()&lt;/strong&gt;: va a l'últim.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;moveToPosition(int)&lt;/strong&gt;: va a la posició indicada. El primer registre és el 0.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tots ells tornen &lt;strong&gt;true&lt;/strong&gt; si ha pogut anar i &lt;strong&gt;false&lt;/strong&gt; si no ha pogut anar. En el cas de &lt;strong&gt;moveToFirst()&lt;/strong&gt; i &lt;strong&gt;moveToLast&lt;/strong&gt;&lt;strong&gt;()&lt;/strong&gt; només es pot produir &lt;strong&gt;false&lt;/strong&gt; si no tenim res en el cursor.&lt;/p&gt;
&lt;p&gt;Per a accedir a les dades de la fila activa, ho farem igual que en Java, utilitzant els mètodes &lt;strong&gt;getInt&lt;/strong&gt;,&lt;strong&gt; &lt;/strong&gt;&lt;strong&gt;getString&lt;/strong&gt;, &lt;strong&gt;getFloat&lt;/strong&gt;, &lt;strong&gt;getDouble&lt;/strong&gt;, ... i posant com a paràmetre el número de la columna, tenint en compte que&lt;strong&gt; la primera columna és la columna 0&lt;/strong&gt;, no com féiem en Java, que en els ResultSet la primera columna era la&lt;strong&gt; 1&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;A banda d'aquestes també podem agafar més informació de les Meta Dades:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;getCount()&lt;/strong&gt;: torna el número de files del cursor.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getColumnCount&lt;/strong&gt;&lt;strong&gt;()&lt;/strong&gt;: torna el número de columnes en el cursor.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getColumnName(int&lt;/strong&gt;): torna el nom de la columna especificada (la primera és la 0).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getType(int)&lt;/strong&gt;: torna el tipus de la columna especificada&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Un exemple de sentència SELECT i utilització posterior del cursor, recorrent-lo en la seua totalitat seria:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;Cursor rs = bd.rawQuery(&quot;SELECT * FROM T1&quot;,null);&lt;/div&gt;
&lt;div&gt;while (rs.moveToNext())&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;System.out.println(rs.getString(0));&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Anem a finalitzar l'exemple &lt;strong&gt;ConnexioSQLite&lt;/strong&gt;. En el programa principal, en el &lt;strong&gt;onCreate&lt;/strong&gt;, ens definirem un objecte de la classe &lt;strong&gt;SQLiteGestor&lt;/strong&gt; que extenia &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;. A partir d'ell ens crearem un objecte &lt;strong&gt;SQLiteDatabase&lt;/strong&gt;, que en aquest cas és suficient amb que siga de lectura. Posteriorment accedirem a tota la taula EMPLEAT amb la sentència &lt;strong&gt; SELECT * FROM EMPLEAT&lt;/strong&gt;, i ja només restarà recórrer el cursor per anar col·locant en el &lt;strong&gt;EditText&lt;/strong&gt;, en aquest cas per a mostrar el nom i el sou dels empleats (camps segon i cinquè, per tant agafem el número 1 i 4).&lt;/p&gt;
&lt;h3&gt;JAVA&lt;/h3&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity;
import android.os.Bundle;
import android.widget.EditText;
import android.database.sqlite.SQLiteDatabase;
import android.database.Cursor;

 public class MainActivity extends AppCompatActivity {

     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);
         EditText text = (EditText) findViewById(R.id.text);

         SQLiteGestor bdg = new SQLiteGestor(this,&quot;Empleats.sqlite&quot;,null,1);
         SQLiteDatabase bd = bdg.getReadableDatabase();

         Cursor rs = bd.rawQuery(&quot;SELECT * FROM EMPLEAT&quot;,null);

         while (rs.moveToNext()){
             text.setText(text.getText() + rs.getString(1) + &quot; --&amp;gt; &quot; + rs.getDouble(4) + &quot;€\n&quot;);
         }
         rs.close();
         bd.close();
         bdg.close();
     }
 }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3&gt;KOTLIN&lt;/h3&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import kotlinx.android.synthetic.main.activity_main.*

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        val bdg = SQLiteGestor(this, &quot;Empleats.sqlite&quot;, null, 1)
        val bd = bdg.readableDatabase

        val rs = bd.rawQuery(&quot;SELECT * FROM EMPLEAT&quot;, null)

        var cont =&quot;&quot;
        while (rs.moveToNext()) {
            cont += rs.getString(1) + &quot; --&amp;gt; &quot; + rs.getDouble(4).toString() + &quot;€\n&quot;
        }
        text.setText(cont)
        rs.close()
        bd.close()
        bdg.close()
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I el resultat seria aquest:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_3_2_1.png&quot; style=&quot;border: 1px solid black;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="5451"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="12_85.43"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="41">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="39"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="Annex_Android_3_2_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpDNju3l/Annex_Android_3_2_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="0ea14b09b960e50a2641aa1a3ef9014f"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="40"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="40"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="44"></int>
                <string role="key" value="parentNode"></string>
                <reference key="34"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="12"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="34"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="41"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="6"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:3%20-%20Perman%C3%A8ncia%20en%20BD%20Relacionals:3.2%20-%20Connexi%C3%B3%20local"></string>
           <string role="key" value="parent"></string>
           <reference key="26"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="44">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="3.2.1 - Exemple"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="42">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="43">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="42"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Anem a modificar un exercici fet en el mòdul de &lt;strong&gt;DI&lt;/strong&gt;, el de &lt;strong&gt;CoffeeShops&lt;/strong&gt;, per a guardar les dades en una Base de Dades SQL. Concretament el que anem a guardar en la Base de Dades són les dades dels cafés i les imatges.&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Si no teniu aquesta aplicació, us la podeu baixar del Moodle, tant la versió original per a poder aplicar els canvis ací exposats, com la versió amb els canvis ja fets.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;El primer que haurem de fer és dissenyar la Base de Dades, cosa senzilla, ja que només ens plantegem mostrar el nom del café, l'adreça, la puntuació si la tinguérem i una imatge. També guardarem un número del local, que el podem fer perfectament autoincrementat. Si pensem en afegir algun camp, ho podem fer a posteriori sense cap problema&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;LOCAL (&lt;span style=&quot;text-decoration: underline;&quot;&gt;num&lt;/span&gt;, nom, adreca, punts, imatge)&lt;/p&gt;
&lt;p&gt;Com dèiem, el primer camp el farem enter autonumèric, el segon i tercer de text, i el quart també enter.&lt;/p&gt;
&lt;p&gt;Per a guardar la imatge, podríem fer referència únicament al seu nom (i en tot cas ruta), i per tant seria també de text. Aquesta és la manera més habitual de guardar les imatges. Però en aquest exemple, per a poder practicar un poc més, intentarem guardar la mateixa imatge en la Base de Dades. En aquest cas el tipus de dades apropiat és BLOB.&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;LOCAL (&lt;span style=&quot;text-decoration: underline;&quot;&gt;num&lt;/span&gt;: integer, nom: text, adreca: text, punts: integer, imatge: Blob)&lt;/p&gt;
&lt;p&gt;No ens plantejarem crear la Base de Dades des de l'aplicació, ja que suposaria accedir als fitxers de les imatges i seria un procés més laboriós que no interessa en aquest moment. Ens ajudarem doncs d'alguna utilitat de SQLite, per exemple el &lt;strong&gt;SQLite Studio&lt;/strong&gt;, que permet introduir camps normals i també fitxers sencers en un Blob incloent imatges des de la versió 3.2. Anomenarem a la Base de Dades &lt;strong&gt;CoffeeShops.sqlite&lt;/strong&gt;. Si no us aclariu a crear la Base de Dades, la podeu demanar al professor.&lt;/p&gt;
&lt;p&gt;Del programa ja fet en l'altre mòdul (DI) no canviarem molta cosa, únicament la procedència de les dades, i l'estrictament necessari:&lt;/p&gt;
&lt;h3&gt;JAVA&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;En &lt;strong&gt;Tarjeta&lt;/strong&gt;, la propietat &lt;strong&gt;imag&lt;/strong&gt; abans era un &lt;strong&gt;int&lt;/strong&gt; perquè guardàvem la referència de la imatge, però ara guardarem la mateixa imatge, que la portarem des de la Base de Dades. Ens convé un array de bytes (&lt;strong&gt;byte[ ]&lt;/strong&gt;), ja que podrem passar fàcilment les dades des de la BD, i damunt és serialitzable. Podríem haver utiltizat un &lt;strong&gt;Drawable&lt;/strong&gt;, però aquest no és serialitzable mentre que l'array de bytes sí, i ens fa falta per a poder passar les dades al segon Activity. Haurem de canviar també el &lt;strong&gt;getImag&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;, lògicament. Estan marcades en roig les coses que han canviat.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;pre&gt;&lt;code&gt;public class Tarjeta {
    &lt;span style=&quot;color: #ff0000;&quot;&gt;//private int imag;
    //int logo;
    // Ara logo serà byte[] per a contenir directament la imatge, no int com abans
    byte[] imag;&lt;/span&gt;
    private String titulo;
    private String subtitulo;

        public Tarjeta(&lt;span style=&quot;color: #ff0000;&quot;&gt;byte[]&lt;/span&gt; foto, String tit,  String subtit){
            imag = foto;
            titulo = tit;
            subtitulo = subtit;
        }

        public &lt;span style=&quot;color: #ff0000;&quot;&gt;byte[]&lt;/span&gt; getImag(){
            return imag;
        }
        public String getTitulo(){ return titulo; }
        public String getSubtit() { return subtitulo; }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;En &lt;strong&gt;CardsAdapter&lt;/strong&gt; canvia la manera de plasmar la imatge. Abans era un &lt;strong&gt;int&lt;/strong&gt; que feia referència a un recurs (la imatge guardada en &lt;strong&gt;res.drawable&lt;/strong&gt;). Ara tenim la pròpia imatge, en un &lt;strong&gt;byte[]&lt;/strong&gt;. Una manera de passar-li'l al &lt;strong&gt;ImageView&lt;/strong&gt; és convertir-la prèviament en un &lt;strong&gt;Bitmap&lt;/strong&gt; (amb el mètode &lt;strong&gt;decodeByteArray&lt;/strong&gt; de &lt;strong&gt;BitmapFactory&lt;/strong&gt;).&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;pre&gt;&lt;code&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;import android.graphics.Bitmap;
import android.graphics.BitmapFactory;&lt;/span&gt;
import android.support.v7.widget.RecyclerView;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.RatingBar;
import android.widget.TextView;

import java.util.ArrayList;

public class CardsAdapter extends RecyclerView.Adapter&amp;lt;CardsAdapter.TarjViewHolder&amp;gt; {

    private ArrayList&amp;lt;Tarjeta&amp;gt; items;

    public CardsAdapter(ArrayList&amp;lt;Tarjeta&amp;gt; items) {
        this.items = items;
    }

    public class TarjViewHolder extends RecyclerView.ViewHolder {
        private ImageView imagen;
        private TextView text;
        private TextView text1;
        private RatingBar barstars;
        private TextView puntos;

        public TarjViewHolder(View itemView) {
            super(itemView);

            imagen = itemView.findViewById(R.id.img1);
            text = itemView.findViewById(R.id.textView);
            text1 = itemView.findViewById(R.id.textView1);
            puntos = itemView.findViewById(R.id.textView2);
            barstars = itemView.findViewById(R.id.ratingBar);
        }

        public void bindTitular(final Tarjeta t) {
            &lt;span style=&quot;color: #ff0000;&quot;&gt;//imagen.setImageResource(t.getImag());
            // Ara és un byte[] no un int
            byte [] img = t.getImag();
            Bitmap imgBmp = BitmapFactory.decodeByteArray(img,0,img.length);
            imagen.setImageBitmap(imgBmp);&lt;/span&gt;
            text.setText(t.getTitulo());
            text1.setText(t.getSubtit());
            barstars.setOnRatingBarChangeListener(new RatingBar.OnRatingBarChangeListener() {
                @Override
                public void onRatingChanged(RatingBar ratingBar, float rating, boolean fromUser) {
                    puntos.setText(String.valueOf(rating));
                }
            });
        }
    }

    @Override
    public TarjViewHolder onCreateViewHolder(ViewGroup viewGroup, int viewType) {
        View itemView = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.item_cards, viewGroup, false);
        TarjViewHolder tvh = new TarjViewHolder(itemView);
        return tvh;
    }

    @Override
    public void onBindViewHolder(final TarjViewHolder viewHolder, int pos) {
        Tarjeta item = items.get(pos);
        viewHolder.bindTitular(item);
    }

    @Override
    public int getItemCount() {
        return items.size();
    }

    @Override
    public int getItemViewType(int position) {
        return position;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Inicialment copiarem la Base de Dades ja dissenyada al lloc oportú del simulador de dispositiu, que serà &lt;strong&gt;/data/data/&lt;/strong&gt;&lt;strong&gt;com.example.alicia.myapplication/databases/&lt;strong&gt;CoffeShop.sqlite&lt;/strong&gt;. &lt;/strong&gt;Estaria bé copiar el fitxer de la Base de Dades la primera vegada que s'execute el programa, però ho deixarem per a un poc més avant. Per a comprovar que realment agafem les dades de la Base de Dades, incorporarem una nova fila que no estava abans.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;La classe que derivarà de &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;, serà inicialment molt senzilla: no tindrà res. Distint seria si vulguérem copiar el fitxer de la Base de Dades la primera vegada que s'executa, però ara no ens ho plantegem. Per tant inicialment aquesta classe, que anomenarem &lt;strong&gt;SQLiteGestor&lt;/strong&gt; serà així (fins i tot podeu deixar que es genere automàticament amb l'ajuda de Android Studio, quan poseu que hereta de SQLiteOpenHelper):&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;package com.example.alicia.myapplication;&lt;br /&gt;&lt;br /&gt;import android.content.Context;&lt;br /&gt;import android.database.sqlite.SQLiteDatabase;&lt;br /&gt;import android.database.sqlite.SQLiteOpenHelper;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;public class SQLiteGestor extends SQLiteOpenHelper{&lt;br /&gt;    public SQLiteGestor(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {&lt;br /&gt;        super(context, name, factory, version);&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    @Override&lt;br /&gt;    public void onCreate(SQLiteDatabase sqLiteDatabase) {&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    @Override&lt;br /&gt;    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i2) {&lt;br /&gt;    }&lt;br /&gt;}&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;En el programa que utilitza tot l'anterior, que és &lt;strong&gt;Cards&lt;/strong&gt;, l'únic que canviarà és que no crearem els objectes &lt;strong&gt;Tarjeta&lt;/strong&gt; directament, sinó que agafarem les dades de la Base de Dades. Observeu que agafar la imatge és igual de fàcil que la resta de camps:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;pre&gt;&lt;code&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;&lt;/span&gt;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.support.v7.widget.Toolbar;
import android.view.Menu;
import android.view.MenuItem;

import java.util.ArrayList;


public class Cards extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_cards);

        final ArrayList&amp;lt;Tarjeta&amp;gt; items = new ArrayList&amp;lt;Tarjeta&amp;gt;();
       &lt;span style=&quot;color: #ff0000;&quot;&gt; // Ara no definim les dales directament i agafem les imatges des de res/drawable,
        // sinó que ho agafem tot de la Base de Dades
        // Aci van les sentencies d'agafar de la BD
        /*items.add(new Tarjeta(R.drawable.images, &quot;Antico Caffè Greco&quot;, &quot;St. Italy, Rome&quot;));
        items.add(new Tarjeta(R.drawable.images1, &quot;Coffee Room&quot;,&quot;St. Germany, Berlin &quot;));
        items.add(new Tarjeta(R.drawable.images2, &quot;Coffee Ibiza&quot;,&quot;St. Colon, Madrid&quot;));
        items.add(new Tarjeta(R.drawable.images3, &quot;Pudding Coffee Shop&quot;, &quot;St. Diagonal, Barcelona&quot;));
        items.add(new Tarjeta(R.drawable.images4, &quot;L'Express&quot;, &quot;St. Picadilly Circus, London&quot;));
        items.add(new Tarjeta(R.drawable.images5, &quot;Coffee Corner&quot;,&quot;St. Àngel Guimerà, Valencia&quot;));
        items.add(new Tarjeta(R.drawable.images6, &quot;Sweet Cup&quot;,&quot;St.Kinkerstraat, Amsterdam&quot;));*/
        SQLiteGestor bdg = null;
        try {
            bdg = new SQLiteGestor(this,&quot;CoffeeShops.sqlite&quot;,null,1);
            SQLiteDatabase bd = bdg.getReadableDatabase();

            Cursor rs = bd.rawQuery(&quot;SELECT * FROM LOCAL&quot;,null);

            while (rs.moveToNext())
                items.add(new Tarjeta(rs.getBlob(4),rs.getString(1), rs.getString(2)));;

            rs.close();
            bd.close();
            bdg.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }&lt;/span&gt;

        Toolbar toolbar = findViewById(R.id.appbar);
        setSupportActionBar(toolbar);

        final RecyclerView recView = findViewById(R.id.RecView);
        recView.setHasFixedSize(true);
        final CardsAdapter adaptador = new CardsAdapter(items);

        recView.setAdapter(adaptador);
        recView.setLayoutManager(new LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle action bar item clicks here. The action bar will
        // automatically handle clicks on the Home/Up button, so long
        // as you specify a parent activity in AndroidManifest.xml.
        int id = item.getItemId();

        //noinspection SimplifiableIfStatement
        if (id == R.id.action_settings) {
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Amb açò la nostra aplicació ja funcionarà. Al final de tot es veuria un local nou, amb la seua imatge, introduït només en la Base de Dades, senyal que les dades s'agafen de la Base de Dades&lt;/p&gt;
&lt;h3&gt;KOTLIN&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;En &lt;strong&gt;Tarjeta&lt;/strong&gt;, la propietat &lt;strong&gt;imag&lt;/strong&gt; abans era un &lt;strong&gt;int&lt;/strong&gt; perquè guardàvem la referència de la imatge, però ara guardarem la mateixa imatge, que la portarem des de la Base de Dades. Ens convé un array de bytes (&lt;strong&gt;ByteArray&lt;/strong&gt;), ja que podrem passar fàcilment les dades des de la BD, i damunt és serialitzable. Podríem haver utiltizat un &lt;strong&gt;Drawable&lt;/strong&gt;, però aquest no és serialitzable mentre que l'array de bytes sí, i ens fa falta per a poder passar les dades al segon Activity. Haurem de canviar també el &lt;strong&gt;getImag&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;, lògicament. Estan marcades en roig les coses que han canviat.&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; padding-left: 60px;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;Tarjeta(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;imag&lt;/span&gt;: &lt;span style=&quot;color: #ff0000;&quot;&gt;ByteArray&lt;/span&gt;, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;titulo&lt;/span&gt;: String, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;subtit&lt;/span&gt;: String) &lt;span style=&quot;color: #808080;&quot;&gt;{}&lt;/span&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;En &lt;strong&gt;CardsAdapter&lt;/strong&gt; canvia la manera de plasmar la imatge. Abans era un &lt;strong&gt;int&lt;/strong&gt; que feia referència a un recurs (la imatge guardada en &lt;strong&gt;res.drawable&lt;/strong&gt;). Ara tenim la pròpia imatge, en un &lt;strong&gt;ByteArray&lt;/strong&gt;. Una manera de passar-li'l al &lt;strong&gt;ImageView&lt;/strong&gt; és convertir-la prèviament en un &lt;strong&gt;Bitmap&lt;/strong&gt; (amb el mètode &lt;strong&gt;decodeByteArray&lt;/strong&gt; de &lt;strong&gt;BitmapFactory&lt;/strong&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.LayoutInflater&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.View&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.ViewGroup&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.ImageView&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.RatingBar&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.TextView&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.RecyclerView&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;import &lt;/span&gt;android.graphics.BitmapFactory&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;CardsAdapter(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;: ArrayList&amp;lt;Tarjeta&amp;gt;) : RecyclerView.Adapter&amp;lt;CardsAdapter.TarjViewHolder&amp;gt;() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;inner class &lt;/span&gt;TarjViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;imagen&lt;/span&gt;: ImageView&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;text&lt;/span&gt;: TextView&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;text1&lt;/span&gt;: TextView&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;barstars&lt;/span&gt;: RatingBar&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;puntos&lt;/span&gt;: TextView&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;init &lt;/span&gt;{&lt;br /&gt;&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;imagen &lt;/span&gt;= itemView.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;img1&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;text &lt;/span&gt;= itemView.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;textView&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;text1 &lt;/span&gt;= itemView.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;textView1&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;puntos &lt;/span&gt;= itemView.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;textView2&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;barstars &lt;/span&gt;= itemView.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;ratingBar&lt;/span&gt;)&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;fun &lt;/span&gt;bindCards(t: Tarjeta) {&lt;br /&gt;            &lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;//imagen.setImageResource(t.imag)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;val &lt;/span&gt;img = t.&lt;span style=&quot;font-weight: bold;&quot;&gt;imag&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;val &lt;/span&gt;imgBmp = BitmapFactory.decodeByteArray(img, 0, img.&lt;span style=&quot;font-weight: bold;&quot;&gt;size&lt;/span&gt;)&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;            &lt;span style=&quot;font-weight: bold;&quot;&gt;imagen&lt;/span&gt;.setImageBitmap(imgBmp)&lt;/span&gt;&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;text&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;text &lt;/span&gt;= t.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;titulo&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;            text1&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;text &lt;/span&gt;= t.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;subtit&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;            barstars&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;onRatingBarChangeListener &lt;/span&gt;= RatingBar.OnRatingBarChangeListener &lt;span style=&quot;font-weight: bold;&quot;&gt;{ &lt;/span&gt;ratingBar, rating, fromUser &lt;span style=&quot;font-weight: bold;&quot;&gt;-&amp;gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;puntos&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;text &lt;/span&gt;= rating.toString()&lt;br /&gt;                &lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;        &lt;/span&gt;}&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreateViewHolder(viewGroup: ViewGroup, viewType: Int): TarjViewHolder {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;itemView = LayoutInflater.from(viewGroup.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;context&lt;/span&gt;).inflate(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;item_cards&lt;/span&gt;, viewGroup, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;false&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;return &lt;/span&gt;TarjViewHolder(itemView)&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onBindViewHolder(viewHolder: TarjViewHolder, pos: Int) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;item = &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;[pos]&lt;br /&gt;        viewHolder.bindCards(item)&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;getItemCount(): Int {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;size&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;    &lt;/span&gt;}&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;getItemViewType(position: Int): Int {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;return &lt;/span&gt;position&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;
&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Inicialment copiarem la Base de Dades ja dissenyada al lloc oportú del simulador de dispositiu, que serà &lt;strong&gt;/data/data/&lt;/strong&gt;&lt;strong&gt;&lt;em&gt;nom_del_paquet&lt;/em&gt;/databases/CoffeShop.sqlite. &lt;/strong&gt;Estaria bé copiar el fitxer de la Base de Dades la primera vegada que s'execute el programa, però ho deixarem per a un poc més avant. Per a comprovar que realment agafem les dades de la Base de Dades, incorporarem una nova fila que no estava abans.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;La classe que derivarà de &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;, serà inicialment molt senzilla: no tindrà res. Distint seria si vulguérem copiar el fitxer de la Base de Dades la primera vegada que s'executa, però ara no ens ho plantegem. Per tant inicialment aquesta classe, que anomenarem &lt;strong&gt;SQLiteGestor&lt;/strong&gt; serà així (fins i tot podeu deixar que es genere automàticament amb l'ajuda de Android Studio, quan poseu que hereta de SQLiteOpenHelper):&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.content.Context&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.database.sqlite.SQLiteDatabase&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.database.sqlite.SQLiteOpenHelper&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;SQLiteGestor(context: Context,name: String) : SQLiteOpenHelper(context, name,&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;/span&gt;,&lt;span style=&quot;color: #0000ff;&quot;&gt;1&lt;/span&gt;) {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreate(sqLiteDatabase: SQLiteDatabase) {}&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onUpgrade(sqLiteDatabase: SQLiteDatabase, i: Int, i2: Int) {}&lt;br /&gt;}&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;En el programa que utilitza tot l'anterior, que és &lt;strong&gt;CardsActivity&lt;/strong&gt;, l'únic que canviarà és que no crearem els objectes &lt;strong&gt;Tarjeta&lt;/strong&gt; directament, sinó que agafarem les dades de la Base de Dades. Observeu que agafar la imatge és igual de fàcil que la resta de camps:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.appcompat.app.AppCompatActivity&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.os.Bundle&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.appcompat.widget.Toolbar&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.LinearLayoutManager&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.RecyclerView&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;CardsActivity : AppCompatActivity() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private var &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;: ArrayList&amp;lt;Tarjeta&amp;gt;? = &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;    override fun &lt;/span&gt;onCreate(savedInstanceState: Bundle?) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)&lt;br /&gt;        setContentView(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;activity_cards&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;items &lt;/span&gt;= ArrayList&amp;lt;Tarjeta&amp;gt;()&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        &lt;span style=&quot;font-style: italic;&quot;&gt;/*items!!.add(Tarjeta(R.drawable.images, &quot;Antico Caffè Greco&quot;, &quot;St. Italy, Rome&quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images1, &quot;Coffee Room&quot;,&quot;St. Germany, Berlin &quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images2, &quot;Coffee Ibiza&quot;,&quot;St. Colon, Madrid&quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images3, &quot;Pudding Coffee Shop&quot;, &quot;St. Diagonal, Barcelona&quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images4, &quot;L'Express&quot;, &quot;St. Picadilly Circus, London&quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images5, &quot;Coffee Corner&quot;,&quot;St. Àngel Guimerà, Valencia&quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images6, &quot;Sweet Cup&quot;,&quot;St.Kinkerstraat, Amsterdam&quot;)) */&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;var &lt;/span&gt;bdg: SQLiteGestor? = &lt;span style=&quot;font-weight: bold;&quot;&gt;null&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;        &lt;/span&gt;bdg = SQLiteGestor(&lt;span style=&quot;font-weight: bold;&quot;&gt;this&lt;/span&gt;, &lt;span style=&quot;font-weight: bold;&quot;&gt;&quot;CoffeeShops.sqlite&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        &lt;span style=&quot;font-weight: bold;&quot;&gt;val &lt;/span&gt;bd = &lt;span style=&quot;background-color: #dbffdb;&quot;&gt;bdg&lt;/span&gt;.&lt;span style=&quot;font-style: italic;&quot;&gt;readableDatabase&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;val &lt;/span&gt;rs = bd.rawQuery(&lt;span style=&quot;font-weight: bold;&quot;&gt;&quot;SELECT * FROM LOCAL&quot;&lt;/span&gt;, &lt;span style=&quot;font-weight: bold;&quot;&gt;null&lt;/span&gt;)&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        &lt;span style=&quot;font-weight: bold;&quot;&gt;while &lt;/span&gt;(rs.moveToNext())&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;            &lt;span style=&quot;font-weight: bold;&quot;&gt;items&lt;/span&gt;!!.add(Tarjeta(rs.getBlob(4), rs.getString(1), rs.getString(2)))&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        rs.close()&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        bd.close()&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        &lt;span style=&quot;background-color: #dbffdb;&quot;&gt;bdg&lt;/span&gt;.close()&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;toolbar = findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;toolbar&lt;/span&gt;) &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;as &lt;/span&gt;Toolbar&lt;br /&gt;        setSupportActionBar(toolbar)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;recView = findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;recView&lt;/span&gt;) &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;as &lt;/span&gt;RecyclerView&lt;br /&gt;        recView.setHasFixedSize(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;true&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;adaptador = CardsAdapter(&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;!!)&lt;br /&gt;&lt;br /&gt;        recView.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;adapter &lt;/span&gt;= adaptador&lt;br /&gt;        recView.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;layoutManager &lt;/span&gt;= LinearLayoutManager(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;this&lt;/span&gt;, LinearLayoutManager.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;VERTICAL&lt;/span&gt;, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;false&lt;/span&gt;)&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Amb açò la nostra aplicació ja funcionarà. Al final de tot es veuria un local nou, amb la seua imatge, introduït només en la Base de Dades, senyal que les dades s'agafen de la Base de Dades&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_3_2_1.1.png&quot; alt=&quot;&quot; width=&quot;390&quot; height=&quot;684&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Però com havia comentat abans, per acabar de deixar-la bé, hauríem de fer possible que la primera vegada es copiara d'alguna manera de Base de Dades, i no haver de copiar-la a mà dins del dispositiu.&lt;/p&gt;
&lt;p&gt;El lloc oportú, òbviament, és en &lt;strong&gt;SQLiteGestor&lt;/strong&gt;, la classe que hereta de &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;. Havíem vist en una altra ocasió que existia el mètode &lt;strong&gt;onCreate&lt;/strong&gt;&lt;strong&gt;()&lt;/strong&gt;. Però en aquest lloc col·locàvem les sentències SQL de creació de taula i d'inserció de dades. És a dir, aniran sentències SQL de quan ja està creada la Base de Dades, ja existeix la Base de Dades, perquè s'acaba de crear.&lt;/p&gt;
&lt;p&gt;En el nostre exemple no ens podem plantejar la sentència d'inserció, perquè hem d'inserir una imatge (en SQL !!!). El que més ens convé és copiar la Base de Dades des d'algun lloc, ja que la BD la hem creat des del SQLite Manager de forma còmoda i ens ha anat bé. Però en el &lt;strong&gt;onCreate()&lt;/strong&gt; només podem fer sentències SQL.&lt;/p&gt;
&lt;p&gt;La solució serà copiar el fitxer de la Base de Dades en el &lt;strong&gt;constructor&lt;/strong&gt; de &lt;strong&gt;SQLiteGestor&lt;/strong&gt;. I copiarem byte a byte, per tant ens convé la parella &lt;strong&gt;InputStream&lt;/strong&gt; - &lt;strong&gt;OutputStream&lt;/strong&gt;. El fitxer de la Base de Dades el posarem dins de &lt;strong&gt;res&lt;/strong&gt;, com altres recursos, però en una subcarpeta anomenada &lt;strong&gt;raw&lt;/strong&gt;. Android ens obliga a que aquest fitxer estiga en minúscules, per tant l'anomenarem &lt;strong&gt;coffeeshops.sqlite&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;La lògica que utilitzarem en el constructor per a copiar serà:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Si no existeix el subdirectori &lt;strong&gt;databases&lt;/strong&gt;, el crearem.&lt;/li&gt;
&lt;li&gt;Si no existeix el fitxer &lt;strong&gt;CofeeShops.sqlite&lt;/strong&gt; el copiarem&lt;/li&gt;
&lt;li&gt;Agafem el fitxer original amb &lt;strong&gt;context.getResources().openRawResource(R.raw.esports)&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Millor copiar no byte a byte, sinó amb un array de bytes, per a optimitzar a questa còpia (com té imatges, el fitxer podria ser molt gran, i així optimitzarem el trasvàs d'informació). En aqest exemple s'ha fet de 1024 en 1024 bytes.&lt;/li&gt;
&lt;li&gt;Per aquesta lògica, si el fitxer ja existeix, no el copiarà. Per tant, si per les proves anteriors havíem copiat el fitxer directament (des del Android Device Monitor), l'haurem d'esborrar abans d'executar-lo la primera vegada.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;JAVA&lt;/h2&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;pre&gt;&lt;code&gt;import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;


public class SQLiteGestor extends SQLiteOpenHelper{
    private static String PATH_BD = &quot;&quot;;
    private static String NOM_BD = &quot;CoffeeShops.sqlite&quot;;
    private Context myContext=null;

    public SQLiteGestor(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {
        super(context, name, factory, version);

        PATH_BD =  &quot;/data/data/&quot; + context.getPackageName() + &quot;/databases&quot;;
        File dir = new File (PATH_BD);
        if (! dir.exists())
            dir.mkdir();
        File f = new File(dir,NOM_BD);
        if (! f.exists()) {
            try {
                FileOutputStream f_out = new FileOutputStream(f);
                byte[] b = new byte[1024];
                int length;
                InputStream f_in = context.getResources().openRawResource(R.raw.coffeeshops);
                while ((length = f_in.read(b)) &amp;gt; 0) {
                    f_out.write(b, 0, length);
                }
                f_in.close();
                f_out.close();
            }
            catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2&gt;KOTLIN&lt;/h2&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.content.Context&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.database.sqlite.SQLiteDatabase&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.database.sqlite.SQLiteOpenHelper&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;java.io.File&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;SQLiteGestor( context: Context, name: String) : SQLiteOpenHelper(context, name, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;/span&gt;, &lt;span style=&quot;color: #0000ff;&quot;&gt;1&lt;/span&gt;) {&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;myContext&lt;/span&gt;: Context? = &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;    init &lt;/span&gt;{&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;PATH_BD = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/data/data/&quot; &lt;/span&gt;+ context.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;packageName &lt;/span&gt;+ &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/databases&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;NOM_BD = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;CoffeeShops.sqlite&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;dir = File(PATH_BD)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;if &lt;/span&gt;(!dir.exists())&lt;br /&gt;            dir.mkdir()&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;f = File(dir, NOM_BD)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;if &lt;/span&gt;(!f.exists()) {&lt;br /&gt;                &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;f_in = context.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;resources&lt;/span&gt;.openRawResource(&lt;span style=&quot;color: #0000ff;&quot;&gt;0&lt;/span&gt;)&lt;br /&gt;                f.&lt;span style=&quot;font-style: italic;&quot;&gt;writeBytes&lt;/span&gt;(f_in.&lt;span style=&quot;font-style: italic;&quot;&gt;readBytes&lt;/span&gt;())&lt;br /&gt;        }&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreate(db: SQLiteDatabase) {}&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {}&lt;br /&gt;&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="5458"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="7_1.26"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="45">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="42"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="Annex_Android_3_2_1.1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpDNju3l/Annex_Android_3_2_1.1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="1e79e47ec8866323115206287739c94e"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="43"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="43"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="27"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="44"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="7"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="44"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="45"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="7"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:3%20-%20Perman%C3%A8ncia%20en%20BD%20Relacionals:3.2%20-%20Connexi%C3%B3%20local:3.2.1%20-%20Exemple"></string>
              <string role="key" value="parent"></string>
              <reference key="34"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="48">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="4 - Permanència en BD Orientades a Objectes"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="46">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="47">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="46"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;En el Tema 6, segona part, hem vist una Base de Dades Orientada a Objectes, DB4O, a la qual era extremadament senzill guardar els objectes, per més complicats que siguen. Utilitzàvem la versió incrustada (&lt;em&gt;embedded&lt;/em&gt;) de DB4O, amb la qual era suficient afegir unes llibreries al projecte de Java.&lt;/p&gt;
&lt;p&gt;Afortunadament, en Android serà igual de senzill. Haurem d'anar en compte d'incloure poques llibreries, ja que en els dispositius mòbils la grandària de l'aplicació és un punt crític. Intentarem incloure únicament un jar: &lt;strong&gt;db4o-8.0.276.16149-core-java5.jar&lt;/strong&gt; (1,5 Mb) que com veiem és el cor. Si ens féra falta alguna utilitat no inclosa com podria ser per a fer una recerca, podríem intentar col·locar el jar que ho inclou tot, en compte de l'anterior: &lt;strong&gt;db4o-8.0.276.16149-all-java5.jar&lt;/strong&gt; (2,5 Mb)&lt;/p&gt;
&lt;p&gt;Per a incloure el jar, el més senzill és copiar-lo dins de &lt;strong&gt;app -&amp;gt; libs&lt;/strong&gt; del projecte, i posteriorment apretar emb el botó de la dreta i triar &lt;strong&gt;Add as library&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Ho comprovarem amb un exemple que guardarà dades de la classe &lt;strong&gt;Empleat&lt;/strong&gt; ja utilitzada en el Tema 6, part 2. Recordem que en l'empleat, a banda de guardar dades normals com el nom, el nit, l'edat, ... també guardàvem la foto, un currículum, l'adreça (de tipus &lt;strong&gt;Adreca&lt;/strong&gt;, que constava de carrer, codi postal i població), un llistat de correus electrònics i un llistat de telèfons (de tipus &lt;strong&gt;Telefon&lt;/strong&gt;, que constava d'un booleà que marcava si el telèfon era mòbil o no, i el número de telèfon).&lt;/p&gt;
&lt;p&gt;Ho farem sobre un projecte nou, anomenat per exemple &lt;strong&gt;ConnexioDB4OJava&lt;/strong&gt; i/o &lt;strong&gt;ConnexioDB4OKotlin&lt;/strong&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Construïu un nou projecte anomenat &lt;strong&gt;ConnexioDB4OJava&lt;/strong&gt; i/o &lt;strong&gt;ConnexioDB4OKotlin&lt;/strong&gt; sobre el paquet &lt;strong&gt;com.example.connexiodb4ojava &lt;/strong&gt;o &lt;strong&gt;com.example.connexiodb4okotlin&lt;/strong&gt;, respectivament&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Incorporeu les classes &lt;strong&gt;Empleat.java&lt;/strong&gt;, &lt;strong&gt;Adreca.java&lt;/strong&gt; i &lt;strong&gt;Telefon.java&lt;/strong&gt;, ja creades en el tema 6, part 2.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Afegiu la llibreria &lt;strong&gt;db4o-8.0.276.16149-core-java5.jar&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;. La manera més còmoda és copiar-la en &lt;strong&gt;app -&amp;gt; libs&lt;/strong&gt;, i posteriorment apretar emb el botó de la dreta i triar &lt;strong&gt;Add as library&lt;/strong&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Creeu el següent &lt;strong&gt;activity_main.xml&lt;/strong&gt;:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;Com podeu observar, tan sols hi ha un TextView per a poder visualitzar si connectem i observar algunes dades&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h2&gt;&lt;/h2&gt;
&lt;h2&gt;JAVA&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Creeu el següent programa principal:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlighted-code language-js&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package com.example.connexiodb4ojava;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.widget.TextView;

import com.db4o.Db4oEmbedded;
import com.db4o.ObjectContainer;
import com.db4o.ObjectSet;

import java.io.File;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView text = (TextView) findViewById(R.id.text);

        File f = new File(&quot;/data/data/com.example.connexiodb4ojava/databases&quot;);

        if ( ! f.exists()) {
            f.mkdirs();
            ObjectContainer bd = Db4oEmbedded.openFile(&quot;/data/data/com.example.connexiodb4ojava/databases/Empleats.db4o&quot;);
            Empleat e1 = new Empleat(&quot;11111111a&quot;,&quot;Albert&quot;,10,40,1000,null,null,null,null,null);
            //les dades més complicades les introduïm de forma especial
            e1.setAdreca(new Adreca(&quot;C/ Major, 7&quot;,&quot;12001&quot;,&quot;Castelló&quot;));
            String[] corr = {&quot;alu11111111a@ieselcaminas.org&quot;};
            e1.setCorreus_e(corr);
            Telefon[] tels = {new Telefon(true,&quot;666777888&quot;),new Telefon(false,&quot;964112233&quot;)};
            e1.setTelefons(tels);
            Empleat e2 = new Empleat(&quot;22222222b&quot;, &quot;Berta&quot;, 10, 35, 1700, null, null, null, null, null);
            Empleat e3 = new Empleat(&quot;33333333c&quot;, &quot;Clàudia&quot;, 20, 37, 1500, null, null, null, null, null);
            text.append(&quot;S'ha creat la Base de Dades Orientada a Objectes&quot;);
            bd.store(e1);
            bd.store(e2);
            bd.store(e3);
            bd.close();
        }
        else {
            ObjectContainer bd1 = Db4oEmbedded.openFile(&quot;/data/data/com.example.connexiodb4ojava/databases/Empleats.db4o&quot;);
            ObjectSet&amp;lt;Empleat&amp;gt; llista = bd1.queryByExample(new Empleat());
            text.append(&quot;S'han trobat &quot; + llista.size() + &quot; empleats: \n&quot;);
            for (Empleat e : llista) {
                text.append(&quot;Nif: &quot; + e.getNif() + &quot;. Nom: &quot; + e.getNom() + &quot;. Departament: &quot; + e.getDepartament() + &quot;\n&quot;);
                text.append(&quot;\tLlista de telèfons:\n&quot;);
                if (e.getTelefons()!=null){
                    for (Telefon t : e.getTelefons()){
                        text.append(&quot;\t\t&quot;+t.getNumero());
                        if (t.isMobil())
                            text.append(&quot;(mòbil)\n&quot;);
                        else
                            text.append(&quot;(fixe)\n&quot;);
                    }
                }
            }
            bd1.close();
        }

    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h2&gt;KOTLIN&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Creeu el següent programa principal:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlighted-code language-js&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package com.example.connexiodb4okotlin

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.widget.TextView
import com.db4o.Db4oEmbedded
import java.io.File

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        val text = findViewById(R.id.text) as TextView

        val f = File(&quot;/data/data/com.example.connexiodb4okotlin/databases&quot;)

        if (!f.exists()) {
            f.mkdirs()
            val bd = Db4oEmbedded.openFile(&quot;/data/data/com.example.connexiodb4okotlin/databases/Empleats.db4o&quot;)
            val e1 = Empleat(&quot;11111111a&quot;, &quot;Albert&quot;, 10, 40, 1000.0, null, null, null, null, null)
            //les dades més complicades les introduïm de forma especial
            e1.setAdreca(Adreca(&quot;C/ Major, 7&quot;, &quot;12001&quot;, &quot;Castelló&quot;))
            val corr = arrayOf(&quot;alu11111111a@ieselcaminas.org&quot;)
            e1.setCorreus_e(corr)
            val tels = arrayOf&amp;lt;Telefon&amp;gt;(Telefon(true, &quot;666777888&quot;), Telefon(false, &quot;964112233&quot;))
            e1.setTelefons(tels)
            val e2 = Empleat(&quot;22222222b&quot;, &quot;Berta&quot;, 10, 35, 1700.0, null, null, null, null, null)
            val e3 = Empleat(&quot;33333333c&quot;, &quot;Clàudia&quot;, 20, 37, 1500.0, null, null, null, null, null)
            text.append(&quot;S'ha creat la Base de Dades Orientada a Objectes&quot;)
            bd.store(e1)
            bd.store(e2)
            bd.store(e3)
            bd.close()
        } else {
            val bd1 = Db4oEmbedded.openFile(&quot;/data/data/com.example.connexiodb4okotlin/databases/Empleats.db4o&quot;)
            val llista = bd1.queryByExample&amp;lt;Empleat&amp;gt;(Empleat())
            text.append(&quot;S'han trobat &quot; + llista.size + &quot; empleats: \n&quot;)
            for (e in llista) {
                text.append(&quot;Nif: &quot; + e.getNif() + &quot;. Nom: &quot; + e.getNom() + &quot;. Departament: &quot; + e.getDepartament() + &quot;\n&quot;)
                text.append(&quot;\tLlista de telèfons:\n&quot;)
                if (e.getTelefons() != null) {
                    for (t in e.getTelefons()) {
                        text.append(&quot;\t\t&quot; + t.getNumero())
                        if (t.isMobil())
                            text.append(&quot;(mòbil)\n&quot;)
                        else
                            text.append(&quot;(fixe)\n&quot;)
                    }
                }
            }
            bd1.close()
        }

    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El programa és molt senzill. Si no existia el directori &lt;strong&gt;databases&lt;/strong&gt; el crea (per evitar problemes) i construeix la Base de Dades. Si ja existia, assumeix que està creada la Base de Dades, i visualitza el seu contingut.&lt;/p&gt;
&lt;p&gt;La primera vegada que s'execute el programa visualitzarà que s'ha creat la Base de Dades. La segona, es visualitzaran algunes dades:&lt;/p&gt;
&lt;table border=&quot;0&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;img src=&quot;resources/Annex_Android_4_1.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;521&quot; height=&quot;848&quot; /&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src=&quot;resources/Annex_Android_4_2.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;518&quot; height=&quot;847&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="5455"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="13_85.69"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="49">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="46"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="Annex_Android_4_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpDNju3l/Annex_Android_4_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="bfe5a6eb8aaf811cd896f89dbdd07f18"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="47"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="5457"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="13_85.70"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="50">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="46"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="Annex_Android_4_2.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpDNju3l/Annex_Android_4_2.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="325a5485b02dad2b0a9d253825f505a4"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="47"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="47"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="71"></int>
             <string role="key" value="parentNode"></string>
             <reference key="48"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="13"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="48"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="49"></reference>
            <reference key="50"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="8"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:4%20-%20Perman%C3%A8ncia%20en%20BD%20Orientades%20a%20Objectes"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
     </list>
    </dictionary>
   </instance>
   <unicode role="key" value="1"></unicode>
   <reference key="8"></reference>
   <unicode role="key" value="2"></unicode>
   <reference key="11"></reference>
   <unicode role="key" value="3"></unicode>
   <reference key="22"></reference>
   <unicode role="key" value="4"></unicode>
   <reference key="26"></reference>
   <unicode role="key" value="5"></unicode>
   <reference key="29"></reference>
   <unicode role="key" value="6"></unicode>
   <reference key="34"></reference>
   <unicode role="key" value="7"></unicode>
   <reference key="44"></reference>
   <unicode role="key" value="8"></unicode>
   <reference key="48"></reference>
  </dictionary>
  <string role="key" value="_objectives"></string>
  <unicode value=""></unicode>
  <string role="key" value="_preknowledge"></string>
  <unicode value=""></unicode>
  <string role="key" value="_templateFile"></string>
  <string value=""></string>
  <string role="key" value="backgroundImgTile"></string>
  <bool value="0"></bool>
  <string role="key" value="currentNode"></string>
  <reference key="48"></reference>
  <string role="key" value="dublinCore"></string>
  <instance class="exe.engine.package.DublinCore">
   <dictionary>
    <string role="key" value="contributors"></string>
    <unicode value=""></unicode>
    <string role="key" value="coverage"></string>
    <unicode value=""></unicode>
    <string role="key" value="creator"></string>
    <unicode value=""></unicode>
    <string role="key" value="date"></string>
    <unicode value=""></unicode>
    <string role="key" value="description"></string>
    <unicode value=""></unicode>
    <string role="key" value="format"></string>
    <unicode value=""></unicode>
    <string role="key" value="identifier"></string>
    <unicode value=""></unicode>
    <string role="key" value="language"></string>
    <unicode value="ca"></unicode>
    <string role="key" value="publisher"></string>
    <unicode value=""></unicode>
    <string role="key" value="relation"></string>
    <unicode value=""></unicode>
    <string role="key" value="rights"></string>
    <unicode value=""></unicode>
    <string role="key" value="source"></string>
    <unicode value=""></unicode>
    <string role="key" value="subject"></string>
    <unicode value=""></unicode>
    <string role="key" value="title"></string>
    <unicode value=""></unicode>
    <string role="key" value="type"></string>
    <unicode value=""></unicode>
   </dictionary>
  </instance>
  <string role="key" value="exe.engine.package.Package.persistenceVersion"></string>
  <int value="16"></int>
  <string role="key" value="exportMetadataType"></string>
  <string value="LOMES"></string>
  <string role="key" value="exportSource"></string>
  <bool value="1"></bool>
  <string role="key" value="footer"></string>
  <unicode value=""></unicode>
  <string role="key" value="isChanged"></string>
  <int value="1"></int>
  <string role="key" value="isLoading"></string>
  <bool value="0"></bool>
  <string role="key" value="license"></string>
  <unicode value="creative commons: attribution - non commercial - share alike 2.5"></unicode>
  <string role="key" value="lom"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list></list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg"></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <string value="e5de616e-c863-40dd-a118-368c0dd5b447"></string>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Acc\xc3\xa9s a Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="51">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2014-10-27"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Metadades de data de creaci\xc3\xb3"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="52">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="53">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOMv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="51"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="52"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="53"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOMv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <none></none>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="yes"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="lomEs"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list></list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg"></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <string value="e5de616e-c863-40dd-a118-368c0dd5b447"></string>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Acc\xc3\xa9s a Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="54">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2014-10-27"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Metadades de data de creaci\xc3\xb3"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="55">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="56">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOM-ESv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="54"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="55"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="56"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOM-ESv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <instance class="exe.engine.lom.lomsubs.accessSub">
       <dictionary>
        <string role="key" value="accessType"></string>
        <instance class="exe.engine.lom.lomsubs.accessTypeSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOM-ESv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="uniqueElementName"></string>
          <string value="accessType"></string>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.accessTypeValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="universal"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
        <string role="key" value="description"></string>
        <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list>
           <instance class="exe.engine.lom.lomsubs.LangStringSub">
            <dictionary>
             <string role="key" value="language"></string>
             <string value="ca"></string>
             <string role="key" value="valueOf_"></string>
             <unicode value="Per defecte"></unicode>
            </dictionary>
           </instance>
          </list>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="access"></string>
       </dictionary>
      </instance>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="creative commons: attribution - non commercial - share alike"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <string value="rights"></string>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="mxmlforcemediaonly"></string>
  <bool value="0"></bool>
  <string role="key" value="mxmlheight"></string>
  <string value=""></string>
  <string role="key" value="mxmlprofilelist"></string>
  <string value=""></string>
  <string role="key" value="mxmlwidth"></string>
  <string value=""></string>
  <string role="key" value="release"></string>
  <string value="2.7"></string>
  <string role="key" value="resources"></string>
  <dictionary>
   <string role="key" value="0ea14b09b960e50a2641aa1a3ef9014f"></string>
   <list>
    <reference key="41"></reference>
   </list>
   <string role="key" value="1e79e47ec8866323115206287739c94e"></string>
   <list>
    <reference key="45"></reference>
   </list>
   <string role="key" value="325a5485b02dad2b0a9d253825f505a4"></string>
   <list>
    <reference key="50"></reference>
   </list>
   <string role="key" value="376551ba609e108483507157a6390318"></string>
   <list>
    <reference key="15"></reference>
   </list>
   <string role="key" value="3b19b0502331117b2541f1d2c89874d2"></string>
   <list>
    <reference key="31"></reference>
   </list>
   <string role="key" value="7da466914065110155b0a8ef69cfe497"></string>
   <list>
    <reference key="30"></reference>
   </list>
   <string role="key" value="7f6a1f14a1413f35fe8d24e65397a590"></string>
   <list>
    <reference key="23"></reference>
   </list>
   <string role="key" value="ad06f1f9e2b0f0d08e84e70a4d7a02c3"></string>
   <list>
    <reference key="5"></reference>
   </list>
   <string role="key" value="bfe5a6eb8aaf811cd896f89dbdd07f18"></string>
   <list>
    <reference key="49"></reference>
   </list>
   <string role="key" value="ebd1cb8664a0a500a9b668ab81c93036"></string>
   <list>
    <reference key="14"></reference>
   </list>
  </dictionary>
  <string role="key" value="root"></string>
  <reference key="4"></reference>
  <string role="key" value="scolinks"></string>
  <bool value="0"></bool>
  <string role="key" value="scowsinglepage"></string>
  <bool value="0"></bool>
  <string role="key" value="scowwebsite"></string>
  <bool value="0"></bool>
  <string role="key" value="style"></string>
  <unicode value="caminas 3.1"></unicode>
  <string role="key" value="tempFile"></string>
  <bool value="0"></bool>
 </dictionary>
</instance>