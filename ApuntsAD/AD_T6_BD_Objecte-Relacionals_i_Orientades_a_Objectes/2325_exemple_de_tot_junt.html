<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ca" xml:lang="ca" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>2.3.2.5 Exemple de tot junt | Accés a Dades </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="ca" />
<meta name="author" content="Àlvar Serrano Calduch" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc-sa/2.5/" />
<meta name="generator" content="eXeLearning 2.6 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
</head>
<body class="exe-web-site" id="exe-node-25"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Omet navegació</a></p>
<div id="header" ><div id="headerContent">Accés a Dades</div></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Tema 6: Bases de Dades Objecte-Relacionals i Orientades a Objectes</a></li>
   <li><a href="1_introducci.html" class="no-ch">1. Introducció</a></li>
   <li class="current-page-parent"><a href="2__bases_de_dades_objecterelacionals.html" class="current-page-parent daddy">2 - Bases de Dades Objecte-Relacionals</a>
   <ul>
      <li><a href="21__caracterstiques.html" class="no-ch">2.1 - Característiques</a></li>
      <li><a href="22__tipus_de_dades.html" class="no-ch">2.2 - Tipus de dades</a></li>
      <li class="current-page-parent"><a href="23__manipulaci_de_dades.html" class="current-page-parent daddy">2.3 - Manipulació de dades</a>
      <ul>
         <li><a href="231__sentncies_sql_per_a_tipus_de__dades_nous.html" class="no-ch">2.3.1 - Sentències SQL per a tipus de  dades nous</a></li>
         <li class="current-page-parent"><a href="232__accs_a_travs_de_jdbc.html" class="current-page-parent daddy">2.3.2 - Accés a través de JDBC</a>
         <ul>
            <li><a href="2321_boolean.html" class="no-ch">2.3.2.1 Boolean</a></li>
            <li><a href="2322_blob_i_clob.html" class="no-ch">2.3.2.2 BLOB i CLOB</a></li>
            <li><a href="2323_arrays.html" class="no-ch">2.3.2.3 Arrays</a></li>
            <li><a href="2324_estructurat.html" class="no-ch">2.3.2.4 Estructurat</a></li>
            <li id="active"><a href="2325_exemple_de_tot_junt.html" class="active no-ch">2.3.2.5 Exemple de tot junt</a></li>
         </ul>
         </li>
      </ul>
      </li>
      <li><a href="24__altres_aportacions.html" class="daddy">2.4 - Altres aportacions</a>
      <ul class="other-section">
         <li><a href="241__polimorfisme_i_sobrecrrega_doperadors.html" class="no-ch">2.4.1 - Polimorfisme i sobrecàrrega d'operadors</a></li>
         <li><a href="242__herncia.html" class="no-ch">2.4.2 - Herència</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="3__bases_de_dades_orientades_a_objectes.html" class="daddy">3 - Bases de Dades Orientades a Objectes</a>
   <ul class="other-section">
      <li><a href="31__installaci_de_db4o.html" class="no-ch">3.1 - Instal·lació de DB4O</a></li>
      <li><a href="32__funcionalitat_bsica.html" class="no-ch">3.2 - Funcionalitat bàsica</a></li>
      <li><a href="33__consultes.html" class="no-ch">3.3 - Consultes</a></li>
   </ul>
   </li>
   <li><a href="exercicis.html" class="no-ch">Exercicis</a></li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="2324_estructurat.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="24__altres_aportacions.html" class="next"><span>Següent<span> &raquo;</span></span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">2.3.2.5 Exemple de tot junt</h1></div>
<div class="iDevice_wrapper FreeTextIdevice" id="id26">
<div class="iDevice emphasis0">
<div id="ta26_85" class="block iDevice_content">
<p>Per últim intentarem posar totes les dades, incloent la <strong>foto</strong> en una aplicació gràfica. Només mostrarem les dades de Eva, i així podrem veure la foto.</p>
<p class="codi">import java.awt.BorderLayout;<br />import java.awt.FlowLayout;<br />import java.awt.GridLayout;<br />import java.awt.Image;<br />import java.io.BufferedReader;<br />import java.io.IOException;<br />import java.lang.reflect.InvocationTargetException;<br />import java.sql.Connection;<br />import java.sql.DriverManager;<br />import java.sql.ResultSet;<br />import java.sql.SQLException;<br /><br />import javax.imageio.ImageIO;<br />import javax.swing.ImageIcon;<br />import javax.swing.JCheckBox;<br />import javax.swing.JFrame;<br />import javax.swing.JLabel;<br />import javax.swing.JPanel;<br />import javax.swing.JTextArea;<br />import javax.swing.JTextField;<br /><br />public class Prova9_Pantalla extends JFrame{<br />    JTextField nif = new JTextField(9);<br />    JTextField nom = new JTextField(9);<br />    JCheckBox major = new JCheckBox();<br />    JLabel foto = null;<br />    JTextArea curric = new JTextArea();<br />    JTextField adreca = new JTextField(20);<br />    JTextArea correus = new JTextArea();<br />    JTextArea telefons = new JTextArea();<br />    <br />    JLabel et_nif = new JLabel("Nif");<br />    JLabel et_nom = new JLabel("Nom");<br />    JLabel et_major = new JLabel("Major d'edat");<br />    JLabel et_adr = new JLabel("Adreça");<br />    JLabel et_correus = new JLabel("Correus");<br />    JLabel et_telefons = new JLabel("Telèfons");<br /><br />    JPanel pan1 = new JPanel(new GridLayout(1,2));<br />    JPanel pan1_1 = new JPanel(new GridLayout(3,1));<br />    JPanel pan1_1_1 = new JPanel(new FlowLayout());<br />    JPanel pan1_1_2 = new JPanel(new FlowLayout());<br />    JPanel pan1_1_3 = new JPanel(new FlowLayout());<br />    JPanel pan1_2 = new JPanel(new FlowLayout());<br />    JPanel pan2 = new JPanel(new BorderLayout());<br />    JPanel pan2_1 = new JPanel(new FlowLayout());<br />    JPanel pan2_2 = new JPanel(new GridLayout(2,2));<br />    JPanel pan3 = new JPanel(new BorderLayout());<br />    JPanel pan4 = new JPanel();<br />    <br />    <br /><br />    public void iniciar() throws SQLException, IOException, NoSuchMethodException, SecurityException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {<br />        this.setLayout(new GridLayout(3,1));<br />        this.setBounds(100, 100, 300, 300);<br />        <br />        this.getContentPane().add(pan1);<br />        this.getContentPane().add(pan2);<br />        this.getContentPane().add(pan3);<br />        <br />        pan1.add(pan1_1);<br />        pan1.add(pan1_2);<br />        pan1_1.add(pan1_1_1);<br />        pan1_1.add(pan1_1_2);<br />        pan1_1.add(pan1_1_3);<br />        pan1_1_1.add(et_nif);<br />        pan1_1_1.add(nif);<br />        pan1_1_2.add(et_nom);<br />        pan1_1_2.add(nom);<br />        pan1_1_3.add(et_major);<br />        pan1_1_3.add(major);<br />        <br />        pan2.add(pan2_1,BorderLayout.NORTH);<br />        pan2.add(pan2_2,BorderLayout.CENTER);<br />        pan2_1.add(et_adr);<br />        pan2_1.add(adreca);<br />        pan2_2.add(et_correus);<br />        pan2_2.add(et_telefons);<br />        pan2_2.add(correus);<br />        pan2_2.add(telefons);<br />        <br />        pan3.add(curric);<br />        <br />        String url = "jdbc:postgresql://89.36.214.106:5432/rxx";<br /><br />        Connection con = DriverManager.getConnection(url, "rxx", "rxx");<br /><br />        ResultSet rs = con.createStatement().executeQuery("SELECT * FROM persona4 WHERE nom='Eva'");<br />        <br />        if (rs.next()){<br />            nif.setText(rs.getString(1));<br />            nom.setText(rs.getString(2));<br />            major.setSelected(rs.getBoolean(3));<br />            if (rs.getBinaryStream(4)!=null){<br />                Image img = ImageIO.read(rs.getBinaryStream(4));<br />                foto = new JLabel(new ImageIcon(img));<br />                pan1_2.add(foto);<br />            }<br />            if (rs.getCharacterStream(5)!=null){<br />                BufferedReader bf = new BufferedReader(rs.getCharacterStream(5));<br />                String s;<br />                String tot="";<br />                while ((s = bf.readLine()) != null) {<br />                    tot += s + "\n";<br />                }<br />                curric.setText(tot);<br />            }<br />            if (rs.getObject(6)!=null){<br />                adreca.setText(rs.getObject(6).toString());<br />            }<br />                <br />            if (rs.getArray(7)!=null){<br />                String[] corr = (String[]) rs.getArray(7).getArray();<br />                for (String c : corr)<br />                correus.append(c+"\n");<br />            }<br />            if (rs.getArray(8)!=null){<br />                ResultSet tels = rs.getArray(8).getResultSet();<br />                while (tels.next())<br />                    telefons.append(tels.getString(2)+"\n");<br />            }    <br />        }<br />        <br />        rs.close();<br />        con.close();<br />        this.setVisible(true);<br />    }<br />}</p>
<p>I el programa principal, amb main() que el cridaria seria:</p>
<p class="codi">import java.io.IOException;<br />import java.lang.reflect.InvocationTargetException;<br />import java.sql.SQLException;<br /><br />public class Prova9 {<br /><br />    public static void main(String[] args) throws SQLException, IOException, NoSuchMethodException, SecurityException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {<br />        Prova9_Pantalla finestra = new Prova9_Pantalla();<br />        finestra.iniciar();<br />    }<br />}</p>
<p>Aquest seria el resultat:</p>
<p style="text-align: center;"><img src="T6_2_3_2_5_1.png" style="border: 1px solid black;" /></p>
<p>I com a exemple final, fem una variació de l'anterior, però en aquesta ocasió més completa, per a mostrar com podem passar de la taula a objectes, utilitzant la tècnica vista en la pregunta 2.3.2.5, és a dir, utilitzant l'altre driver que ens permetia accedir bé al contingut dels tipus estructurats.</p>
<p>Mirem primer les classes necessàries. La classe <strong>Adreca</strong> ja l'havíem vista:</p>
<p class="codi2">import java.sql.SQLException;<br />import java.sql.Struct;<br /><br />public class Adreca {<br /><br />    private String carrer = null;<br />    private String codipostal = null;<br />    private String poblacio = null;<br /><br />    public Adreca() {<br />    }<br /><br />    public Adreca(String c, String cp, String p) {<br />        this.carrer = c;<br />        this.codipostal = cp;<br />        this.poblacio = p;<br />    }<br /><br />    public Adreca(Struct t_adr) throws SQLException {<br />        if (t_adr != null) {<br />            this.carrer = (String) t_adr.getAttributes()[0];<br />            this.codipostal = (String) t_adr.getAttributes()[1];<br />            this.poblacio = (String) t_adr.getAttributes()[2];<br />        }<br />    }<br /><br />    public String getCarrer() {<br />        return carrer;<br />    }<br /><br />    public void setCarrer(String carrer) {<br />        this.carrer = carrer;<br />    }<br /><br />    public String getCodipostal() {<br />        return codipostal;<br />    }<br /><br />    public void setCodipostal(String codipostal) {<br />        this.codipostal = codipostal;<br />    }<br /><br />    public String getPoblacio() {<br />        return poblacio;<br />    }<br /><br />    public void setPoblacio(String poblacio) {<br />        this.poblacio = poblacio;<br />    }<br />}</p>
<p>Ara ens farà falta també la classe <strong>Telefon</strong>. Observeu que també tenim el constructor al qual se li passa un <strong>Struct</strong>, que és el que utilitzarem.</p>
<p class="codi2">import java.sql.SQLException;<br />import java.sql.Struct;<br /><br />public class Telefon {<br />    private boolean mobil;<br />    private String numero;<br />    <br />    public Telefon(boolean m,String n){<br />        this.mobil=m;<br />        this.numero=n;<br />    }<br />    <br />    public Telefon(Struct t_tel){<br />        try {<br />            this.mobil=(boolean) t_tel.getAttributes()[0];<br />            this.numero=(String) t_tel.getAttributes()[1];<br />        } catch (SQLException e) {<br />            e.printStackTrace();<br />        }<br />    }<br />    public boolean isMobil() {<br />        return mobil;<br />    }<br />    public void setMobil(boolean mobil) {<br />        this.mobil = mobil;<br />    }<br />    public String getNumero() {<br />        return numero;<br />    }<br />    public void setNumero(String numero) {<br />        this.numero = numero;<br />    }<br />}</p>
<p>Per últim <strong>Persona</strong>. Hem utilitzat una tècnica un poc estranya: al constructor li passem un <strong>ResultSet</strong>, que suposem que estarà apuntant al contingut d'una fila de la taula <strong>PERSONA4</strong>.</p>
<p class="codi2">import java.awt.Image;<br />import java.io.BufferedReader;<br />import java.io.IOException;<br />import java.sql.ResultSet;<br />import java.sql.SQLException;<br />import java.sql.Struct;<br />import java.util.ArrayList;<br />import java.util.Arrays;<br /><br />import javax.imageio.ImageIO;<br /><br />public class Persona {<br />    private String nif;<br />    private String nom;<br />    private boolean majorEdat;<br />    private Image foto;<br />    private String curriculum;<br />    private Adreca adreca;<br />    private ArrayList&lt;String&gt; correusE;<br />    private ArrayList&lt;Telefon&gt; telefons;<br /><br />    public Persona(String nif, String nom, boolean majorEdat, Image foto, String curriculum, Adreca adreca,<br />            ArrayList&lt;String&gt; correusE, ArrayList&lt;Telefon&gt; telefons) {<br />        super();<br />        this.nif = nif;<br />        this.nom = nom;<br />        this.majorEdat = majorEdat;<br />        this.foto = foto;<br />        this.curriculum = curriculum;<br />        this.adreca = adreca;<br />        this.correusE = correusE;<br />        this.telefons = telefons;<br />    }<br /><br />    public Persona(ResultSet rs) {<br />        super();<br />        try {<br />                this.nif = rs.getString(1);<br />                this.nom = rs.getString(2);<br />                this.majorEdat = rs.getBoolean(3);<br />                if (rs.getBinaryStream(4) != null)<br />                    this.foto = ImageIO.read(rs.getBinaryStream(4));<br />                else<br />                    this.foto=null;<br />                <br />                String tot = "";<br />                if (rs.getCharacterStream(5) != null) {<br />                    BufferedReader bf = new BufferedReader(rs.getCharacterStream(5));<br />                    String s=null;<br />        <br />                    while ((s = bf.readLine()) != null) {<br />                        tot += s + "\n";<br />                    }<br />                }<br />                this.curriculum = tot;<br /><br />                this.adreca = new Adreca((Struct) rs.getObject(6));<br />                <br />                if (rs.getArray(7) != null)<br />                    this.correusE =  new ArrayList&lt;String&gt;(Arrays.asList((String[]) rs.getArray(7).getArray())) ;<br />                else<br />                    this.correusE = null;<br /><br />                if (rs.getArray(8) != null){<br />                    telefons = new ArrayList&lt;Telefon&gt;();<br />                    ResultSet tels = rs.getArray(8).getResultSet();<br />                    while (tels.next())<br />                        telefons.add(new Telefon((Struct)tels.getObject(2)));<br />                }<br />                else<br />                    this.telefons = null;<br />                <br />        } catch (SQLException e) {<br />            e.printStackTrace();<br />        } catch (IOException e) {<br />            e.printStackTrace();<br />        }<br />    }<br /><br />    public String getNif() {<br />        return nif;<br />    }<br /><br />    public void setNif(String nif) {<br />        this.nif = nif;<br />    }<br /><br />    public String getNom() {<br />        return nom;<br />    }<br /><br />    public void setNom(String nom) {<br />        this.nom = nom;<br />    }<br /><br />    public boolean isMajorEdat() {<br />        return majorEdat;<br />    }<br /><br />    public void setMajorEdat(boolean majorEdat) {<br />        this.majorEdat = majorEdat;<br />    }<br /><br />    public Image getFoto() {<br />        return foto;<br />    }<br /><br />    public void setFoto(Image foto) {<br />        this.foto = foto;<br />    }<br /><br />    public String getCurriculum() {<br />        return curriculum;<br />    }<br /><br />    public void setCurriculum(String curriculum) {<br />        this.curriculum = curriculum;<br />    }<br /><br />    public Adreca getAdreca() {<br />        return adreca;<br />    }<br /><br />    public void setAdreca(Adreca adreca) {<br />        this.adreca = adreca;<br />    }<br /><br />    public ArrayList&lt;String&gt; getCorreusE() {<br />        return correusE;<br />    }<br /><br />    public void setCorreusE(ArrayList&lt;String&gt; correusE) {<br />        this.correusE = correusE;<br />    }<br /><br />    public ArrayList&lt;Telefon&gt; getTelefons() {<br />        return telefons;<br />    }<br /><br />    public void setTelefons(ArrayList&lt;Telefon&gt; telefons) {<br />        this.telefons = telefons;<br />    }<br />}</p>
<p>Ara ja aniria el programa. Observeu què fàcil és des d'ací bolcar les dades des de la taula fins a un <strong>ArrayList</strong> d'objectes <strong>Persona</strong>. Hem fet també uns botons de moviment, per anar al registre següent i anterior (però en aquesta ocasió no els desactivem en arribar al principi o final; senzillament no funcionaran per a no eixir-nos del rang).</p>
<p>Com en el programa anterior, s'ha optat per construir molts panells, i anar col·locant tots els components en panells i subpannells. D'aquesta manera és més fàcil fer una redistribució de les coses. Però s'ha completat, i té un aspecte més acabat.</p>
<p class="codi">import java.awt.BorderLayout;<br />import java.awt.Color;<br />import java.awt.FlowLayout;<br />import java.awt.GridLayout;<br />import java.awt.event.ActionEvent;<br />import java.awt.event.ActionListener;<br />import java.io.IOException;<br />import java.lang.reflect.InvocationTargetException;<br />import java.sql.Connection;<br />import java.sql.DriverManager;<br />import java.sql.ResultSet;<br />import java.sql.SQLException;<br />import java.util.ArrayList;<br /><br />import javax.swing.BorderFactory;<br />import javax.swing.ImageIcon;<br />import javax.swing.JButton;<br />import javax.swing.JCheckBox;<br />import javax.swing.JFrame;<br />import javax.swing.JLabel;<br />import javax.swing.JPanel;<br />import javax.swing.JTextArea;<br />import javax.swing.JTextField;<br />import javax.swing.SwingConstants;<br /><br />public class Prova10_Pantalla extends JFrame implements ActionListener {<br />    JTextField nif = new JTextField(9);<br />    JTextField nom = new JTextField(9);<br />    JCheckBox major = new JCheckBox();<br />    JLabel foto = new JLabel("");<br />    JTextArea curric = new JTextArea();<br />    JTextField adreca = new JTextField(20);<br />    JTextArea correus = new JTextArea();<br />    JTextArea telefons = new JTextArea();<br /><br />    ArrayList&lt;Persona&gt; llista = new ArrayList&lt;Persona&gt;();<br />    int indActual = 0;<br /><br />    JLabel et_inicial = new JLabel("Visualització de les persones");<br />    JLabel et_nif = new JLabel("Nif");<br />    JLabel et_nom = new JLabel("Nom");<br />    JLabel et_major = new JLabel("Major d'edat");<br />    JLabel et_adr = new JLabel("Adreça");<br />    JLabel et_correus = new JLabel("Correus");<br />    JLabel et_telefons = new JLabel("Telèfons");<br /><br />    JPanel panInicial = new JPanel(new FlowLayout());<br />    JPanel panCentral = new JPanel(new GridLayout(3, 1));<br />    JPanel pan1 = new JPanel(new GridLayout(1, 2));<br />    JPanel pan1_1 = new JPanel(new GridLayout(6,2,10,10));<br />    JPanel pan1_1_1 = new JPanel(new FlowLayout());<br />    JPanel pan1_1_2 = new JPanel(new FlowLayout());<br />    JPanel pan1_1_3 = new JPanel(new FlowLayout());<br />    JPanel pan1_2 = new JPanel(new FlowLayout());<br />    JPanel pan2 = new JPanel(new BorderLayout());<br />    JPanel pan2_1 = new JPanel(new FlowLayout());<br />    JPanel pan2_2 = new JPanel(new BorderLayout());<br />    JPanel pan2_2_1 = new JPanel(new GridLayout(1,1,2, 2));<br />    JPanel pan2_2_2 = new JPanel(new GridLayout(1,1,2, 2));<br />    JPanel pan3 = new JPanel(new BorderLayout());<br />    JPanel pan4 = new JPanel();<br /><br />    JPanel panInferior = new JPanel(new FlowLayout());<br />    JButton ant = new JButton("&lt;&lt;");<br />    JButton post = new JButton("&gt;&gt;");<br />    <br />    JLabel buida = new JLabel("");<br /><br />    public void iniciar() throws SQLException, IOException, NoSuchMethodException, SecurityException,<br />            IllegalAccessException, IllegalArgumentException, InvocationTargetException {<br />        this.setLayout(new BorderLayout());<br />        this.setBounds(100, 100, 500, 675);<br /><br />        this.getContentPane().add(panInicial, BorderLayout.NORTH);<br />        this.getContentPane().add(panCentral, BorderLayout.CENTER);<br />        panInicial.add(et_inicial);<br />        panCentral.add(pan1);<br />        panCentral.add(pan2);<br />        panCentral.add(pan3);<br />        panCentral.setBorder(BorderFactory.createEtchedBorder());<br /><br />        pan1_1.setBorder(BorderFactory.createEmptyBorder(2,2,2,2));<br />        pan1.add(pan1_1);<br />        pan1.add(pan1_2);<br />        //pan1_1.add(pan1_1_1);<br />        //pan1_1.add(pan1_1_2);<br />        //pan1_1.add(pan1_1_3);<br />        et_nif.setHorizontalAlignment(SwingConstants.RIGHT);<br />        pan1_1.add(et_nif);<br />        pan1_1.add(nif);<br />        et_nom.setHorizontalAlignment(SwingConstants.RIGHT);<br />        pan1_1.add(et_nom);<br />        pan1_1.add(nom);<br />        major.setHorizontalAlignment(SwingConstants.RIGHT);<br />        pan1_1.add(major);<br />        pan1_1.add(et_major);<br />        pan1_1.add(buida);<br />        pan1.setBorder(BorderFactory.createEtchedBorder());<br />        pan1_2.add(foto);<br /><br />        pan2.add(pan2_1, BorderLayout.NORTH);<br />        pan2.add(pan2_2, BorderLayout.CENTER);<br />        pan2_1.add(et_adr);<br />        pan2_1.add(adreca);<br />        pan2_2_1.add(et_correus);<br />        pan2_2_1.add(et_telefons);<br />        pan2_2_2.add(correus);<br />        pan2_2_2.add(telefons);<br />        pan2_2.add(pan2_2_1, BorderLayout.NORTH);<br />        pan2_2.add(pan2_2_2, BorderLayout.CENTER);<br />        pan2.setBorder(BorderFactory.createEtchedBorder());<br />        pan2_1.setBorder(BorderFactory.createLineBorder(Color.GRAY));<br />        //pan2_2.setBorder( new MatteBorder(2, 2, 2, 2, Color.BLACK) );<br />        pan2_2_1.setBorder(BorderFactory.createLineBorder(Color.GRAY));<br />        pan2_2_1.setBackground( Color.GRAY );<br />        pan2_2_2.setBorder(BorderFactory.createLineBorder(Color.GRAY));<br />        pan2_2_2.setBackground( Color.GRAY );<br />        et_correus.setOpaque(true);<br />        et_telefons.setOpaque(true);<br />        correus.setOpaque(true);<br />        telefons.setOpaque(true);<br /><br />        pan3.add(curric);<br />        pan3.setBorder(BorderFactory.createEtchedBorder());<br /><br />        this.getContentPane().add(panInferior, BorderLayout.SOUTH);<br />        panInferior.add(ant);<br />        panInferior.add(post);<br /><br />        String url = "jdbc:pgsql://89.36.214.106:5432/rxx";<br /><br />        Connection con = DriverManager.getConnection(url, "rxx", "rxx");<br /><br />        ResultSet rs = con.createStatement().executeQuery("SELECT * FROM PERSONA4 ORDER BY 1");<br /><br />        while (rs.next())<br />            llista.add(new Persona(rs));<br /><br />        System.out.println(llista.size());<br />        mostraPersona(indActual);<br /><br />        rs.close();<br />        con.close();<br />        this.setVisible(true);<br />        ant.addActionListener(this);<br />        post.addActionListener(this);<br />        this.setDefaultCloseOperation(EXIT_ON_CLOSE);<br />    }<br /><br />    private void mostraPersona(int i) {<br />        Persona p = llista.get(i);<br /><br />        nif.setText(p.getNif());<br />        nom.setText(p.getNom());<br />        major.setSelected(p.isMajorEdat());<br />        <br />        if (p.getFoto() != null) {<br />            foto.setIcon(new ImageIcon(p.getFoto()));<br />            //foto = new JLabel(new ImageIcon(p.getFoto()));<br />            foto.setBorder(BorderFactory.createEtchedBorder());<br />            pan1_2.setVisible(true);<br />        } else<br />            pan1_2.setVisible(false);<br />        <br />        curric.setText(p.getCurriculum());<br />        <br />        if (p.getAdreca() != null) {<br />            adreca.setText(p.getAdreca().getCarrer() + "--&gt;" + p.getAdreca().getCodipostal() + "--&gt;"<br />                    + p.getAdreca().getPoblacio());<br />        } else<br />            adreca.setText("");<br /><br />        correus.setText("");<br />        if (p.getCorreusE() != null) {<br />            for (String c : p.getCorreusE())<br />                correus.append(c + "\n");<br />        }<br />        <br />        telefons.setText("");<br />        if (p.getTelefons() != null) {<br />            for (Telefon t : p.getTelefons()) {<br />                telefons.append(t.getNumero() + " (");<br />                if (t.isMobil())<br />                    telefons.append("mòbil)\n");<br />                else<br />                    telefons.append("fixe)\n");<br />            }<br />        }<br />    }<br /><br />    @Override<br />    public void actionPerformed(ActionEvent e) {<br />        if (e.getSource() == ant) {<br />            if (indActual &gt; 0)<br />                indActual--;<br />        }<br />        if (e.getSource() == post) {<br />            if (indActual &lt; llista.size() - 1)<br />                indActual++;<br />        }<br />        mostraPersona(indActual);<br />    }<br />}</p>
<p>I aquest és el programa principal.</p>
<p class="codi">import java.io.IOException;<br />import java.lang.reflect.InvocationTargetException;<br />import java.sql.SQLException;<br /><br />public class Prova10 {<br /><br />    public static void main(String[] args) throws SQLException, IOException, NoSuchMethodException, SecurityException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {<br />        Prova10_Pantalla finestra = new Prova10_Pantalla();<br />        finestra.iniciar();<br />    }<br />}</p>
<p>Aquest seria el seu aspecte:</p>
<p style="text-align: center;"><img src="T6_2_3_2_5_2.png" style="border: 1px solid black;" width="500" height="703" /></p>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="2324_estructurat.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="24__altres_aportacions.html" class="next"><span>Següent<span> &raquo;</span></span></a>
</div>
</div>
<div id="packageLicense" class="cc cc-by-nc-sa">
<p><span>Llicenciat sota la </span> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/">Llicència Creative Commons Reconeixement NoComercial CompartirIgual 2.5</a></p>
</div>
</div>
</div>
</div>
</body></html>