<?xml version="1.0" encoding="utf-8"?>

<instance xmlns="http://www.exelearning.org/content/v0.3" reference="2" version="0.3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://www.exelearning.org/content/v0.3 content.xsd" class="exe.engine.package.Package">
 <dictionary>
  <string role="key" value="_title"></string>
  <unicode value="Accés a Dades"></unicode>
  <string role="key" value="idevices"></string>
  <list></list>
  <string role="key" value="_addPagination"></string>
  <bool value="0"></bool>
  <string role="key" value="_addSearchBox"></string>
  <bool value="0"></bool>
  <string role="key" value="_author"></string>
  <unicode value="Àlvar Serrano Calduch"></unicode>
  <string role="key" value="_backgroundImg"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextMode"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextPlace"></string>
  <unicode value=""></unicode>
  <string role="key" value="_description"></string>
  <unicode value="Tema 9 que abans era el tema 8"></unicode>
  <string role="key" value="_docType"></string>
  <unicode value="XHTML"></unicode>
  <string role="key" value="_exportElp"></string>
  <bool value="0"></bool>
  <string role="key" value="_extraHeadContent"></string>
  <unicode value=""></unicode>
  <string role="key" value="_fieldValidationInfo"></string>
  <dictionary>
   <unicode role="key" value="all"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_title"></unicode>
     <unicode value="pp_lang"></unicode>
     <unicode value="pp_description"></unicode>
     <unicode value="pp_author"></unicode>
     <unicode value="pp_newlicense"></unicode>
    </list>
   </dictionary>
   <unicode role="key" value="procomun"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_learningResourceType"></unicode>
    </list>
    <unicode role="key" value="values_from_list"></unicode>
    <dictionary>
     <unicode role="key" value="pp_learningResourceType"></unicode>
     <list>
      <unicode value="master class"></unicode>
      <unicode value="closed exercise or problem"></unicode>
      <unicode value="real project"></unicode>
      <unicode value="didactic game"></unicode>
      <unicode value="webquest"></unicode>
      <unicode value="open problem"></unicode>
      <unicode value="simulation"></unicode>
      <unicode value="questionnaire"></unicode>
      <unicode value="conceptual map"></unicode>
     </list>
    </dictionary>
   </dictionary>
  </dictionary>
  <string role="key" value="_intendedEndUserRoleGroup"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleTutor"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_isChanged"></string>
  <bool value="0"></bool>
  <string role="key" value="_isTemplate"></string>
  <bool value="0"></bool>
  <string role="key" value="_lang"></string>
  <unicode value="ca"></unicode>
  <string role="key" value="_learningResourceType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_levelNames"></string>
  <list>
   <unicode value="1 - "></unicode>
   <unicode value="1.1 -"></unicode>
   <unicode value="1.1.1 -"></unicode>
  </list>
  <string role="key" value="_name"></string>
  <unicode value="AD_T9_BD_XML"></unicode>
  <string role="key" value="_nextIdeviceId"></string>
  <int value="89"></int>
  <string role="key" value="_nextNodeId"></string>
  <int value="60"></int>
  <string role="key" value="_nodeIdDict"></string>
  <dictionary>
   <unicode role="key" value="0"></unicode>
   <instance class="exe.engine.node.Node" reference="4">
    <dictionary>
     <string role="key" value="_title"></string>
     <unicode value="Tema 9: Bases de Dades XML"></unicode>
     <string role="key" value="idevices"></string>
     <list>
      <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="1">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Free Text"></unicode>
        <string role="key" value="_author"></string>
        <unicode value="University of Auckland"></unicode>
        <string role="key" value="_purpose"></string>
        <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
        <string role="key" value="_tip"></string>
        <string value=""></string>
        <string role="key" value="childs"></string>
        <list></list>
        <string role="key" value="content"></string>
        <instance class="exe.engine.field.TextAreaField" reference="3">
         <dictionary>
          <string role="key" value="_id"></string>
          <int value="1"></int>
          <string role="key" value="_idevice"></string>
          <reference key="1"></reference>
          <string role="key" value="_instruc"></string>
          <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
          <string role="key" value="_name"></string>
          <unicode value="Free Text"></unicode>
          <string role="key" value="anchor_names"></string>
          <list></list>
          <string role="key" value="anchors_linked_from_fields"></string>
          <dictionary></dictionary>
          <string role="key" value="buttonCaption"></string>
          <string value=""></string>
          <string role="key" value="content_w_resourcePaths"></string>
          <unicode content="true" value="&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T9_Portada.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;500&quot; /&gt;&lt;/p&gt;"></unicode>
          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
          <int value="4"></int>
          <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
          <int value="2"></int>
          <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
          <int value="3"></int>
          <string role="key" value="htmlTag"></string>
          <string value="div"></string>
          <string role="key" value="images"></string>
          <instance class="exe.engine.galleryidevice.GalleryImages">
           <dictionary>
            <string role="key" value=".listitems"></string>
            <list>
             <instance class="exe.engine.galleryidevice.GalleryImage">
              <dictionary>
               <string role="key" value="_caption"></string>
               <instance class="exe.engine.field.TextField">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <int value="3897"></int>
                 <string role="key" value="_idevice"></string>
                 <none></none>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="content"></string>
                 <string value=""></string>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                </dictionary>
               </instance>
               <string role="key" value="_id"></string>
               <unicode value="0_1.67"></unicode>
               <string role="key" value="_imageResource"></string>
               <instance class="exe.engine.resource.Resource" reference="5">
                <dictionary>
                 <string role="key" value="_idevice"></string>
                 <reference key="1"></reference>
                 <string role="key" value="_package"></string>
                 <reference key="2"></reference>
                 <string role="key" value="_storageName"></string>
                 <string value="T9_Portada.png"></string>
                 <string role="key" value="_userName"></string>
                 <string value="/tmp/tmpBTRZm0/T9_Portada.png"></string>
                 <string role="key" value="checksum"></string>
                 <string value="57c54ecdb287bee58af697bd3bce2016"></string>
                 <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="warningMsg"></string>
                 <string value=""></string>
                </dictionary>
               </instance>
               <string role="key" value="_parent"></string>
               <reference key="3"></reference>
               <string role="key" value="_thumbnailResource"></string>
               <none></none>
               <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
               <int value="3"></int>
               <string role="key" value="makeThumbnail"></string>
               <bool value="0"></bool>
              </dictionary>
             </instance>
            </list>
            <string role="key" value="idevice"></string>
            <reference key="3"></reference>
           </dictionary>
          </instance>
          <string role="key" value="intlinks_to_anchors"></string>
          <dictionary></dictionary>
          <string role="key" value="nextImageId"></string>
          <int value="68"></int>
          <string role="key" value="parentNode"></string>
          <reference key="4"></reference>
         </dictionary>
        </instance>
        <string role="key" value="edit"></string>
        <bool value="0"></bool>
        <string role="key" value="emphasis"></string>
        <int value="0"></int>
        <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
        <int value="7"></int>
        <string role="key" value="icon"></string>
        <string value=""></string>
        <string role="key" value="id"></string>
        <unicode value="0"></unicode>
        <string role="key" value="lastIdevice"></string>
        <bool value="0"></bool>
        <string role="key" value="parent"></string>
        <none></none>
        <string role="key" value="parentNode"></string>
        <reference key="4"></reference>
        <string role="key" value="systemResources"></string>
        <list></list>
        <string role="key" value="type"></string>
        <none></none>
        <string role="key" value="undo"></string>
        <bool value="1"></bool>
        <string role="key" value="userResources"></string>
        <list>
         <reference key="5"></reference>
        </list>
        <string role="key" value="version"></string>
        <int value="0"></int>
       </dictionary>
      </instance>
     </list>
     <string role="key" value="_id"></string>
     <unicode value="0"></unicode>
     <string role="key" value="_package"></string>
     <reference key="2"></reference>
     <string role="key" value="anchor_fields"></string>
     <list></list>
     <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
     <int value="2"></int>
     <string role="key" value="exportType"></string>
     <string value="website"></string>
     <string role="key" value="last_full_node_path"></string>
     <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML"></string>
     <string role="key" value="parent"></string>
     <none></none>
     <string role="key" value="top_anchors_linked_from_fields"></string>
     <list></list>
     <string role="key" value="children"></string>
     <list>
      <instance class="exe.engine.node.Node" reference="8">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="1 - Introducció"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="6">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="7">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="6"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;L’&lt;strong&gt;&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;&lt;/strong&gt; és, segons la definició feta pel World Wide Web Consortium (&lt;acronym title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/acronym&gt;), un format simple basat en text per a representar informació estructurada: documents, dades, configuracions, llibres, transaccions, factures i molt més. Va ser derivat d’un format estàndard més antic, anomenat &lt;acronym title=&quot;Standard General Markup Language&quot;&gt;SGML&lt;/acronym&gt;, amb la finalitat de ser més adequat per a la seua utilització en la web.&lt;/p&gt;
&lt;p&gt;L’&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;, avui en dia, és un dels formats més utilitzats per a l’&lt;strong&gt;intercanvi&lt;/strong&gt; d’informació estructurada: entre els programes, entre les persones, entre ordinadors i persones, tant a nivell local com a través de les xarxes. El fet que la informació s’intercanvie en format &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; ha implicat l’aparició de mecanismes que permeten enregistrar aquesta informació en format &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;, de manera que no siga necessari efectuar traduccions a altres formats.&lt;/p&gt;
&lt;p&gt;L’emmagatzematge de la informació en format &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; no s’ha fet d’una única manera, sinó que han aparegut diverses estratègies d’emmagatzematge que ens interessa conèixer, així com els avantatges i els inconvenients d’aquestes estratègies.&lt;/p&gt;
&lt;p&gt;Com en el tema 6 amb els objectes, veurem dues de les estratègies: la primera guardar en un SGBD Relacional, que incorpora conceptes de XML; la segona guardar en un SGBD enfocat estrictament a XML, les&lt;strong&gt; Bases de Dades Natives &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;&lt;/strong&gt;&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;&lt;/acronym&gt;. Ens interessa, saber les seues principals característiques per poder fer programes (en Java) que puguen guardar o accedir a informació guardada en XML. &lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="7"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="8"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="1"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="8"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="1"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:1%20-%20Introducci%C3%B3"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="11">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="2 - Estratègies d'emmagatzematge de XML"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="9">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="10">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="9"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;L’&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; és un llenguatge que permet tenir informació estructurada, ja siga per a intercanvi entre plataformes o, simplement, per facilitar un ràpid accés a continguts. La seua àmplia acceptació ha dut la necessitat d’idear mecanismes per poder guardar, de manera fàcil i àgil, grans volums de documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;.&lt;/p&gt;
&lt;p&gt;Hi ha més d'una manera, més d'una estratègia per a guardar la informació XML, però abans de definir-les hem de fer una xicoteta reflexió sobre els tipus de documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; que ens podem trobar.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Document centrats en dades&lt;/p&gt;
&lt;p&gt;Anomenats en anglès &lt;strong&gt;&lt;em&gt;data-centric&lt;/em&gt;&lt;/strong&gt;, estan pensats per a l’intercanvi entre plataformes. Solen ser documents amb estructures regulars i ben definides. Les dades que transmeten són simples i ben definides (encara que pot ser que siguen molt extenses), i en moltes ocasions són actualitzables. Acostumen a tenir com a origen una Base de Dades i, en conseqüència, no és massa important la seua persistència com a document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;. Aquest podria ser un exemple:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;&amp;lt;clients&amp;gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;client&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;codi&amp;gt;10&amp;lt;/codi&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;raoSocial&amp;gt;Components Informàtics&amp;lt;/raoSocial&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/client&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;client&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;codi&amp;gt;20&amp;lt;/codi&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;raoSocial&amp;gt;Institut Obert de Catalunya&amp;lt;/raoSocial&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/client&amp;gt;&lt;/div&gt;
&amp;lt;/clients&amp;gt;&lt;/div&gt;
&lt;p&gt;Es veu perfectament la seua estructura fortament jeràrquica, clara i concisa.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Document centrats en el document&lt;/p&gt;
&lt;div&gt;
&lt;p&gt;Anomenats en anglès &lt;strong&gt;&lt;em&gt;document-centric&lt;/em&gt;&lt;/strong&gt;, amb una estructura irregular. L’origen i el destí acostuma a estar en les persones i solen estar fets a mà. Hi ha que poden arribar a tenir un cert format, però no és estricte ni definit i en tal cas parlem de dades semiestructurades. Exemples de documents centrats en el document són els llibres, els correus electrònics, els anuncis, etc.&lt;/p&gt;
&lt;p&gt;A continuació veiem un exemple de document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; centrat en el document. Es tracta d’un document descriptiu d’un producte (torró) en el qual l’autor ha inserit diverses marques per facilitar-ne la consulta i la formatació en un navegador. Podeu comprovar-ho copiant el contingut en un fitxer amb extensió &lt;b&gt;.xml&lt;/b&gt; (per exemple &lt;strong&gt;Torro.xml&lt;/strong&gt;) i obrint-lo amb un navegador.&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;Producte&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;&amp;lt;Descripcio&amp;gt;&lt;/div&gt;
&lt;div&gt;El &amp;lt;NomProducte&amp;gt;Torró&amp;lt;/NomProducte&amp;gt; és un &amp;lt;Sumari&amp;gt;dolç que es fa generalment d'&amp;lt;Ingredient&amp;gt;ametla&amp;lt;/Ingredient&amp;gt;, &lt;span&gt;&amp;lt;Ingredient&amp;gt;&lt;/span&gt;mel&lt;span&gt;&amp;lt;/Ingredient&amp;gt;&lt;/span&gt; i &lt;span&gt;&amp;lt;Ingredient&amp;gt;&lt;/span&gt;ou&lt;span&gt;&amp;lt;/Ingredient&amp;gt;&lt;/span&gt;&amp;lt;/Sumari&amp;gt;, generalment cuit.&lt;/div&gt;
&lt;div&gt;&amp;lt;/Descripcio&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;&amp;lt;Origen&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;&amp;lt;Paragraf&amp;gt;L'origen del torró no és del tot clar, la teoria més plausible és que siga d'origen &amp;lt;i&amp;gt;àrab&amp;lt;/i&amp;gt;, com altres postres amb ametles, i des de les comarques del Sud del País Valencià, especialment de &amp;lt;b&amp;gt;Xixona&amp;lt;/b&amp;gt; i &amp;lt;b&amp;gt;Alacant&amp;lt;/b&amp;gt; estant es va popularitzar a altres zones peninsulars, el sud de França i altres parts del món&amp;lt;/Paragraf&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;&amp;lt;Paragraf&amp;gt;Potser el nogat occità i el &amp;lt;i&amp;gt;torrone&amp;lt;/i&amp;gt; o torró italià van néixer també directament dels àrabs, o no se sap si per influència del torró català, que ja existia a l'Edat Mitjana i que en aquell moment, i en concret al segle XV, la catalana era la cuina més prestigiosa d'Europa.&amp;lt;/Paragraf&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;&amp;lt;/Origen&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;&amp;lt;Varietats&amp;gt;Varietats &lt;/div&gt;
&lt;div&gt;&amp;lt;List&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;Item&amp;gt;&amp;lt;i&amp;gt;Torró de Xixona&amp;lt;/i&amp;gt;&amp;lt;/Item&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;Item&amp;gt;&lt;span&gt;&amp;lt;i&amp;gt;Torró d'Alacant&amp;lt;/i&amp;gt;&lt;/span&gt;&amp;lt;/Item&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;Item&amp;gt;&lt;span&gt;&amp;lt;i&amp;gt;Torró de Xerta&amp;lt;/i&amp;gt;&lt;/span&gt;&amp;lt;/Item&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;Item&amp;gt;&amp;lt;i&amp;gt;Torró de Xerta&amp;lt;/i&amp;gt;&amp;lt;/Item&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;Item&amp;gt;&amp;lt;i&amp;gt;Torró de Xerta&amp;lt;/i&amp;gt;&amp;lt;/Item&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/List&amp;gt; &lt;/div&gt;
&lt;div&gt;&amp;lt;/Varietats&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;&amp;lt;/Producte&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Si li afegírem un full d'estil (stylesheet o css) de manera prou senzilla podríem donar-li un aspecte més agradable, tal i com es va veure en el mòdul de Llenguatge de Marques. I es veu clarament que està centrat en el propi document, sense estructurar les dades massa. Aquest podria ser un exemple de css (el podríem anomenar &lt;strong&gt;Torro.css&lt;/strong&gt;):&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;Producte {&lt;br /&gt;    background-color: #FFD7D7;&lt;br /&gt;    font-size: medium;&lt;br /&gt;    display: block;&lt;br /&gt;    margin: 10px;&lt;br /&gt;}&lt;br /&gt;&lt;br /&gt;NomProducte {&lt;br /&gt;    font-size: large;&lt;br /&gt;    color: red;&lt;br /&gt;}&lt;br /&gt;&lt;br /&gt;Descripcio{&lt;br /&gt;    display: block;&lt;br /&gt;}&lt;br /&gt;&lt;br /&gt;Origen {&lt;br /&gt;    display: block;&lt;br /&gt;    margin-top: 20px;&lt;br /&gt;    border-top: 1px;&lt;br /&gt;}&lt;br /&gt;&lt;br /&gt;Paragraf {&lt;br /&gt;    display: block;&lt;br /&gt;}&lt;br /&gt;&lt;br /&gt;Varietats {&lt;br /&gt;    display: block;&lt;br /&gt;    font-size: x-large;&lt;br /&gt;    color: green;&lt;br /&gt;    margin-top: 20px;&lt;br /&gt;}&lt;br /&gt;&lt;br /&gt;List {&lt;br /&gt;}&lt;br /&gt;&lt;br /&gt;Item {&lt;br /&gt;    display: list-item;&lt;br /&gt;    margin-left: 20px;&lt;br /&gt;    margin-top: 5px;&lt;br /&gt;    font-size: large;&lt;br /&gt;    color: black;&lt;br /&gt;}&lt;br /&gt;&lt;br /&gt;i {&lt;br /&gt;    font-style: italic;&lt;br /&gt;    color: Blue;&lt;br /&gt;}&lt;br /&gt;&lt;br /&gt;b {&lt;br /&gt;    font-weight: bold;&lt;br /&gt;}&lt;/p&gt;
&lt;p&gt;I si l'apliquem al document xml posant la següent línia al principi del document:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;Torro.css&quot;?&amp;gt;&lt;/p&gt;
&lt;p&gt;tindríem el següent aspecte:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_2_1.png&quot; alt=&quot;Document centrat en document&quot; style=&quot;display: block; margin-left: auto; margin-right: auto; border: 1px solid black;&quot; height=&quot;349&quot; width=&quot;1042&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;La classificació de documents en &lt;strong&gt;&lt;em&gt;data-centric&lt;/em&gt;&lt;/strong&gt; i &lt;strong&gt;&lt;em&gt;document-centric &lt;/em&gt;&lt;/strong&gt;no és sempre directa i clara i, en múltiples ocasions, el contingut estarà barrejat o serà difícil de catalogar en un o altre tipus. Així, podem tenir documents centrats en dades (com una comanda o una factura) on alguna de les dades tinga codificació lliure (per exemple, part de la descripció de les línies) i documents centrats en el document (com un manual d’usuari) amb una part regular amb format estricte i ben definit (com el nom de l’autor i la data de revisió). Malgrat això, la caracterització dels documents en &lt;em&gt;data-centric&lt;/em&gt; i &lt;em&gt;document-centric &lt;/em&gt;s’utilitza per ajudar a decidir quina és la millor estratègia d’emmagatzematge.&lt;/p&gt;
&lt;p&gt;Ens cal, doncs, conèixer les tècniques d’emmagatzematge existents per, una vegada conegudes, decidir quina tècnica és més adequada segons el tipus de documents que hem de guardar i la gestió que en pretenem.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Estratègies d'emmagatzematge&lt;/p&gt;
&lt;p&gt;Tècnicament hi ha tres possibles estratègies per guardar els documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Guardar-los directament en el sistema d’&lt;strong&gt;arxius del sistema operatiu&lt;/strong&gt;. Opció molt pobra, ja que les funcionalitats que permet fer sobre el document queden limitades i definides pel Sistema Operatiu. No permet efectuar operacions sobre el contingut i només es permet el moviment del document com a una unitat. Si es tracta d’una petita quantitat de dades guardades en uns pocs documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;, aquesta opció pot funcionar, però no és gens recomanable per a gestionar un volum elevat de documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Guardar-los en un &lt;strong&gt;Sistema Gestor de Bases de Dades R&lt;/strong&gt;&lt;strong&gt;elacional &lt;/strong&gt; o &lt;strong&gt;Orientat a Objectes&lt;/strong&gt;. Aquesta opció obliga a una transformació del document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; cap al model que corresponga (relacional o orientat a objectes), per a poder guardar-lo.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Guardar-los en una&lt;strong&gt; base de dades &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; nativa&lt;/strong&gt;. Aquesta opció permet guardar directament el document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; a la base de dades sense cap tipus de transformació. Les bases de dades &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; natives han estat dissenyades especialment per a l’emmagatzematge d’XML. L’abreviatura és &lt;strong&gt;BD-XML nativa&lt;/strong&gt;. L’abreviatura anglesa és &lt;strong&gt;NXD&lt;/strong&gt;.&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Deixant de banda la primera opció, podríem dir com a &lt;strong&gt;regla general&lt;/strong&gt; que els documents de tipus &lt;strong&gt;&lt;em&gt;data-centric &lt;/em&gt;&lt;/strong&gt;s’emmagatzemarien en una Base de Dades tradicional (relacional o orientada a objectes). Això es pot fer bé fent un mapatge de les dades, tenint la possibilitat de fer-lo l'usuari, per mitjà d’eines de tercers, o per les capacitats que el SGBD incorpora per a poder tractar XML. En aquest últim cas, es diu que la base de dades està &lt;strong&gt;habilitada per a XML&lt;/strong&gt; (&lt;em&gt;XML-enabled&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;En canvi, els documents de tipus &lt;strong&gt;&lt;em&gt;document-centric &lt;/em&gt;&lt;/strong&gt;es guardarien en una base de dades &lt;strong&gt;XML nativa&lt;/strong&gt;. &lt;/p&gt;
&lt;p&gt;Aquestes regles no són absolutes. D’una banda, els documents &lt;em&gt;data-centric&lt;/em&gt; (sobretot si es tracta de dades semiestructurades) es poden guardar en bases de dades natives. De l’altra, els documents &lt;em&gt;document-centric&lt;/em&gt; poden ser guardats en bases de dades tradicionals en aquells casos en què es precisen poques funcionalitats específiques &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;.&lt;/p&gt;
&lt;p&gt;En el moment en què va aparèixer la necessitat de guardar documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;, l’emmagatzematge de dades estava centrat en els SGBD Relacionals o Orientats a Objectes i van sorgir dues tendències:&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;D’una banda, els grans SGBD existents van començar a introduir funcionalitats XML, donant lloc a l’aparició dels SGBD-XML habilitats.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;D'una altra banda, van començar a aparèixer els SGBD-XML natives.&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Avui en dia, els límits entre els SGBD-&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; habilitades i els SGBD-&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; natives s’estan desdibuixant, ja que les versions actuals de molts SGBD tradicionals (Relacionals i Orientats a Objectes) ja incorporen capacitats natives d’&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; i alguns SGBD-XML natives faciliten l’emmagatzematge de fragments de documents XML en bases de dades externes (usualment relacionals). &lt;/p&gt;
&lt;p&gt;En la pregunta següent ens centrarem en guardar en un SGBD relacional, primer fent un mapatge manual, i després utilitzant les eines que ens proporciona el SGBD per a manipular documents XML. Ho farem en PostgreSQL, que és un &lt;strong&gt;SGBD habilitat per a XML&lt;/strong&gt;. &lt;/p&gt;
&lt;/div&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="3895"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="24_1.65"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="12">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="9"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_2_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpBTRZm0/T7_2_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="3b220f96d39a16d8265a972a1d40eb09"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="10"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="10"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="66"></int>
             <string role="key" value="parentNode"></string>
             <reference key="11"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="24"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="11"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="12"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="19"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:2%20-%20Estrat%C3%A8gies%20d%27emmagatzematge%20de%20XML"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="15">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="3 - Emmagatzematge en SGBD tradicionals"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="13">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="14">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="13"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;strong&gt;( VOLUNTARI )&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Per a il·lustrar l'emmagatzematge en SGBD tradicionals, ens centrarem en un SGBD Relacional, concretament en &lt;strong&gt;PostgreSQL&lt;/strong&gt;, que ja l'havíem utilitzat amb anterioritat.&lt;/p&gt;
&lt;p&gt;Tenim 3 possibilitats bàsiques de guardar informació XML en un SGBD Relacional:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Guardar el document XML en un camp BLOB o CLOB (que en PostgreSQL és &lt;strong&gt;TEXT&lt;/strong&gt;). Evidentment podrem guardar el document, però realment el SGBD no ens està oferint cap utilitat. La utilització posterior serà molt pesada: no es pot fer cap tipus de consulta dins del document XML, i per tant estaríem obligats a fer tota la feina en el programa que accedesca al document (el programa  Java).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;div&gt; Transformació (mapatge) de l’estructura de dades del document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; cap al model relacional, per guardar les dades en taules. La idea principal d’aquesta opció és observar l’estructura del document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;, amb els elements i atributs que apareixen i efectuar la conversió al model relacional. Ens donarà molta feina per a fer el mapatge, encara que després es podran fer consultes molt elaborades. Mirem un exemple, on en principi sembla prou fàcil passar de l'estructura jeràrquica del document XML a taules del model relacional&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;    &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;ComandesVenda&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;    &amp;lt;ComandaVenda&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;Número&amp;gt;1234&amp;lt;/Número&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;Client&amp;gt;Indústries Fèrriques&amp;lt;/Client&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;Data&amp;gt;29/10/2011&amp;lt;/Data&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;Línia Número=&quot;1&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;    &amp;lt;Article&amp;gt;PIL001&amp;lt;/Article&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;    &amp;lt;Quantitat&amp;gt;12&amp;lt;/Quantitat&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;    &amp;lt;Preu&amp;gt;12.85&amp;lt;/Preu&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;/Línia&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;Línia Número=&quot;2&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;    &amp;lt;Article&amp;gt;CAT010&amp;lt;/Article&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;    &amp;lt;Quantitat&amp;gt;30&amp;lt;/Quantitat&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;    &amp;lt;Preu&amp;gt;5.25&amp;lt;/Preu&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;/Línia&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;    &amp;lt;/ComandaVenda&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;    &amp;lt;ComandaVenda&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;Número&amp;gt;1235&amp;lt;/Número&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;Client&amp;gt;Eines del Berguedà&amp;lt;/Client&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;Data&amp;gt;30/10/2011&amp;lt;/Data&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;Línia Número=&quot;1&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;    &amp;lt;Article&amp;gt;XQT301&amp;lt;/Article&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;    &amp;lt;Quantitat&amp;gt;14&amp;lt;/Quantitat&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;    &amp;lt;Preu&amp;gt;23.2&amp;lt;/Preu&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;    &amp;lt;/Línia&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;    &amp;lt;/ComandaVenda&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;/ComandesVenda&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt; Les taules que quedarien en el Model Relacional serien:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;Comanda (&lt;span style=&quot;text-decoration: underline;&quot;&gt;numero&lt;/span&gt;, client, data)&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;Linia_Comanda (&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;num_com, num_linia&lt;/strong&gt;&lt;/span&gt;, article, quantitat, preu)&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;Com comentàvem, la informació quedarà ben guardada i consultar les dades serà fàcil i potent (amb SQL), però duu l'inconvenient d'una gestió del mapatge total. I encara que el mecanisme sembla simple, no sempre és senzill fer aquesta conversió, ja que el model relacional i el &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; parteixen de conceptes molt diferents:&lt;/p&gt;
&lt;div&gt;
&lt;ul&gt;
&lt;li style=&quot;list-style-type: none;&quot;&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;El model relacional està basat en dades bidimensionals sense jerarquia ni ordre, mentre que el model &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; està basat en arbres jeràrquics on l’ordre és rellevant.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;En un document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; poden haver dades repetides, mentre el model relacional fuig de les repeticions.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Les relacions i les estructures dins dels documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; no sempre són òbvies.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;I, a més, què passa si necessitem tenir el document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; de nou? Fer el procés invers no sempre és trivial. Un dels conceptes difícils és determinar quines dades eren atributs i quines eren elements.&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Utilitzar eines específiques per al tractament de la informació XML. Només es podrà fer en SGBD XML habilitats. Aquest serà el punt que tractarem.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;En els següents subapartats farem un resum de les possibilitats que ens ofereix &lt;strong&gt;PostgreSQL&lt;/strong&gt; com a &lt;strong&gt;XML habilitat&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="14"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="1"></int>
             <string role="key" value="parentNode"></string>
             <reference key="15"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="25"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="15"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="28"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:3%20-%20Emmagatzematge%20en%20SGBD%20tradicionals"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="18">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.1 - Tipus de dades XML"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="16">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="17">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="16"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;Nota inicial&lt;br /&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;Les proves i exercicis sobre PostgreSQL les realitzarem cadascú en un usuari diferent, per a no interferir entre tots. Podríem instal·lar cadascú el seu SGBD PostgreSQL, administrar-lo per a crear els usuaris pertinents i treballar amb PgAdmin de forma còmoda. Si voleu provar-lo teniu una guia d'Administració PostgreSQL en els annexos.&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;Tanmateix, com que l'únic que volem és connectar-nos com a clients i tenim un servidor PostgreSQL al qual podem accedir tant des de dins de l'Institut com des de fora, no ens caldrà.&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;L'usuari i BD serà el mateix que ja es va utilitzar en el Tema 6. Si no tens clar quin és aquest usuari i BD, contacta amb el teu professor.&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;En altres ocasions ens hem aconformat utilitzant la perspectiva &lt;strong&gt;Database Development&lt;/strong&gt;. Lamentablement, ara no ens és suficient, ja que no suporta els tipus especials, com el tipus &lt;strong&gt;XML&lt;/strong&gt;. Per tant ens fa falta &lt;strong&gt;PgAdmin&lt;/strong&gt; per a poder treballar còmodament. Si no el teniu instal·lat, ho podeu fer fàcilment des de la pàgina &lt;a href=&quot;http://www.pgadmin.org&quot;&gt;www.pgadmin.org&lt;/a&gt;, però cuideu que siga la versió &lt;strong&gt;PgAdmin 3&lt;/strong&gt; (la versió PgAdmin 4 potser no siga compatible amb el nostre servidor). Fins i tot existeix una versió &lt;strong&gt;portable&lt;/strong&gt; que es pot instal·lar tant en Windows com en Linux (executant-la amb el &lt;strong&gt;Wine&lt;/strong&gt;), que si no heu d'utilitzar pgAdmin per a res més, és la que us recomane tilitzar. Us la podeu descarregar de:&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;&lt;a href=&quot;http://sourceforge.net/projects/pgadminportable/files/latest/download&quot;&gt;http://sourceforge.net/projects/pgadminportable/files/latest/download&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Tindrem un nou tipus de dades &lt;strong&gt;XML&lt;/strong&gt;, i ens permetrà guardar tot un document XML com el valor d'un camp d'aquest tipus. Anem a crear una taula d'exemple, que contindrà diferents documents XML.&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;CREATE TABLE p_xml&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;(&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;  num integer &lt;span&gt;PRIMARY KEY&lt;/span&gt;,&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;  doc xml&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;)&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Fem un primer exemple d'introducció d'un document. Posarem el valor directament en una sentència INSERT:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;INSERT INTO P_XML VALUES(1,'&amp;lt;clients&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 330px;&quot;&gt;&amp;lt;client&amp;gt;&amp;lt;codi&amp;gt;10&amp;lt;/codi&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 360px;&quot;&gt;&amp;lt;raoSocial&amp;gt;Components Informàtics&amp;lt;/raoSocial&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 330px;&quot;&gt;&amp;lt;/client&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 330px;&quot;&gt;&amp;lt;client&amp;gt;&amp;lt;codi&amp;gt;20&amp;lt;/codi&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 360px;&quot;&gt;&amp;lt;raoSocial&amp;gt;Institut Obert de Catalunya&amp;lt;/raoSocial&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 330px;&quot;&gt;&amp;lt;/client&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 300px;&quot;&gt;&amp;lt;/clients&amp;gt;')&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;PostgreSQL farà una conversió automàtica de &lt;strong&gt;VARCHAR&lt;/strong&gt; a &lt;strong&gt;XML&lt;/strong&gt;, i es guarda bé. Podríem fer la prova d'introduir malament la informació XML, per exemple llevant una etiqueta &amp;lt;/client&amp;gt;. PostgreSQL detectarà que no està ben format i donarà un error.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="17"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="18"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="30"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="18"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="30"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:3%20-%20Emmagatzematge%20en%20SGBD%20tradicionals:3.1%20-%20Tipus%20de%20dades%20XML"></string>
           <string role="key" value="parent"></string>
           <reference key="15"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="21">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.2 - Funcions de conversió"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="19">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="20">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="19"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;De tota manera disposarem de funcions de conversió entre VARCHAR i XML i a l'inrevès, que ens asseguren els tipus desitjat. Aquestes funcions són:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;XMLPARSE ( {DOCUMENT | CONTENT} &lt;em&gt;varcha&lt;/em&gt;&lt;em&gt;r&lt;/em&gt; )&lt;/strong&gt; , que tornarà un valor de tipus &lt;strong&gt;xml&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;Podem posar &lt;strong&gt;document&lt;/strong&gt; davant de la cadena, si és un document complet, i si no ho és posarem &lt;strong&gt;content&lt;/strong&gt; (totes les etiquetes han d'estar tancades, però no cal que tinga una arrel única). Aquesta seria una manera alternativa d'introduir la mateixa informació XML que abans&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&lt;br class=&quot;Apple-interchange-newline&quot; /&gt;INSERT INTO P_XML VALUES(2,XMLPARSE(CONTENT '&amp;lt;clients&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 390px;&quot;&gt;&amp;lt;client&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 420px;&quot;&gt;&amp;lt;codi&amp;gt;10&amp;lt;/codi&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 420px;&quot;&gt;&amp;lt;raoSocial&amp;gt;Components Informàtics&amp;lt;/raoSocial&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 390px;&quot;&gt;&amp;lt;/client&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 390px;&quot;&gt;&amp;lt;client&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 420px;&quot;&gt;&amp;lt;codi&amp;gt;20&amp;lt;/codi&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 420px;&quot;&gt;&amp;lt;raoSocial&amp;gt;Institut Obert de Catalunya&amp;lt;/raoSocial&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 390px;&quot;&gt;&amp;lt;/client&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 360px;&quot;&gt;&amp;lt;/clients&amp;gt;') )&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;XMLSERIALIZE &lt;strong&gt;( {DOCUMENT | CONTENT} &lt;em&gt;xml&lt;/em&gt; AS &lt;em&gt;tipus&lt;/em&gt; )&lt;/strong&gt;&lt;/strong&gt;, que tornarà un valor del tipus especificat (normalment VARCHAR)&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;Aquest exemple trau dues vegades el mateix valor, però la primera vegada és de tipus XML, i la segona VARCHAR&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;SELECT doc,XMLSERIALIZE(CONTENT doc AS VARCHAR) AS doc2 FROM P_XML&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt; Com es pot comprovar en la següent imatge, el primer camp és de tipus XML, i el segon VARCHAR:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_3_2_1.png&quot; style=&quot;border: 1px solid black;&quot; /&gt;&lt;/p&gt;
&lt;p&gt; Observeu també que cada resultat pot ocupar més d'una línia.&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="3887"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="28_1.66"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="22">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="19"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T7_3_2_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpBTRZm0/T7_3_2_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="96a11b265a791238c3c5bc35754b848c"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="20"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="20"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="67"></int>
                <string role="key" value="parentNode"></string>
                <reference key="21"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="28"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="21"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="22"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="31"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:3%20-%20Emmagatzematge%20en%20SGBD%20tradicionals:3.2%20-%20Funcions%20de%20conversi%C3%B3"></string>
           <string role="key" value="parent"></string>
           <reference key="15"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="25">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.3 - Funcions que produeixen contingut XML"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="23">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="24">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="23"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;Veurem en aquest apartat les funcions que ens proporciona PostgreSQL per a generar contingut XML. El resultat de totes elles és de tipus XML, i serviran per a generar un element, atribut, element arrel, concatenar, ... de manera que podrem generar contingut XML ben format. &lt;/p&gt;
&lt;p&gt;Són aquestes:&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;XMLCOMMENT&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;&lt;em&gt;Sintaxi&lt;/em&gt;: &lt;strong&gt;xmlcomment (&lt;em&gt;text&lt;/em&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;&lt;em&gt;Descripció&lt;/em&gt;: genera un comentari XML, amb el contingut del paràmetre. En aquest contingut no pot anar '&lt;strong&gt;--&lt;/strong&gt;', per  a no confondre amb l'etiqueta del comentari&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;&lt;em&gt;Exemple&lt;/em&gt;: &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlcomment('Hola');&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;  xmlcomment&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;--------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;!--Hola--&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;XMLCONCAT&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sintaxi&lt;/em&gt;: &lt;strong&gt;xmlconcat (&lt;em&gt;xml&lt;/em&gt; [, ... ])&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Descripció&lt;/em&gt;: concatena una llista de valors XML, sent el resultat també XML&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Exemple&lt;/em&gt;: &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlconcat('&amp;lt;primer&amp;gt;Hola&amp;lt;/primer&amp;gt;','&amp;lt;segon&amp;gt;Adéu&amp;lt;/segon&amp;gt;');&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                xmlconcat                 &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;------------------------------------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;primer&amp;gt;Hola&amp;lt;/primer&amp;gt;&amp;lt;segon&amp;gt;Adéu&amp;lt;/segon&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;XMLELEMENT&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sintaxi&lt;/em&gt;: &lt;strong&gt;xmlelement (name &lt;em&gt;nom&lt;/em&gt; [, xmlattributes (&lt;em&gt;valor&lt;/em&gt; [AS &lt;em&gt;nomatribut&lt;/em&gt;] [ , ... ] ) ]  [ , &lt;em&gt;contingut&lt;/em&gt; , ... ] )&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Descripció&lt;/em&gt;: genera un element amb el nom especificat, possibles atributs amb els seus valors, i possible contingut (si no posem contingut serà un element buit&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Exemples&lt;/em&gt;: &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlelement(name primer);&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; xmlelement &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;primer/&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlelement(name segon, 'Hola');&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;     xmlelement      &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;---------------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;segon&amp;gt;Hola&amp;lt;/segon&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlelement(name tercer, xmlattributes ('Primer atribut' as a1),'Hola');  &lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;             xmlelement             &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;------------------------------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;tercer a1=&quot;Primer atribut&quot;&amp;gt;Hola&amp;lt;/tercer&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; Anem a posar ara un exemple que combine tot un poc:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlelement(name quart, xmlattributes(current_date as data),&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                              xmlelement(name quart_1),&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                              xmlcomment('comentari'),&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                              xmlelement(name quart_2, 'valor quart 2'));&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                                       xmlelement                      &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;-------------------------------------------------------------------------------------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;quart data=&quot;2016-12-21&quot;&amp;gt;&amp;lt;quart_1/&amp;gt;&amp;lt;!--comentari--&amp;gt;&amp;lt;quart_2&amp;gt;valor quart 2&amp;lt;/quart_2&amp;gt;&amp;lt;/quart&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;O un altre molt interessant que crea un element comarca per a cada comarca de la taula COMARQUES, posant-li a més com a atribut la província:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
   SELECT xmlelement(name Comarca,xmlattributes(provincia as Provincia),nom_c) &lt;br /&gt;       FROM COMARQUES&lt;br /&gt;       ORDER BY provincia,nom_c;&lt;br /&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt; El resultat seria aquest:&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px; text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_3_3_1.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;648&quot; height=&quot;348&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;on podria sorprendre el tractament dels accents i caràcter especials, però no oblidem que és la manera de codificar aquestos caràcters en XML&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;XMLFOREST&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sintaxi&lt;/em&gt;: &lt;strong&gt;xmlforest (&lt;em&gt;contingut &lt;/em&gt;[ AS &lt;em&gt;nom&lt;/em&gt;] [ , ... ])&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Descripció&lt;/em&gt;: crea una sèrie d'elements i els seqüencia un darrere de l'altre. És especialment útil quan accedim a alguna taula&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Exemple&lt;/em&gt;: &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlforest('Hola' AS primer,'Adéu' AS segon);&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                xmlconcat                 &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;------------------------------------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;primer&amp;gt;Hola&amp;lt;/primer&amp;gt;&amp;lt;segon&amp;gt;Adéu&amp;lt;/segon&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; Com comentàvem és especialment útil quan accedim a taules. El següent exemple crea els element nom i província amb els valors de cadascuna de les files:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;&lt;br /&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&lt;/span&gt;SELECT xmlforest(nom_c,provincia) &lt;br /&gt;    FROM COMARQUES &lt;br /&gt;    ORDER BY nom_c;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                          xmlforest                          &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;-------------------------------------------------------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;nom&amp;gt;Alacantí&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;Alacant&amp;lt;/provincia&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;nom&amp;gt;Alcalatén&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;Castelló&amp;lt;/provincia&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;nom&amp;gt;Alcoià&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;Alacant&amp;lt;/provincia&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;nom&amp;gt;Alt Maestrat&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;Castelló&amp;lt;/provincia&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;...&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; Si açò ho enganxem amb la creació de l'element comarca, el tindrem ben format, d'una forma equivalent a una anterior, però sense atributs, tot subelements:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlelement(name Comarca,xmlforest(nom_c,provincia))                             &lt;br /&gt;    FROM COMARQUES &lt;br /&gt;    ORDER BY nom_c;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                                   xmlelement                                  &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; --------------------------------------------------------------------------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;comarca&amp;gt;&amp;lt;nom&amp;gt;Alacantí&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;Alacant&amp;lt;/provincia&amp;gt;&amp;lt;/comarca&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;comarca&amp;gt;&amp;lt;nom&amp;gt;Alcalatén&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;Castelló&amp;lt;/provincia&amp;gt;&amp;lt;/comarca&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;comarca&amp;gt;&amp;lt;nom&amp;gt;Alcoià&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;Alacant&amp;lt;/provincia&amp;gt;&amp;lt;/comarca&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;comarca&amp;gt;&amp;lt;nom&amp;gt;Alt Maestrat&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;Castelló&amp;lt;/provincia&amp;gt;&amp;lt;/comarca&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;comarca&amp;gt;&amp;lt;nom&amp;gt;Alt Millars&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;Castelló&amp;lt;/provincia&amp;gt;&amp;lt;/comarca&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; ...&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;XMLAGG&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sintaxi&lt;/em&gt;: &lt;strong&gt;xmagg (&lt;em&gt;xml&lt;/em&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Descripció&lt;/em&gt;: podem considerar-la una funció d'agregat, que concatena tots els element que li arriben. És a dir, que &lt;strong&gt;xmlconcat &lt;/strong&gt;concatena els valors dels paràmetres, però de forma aïllada, cada fila és en un resultat diferent. En canvi &lt;strong&gt;xmlagg&lt;/strong&gt; els junta tots en un únic resultat.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Exemples&lt;/em&gt;: &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlagg(xmlforest('Hola' AS primer,'Adéu' AS segon));&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                  xmlagg                  &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;------------------------------------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;primer&amp;gt;Hola&amp;lt;/primer&amp;gt;&amp;lt;segon&amp;gt;Adéu&amp;lt;/segon&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Que així queda aproximadament com la concatenació. Però la utilitat gran és quan agreguem els elements d'una taula (recordeu que el paràmetre ha de ser XML)&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlagg(xmlforest(nom_c,provincia)) &lt;br /&gt;    FROM COMARQUES;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                                    xmlagg                 &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;-------------------------------------------------------------------------------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &amp;lt;nom&amp;gt;Safor&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;València&amp;lt;/provincia&amp;gt;&amp;lt;nom&amp;gt;Horta Sud&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;València&amp;lt;/provincia&amp;gt; ....&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Per tant ara ja tenim la manera d'ajuntar totes les comarques en un únic XML i posar-li nom al conjunt:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlelement(name comarques, xmlagg(xmlelement(name comarca,xmlforest(nom_c,provincia))))&lt;br /&gt;    FROM COMARQUES;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                                   xmlconcat                 &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;---------------------------------------------------------------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;comarques&amp;gt;&amp;lt;comarca&amp;gt;&amp;lt;nom&amp;gt;Safor&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;València&amp;lt;/provincia&amp;gt;&amp;lt;/comarca&amp;gt;&amp;lt;comarca&amp;gt;&amp;lt;nom&amp;gt;Horta Sud&amp;lt;/nom&amp;gt;&amp;lt;provincia&amp;gt;València&amp;lt;/provincia&amp;gt;&amp;lt;/comarca&amp;gt;...&amp;lt;/comarques&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;XMLROOT&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sintaxi&lt;/em&gt;:&lt;strong&gt; xmlroot(&lt;em&gt;xml&lt;/em&gt;, version &lt;em&gt;text&lt;/em&gt; | no value [, standalone yes|no|no value])&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Descripció&lt;/em&gt;: modifica les propietats del node arrel del XML que tenim com a primer paràmetre. Si s'especifica la versió, reemplaçarà la que hi haja. I el mateix amb l'atribut standalone.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Exemple:&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT xmlroot(xmlparse(document '&amp;lt;primer&amp;gt;abc&amp;lt;/primer&amp;gt;'), version '1.0', standalone yes);&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;                         xmlroot&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;--------------------------------------------------------------&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; standalone=&quot;yes&quot;?&amp;gt; &amp;lt;primer&amp;gt;abc&amp;lt;/primer&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Com podem comprovar, amb aquestes funcions podem formar un document sencer, i de forma prou senzilla.&lt;/p&gt;
&lt;p&gt;Anem a aprofitar-ho doncs per a inserir una nova fila a la taula P_XML, on teníem un camp XML. Per a poder introduir totes les comarques en un document, i afegir-lo a aquesll taula podríem fer:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;INSERT INTO P_XML&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;SELECT 3, xmlroot(xmlparse(document (SELECT xmlelement(name comarques,&lt;/div&gt;
&lt;div style=&quot;margin-left: 480px;&quot;&gt;xmlagg(xmlelement(name comarca,xmlforest(nom_c,provincia))))&lt;/div&gt;
&lt;div style=&quot;margin-left: 480px;&quot;&gt;FROM COMARQUES)),&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;version '1.0', standalone yes);&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; A continuació veurem una forma molt més senzilla d'introduir tota la taula de comarques com un document XML, però aquesta forma que acabem d'utilitzar ens permetria modificar al gust el format (per exemple posant la província com un atribut)&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="3886"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="29_1.39"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="26">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="23"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T7_3_3_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpBTRZm0/T7_3_3_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="8a61eec424ee6873e3f2a120de92e54c"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="24"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="24"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="40"></int>
                <string role="key" value="parentNode"></string>
                <reference key="25"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="29"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="25"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="26"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="32"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:3%20-%20Emmagatzematge%20en%20SGBD%20tradicionals:3.3%20-%20Funcions%20que%20produeixen%20contingut%20XML"></string>
           <string role="key" value="parent"></string>
           <reference key="15"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="29">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.4 - Convertir taules senceres a XML"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="27">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="28">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="27"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;En l'últim exemple de l'apartat anterior havíem aconseguit forma un document XML a pertir de la taula &lt;strong&gt;Comarques&lt;/strong&gt; i inserir-lo en un camp XML (de la taula P_XML). Aquella manera ens permet confeccionar al nostre gust l'estructura del XML. Per contra, és un poc laboriós.&lt;/p&gt;
&lt;p&gt;Anem a veure ara dues funcions que ens permeten convertir una taula i una consulta, respectivament, a XML amb l'estructura que totes les columnes seran elements. No tindrem per tant tanta versatilitat com en l'apartat anterior. Però per contra la senzillesa és extrema.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;TABLE_TO_XML&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sintaxi&lt;/em&gt;: &lt;strong&gt;table_to_xml(&lt;em&gt;taula&lt;/em&gt;, &lt;em&gt;tract_nul&lt;/em&gt;, &lt;em&gt;format&lt;/em&gt;, &lt;em&gt;espai_noms&lt;/em&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Descripció&lt;/em&gt;: converteix una taula en un document XML. El primer paràmetre és la taula a convertir. El segon (booleà) indica si s'inclouen els valors nuls com element buits. El tercer (booleà) implica el format que tindran els elements. El quart serveix per definir l'espai de noms; el podem deixar com una cadena nula ('').&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Exemple:&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Anem a fixar-nos en el tercer paràmetre. Si està a &lt;em&gt;false&lt;/em&gt;, el nom de la taula serà l'element arrel, i per a cada fila crearà un element anomenat row, que inclourà tots els camps:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;SELECT table_to_xml('COMARQUES', false, false, '');&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;ens donarà aquesta eixida:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;&amp;lt;comarques xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&amp;gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;row&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;  &amp;lt;nom&amp;gt;Safor&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;  &amp;lt;provincia&amp;gt;València&amp;lt;/provincia&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/row&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;row&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;  &amp;lt;nom&amp;gt;Horta Sud&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;  &amp;lt;provincia&amp;gt;València&amp;lt;/provincia&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/row&amp;gt;&lt;/div&gt;
&lt;div&gt;  &lt;/div&gt;
&lt;div&gt;   ...&lt;/div&gt;
&lt;div&gt;&amp;lt;/comarques&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt; En canvi si el tercer paràmetre està a true, traurà una successió d'element amb el mateix nom que la taula, amb els camps com a elements:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;SELECT table_to_xml('COMARQUES', false, true, '');&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;ara l'eixida serà:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;&amp;lt;comarques xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&amp;gt; &lt;/div&gt;
&lt;div&gt;  &amp;lt;nom&amp;gt;Safor&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div&gt;  &amp;lt;provincia&amp;gt;València&amp;lt;/provincia&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/comarques&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;
&lt;div&gt;&amp;lt;comarques xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&amp;gt; &lt;/div&gt;
  &amp;lt;nom&amp;gt;Horta Sud&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div&gt;  &amp;lt;provincia&amp;gt;València&amp;lt;/provincia&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/comarques&amp;gt;&lt;/div&gt;
&lt;div&gt;  &lt;/div&gt;
&lt;div&gt;...&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt; És a dir, de la primera manera el document està ben format, i de la segona és una successió d'elements.&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;Un exemple d'utilització (que aprofitarem per a introduir en la taula P_XML) seria intentar canviar el nom dels elements &lt;em&gt;row &lt;/em&gt;per&lt;em&gt; comarca&lt;/em&gt; . La solució podria ser utilitzar la funció &lt;strong&gt;replace()&lt;/strong&gt; per a canviar el que volem. Només haurem d'anar en compte de convertir el document XML generat per TABLE_TO_XML a text, per poder utilitzar la funció replace, i després tornar a convertir-lo a XML. Introduirem també les taules POBLACIONS i INSTITUTS convertides en XML (substituint &lt;em&gt;row&lt;/em&gt; per un més adequat)&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;INSERT INTO P_XML &lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&lt;span&gt;SELECT&lt;/span&gt; 4, replace(table_to_xml('COMARQUES',false,false,'')::text,'row','comarca')::xml;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;INSERT INTO P_XML &lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;SELECT 5, replace(table_to_xml('POBLACIONS',false,false,'')::text,'row','poble')::xml;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;INSERT INTO P_XML &lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;SELECT 6, replace(table_to_xml('INSTITUTS',false,false,'')::text,'row','institut')::xml;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; En la següent imatge es mostra el contingut de la taula &lt;strong&gt;P_XML&lt;/strong&gt;, on s'han ampliat les noves files per poder veure el contingut:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_3_4_1.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;1278&quot; height=&quot;775&quot; /&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;QUERY_TO_XML&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sintaxi&lt;/em&gt;: &lt;strong&gt;query_to_xml(&lt;em&gt;sent_SQL&lt;/em&gt;, &lt;em&gt;tract_nul&lt;/em&gt;, &lt;em&gt;format&lt;/em&gt;, &lt;em&gt;espai_noms&lt;/em&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Descripció&lt;/em&gt;: absolutament equivalent a l'anterior, però la font de les dades no serà una taula, sinó una sentència SQL.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Exemple:&lt;/em&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;SELECT query_to_xml('SELECT nom_c,COUNT(*) AS num_p, AVG(altura) AS alt_mitj&lt;/div&gt;
&lt;div style=&quot;margin-left: 270px;&quot;&gt;FROM POBLACIONS&lt;/div&gt;
&lt;div style=&quot;margin-left: 270px;&quot;&gt;GROUP BY nom_c&lt;/div&gt;
&lt;div style=&quot;margin-left: 270px;&quot;&gt;ORDER BY 3 DESC',&lt;/div&gt;
&lt;div style=&quot;margin-left: 240px;&quot;&gt;false,false,'');&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I l'eixida seria aquesta:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;table xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;row&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;  &amp;lt;comarca&amp;gt;Ports&amp;lt;/comarca&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;  &amp;lt;num_p&amp;gt;13&amp;lt;/num_p&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;  &amp;lt;alt_mitj&amp;gt;834.5384615384615385&amp;lt;/alt_mitj&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;/row&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;...&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/table&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="3879"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="31_1.39"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="30">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="27"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T7_3_4_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpBTRZm0/T7_3_4_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="bfaf93226b90039563b068c9c016af5a"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="28"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="28"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="40"></int>
                <string role="key" value="parentNode"></string>
                <reference key="29"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="31"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="29"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="30"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="34"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:3%20-%20Emmagatzematge%20en%20SGBD%20tradicionals:3.4%20-%20Convertir%20taules%20senceres%20a%20XML"></string>
           <string role="key" value="parent"></string>
           <reference key="15"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="33">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.5 - Consultes XPATH"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="31">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="32">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="31"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;També tenim funcions que ens permeten buscar dins d'un document XML. Podrem fer recerques de tipus &lt;strong&gt;XPATH&lt;/strong&gt;. No podrem, en canvi, arribar a la potencialitat que proporciona XQUERY (amb les sentències FLWOR).&lt;/p&gt;
&lt;p&gt;Els resultats d'una recerca XPATH es retornaran en un &lt;strong&gt;array de xml&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;XPATH&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sintaxi&lt;/em&gt;: &lt;strong&gt;xpath(&lt;em&gt;xpath&lt;/em&gt;, &lt;em&gt;xml&lt;/em&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Descripció&lt;/em&gt;: fa una recerca d'una expressió XPATH (primer paràmetre) en el document o contingut XML especificat en el segon paràmetre. El resultat vindrà en un array de XML. Hi pot haver un tercer paràmetre per a indicar espais de noms.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Exemples:&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Veurem uns poquets exemples de recordatori. Aprofundirem més en la pregunta 6.2, ja que en eXist podrem fer més coses, el XPath és més complet. Recordeu que la funció &lt;strong&gt;text()&lt;/strong&gt; torna el contingut d'un element. Si no la posàrem, ens tornaria tot l'element (amb etiqueta i tot).&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Buscar el nom de totes les comarques (les comarques les tenim en la la fila &lt;strong&gt;4&lt;/strong&gt; de &lt;strong&gt;P_XML&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;codi2&quot;&gt;SELECT xpath('//nom_c/text()',(SELECT doc FROM P_XML WHERE num=4));&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Buscar les poblacions de la comarca Alcalatén (les poblacions les tenim en la la fila &lt;strong&gt;5&lt;/strong&gt; de &lt;strong&gt;P_XML&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;codi2&quot;&gt;SELECT xpath('//poble[nom_c=&quot;Alcalatén&quot;]/nom/text()',(SELECT doc FROM P_XML WHERE num=5));&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Buscar els instituts de Castelló (codi de municipi 12040) (els instituts les tenim en la la fila &lt;strong&gt;6&lt;/strong&gt; de &lt;strong&gt;P_XML&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;codi2&quot;&gt;SELECT xpath('//institut[cod_m=12040]/nom/text()',(SELECT doc FROM P_XML WHERE num=6));&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Buscar els pobles que estan a una altura major de 1000 m.&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;codi2&quot;&gt;SELECT xpath('//poble[altura &amp;gt; 1000]/nom/text()',(SELECT doc FROM P_XML WHERE num=5)); &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Buscar tots els pobles de la Plana Alta i la Plana Baixa&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;codi2&quot;&gt;SELECT xpath('//poble[nom_c=&quot;Plana Alta&quot; or nom_c=&quot;Plana Baixa&quot;]/nom/text()',(SELECT doc FROM P_XML WHERE num=5));&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Buscar les poblacions que tenen entre 100.000 i 300.000 habitants&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;codi2&quot;&gt;SELECT xpath('//poble[poblacio&amp;gt;100000 and poblacio&amp;lt;300000]/nom/text()',(SELECT doc FROM P_XML WHERE num=5));&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;SELECT xpath('//poble[poblacio&amp;gt;100000][poblacio&amp;lt;300000]/nom/text()',(SELECT doc FROM P_XML WHERE num=5));&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="32"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="33"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="33"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="33"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="33"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:3%20-%20Emmagatzematge%20en%20SGBD%20tradicionals:3.5%20-%20Consultes%20XPATH"></string>
           <string role="key" value="parent"></string>
           <reference key="15"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="36">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.6 - Utilització des de Java"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="34">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="35">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="34"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;Però no hem de perdre de perspectiva que el que ens interessa és accedir des de Java als documents XML.&lt;/p&gt;
&lt;p&gt;En principi el que podem fer és portar-nos tot el document a Java i tractar-lo com ha vam fer en el tema de fitxers: ens creem un document DOM resultat d'analitzar aquest document, i per tant ja tindrem tota l'estructura del document XML en DOM. La manera de dur tot el document és una senzilla instrucció SQL. L'única dificultat és cridar a l'analitzador (&lt;strong&gt;&lt;em&gt;parse&lt;/em&gt;&lt;/strong&gt;) tenint en compte que ara no ve d'un fitxer sinó d'un String (al que haurem convertit el que ve del resulset de la consulta).&lt;/p&gt;
&lt;p&gt;En el següent exemple agafem el document que provenia de les comarques (num=5). Una vegada en Java traurem senzillament els noms. Ho podeu fer en un projecte nou anomenat &lt;strong&gt;Tema8_1&lt;/strong&gt;, en un paquet anomenat &lt;strong&gt;Exemples&lt;/strong&gt;. No us oblideu de canviar la Base de Dade, usuari i contrasenya (&lt;strong&gt;rxx&lt;/strong&gt;) a la vostra:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;import java.io.IOException;&lt;br /&gt;import java.io.StringReader;&lt;br /&gt;import java.sql.Connection;&lt;br /&gt;import java.sql.DriverManager;&lt;br /&gt;import java.sql.ResultSet;&lt;br /&gt;import java.sql.SQLException;&lt;br /&gt;import javax.xml.parsers.DocumentBuilder;&lt;br /&gt;import javax.xml.parsers.DocumentBuilderFactory;&lt;br /&gt;import javax.xml.parsers.ParserConfigurationException;&lt;br /&gt;&lt;br /&gt;import org.w3c.dom.Document;&lt;br /&gt;import org.w3c.dom.Element;&lt;br /&gt;import org.w3c.dom.NodeList;&lt;br /&gt;import org.xml.sax.InputSource;&lt;br /&gt;import org.xml.sax.SAXException;&lt;br /&gt;&lt;br /&gt;public class PG_Prova1 {&lt;br /&gt;&lt;br /&gt;    public static void main(String[] args) throws ClassNotFoundException, SQLException, ParserConfigurationException, SAXException, IOException  {&lt;br /&gt;        String url = &quot;jdbc:postgresql://89.36.214.106:5432/rxx&quot;;&lt;br /&gt;        String usuari = &quot;rxx&quot;;&lt;br /&gt;        String password = &quot;rxx&quot;;&lt;br /&gt;&lt;br /&gt;        Class.forName(&quot;org.postgresql.Driver&quot;);&lt;br /&gt;&lt;br /&gt;        Connection con = DriverManager.getConnection(url, usuari, password);&lt;br /&gt;        &lt;br /&gt;        ResultSet rs = con.createStatement().executeQuery(&quot;SELECT doc FROM P_XML WHERE num=5&quot;);&lt;br /&gt;&lt;br /&gt;        if (rs.next()) {&lt;br /&gt;            DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();&lt;br /&gt;            Document doc = db.parse(new InputSource(new StringReader(rs.getString(1))));&lt;br /&gt;&lt;br /&gt;            Element arrel = (Element) doc.getDocumentElement();&lt;br /&gt;            NodeList llista = arrel.getElementsByTagName(&quot;nom&quot;);&lt;br /&gt;&lt;br /&gt;            for (int i = 0; i &amp;lt; llista.getLength(); i++) {&lt;br /&gt;                Element el = (Element) llista.item(i);&lt;br /&gt;                System.out.println(el.getNodeName() + ' ' + el.getFirstChild().getNodeValue());&lt;br /&gt;            }&lt;br /&gt;        }&lt;br /&gt;        con.close();&lt;br /&gt;    }&lt;br /&gt;}&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Amb l'anterior únicament estem utilitzant la capacitat de PostgreSQL de guardar documents XML. Però podem anar més enllà. Anem a fer que treballe un poc més PostgreSQL i ens done la informació un poc més elaborada. Farem una consulta &lt;strong&gt;XPATH&lt;/strong&gt;. Recordem que el resultat ve en un &lt;strong&gt;array de XML&lt;/strong&gt;. Però si considerem que la consulta ja ens torna la informació final podem agafar-lo com un &lt;strong&gt;array de strings&lt;/strong&gt;. Recordeu que l'array no és el normal de Java, sinó el tipus de SQL. La manera que vam fer de recórrer-lo era passar-lo a un altre ResultSet&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;import java.sql.Array;&lt;br /&gt;import java.sql.Connection;&lt;br /&gt;import java.sql.DriverManager;&lt;br /&gt;import java.sql.ResultSet;&lt;br /&gt;import java.sql.SQLException;&lt;br /&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;public class PG_Prova2 {&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;public static void main(String[] args) throws SQLException, ClassNotFoundException {&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String url=&quot;jdbc:postgresql://89.36.214.106:5432/rxx&quot;;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String usuari=&quot;rxx&quot;;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String password=&quot;rxx&quot;;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
      Class.forName(&quot;org.postgresql.Driver&quot;);&lt;br /&gt;&lt;br /&gt;      Connection con = DriverManager.getConnection(url, usuari, password);&lt;br /&gt;&lt;br /&gt;      ResultSet rs = con.createStatement()&lt;br /&gt;                .executeQuery(&quot;SELECT xpath('//poble[nom_c=\&quot;Plana Alta\&quot;]/nom/text()',doc) FROM P_XML WHERE num=5&quot;);&lt;br /&gt;&lt;br /&gt;      if (rs.next()) {&lt;br /&gt;          System.out.println(rs.getString(1));&lt;br /&gt;          Array pobles = rs.getArray(1);&lt;br /&gt;          ResultSet rs1 = pobles.getResultSet();&lt;br /&gt;          while (rs1.next())&lt;br /&gt;              System.out.println(rs1.getString(2));&lt;br /&gt;      }&lt;br /&gt;      con.close();&lt;br /&gt;  }&lt;br /&gt;}&lt;/div&gt;
&lt;p&gt;Hem de ser conscients que el resultat de la funció &lt;strong&gt;XPATH&lt;/strong&gt; és un array de &lt;strong&gt;xml&lt;/strong&gt;. Si volem només un resultat, hem d'anar en compte, perquè serà un array amb un únic element. Per exemple, si volem l'&lt;strong&gt;altura&lt;/strong&gt; de &lt;strong&gt;Vistabella&lt;/strong&gt;, encara que només és un resultat, ens ve en un array:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;import java.sql.Array;&lt;br /&gt;import java.sql.Connection;&lt;br /&gt;import java.sql.DriverManager;&lt;br /&gt;import java.sql.ResultSet;&lt;br /&gt;import java.sql.SQLException;&lt;br /&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;public class PG_Prova3_1 {&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;public static void main(String[] args) throws SQLException, ClassNotFoundException {&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String url=&quot;jdbc:postgresql://89.36.214.106:5432/rxx&quot;;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String usuari=&quot;rxx&quot;;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String password=&quot;rxx&quot;;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
      Class.forName(&quot;org.postgresql.Driver&quot;);&lt;br /&gt;&lt;br /&gt;      Connection con = DriverManager.getConnection(url, usuari, password);&lt;br /&gt;&lt;br /&gt;      ResultSet rs = con.createStatement().executeQuery(&lt;br /&gt;                &quot;SELECT xpath('//poble[nom=\&quot;Vistabella del Maestrat\&quot;]/altura/text()',doc) FROM P_XML WHERE num=5&quot;);&lt;br /&gt;&lt;br /&gt;      if (rs.next()) {&lt;br /&gt;          Array poble = rs.getArray(1);&lt;br /&gt;          ResultSet rs1 = poble.getResultSet();&lt;br /&gt;          if (rs1.next())&lt;br /&gt;              System.out.println(rs1.getString(2));&lt;br /&gt;      }&lt;br /&gt;      con.close();&lt;br /&gt;  }&lt;br /&gt;}&lt;/div&gt;
&lt;p&gt;Tanmateix podem estalviar-nos el segon &lt;strong&gt;ResltSet&lt;/strong&gt;, si elaborem un poc millor la consulta. Com que ja sabem que només serà un resultat, en la consulta podem agafar el primer element únicament. Mireu que estem obligats a tancar la funció entre parèntesis per a que funcione bé.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;import java.sql.Array;&lt;br /&gt;import java.sql.Connection;&lt;br /&gt;import java.sql.DriverManager;&lt;br /&gt;import java.sql.ResultSet;&lt;br /&gt;import java.sql.SQLException;&lt;br /&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;public class PG_Prova3_2 {&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;public static void main(String[] args) throws SQLException, ClassNotFoundException {&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String url=&quot;jdbc:postgresql://89.36.214.106:5432/rxx&quot;;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String usuari=&quot;rxx&quot;;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String password=&quot;rxx&quot;;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
      Class.forName(&quot;org.postgresql.Driver&quot;);&lt;br /&gt;&lt;br /&gt;      Connection con = DriverManager.getConnection(url, usuari, password);&lt;br /&gt;&lt;br /&gt;      ResultSet rs = con.createStatement().executeQuery(&lt;br /&gt;                &quot;SELECT (xpath('//poble[nom=\&quot;Vistabella del Maestrat\&quot;]/altura/text()',doc))[1] FROM P_XML WHERE num=5&quot;);&lt;br /&gt;&lt;br /&gt;      if (rs.next()) {&lt;br /&gt;          System.out.println(&quot;Altura de Vistabella: &quot; + rs.getString(1));&lt;br /&gt;      }&lt;br /&gt;      con.close();&lt;br /&gt;  }&lt;br /&gt;}&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;I treballant a la inversa, també podrem inserir les dades provinents de Java (per exemple agafant les dades des d'un fitxer) en la BD de PostgreSQL. Podreu agafar el fitxer &lt;strong&gt;biblioteca.xml&lt;/strong&gt; de l'aula virtual. L'haureu de col·locar a l'arrel del projecte.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;import java.io.FileReader;&lt;/div&gt;
&lt;div&gt;import java.io.IOException;&lt;/div&gt;
&lt;div&gt;import java.sql.Array;&lt;/div&gt;
&lt;div&gt;import java.sql.Connection;&lt;/div&gt;
&lt;div&gt;import java.sql.DriverManager;&lt;/div&gt;
&lt;div&gt;import java.sql.ResultSet;&lt;/div&gt;
&lt;div&gt;import java.sql.SQLException;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;public class PG_Prova4 {&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;public static void main(String[] args) throws SQLException, IOException, ClassNotFoundException {&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String url=&quot;jdbc:postgresql://89.36.214.106:5432/rxx&quot;;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String usuari=&quot;rxx&quot;;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String password=&quot;rxx&quot;;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;Class.forName(&quot;org.postgresql.Driver&quot;);&lt;br /&gt;&lt;br /&gt;Connection con = DriverManager.getConnection(url,usuari,password);&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;FileReader f = new FileReader(&quot;biblioteca.xml&quot;);&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;String tot=&quot;&quot;;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;int c = f.read();&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;while (c!=-1){&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;tot += (char) c;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;c=f.read();&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;}&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;con.createStatement().executeUpdate(&quot;INSERT INTO P_XML VALUES(7,XMLPARSE(CONTENT '&quot; + tot + &quot;'))&quot;);&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;//Ja està inserit. Anem a comprovar que ha arribat de forma correcta&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;ResultSet rs = con.createStatement().executeQuery(&quot;SELECT xpath('//titol/text()',doc) FROM P_XML WHERE num=7&quot;);&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;while (rs.next()){&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;Array llibres =  rs.getArray(1);&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;ResultSet rs1 = llibres.getResultSet();&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;while (rs1.next())&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;System.out.println(rs1.getString(2));&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;}&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;f.close();&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;con.close();&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;}&lt;/div&gt;
&lt;div&gt;}&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="35"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="36"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="34"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="36"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="36"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:3%20-%20Emmagatzematge%20en%20SGBD%20tradicionals:3.6%20-%20Utilitzaci%C3%B3%20des%20de%20Java"></string>
           <string role="key" value="parent"></string>
           <reference key="15"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="39">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.7 - Ampliació"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="37">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="38">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="37"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;Amb les nocions anteriors tenim el suficient per a treballar prou còmodament documents XML en PostgreSQL.&lt;/p&gt;
&lt;p&gt;Es pot aprofundir molt més per a arribar a resultats més que acceptables. Tanmateix s'escapa de l'objectiu del present curs. &lt;/p&gt;
&lt;p&gt;Únicament a mode d'indicador de la possible potència es mostra algun exemple.&lt;/p&gt;
&lt;p&gt;En el següent exemple, i per mig d'una única sentència, s'aconsegueix crear un document XML amb les comarques i dins de cada comarca tots els seus pobles. Evidentment, la sentència ha de quedar un poc complicada. Aprofitarem per a inserir en la nostra taula de documents: P_XML&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;INSERT INTO P_XML VALUES ( 8 , &lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;(SELECT xmlelement(name comarques, &lt;/div&gt;
&lt;div style=&quot;margin-left: 210px;&quot;&gt;(SELECT xmlagg(xmlelement(name comarca,xmlforest(nom_c,provincia),&lt;/div&gt;
&lt;div style=&quot;margin-left: 360px;&quot;&gt;xmlelement(name pobles, (SELECT xmlagg(xmlelement(name poble,xmlforest(nom,altura)))&lt;/div&gt;
&lt;div style=&quot;margin-left: 690px;&quot;&gt;FROM POBLACIONS&lt;/div&gt;
&lt;div style=&quot;margin-left: 690px;&quot;&gt;WHERE nom_c = COMARQUES.nom_c ) ) ) )&lt;/div&gt;
&lt;div style=&quot;margin-left: 270px;&quot;&gt; FROM COMARQUES))));&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; Evidentment és complicada, però en una única sentència tenim la creació del document XML, a partir de les taules COMARQUES i POBLACIONS. El resultat serà aquest:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;comarques&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;comarca&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;nom&amp;gt;Safor&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;provincia&amp;gt;València&amp;lt;/provincia&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;pobles&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;poble&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;nom&amp;gt;Alfauir&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;altura&amp;gt;75&amp;lt;/altura&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;/poble&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;poble&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;nom&amp;gt;Almiserà&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;altura&amp;gt;75&amp;lt;/altura&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;/poble&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;poble&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;nom&amp;gt;Beniflà&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;altura&amp;gt;50&amp;lt;/altura&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;/poble&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;...&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;/pobles&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/comarca&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;...&lt;/div&gt;
&lt;div&gt;&amp;lt;/comarques&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Des de pgAdmin no el veurem tabulat així. Per poder veure el resultat, podem &quot;exportar&quot; l'execució d'una sentència SQL que traga només aquest document, de manera que l'execució vaja cap a un fitxer.&lt;/p&gt;
&lt;p&gt;Es deixa com a exercici totalment voluntari l'ampliació de la sentència anterior per a que incorpore també tots els instituts de cada poble.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Amb aquest document que és un poc més complicat, ja que incorpora les comarques i dins d'elles els pobles, podríem fer una consulta XPATH que ens diga les comarques que tenen més de 30 pobles:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;SELECT xpath('//comarca[count(pobles/poble)&amp;gt;=30]/nom_c/text()',(SELECT doc FROM P_XML WHERE num=8));&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="38"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="39"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="37"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="39"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="37"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:3%20-%20Emmagatzematge%20en%20SGBD%20tradicionals:3.7%20-%20Ampliaci%C3%B3"></string>
           <string role="key" value="parent"></string>
           <reference key="15"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="42">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="4 - Emmagatzematge en BD-XML Natives"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="40">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="41">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="40"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;En les&lt;strong&gt; Bases de Dades XML natives&lt;/strong&gt;, a diferència de tots els SGBD anteriors (centrats en les dades), no existeixen camps ni guarden dades en tipus de dades senzills. Sempre guarden documents XML i són Bases de Dades centrades en els documents. La unitat mínima d'emmagatzematge és el document XML.&lt;/p&gt;
&lt;p&gt;Podríem definir &lt;strong&gt;SGBD-&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; natives&lt;/strong&gt; (o senzillament un &lt;strong&gt;SGBD-XML&lt;/strong&gt;) com un sistema de gestió de la informació que ha de:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Definir un model lògic per a un document XML (en contraposició als SGBD habilitats que defineixen el model per les dades) i enregistrar i recuperar els documents segons aquest model. Com a mínim, el model ha d’incloure elements, atributs, PCDATA i l’ordre del document.&lt;/li&gt;
&lt;li&gt;Mantenir una relació transparent amb el mecanisme subjacent d’emmagatzematge, incorporant les característiques ACID de qualsevol SGBD (&lt;em&gt;Atomicity, Consistency, Isolation and Durability&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;Incloure un nombre arbitrari de nivells de dades i complexitat.&lt;/li&gt;
&lt;li&gt;Permetre les tecnologies de consulta i transformació pròpies d’&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;: &lt;strong&gt;XPath&lt;/strong&gt;, &lt;acronym title=&quot;Extensible Stylesheet Language Transformations&quot;&gt;XSLT&lt;/acronym&gt;, XQL, &lt;strong&gt;XQuery&lt;/strong&gt;, etc.&lt;/li&gt;
&lt;li&gt;Permetre la introducció d’informació &lt;em&gt;data-centric&lt;/em&gt;, &lt;em&gt;document-centric&lt;/em&gt; i mixta.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El segon punt de la definició porta implícita la idea que un SGBD-&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; no té per què tenir cap model físic d’emmagatzematge subjacent específic, sinó que es podria construir per damunt d'un SGBD Relacional, un SGBD Orientat a Objectes, ..., o un sistema propi d’emmagatzematge. Això sembla contradictori amb els problemes i crítiques que presenten per a la gestió de documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; els SGBD predecessors dels SGBD-&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;. &lt;/p&gt;
&lt;div&gt;
&lt;p&gt;Avantatges de les BD-&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;, en comparació a les BD no &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Faciliten accés i emmagatzematge d’informació en format &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; sense necessitat de codi addicional ni cap tipus de mapatge.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;La majoria d’SGBD-&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; incorporen un motor de recerca d’alt rendiment.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;És molt senzill afegir nous documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Permeten emmagatzemar dades heterogènies.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Conserven la integritat dels documents (es poden recuperar en el seu estat inicial).&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per contra, els inconvenients que tenen normalment els SGBD-&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; són aquestos:&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;La gran quantitat d’espai necessari per emmagatzemar el mateix document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; com a format de representació de la informació, a causa del fet que les etiquetes poden suposar el 50% 0 el 75% de la informació d’un document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;. I això és, sense cap mena de dubte, innecessari en guardar molts documents validats per un mateix &lt;acronym title=&quot;XML (Extensible Markup Language) Schema Definition&quot;&gt;XSD&lt;/acronym&gt; o &lt;acronym title=&quot;Document Type Definition&quot;&gt;DTD&lt;/acronym&gt;.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;El fet que les BD-&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; només puguen guardar i retornar dades en format &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;En emmagatzemar la informació en format &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; es fa molt complicat poder generar noves estructures a partir de la informació existent com, per exemple, aconseguir càlculs estadístics.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Les dificultats d’indexació del contingut d’una base de dades, que ha de permetre la reducció dràstica del temps necessari per trobar certs elements clau.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Les pobres facilitats per modificar el contingut dels documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; emmagatzemats sense haver de substituir tot el document.&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Els dos darrers inconvenients (indexació-actualització) són cavalls de batalla dels SGBD i de ben segur que s’anirà avançant en aquest camp fins que deixen de ser inconvenients. &lt;/p&gt;
&lt;/div&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="41"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="42"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="42"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="42"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="29"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:4%20-%20Emmagatzematge%20en%20BD-XML%20Natives"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="45">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="5 - Instal·lació de BD-XML"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="43">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="44">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="43"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;Triarem el Sistema Gestor de Bases de Dades XML  &lt;strong&gt;eXist-db&lt;/strong&gt;. Com veurem és molt potent i còmode d'utilitzar. A més és Open-Source. Està escrit completament en Java i suporta els estàndards de consulta &lt;strong&gt;XPATH&lt;/strong&gt;, &lt;strong&gt;XQuery&lt;/strong&gt; i &lt;strong&gt;XSLT&lt;/strong&gt;. &lt;/p&gt;
&lt;p&gt;Això sí, és un servidor, per tant l'haurem d'instal·lar, posar-lo en marxa quan l'utilitzem, i fer un poc d'administradors.&lt;/p&gt;
&lt;p&gt;Afortunadament està construït en Java, i per tant no hem de tenir cap problema per a instal·lar-lo. Ens el podem baixar sense dificultat de la pàgina oficial: &lt;a href=&quot;http://exist-db.org&quot;&gt;exist-db.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;El següent vídeo mostra tot el procés d'instal·lació i arrancada inicial. És per a la versió 5.2.0, encara que en el moment de fer aquestos apunts l'última versió estable és la 6.2.0, però és totalment equivalent. Només us heu de preocupar de baixar-vos el fitxer d'instal·lació &lt;strong&gt;.jar&lt;/strong&gt; per a fer-la tots igual, siga quin siga el S.O. També tenim la possibilitat de baixar-nos una imatge de docker.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;iframe width=&quot;945&quot; height=&quot;605&quot; src=&quot;https://slides.com/alvarinstitut/deck-67bcaf/embed&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;webkitallowfullscreen&quot; mozallowfullscreen=&quot;mozallowfullscreen&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;p&gt;Els documents es guarden en col·leccions, les quals es poden crear unes dins d'unes altres.&lt;/p&gt;
&lt;p&gt;Anem a veure uns exemples d'utilització. Crearem una col·lecció, i en ella inclourem algun document XML. Posteriorment farem alguna consulta senzilla, a veure com es comporta. Per a poder començar a utilitzar-lo és suficient amb obrir &lt;strong&gt;localhost:8080&lt;/strong&gt; des de qualsevol navegador&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;iframe width=&quot;1172&quot; height=&quot;605&quot; src=&quot;https://slides.com/alvarinstitut/deck-d16fcc/embed&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;webkitallowfullscreen&quot; mozallowfullscreen=&quot;mozallowfullscreen&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Observeu que els resultats per defecte es veuen de 10 en 10&lt;/strong&gt;, és a dir, que poden haver més resultats dels mostrats en principi.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;b&gt;&lt;u&gt;Nota important&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Si teniu problemes amb la instal·lació de eXist-db, podeu utilitzar el servidor de dades de l'Institut, on el tenim instal·lat també.&lt;/p&gt;
&lt;p&gt;Només us haureu de connectar a aquesta adreça:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://89.36.214.106:8080&quot;&gt;http://89.36.214.106:8080&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Podreu utilitzar-lo sense problemes i fer totes les consultes necessàries. No podreu, però, pujar documents, ja que faltaria la contrasenya. Però no us farà falta, estan ja pujats els documents necessaris.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T9_5_1.png&quot; alt=&quot;&quot; width=&quot;891&quot; height=&quot;501&quot; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="3882"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="41_1.119"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="46">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="43"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T9_5_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpBTRZm0/T9_5_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="50a50b2be08937f6187263737a870357"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="44"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="44"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="120"></int>
             <string role="key" value="parentNode"></string>
             <reference key="45"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="41"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="45"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="46"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="20"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:5%20-%20Instal%C2%B7laci%C3%B3%20de%20BD-XML"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="49">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="6 - Llenguatges de consultes XPATH i XQUERY"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="47">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="48">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="47"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;Aquesta pregunta pretén ser un repàs del vist en el mòdul de primer &lt;strong&gt;Llenguatges de Marques&lt;/strong&gt;. Veurem únicament &lt;strong&gt;XPath&lt;/strong&gt; i &lt;strong&gt;XQuery&lt;/strong&gt;, d'entre el ventall de llenguatges XML recomanats pel W3C (&lt;em&gt;World Wide Web Consortium&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Aquestos llenguatges no són separats, sinó que estan interrelacionats entre ells. Concretament la relació entre &lt;strong&gt;XPath&lt;/strong&gt; i &lt;strong&gt;XQuery&lt;/strong&gt; és que XPath és un subconjunt de XQuery, o millor dit totes les expressions XPath són vàlides en XQuery.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_6_1.png&quot; alt=&quot;Llenguatges XML&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; height=&quot;474&quot; width=&quot;500&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Com veiem en la figura, &lt;strong&gt;XPath&lt;/strong&gt; s’ha convertit en un component essencial per a diferents llenguatges XML com &lt;strong&gt;XLinks&lt;/strong&gt;, &lt;strong&gt;&lt;acronym title=&quot;Extensible Stylesheet Language Transformations&quot;&gt;XSLT&lt;/acronym&gt;&lt;/strong&gt; i el que més ens interessa, &lt;strong&gt;XQuery&lt;/strong&gt;. &lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="3881"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="43_1.65"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="50">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="47"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_6_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpBTRZm0/T7_6_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="adf52c9c30ba2180b3f92cd428e0d394"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="48"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="48"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="66"></int>
             <string role="key" value="parentNode"></string>
             <reference key="49"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="43"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="49"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="50"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="21"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="53">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="6.1 - XPATH"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="51">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="52">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="51"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt; &lt;strong&gt;XPath&lt;/strong&gt; (&lt;em&gt;&lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; Path Language&lt;/em&gt;) és un llenguatge capaç d’especificar parts d’un document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;, i té eines per a manipular el contingut de les dades de text, numèriques, etc.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;XPath&lt;/strong&gt; és una recomanació del &lt;acronym title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/acronym&gt; (&lt;a class=&quot;urlextern&quot; title=&quot;http://www.w3.org/TR/xpath&quot; href=&quot;http://www.w3.org/TR/xpath&quot; rel=&quot;nofollow&quot;&gt;www.w3.org/TR/xpath&lt;/a&gt;), que encara que serveix per treballar amb XML, no és un llenguatge XML. La idea és que en no estar basat en &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; es podrà incloure en altres llenguatges XML sense haver de preocupar-se de si el resultat està ben format o no.&lt;/p&gt;
&lt;p&gt;La base del funcionament de XPath és l’avaluació d’expressions on constarà el camí (path) del que volem buscar, és a dir, una expressió que s’avaluarà contra un document XML i ens donarà un resultat que pot ser de diferents tipus:&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Un boleà: cert o fals&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Un número&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Una cadena de caràcters&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Un grup d’elements&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La versió 2.0 de &lt;strong&gt;XPath&lt;/strong&gt; està tan integrada dins de &lt;strong&gt;XQuery&lt;/strong&gt; que qualsevol expressió XPath és també automàticament una expressió XQuery correcta. &lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="52"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="53"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="44"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="53"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="38"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.1%20-%20XPATH"></string>
           <string role="key" value="parent"></string>
           <reference key="49"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="56">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="6.1.1 - Vista d'arbre"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="54">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="55">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="54"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;&lt;strong&gt;XPath&lt;/strong&gt; tracta tots els documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; des del punt de vista d’un arbre de nodes en el qual hi ha &lt;strong&gt;una arrel&lt;/strong&gt; que no es correspon amb l’arrel del document, sinó que &lt;strong&gt;és el propi document&lt;/strong&gt; (i per tant l'immediatament anterior a l'element arrel del document). Es representa amb el símbol “&lt;strong&gt;/&lt;/strong&gt;”.&lt;/p&gt;
&lt;p&gt;A part de l’arrel també hi ha nodes per representar els &lt;strong&gt;elements&lt;/strong&gt;, els &lt;strong&gt;atributs&lt;/strong&gt;, els nodes de &lt;strong&gt;dades&lt;/strong&gt;, els &lt;strong&gt;comentaris&lt;/strong&gt;, les &lt;strong&gt;instruccions de procés&lt;/strong&gt; i els &lt;strong&gt;espais de noms&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;El següent exemple &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; (que el podeu copiar en un document &lt;strong&gt;nou&lt;/strong&gt; de tipus &lt;strong&gt;XML&lt;/strong&gt; anomenat &lt;strong&gt;classe.xml&lt;/strong&gt;; cuideu que siga de tipus &lt;strong&gt;xml&lt;/strong&gt;): &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;classe&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;assignatura&amp;gt;Llenguatges de Marques&amp;lt;/assignatura&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;professor Especialitat=&quot;507&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;cognoms&amp;gt;Puig&amp;lt;/cognoms&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;/professor&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;alumnes&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;alumne aprovat=&quot;si&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;cognoms&amp;gt;Alegre&amp;lt;/cognoms&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;nota&amp;gt;6&amp;lt;/nota&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;/alumne&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;alumne aprovat=&quot;no&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;cognoms&amp;gt;Balaguer&amp;lt;/cognoms&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;nota&amp;gt;3&amp;lt;/nota&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;/alumne&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;alumne delegat=&quot;si&quot; aprovat=&quot;si&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;cognoms&amp;gt;Centelles&amp;lt;/cognoms&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;nota&amp;gt;8&amp;lt;/nota&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;/alumne&amp;gt;&lt;/div&gt;
&amp;lt;/alumnes&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/classe&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;p&gt;es representarà en XPath amb un arbre com el de la figura:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T6_6_1_1_1.png&quot; style=&quot;border: 1px solid black;&quot; /&gt;&lt;/p&gt;
&lt;p&gt; on els diferents tipus de nodes que trobem són els assenyalats a continuació:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T6_6_1_1_2.png&quot; style=&quot;border: 1px solid black;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;En un arbre XPath els atributs no són considerats nodes fills sinó que són “&lt;strong&gt;propietats&lt;/strong&gt;” del node que els conté i els nodes de dades són &lt;strong&gt;nodes&lt;/strong&gt; &lt;strong&gt;sense nom&lt;/strong&gt; que només contenen les dades.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="3880"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="45_1.94"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="57">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="54"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T6_6_1_1_1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpBTRZm0/T6_6_1_1_1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="3a30065e169211dd3e6502c43e9800a8"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="55"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="3892"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="45_1.95"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="58">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="54"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T6_6_1_1_2.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpBTRZm0/T6_6_1_1_2.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="2b9cd7b2f7cca7ab8f3276076c3598fb"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="55"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="55"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="96"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="56"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="45"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="56"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="57"></reference>
                  <reference key="58"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="39"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.1%20-%20XPATH:6.1.1%20-%20Vista%20d%27arbre"></string>
              <string role="key" value="parent"></string>
              <reference key="53"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="61">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="6.1.2 - Navegació"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="59">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="60">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="59"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary>
                    <unicode role="key" value="table57"></unicode>
                    <list></list>
                   </dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Com que la representació interna del document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; per XPath serà un arbre, es pot navegar per ell especificant camins d’una manera semblant a com es fa en els directoris dels sistemes operatius.&lt;/p&gt;
&lt;p&gt;El més important per tenir en compte a l’hora de crear una expressió XPath és saber quin és el node en el qual està situat el procés (&lt;strong&gt;node de context&lt;/strong&gt;), ja que és des d’aquest que s’avaluarà l’expressió. El node de context al principi és el node arrel però es va movent a mesura que es van avaluant les expressions, i per tant podem expressar els camins XPath de dues maneres:&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;&lt;strong&gt;Camins absoluts&lt;/strong&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;&lt;strong&gt;Camins relatius&lt;/strong&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Els &lt;strong&gt;camins absoluts&lt;/strong&gt; són camins que sempre comencen en l’arrel de l’arbre. Es poden identificar perquè el primer caràcter de l’expressió sempre serà l’arrel ”&lt;strong&gt;/&lt;/strong&gt;”. No importa quin siga el node de context si es fan servir camins absoluts, perquè el resultat sempre serà el mateix.&lt;/p&gt;
&lt;p&gt;En canvi, els &lt;strong&gt;camins relatius&lt;/strong&gt; parteixen des del node en el qual estem situats.&lt;/p&gt;
&lt;p&gt;Per exemple, es pot obtenir el node &lt;b&gt;&amp;lt;nom&amp;gt;&lt;/b&gt; del professor de l’exemple anterior fent servir l’expressió XPath següent:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;/classe/professor/nom&lt;/p&gt;
&lt;p&gt;Podem veure com s’avalua l’expressió en l’arbre XPath en la següent figura, marcat el camí en taronja:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T6_6_1_2_1.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;1000&quot; height=&quot;600&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Observeu que el resultat d’aquesta expressió no és només el contingut de l’element sinó tot l’element &lt;b&gt;&amp;lt;nom&amp;gt;&lt;/b&gt;.&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Mai no s’ha d’oblidar que l’expressió sempre intenta aconseguir el nombre màxim de camins correctes i, per tant, no necessàriament ha de retornar només un únic valor. Per exemple, si l’expressió per avaluar és la següent:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;/classe/alumnes/alumne/nom&lt;/p&gt;
&lt;p&gt;XPath l’avaluaria intentant aconseguir tots els camins que quadren amb l’expressió, tal com podeu veure visualment en la següent figura:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T6_6_1_2_2.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;1000&quot; height=&quot;600&quot; /&gt;&lt;/p&gt;
&lt;p&gt;i per tant els resultats són (observeu que Joan es refereix al nom del tercer alumne, no del professor):&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A pesar que en els exemples anteriors sempre s’han retornat nodes finals això no necessàriament ha de ser així, ja que XPath pot retornar qualsevol tipus d’element com a resultat.&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;/classe/alumnes&lt;/p&gt;
&lt;p&gt;La navegació per l’arbre no difereix massa dels altres casos:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T6_6_1_2_3.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;1000&quot; height=&quot;600&quot; /&gt;&lt;/p&gt;
&lt;p&gt;En aquest cas el resultat no és un element simple sinó que és tot un subarbre d’elements.&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div class=&quot;item&quot;&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumnes&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt; &lt;span class=&quot;ace_keyword&quot;&gt;aprovat&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;si&lt;/span&gt;&quot;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Albert&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Alegre&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;6&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt; &lt;span class=&quot;ace_keyword&quot;&gt;aprovat&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;no&lt;/span&gt;&quot;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Bernat&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Balaguer&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;3&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt; &lt;span class=&quot;ace_keyword&quot;&gt;delegat&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;si&lt;/span&gt;&quot; &lt;span class=&quot;ace_keyword&quot;&gt;aprovat&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;si&lt;/span&gt;&quot;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Joan&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Centelles&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;8&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumnes&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Si se sap que una expressió retornarà més d'un resultat però només se’n vol un d’específic, es pot fer servir un número envoltat per claudàtors quadrats ”&lt;strong&gt;[ ]&lt;/strong&gt;” per indicar quin és el que es vol aconseguir. Per retornar només el primer alumne podeu fer el següent:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;/classe/alumnes/alumne[1]&lt;/p&gt;
&lt;p&gt;que tornarà el següent:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;alumne aprovat=&quot;si&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;cognoms&amp;gt;Alegre&amp;lt;/cognoms&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;nota&amp;gt;6&amp;lt;/nota&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/alumne&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ja que dels tres nodes disponibles com a fills de &lt;strong&gt;&amp;lt;alumnes&amp;gt;&lt;/strong&gt;, només se seleccionarà el primer:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T6_6_1_2_4.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;1000&quot; height=&quot;600&quot; /&gt;&lt;/p&gt;
&lt;div&gt;&lt;br /&gt;
&lt;p&gt;Es poden fer servir els claudàtors en qualsevol lloc de l’expressió per fer determinar quina de les branques es triarà. Per exemple, es pot obtenir només el &lt;b&gt;nom&lt;/b&gt; del segon alumne amb una expressió com aquesta:&lt;/p&gt;
&lt;pre class=&quot;codi&quot;&gt;/classe/alumnes/alumne[2]/nom&lt;/pre&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Sempre s’ha d’anar amb compte en escriure les expressions XPath, ja que si el camí especificat no es correspon amb un camí &lt;strong&gt;real&lt;/strong&gt; dins de l’arbre no es retornarà cap resultat.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;/classe/nom&lt;/div&gt;
&lt;p&gt;Com que en arribar al node &lt;b&gt;classe&lt;/b&gt; no n’hi trobarà cap d’anomenat &lt;b&gt;&amp;lt;nom&amp;gt;&lt;/b&gt;, no retornarà cap resultat, com podeu veure si seguiu l’arbre:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T6_6_1_2_5.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;1000&quot; height=&quot;600&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;/div&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="3884"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="46_1.343"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="62">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="59"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T6_6_1_2_3.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpBTRZm0/T6_6_1_2_3.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="90752293ece0068f6cdc761b335b4e96"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="60"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="3893"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="46_1.344"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="63">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="59"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T6_6_1_2_4.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpBTRZm0/T6_6_1_2_4.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="fb072a935356a1b51a792e0d2c1639f7"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="60"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="3894"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="46_1.345"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="64">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="59"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T6_6_1_2_1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpBTRZm0/T6_6_1_2_1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="a84004f3bb33ccbb212b053afa545d32"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="60"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="3901"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="46_1.346"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="65">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="59"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T6_6_1_2_5.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpBTRZm0/T6_6_1_2_5.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="41562b57c0b528bfeb51f3e69bcb06b6"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="60"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="3902"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="46_1.347"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="66">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="59"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T6_6_1_2_2.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpBTRZm0/T6_6_1_2_2.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="dbb9caa198cf6d6aa4365d70aa7c3d87"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="60"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="60"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="348"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="61"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="46"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="61"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="62"></reference>
                  <reference key="63"></reference>
                  <reference key="64"></reference>
                  <reference key="65"></reference>
                  <reference key="66"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="67">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="68">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="67"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Obtenir els atributs d'un element&lt;/p&gt;
&lt;p&gt;Els valors dels atributs es poden aconseguir especificant el símbol &lt;strong&gt;@&lt;/strong&gt; davant del nom de l'atribut, quan s’haja arribat a l’element que el conté:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;  /classe/professor/@Especialitat&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt; &lt;img src=&quot;resources/T6_6_1_2_6.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;1000&quot; height=&quot;600&quot; /&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;S’ha de tenir en compte que a diferència del que passa amb els elements, en obtenir un atribut no tindrem un element sinó només el seu valor: &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt; 507&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div&gt;&lt;/div&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt; &lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Depenent de l'entorn en què ens trobem, podria ser que l'anterior no ens mostre res. La raó és perquè els atributs no es poden serialitzar, i per tant no es poden mostrar en un entorn de XML. No tindríem aquest problema si accedim des de Java. La manera de solucionar-lo des de l'entorn de eXist és utilitzar la funció &lt;strong&gt; data()&lt;/strong&gt;:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;/classe/professor/data(@Especialitat)&lt;/p&gt;
&lt;/div&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="3883"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="82_85.55"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="69">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="67"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T6_6_1_2_6.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpBTRZm0/T6_6_1_2_6.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="804a99cea57cb4549d1536763eb8b997"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="68"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="68"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="56"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="61"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="82"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="61"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="69"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="70">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="71">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="70"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Obtenir el contingut d'un element&lt;/p&gt;
&lt;div&gt;
&lt;p&gt;Per a aquells casos en què només vulguem el contingut de l’element, s’ha definit la funció &lt;strong&gt;text()&lt;/strong&gt; per obtenir aquest contingut. Això s’ha fet així perquè d’altra manera, com que els nodes de text no tenen nom, no s’hi podria accedir.&lt;/p&gt;
&lt;p&gt;De manera que si a un element que tinga contingut de dades se li afegeix &lt;strong&gt;&lt;em&gt;text()&lt;/em&gt;&lt;/strong&gt;: &lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;  /classe/professor/nom/text()&lt;/p&gt;
&lt;p&gt;…retornarà el contingut del node sense les etiquetes: &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;  Joan&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;/div&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="71"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="61"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="81"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="61"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="72">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="73">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="72"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Comodins&lt;/p&gt;
&lt;p&gt;De la mateixa manera que en els sistemes operatius, es poden fer servir comodins diversos en les expressions XPath. Es poden veure els comodins en la taula següent.&lt;/p&gt;
&lt;table border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr class=&quot;row0 borderth&quot;&gt;&lt;th class=&quot;col0&quot;&gt;Comodí&lt;/th&gt;&lt;th class=&quot;col1 leftalign&quot;&gt;Significat&lt;/th&gt;&lt;/tr&gt;
&lt;tr class=&quot;row1&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;*&lt;/td&gt;
&lt;td class=&quot;col1&quot;&gt;L’asterisc es fa servir per indicar tots els elements d’un determinat nivell.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row2&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;.&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Com en els directoris dels sistemes operatius el punt serveix per indicar el node actual.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row3&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;..&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Es fa servir per indicar el pare del node en el qual estem.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row4&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;//&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;La doble barra indica que quadrarà amb qualsevol cosa des del node en el qual estem, es a dir que buscarà en tots els seus descendents. Pot ser un sol element o un arbre de nodes.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Amb l’asterisc es poden obtenir tots els elements d’un determinat nivell. Amb aquesta expressió es poden obtenir tots els elements de dins del node &lt;strong&gt;professor&lt;/strong&gt;.&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;/classe/professor/*&lt;/p&gt;
&lt;p&gt;Aquesta expressió retornarà per separat els dos nodes fills de &lt;strong&gt;&amp;lt;professor&amp;gt;&lt;/strong&gt; ,&lt;strong&gt; &amp;lt;nom&amp;gt;&lt;/strong&gt; i&lt;strong&gt; &amp;lt;cognom&amp;gt;.&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;cognoms&amp;gt;Puig&amp;lt;/cognoms&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;O bé fer servir les dobles barres (&lt;strong&gt;//&lt;/strong&gt;) per obtenir tots els elements &lt;b&gt;&amp;lt;nom&amp;gt;&lt;/b&gt; del fitxer independentment del lloc on estiguen dins del document XML.&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;//nom&lt;/p&gt;
&lt;p&gt;El resultat serà:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Observeu que apareix el nom Joan 2 vegades, ja que és tant el nom del professor com d'un dels alumnes&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;En realitat aquesta sentència XPath tornarà molts més resultats, ja que buscarà en tots els documents de la col·lecció, i en &lt;strong&gt;Rutes.xml&lt;/strong&gt; hi ha molts elements &lt;strong&gt;nom&lt;/strong&gt;: els noms de les rutes i els noms dels punts, a banda dels noms de professors i d'alumnes.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Es poden posar les dobles barres en qualsevol lloc dins de l’expressió per indicar que pot haver qualsevol cosa enmig a partir del lloc on apareguen.&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;/classe/alumnes//nom&lt;/p&gt;
&lt;p&gt;Donarà els dos noms dels alumnes (ara sí només alumnes, ni professors ni noms de ruta ni de punts):&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Tot i que facilita molt la creació d’expressions no és molt recomanable abusar del comodí&lt;strong&gt; //&lt;/strong&gt; per motius d’eficiència. Les expressions amb aquest comodí requeriran molts més càlculs per ser avaluades, i per tant les expressions tardaran més a donar resultats. &lt;/p&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="73"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="61"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="80"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="61"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="74">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="75">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="74"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Eixos XPATH&lt;/p&gt;
&lt;p&gt;Per avaluar les expressions XPath s’explora un arbre, de manera que també es proporcionen una sèrie d’elements per fer referència a parts de l’arbre. Aquestos elements s’anomenen &lt;strong&gt;eixos XPath&lt;/strong&gt;&lt;/p&gt;
&lt;table border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr class=&quot;row0 borderth&quot;&gt;&lt;th class=&quot;col0 leftalign&quot;&gt;Eix&lt;/th&gt;&lt;th class=&quot;col1 leftalign&quot;&gt;Significat&lt;/th&gt;&lt;/tr&gt;
&lt;tr class=&quot;row1&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;self::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;El node en el qual està el procés (fa el mateix que el punt)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row2&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;child::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Fill de l’element actual&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row3&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;parent::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;El pare de l’element actual (idèntic a fer servir &lt;code&gt;..&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row4&quot;&gt;
&lt;td class=&quot;col0&quot;&gt;&lt;strong&gt;attribute::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1&quot;&gt;Es fa servir per obtenir un atribut de l’element actual (@)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Alguns d’aquestos eixos pràcticament no es fan servir perquè generalment és més còmode i curt definir les expressions a partir del símbol. Tothom prefereix fer servir una expressió com aquesta:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/classe/professor/nom&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Que no la seua versió equivalent fent servir els eixos:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/child::classe/child::professor/child::nom&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A part dels vistos en la taula anterior n’hi ha d’altres, que en aquest cas no tenen cap símbol que els simplifique:&lt;/p&gt;
&lt;table border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr class=&quot;row0 borderth&quot;&gt;&lt;th class=&quot;col0 leftalign&quot;&gt;Eix&lt;/th&gt;&lt;th class=&quot;col1 leftalign&quot;&gt;Significat&lt;/th&gt;&lt;/tr&gt;
&lt;tr class=&quot;row1&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;descendant::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Tots els descendents del node actual&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row2&quot;&gt;
&lt;td class=&quot;col0&quot;&gt;&lt;strong&gt;desdendant-or-self::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;El node actual i els seus descendents&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row3&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;ancestor::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Els ascendents del node&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row4&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;ancestor-or-self::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;El node actual i els seus ascendents&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row5&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;preceding::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1&quot;&gt;Tots els elements precedents al node actual&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row6&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;preceding-sibling::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Tots els germans precedents&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row7&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;following::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Elements que segueixen el node actual&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row8&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;following-sibling::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Germans posteriors al node actual&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row9&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;namespace::&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Conté l’espai de noms del node actual&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="75"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="61"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="79"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="61"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="76">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="77">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="76"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Condicions&lt;/p&gt;
&lt;p&gt;Un apartat interessant de les expressions XPath és poder afegir condicions per a la selecció de nodes. A qualsevol expressió XPath se li poden afegir condicions per obtenir només els nodes que complesquen la condició especificada.&lt;/p&gt;
&lt;p&gt;Per exemple, aquesta expressió selecciona només els professors que tinguen un element &lt;b&gt;&amp;lt;nom&amp;gt;&lt;/b&gt; com a fill de &lt;b&gt;&amp;lt;professor&amp;gt;&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/classe/professor[nom]&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Si s’aplica l’expressió a l’exemple que hem fet servir per fer la vista d’arbre, el resultat serà el node &lt;b&gt;&amp;lt;professor&amp;gt;&lt;/b&gt; que té dins seu &lt;b&gt;&amp;lt;nom&amp;gt;&lt;/b&gt; (i ens apareixerà l'únic professor que tenim, ja que sí que té un fill nom)&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div class=&quot;item&quot;&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;professor&lt;/span&gt; &lt;span class=&quot;ace_keyword&quot;&gt;Especialitat&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;507&lt;/span&gt;&quot;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Joan&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Puig&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;professor&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En el valor de l’expressió s’hi especifiquen camins relatius des del node que tinga la condició. Fent servir condicions es pot fer una expressió que només retorne el professor si té alumnes (i ens tornaria el mateix resultat que abans, ja que sí que té alumnes)&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/classe/professor[../alumnes/alumne]&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Normalment la complexitat de les condicions va més enllà de comprovar si el node existeix, i es fan servir per comprovar si un node té un valor determinat. Per exemple, per obtenir els alumnes que es diguen “Bernat”:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/classe/alumnes/alumne[nom=&quot;Bernat&quot;]&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;que donarà:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;  &amp;lt;alumne aprovat=&quot;no&quot;&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;br /&gt;    &amp;lt;cognoms&amp;gt;Balaguer&amp;lt;/cognoms&amp;gt;&lt;br /&gt;    &amp;lt;nota&amp;gt;3&amp;lt;/nota&amp;gt;&lt;br /&gt;  &amp;lt;/alumne&amp;gt;&lt;/p&gt;
&lt;p&gt;Les condicions es poden posar en qualsevol lloc del camí i n’hi pot haver tantes com calga. Per obtenir el cognom del professor que es diu “Bernat” es pot fer servir una expressió com aquesta.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/classe//alumne[nom=&quot;Bernat&quot;]/cognoms&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Que donarà de resultat:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;  &amp;lt;cognoms&amp;gt;Balaguer&amp;lt;/cognoms&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;De la mateixa manera que per obtenir-ne els valors, es poden fer comparacions amb els valors dels atributs especificant el seu nom després del símbol &lt;b&gt;@&lt;/b&gt;. Per saber si un element té l’atribut ‘delegat’:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/classe//alumne[@delegat]&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Retornarà:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div class=&quot;item&quot;&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt; &lt;span class=&quot;ace_keyword&quot;&gt;delegat&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;si&lt;/span&gt;&quot; &lt;span class=&quot;ace_keyword&quot;&gt;aprovat&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;si&lt;/span&gt;&quot;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Joan&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Centelles&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;8&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;mentre que en la mateixa sentència ens haguérem preguntat per l'atribut aprovat, ens apareixerien els 3 alumnes, ja que tots tres el tenen.&lt;/p&gt;
&lt;p&gt;De la mateixa manera que amb els elements, es poden posar condicions als atributs per saber si el seu valor té un determinat valor, etc.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/classe//alumne[@aprovat=&quot;si&quot;]&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;que ens donaria els dos alumnes que estan aprovats&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;alumne aprovat=&quot;si&quot;&amp;gt;&lt;br /&gt;   &amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;br /&gt;   &amp;lt;cognoms&amp;gt;Alegre&amp;lt;/cognoms&amp;gt;&lt;br /&gt;   &amp;lt;nota&amp;gt;6&amp;lt;/nota&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;br /&gt;&amp;lt;alumne delegat=&quot;si&quot; aprovat=&quot;si&quot;&amp;gt;&lt;br /&gt;   &amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;br /&gt;   &amp;lt;cognoms&amp;gt;Centelles&amp;lt;/cognoms&amp;gt;&lt;br /&gt;   &amp;lt;nota&amp;gt;8&amp;lt;/nota&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Les condicions també poden ser de desigualtat:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/classe/professor[@Especialitat&amp;gt;=507]&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;La funció &lt;strong&gt;not()&lt;/strong&gt; es fa servir per negar les condicions:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/classe//alumne[not(@delegat)]&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;  &amp;lt;alumne aprovat=&quot;si&quot;&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;br /&gt;    &amp;lt;cognoms&amp;gt;Alegre&amp;lt;/cognoms&amp;gt;&lt;br /&gt;    &amp;lt;nota&amp;gt;6&amp;lt;/nota&amp;gt;&lt;br /&gt;  &amp;lt;/alumne&amp;gt;&lt;br /&gt;  &amp;lt;alumne aprovat=&quot;no&quot;&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;br /&gt;    &amp;lt;cognoms&amp;gt;Balaguer&amp;lt;/cognoms&amp;gt;&lt;br /&gt;    &amp;lt;nota&amp;gt;3&amp;lt;/nota&amp;gt;&lt;br /&gt;  &amp;lt;/alumne&amp;gt;&lt;/p&gt;
&lt;p&gt;Es poden mesclar les expressions amb condicions sobre atributs i sobre elements per aconseguir expressions més complexes especificant-les una al costat de l’altra. Per exemple, podem obtenir l'alumne que té no té l’atribut delegat i que està aprovat:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/classe//alumne[@delegat][@aprovat=&quot;si&quot;]&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;  &amp;lt;alumne delegat=&quot;si&quot; aprovat=&quot;si&quot;&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;br /&gt;    &amp;lt;cognoms&amp;gt;Centelles&amp;lt;/cognoms&amp;gt;&lt;br /&gt;    &amp;lt;nota&amp;gt;8&amp;lt;/nota&amp;gt;&lt;br /&gt;  &amp;lt;/alumne&amp;gt;&lt;/p&gt;
&lt;p&gt;L’expressió pot ser tan complexa com calga. Per exemple es pot obtenir la llista dels cognoms dels alumnes del professor de l'especialitat “507” que es diu “Joan”:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;/classe/professor[@Especialitat=&quot;507&quot;][nom=&quot;Joan&quot;]/../alumnes/alumne/cognoms&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Que retornarà els tres cognoms dels alumnes:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;cognoms&amp;gt;Alegre&amp;lt;/cognoms&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;cognoms&amp;gt;Balaguer&amp;lt;/cognoms&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;cognoms&amp;gt;Centelles&amp;lt;/cognoms&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="77"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="61"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="78"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="61"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="78">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="79">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="78"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Documents&lt;/p&gt;
&lt;p&gt;Si no especifiquem res, a banda de la ruta, &lt;strong&gt;eXist&lt;/strong&gt; buscarà en &lt;strong&gt;tots&lt;/strong&gt; els documents de la col·lecció en la qual estiguem situats.&lt;/p&gt;
&lt;p&gt;Per a buscar únicament en un document, l'haurem d'especificar al principi de la ruta. I la manera d'especificar el document serà: &lt;strong&gt;doc(&lt;em&gt;ruta_del_document&lt;/em&gt;)&lt;/strong&gt;. Si posem únicament el nom del document no el trobarà, i estarem obligats a posar tota la seua ruta que serà: &lt;strong&gt;/db/nom_col/nom_doc&lt;/strong&gt;&lt;em&gt; &lt;/em&gt;. És a dir, el següent no troba res:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;doc(&quot;classe.xml&quot;)&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; La manera d'accedir serà:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;doc(&quot;db/Tema9/classe.xml&quot;)&lt;/div&gt;
&lt;p&gt;En altres entorns potser sí que funcione posar únicament el nom del document, però en el que estem treballant nosaltres, haurem de posar tota la ruta del document en la Base de Dades. &lt;/p&gt;
&lt;p&gt;D'aquesta manera podrem solucionar el problema de la següent sentència, que agafa tots els noms d'alumnes i de professors, però també de rutes i de punts:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;//nom&lt;/p&gt;
&lt;p&gt;que donarà un total de 32 resultats&lt;/p&gt;
&lt;p&gt;Si només els volem d'un document:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;doc(&quot;db/Tema9/classe.xml&quot;)//nom&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="79"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="61"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="64"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="61"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="40"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list>
               <reference key="60"></reference>
              </list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.1%20-%20XPATH:6.1.2%20-%20Navegaci%C3%B3"></string>
              <string role="key" value="parent"></string>
              <reference key="53"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="82">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="6.1.3 - Seqüències"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="80">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="81">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="80"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Una seqüència és una expressió XPath que retorna més d’un element. S’assemblen prou a les llistes d’altres llenguatges:&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;Tenen ordre&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;Permeten duplicats&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;Poden contenir valors de tipus diferent en cada terme&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;És fàcil crear seqüències, ja que només cal tancar-les entre parèntesis i separar cadascun dels termes amb comes. L’expressió següent aplicada a qualsevol document: &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;(1,2,3,4)&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Retorna la seqüència de nombres d’un en un:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;1&lt;/div&gt;
&lt;div&gt;2&lt;/div&gt;
&lt;div&gt;3&lt;/div&gt;
&lt;div&gt;4&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;També es poden crear seqüències a partir d’expressions XPath. En aquest cas s’avaluarà primer la primera expressió, després la segona, etc. &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;(//alumnes//nom/text() , //cognoms/text())&lt;/div&gt;
&lt;p&gt; Aplicat al nostre exemple retornarà primer tots els noms dels alumnes i després tots els cognoms (de professor i alumnes): &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;Albert&lt;/div&gt;
&lt;div&gt;Bernat&lt;/div&gt;
&lt;div&gt;Joan&lt;/div&gt;
&lt;div&gt;Puig&lt;/div&gt;
&lt;div&gt;Alegre&lt;/div&gt;
&lt;div&gt;Balaguer&lt;/div&gt;
&lt;div&gt;Centelles&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Unió, Intersecció i disjunció&lt;/p&gt;
&lt;p&gt;També es pot operar amb les seqüències d’elements amb els operadors d’unió (&lt;strong&gt;union&lt;/strong&gt;), intersecció (&lt;strong&gt;intersec&lt;/strong&gt;) o disjunció (&lt;strong&gt;except&lt;/strong&gt;). El resultat serà una altra seqüència on &lt;strong&gt;no&lt;/strong&gt; hi haurà elements duplicats.&lt;/p&gt;
&lt;p&gt;Anem a utilitzar com a exemple dues seqüències relativament fàcils de construir:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;el nom dels alumnes aprovats (Albert i Joan): //alumne[@aprovat=&quot;si&quot;]/nom&lt;/li&gt;
&lt;li&gt;el nom dels alumnes que són delegats (Joan): //alumne[@delegat]/nom&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La intersecció ens tornaria els elements que estan en les dues llistes, és a dir &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;(//alumne[@aprovat=&quot;si&quot;]/nom) intersect (//alumne[@delegat]/nom)&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;p&gt;Amb la unió es poden unir les llistes de manera que quede una sola sense duplicats:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;(//alumne[@aprovat=&quot;si&quot;]/nom) union (//alumne[@delegat]/nom)&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;&amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;p&gt;I amb la disjunció obtenim els noms de la primera seqüència que no apareixen en la segona: &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;(//alumne[@aprovat=&quot;si&quot;]/nom) except (//alumne[@delegat]/nom)&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;&amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota important&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;En les seqüències apareixen els &lt;strong&gt;elements&lt;/strong&gt; que són &lt;strong&gt;distints&lt;/strong&gt;, encara que els seu contingut siga el mateix. Per exemple, el nom del professor és Joan, igual que un dels alumnes. A pesar de tenir el mateix valor, són elements diferents, nodes diferents. Així, en contra del que cabria esperar en principi, si fem la intersecció entre els noms dels alumnes i dels professors, no eixirà cap element .&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;(//alumne/nom) intersect (//professor/nom)&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt; &lt;/p&gt;
&lt;p&gt;I si fem la unió de les seqüències anteriors, el nom Joan ens apareixarà 2 vegades, senyal que són elements diferents:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;(//alumne/nom) union (//professor/nom)&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/p&gt;
&lt;/div&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="81"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="82"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="47"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="82"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="41"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.1%20-%20XPATH:6.1.3%20-%20Seq%C3%BC%C3%A8ncies"></string>
              <string role="key" value="parent"></string>
              <reference key="53"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="85">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="6.1.4 - Funcions"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="83">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="84">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="83"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;XPath ofereix una gran quantitat de funcions destinades a manipular els resultats obtinguts.&lt;/p&gt;
&lt;p&gt;Aquestes funcions es classifiquen en diferents grups:&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;&lt;strong&gt;Per manipular conjunts de nodes&lt;/strong&gt;: es pot obtenir el nom dels nodes, treballar amb les posicions, comptar-los, etc.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;&lt;strong&gt;Per treballar amb cadenes de caràcters&lt;/strong&gt;: permeten extreure caràcters, concatenar, comparar… les cadenes de caràcters.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;&lt;strong&gt;Per fer operacions numèriques&lt;/strong&gt;: es poden convertir els resultats a valors numèrics, comptar els nodes, fer operacions, etc.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;&lt;strong&gt;Funcions booleanes&lt;/strong&gt;: permeten fer operacions booleanes amb els nodes.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;&lt;strong&gt;Funcions per dates&lt;/strong&gt;: permeten fer operacions diverses amb dates i hores.&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;És impossible especificar-les totes en aquestos apunts, de manera que el millor és consultar l’especificació XPath (&lt;a class=&quot;urlextern&quot; title=&quot;http://www.w3.org/TR/xpath-functions/&quot; href=&quot;http://www.w3.org/TR/xpath-functions/&quot; rel=&quot;nofollow&quot;&gt;http://www.w3.org/TR/xpath-functions&lt;/a&gt;) per veure quines funcions es poden fer servir.&lt;/p&gt;
&lt;p&gt;Entre totes les funcions podem destacar les de la següent taula:&lt;/p&gt;
&lt;table border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr class=&quot;row0 borderth&quot;&gt;
&lt;th class=&quot;col0 leftalign&quot; style=&quot;text-align: center;&quot;&gt;Funció&lt;/th&gt;
&lt;th class=&quot;col1 leftalign&quot; style=&quot;text-align: center;&quot;&gt;Explicació&lt;/th&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row1&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;name()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Retorna el nom del node&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row2&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;sum()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Retorna la suma d’una seqüència de nodes o de valors&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row3&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;count()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Retorna el nombre de nodes que hi ha en una seqüència&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row4&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;avg()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Fa la mitjana dels valors de la seqüència&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row5&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;max()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Retorna el valor màxim de la seqüència&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row6&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;min()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Dóna el valor mínim de la seqüència&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row7&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;position()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Diu en quina posició es troba el node actual&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row8&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;last()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Retorna si el node actual és l’últim&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row9&quot;&gt;
&lt;td class=&quot;col0&quot;&gt;&lt;strong&gt;distinct-values()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Retorna els elements de la seqüència sense duplicats&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row10&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;concat()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Uneix dues cadenes de caràcters&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row11&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;starts-with()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1&quot;&gt;Retorna si la cadena comença amb els caràcters marcats&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row12&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;contains()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Ens diu si el resultat conté el valor&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row13&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;string-length()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Retorna la llargària de la cadena&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row14&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;substring()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Permet extraure una subcadena del resultat&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row15&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;string-join()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Uneix la seqüència amb el separador especificat&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row16&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;current-date()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Ens retornarà l’hora actual&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row17&quot;&gt;
&lt;td class=&quot;col0 leftalign&quot;&gt;&lt;strong&gt;not()&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;Inverteix el valors booleans&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Amb les funcions es podran fer peticions que retornen valors numèrics. Per exemple, “quants alumnes tenim?”: &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;count(/classe/alumnes/alumne)&lt;/div&gt;
&lt;p&gt;que tornarà el nombre d'alumnes del fitxer &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;3&lt;/div&gt;
&lt;p&gt;O bé retornar cadenes de caràcters. Per exemple, unir tots els noms, separant-los per una coma: &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;string-join(/classe//nom,&quot;,&quot;)&lt;/div&gt;
&lt;p&gt;que tornarà en un únic resultat els noms separats per una coma: &lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;&quot;Joan,Albert,Bernat,Joan&quot;&lt;/div&gt;
&lt;p&gt;També es poden posar les funcions en les condicions. Per exemple, aquesta expressió ens tornarà els alumnes amb el cognom que comence per B: &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;/classe/alumnes/alumne[starts-with(cognoms,&quot;B&quot;)]&lt;/div&gt;
&lt;div class=&quot;codi2&quot;&gt;&amp;lt;alumne aprovat=&quot;no&quot;&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;cognoms&amp;gt;Balaguer&amp;lt;/cognoms&amp;gt;&lt;br /&gt;&amp;lt;nota&amp;gt;3&amp;lt;/nota&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;/div&gt;
&lt;p&gt;En aquesta expressió volem obtenir el tercer alumne de la llista: &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;/classe/alumnes/alumne[position()=3]&lt;/div&gt;
&lt;div class=&quot;codi2&quot;&gt;&amp;lt;alumne delegat=&quot;si&quot; aprovat=&quot;si&quot;&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;cognoms&amp;gt;Centelles&amp;lt;/cognoms&amp;gt;&lt;br /&gt;&amp;lt;nota&amp;gt;8&amp;lt;/nota&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="84"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="85"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="48"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="85"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="42"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.1%20-%20XPATH:6.1.4%20-%20Funcions"></string>
              <string role="key" value="parent"></string>
              <reference key="53"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="88">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="6.2 - XQUERY"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="86">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="87">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="86"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;&lt;strong&gt;XQuery&lt;/strong&gt; és un llenguatge de consultes pensat per convertir-se en la manera estàndard de recuperar dades de col·leccions de documents XML.&lt;/p&gt;
&lt;p&gt;Es tracta d’un llenguatge molt potent i que és funcional, de manera que en compte de dir-li quins són els passos per fer una tasca, el que es fa és &lt;strong&gt;avaluar&lt;/strong&gt; les expressions contra el fitxer XML i &lt;strong&gt;generar un resultat&lt;/strong&gt;. A diferència dels llenguatges de programació habituals, en XQuery s’especifica què és el que es vol i no la manera com ho ha de fer per obtenir-ho. Per tant el podríem catalogar com a llenguatge de quarta generació (com el SQL).&lt;/p&gt;
&lt;p&gt;Entre les característiques més interessants d’XQuery, aquest permet:&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Seleccionar la informació segons criteris. Ordenar, agrupar, afegir dades.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Filtrar la informació.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Buscar informació en un document o en un grup de documents.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Unir dades de múltiples documents.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Transformar i reestructurar &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;No està limitat a la recerca, ja que pot fer operacions numèriques i de manipulació de caràcters.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Pot treballar amb espais de noms i amb documents definits per mitjà de &lt;acronym title=&quot;Document Type Definition&quot;&gt;DTD&lt;/acronym&gt; o &lt;acronym title=&quot;XML (Extensible Markup Language) Schema Definition&quot;&gt;XSD&lt;/acronym&gt;.&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Una part important de XQuery 1.0 és el llenguatge XPath 2.0, que és la part que li permet fer les seleccions d’informació i la navegació pel document. &lt;/p&gt;
&lt;p&gt;Com anirem veient en els següents punts, la sentència que més utilitzarem en XQuery és la sentència &lt;strong&gt;FLWOR&lt;/strong&gt;, acrònim de &lt;em&gt;&lt;strong&gt;For&lt;/strong&gt;&lt;/em&gt;, &lt;em&gt;&lt;strong&gt;Let&lt;/strong&gt;&lt;/em&gt;, &lt;em&gt;&lt;strong&gt;Where&lt;/strong&gt;&lt;/em&gt;, &lt;em&gt;&lt;strong&gt;Order by&lt;/strong&gt;&lt;/em&gt; i &lt;em&gt;&lt;strong&gt;Return&lt;/strong&gt;&lt;/em&gt;, que són les clàusules que es poden posar en la sentència .&lt;/p&gt;
&lt;p&gt;L'última versió reconeguda de XQuery és la 3.1, que inclou clàusules com el &lt;strong&gt;group by&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="87"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="88"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="50"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="88"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="43"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.2%20-%20XQUERY"></string>
           <string role="key" value="parent"></string>
           <reference key="49"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="91">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="6.2.1 - Consultes XQuery"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="89">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="90">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="89"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Generalment una consulta XQuery consistirà en aconseguir les dades amb les quals es vol treballar, filtrar-les i retornar el resultat com a XML. L’expressió més simple que es pot fer en XQuery és escriure un element buit:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;&amp;lt;Hola /&amp;gt;&lt;/p&gt;
&lt;p&gt;En executar aquesta ordre el resultat serà:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;?xml version=&quot;1.0&quot; ?&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;Hola/&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Encara que a nosaltres en l'entorn de &lt;strong&gt;eXist&lt;/strong&gt; ens eixirà únicament l'etiqueta. A pesar d'això serà un document ben format.&lt;/p&gt;
&lt;p&gt;Aquesta és una de les característiques importants de XQuery. Pot escriure literalment un text. Però si en el resultat es defineixen etiquetes, l’expressió només serà correcta si el resultat final està ben format. Per exemple, executar el següent en XQuery donarà un error, ja que el resultat final no està ben format:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&amp;lt;a&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;Cannot compile xquery: exerr:ERROR err:XPST0003: No closing end tag found for element constructor: a [at line 2, column 2]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;(observeu com en l'error ens avisa que no ha trobat el tancament de l'etiqueta, és a dir, que falta &lt;strong&gt;&amp;lt;/a&amp;gt;&lt;/strong&gt;)&lt;/p&gt;
&lt;p&gt;Però a pesar de poder escriure text, el més corrent és recuperar algun tipus de dades, avaluar-les i retornar el resultat amb un &lt;b&gt;return&lt;/b&gt;, que és la instrucció que s’encarrega de generar les sortides.&lt;/p&gt;
&lt;p&gt;Una altra característica important és que &lt;strong&gt;fa servir variables&lt;/strong&gt;. Per exemple la següent és una expressió XQuery correcta que assigna el valor 5 a &lt;strong&gt;&lt;b&gt;$a&lt;/b&gt;&lt;/strong&gt; i després en retorna el valor:  &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;let $a:=5&lt;/div&gt;
&lt;div&gt;return $a&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El resultat d’executar-ho amb XQuery serà:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;5&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A diferència del que passa amb els literals, el &lt;strong&gt;return&lt;/strong&gt; s’executa una vegada per cada valor que agafa del &lt;strong&gt;for&lt;/strong&gt;, de manera que si hi ha una expressió que es fa més d’una vegada:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $a in (1,2)&lt;/div&gt;
&lt;div&gt;return &amp;lt;Hola/&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El return s'executaria més d'una vegada:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;Hola/&amp;gt;&lt;/div&gt;
&lt;div&gt;&lt;span&gt;&amp;lt;Hola/&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="90"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="91"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="51"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="91"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="44"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.2%20-%20XQUERY:6.2.1%20-%20Consultes%20XQuery"></string>
              <string role="key" value="parent"></string>
              <reference key="88"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="94">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="6.2.2 - Variables"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="92">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="93">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="92"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;XQuery és un llenguatge pensat per buscar en documents XML, però no solament es pot fer servir per a això, ja que té suport per fer operacions aritmètiques i per treballar amb cadenes de caràcters.&lt;/p&gt;
&lt;p&gt;En aquest exemple fem servir XQuery per fer una operació matemàtica senzilla:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;let $x := 5&lt;/div&gt;
&lt;div&gt;let $y := 4&lt;/div&gt;
&lt;div&gt;return $x + $y&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Una característica d’XQuery que el diferencia d’altres llenguatges de consulta és que &lt;strong&gt;disposa de variables&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Les variables en XQuery s’identifiquen perquè comencen sempre amb el símbol &lt;b&gt;$&lt;/b&gt;.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Poden contenir qualsevol valor: literals numèrics o caràcters, seqüències de nodes, …&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;La instrucció per assignar valors a una variable és &lt;strong&gt;&lt;b&gt;let&lt;/b&gt;&lt;/strong&gt;.&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Una de les utilitzacions fonamentals de les variables és guardar elements per poder-los fer servir posteriorment. En l’exemple següent es guarden els elements &lt;b&gt;&amp;lt;nom&amp;gt;&lt;/b&gt; en la variable &lt;b&gt;$alumnes&lt;/b&gt; i després torna la quantitat d’alumnes: &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;let $alumnes := //alumne/nom&lt;/div&gt;
&lt;div&gt;return count($alumnes)&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;3&lt;/p&gt;
&lt;p&gt;Es poden aplicar filtres XPath a les variables: &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;let $tot := /classe&lt;br /&gt;let $profe := $tot//professor&lt;br /&gt;let $alum := $tot//alumne&lt;br /&gt;return string-join((count($profe), &quot;professors.&quot;, count($alum),&quot;alumnes&quot;),&quot; &quot;)&lt;/div&gt;
&lt;div class=&quot;codi2&quot;&gt;1 professors. 3 alumnes&lt;/div&gt;
&lt;p&gt;Els valors de les variables els podrem comparar amb els operadors de comparació habituals que podem veure a la següent taula:&lt;/p&gt;
&lt;table align=&quot;center&quot; border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr class=&quot;row0 borderth&quot;&gt;&lt;th class=&quot;col0&quot;&gt; Operador &lt;/th&gt;&lt;th class=&quot;col1&quot;&gt; Operador2 &lt;/th&gt;&lt;th class=&quot;col2 leftalign&quot;&gt;Ús&lt;/th&gt;&lt;/tr&gt;
&lt;tr class=&quot;row1&quot;&gt;
&lt;td class=&quot;col0 centeralign&quot; style=&quot;text-align: center;&quot;&gt;=&lt;/td&gt;
&lt;td class=&quot;col1 centeralign&quot; style=&quot;text-align: center;&quot;&gt;eq&lt;/td&gt;
&lt;td class=&quot;col2 leftalign&quot;&gt;Dos valors són iguals&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row2&quot;&gt;
&lt;td class=&quot;col0 centeralign&quot; style=&quot;text-align: center;&quot;&gt;!=&lt;/td&gt;
&lt;td class=&quot;col1 centeralign&quot; style=&quot;text-align: center;&quot;&gt;ne&lt;/td&gt;
&lt;td class=&quot;col2&quot;&gt;Dos valors són diferents&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row3&quot;&gt;
&lt;td class=&quot;col0 centeralign&quot; style=&quot;text-align: center;&quot;&gt;&amp;gt;&lt;/td&gt;
&lt;td class=&quot;col1 centeralign&quot; style=&quot;text-align: center;&quot;&gt;gt&lt;/td&gt;
&lt;td class=&quot;col2 leftalign&quot;&gt;Major&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row4&quot;&gt;
&lt;td class=&quot;col0 centeralign&quot; style=&quot;text-align: center;&quot;&gt;&amp;gt;=&lt;/td&gt;
&lt;td class=&quot;col1 centeralign&quot; style=&quot;text-align: center;&quot;&gt;ge&lt;/td&gt;
&lt;td class=&quot;col2 leftalign&quot;&gt;Major o igual&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row5&quot;&gt;
&lt;td class=&quot;col0 centeralign&quot; style=&quot;text-align: center;&quot;&gt;&amp;lt;&lt;/td&gt;
&lt;td class=&quot;col1 centeralign&quot; style=&quot;text-align: center;&quot;&gt;lt&lt;/td&gt;
&lt;td class=&quot;col2 leftalign&quot;&gt;Menor&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row6&quot;&gt;
&lt;td class=&quot;col0 centeralign&quot; style=&quot;text-align: center;&quot;&gt;&amp;lt;=&lt;/td&gt;
&lt;td class=&quot;col1 centeralign&quot; style=&quot;text-align: center;&quot;&gt;le&lt;/td&gt;
&lt;td class=&quot;col2 leftalign&quot;&gt;Menor o igual&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Els operadors &lt;strong&gt;&lt;b&gt;eq&lt;/b&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;b&gt;ne&lt;/b&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;b&gt;gt&lt;/b&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;b&gt;ge&lt;/b&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;b&gt;lt&lt;/b&gt;&lt;/strong&gt; i &lt;strong&gt;&lt;b&gt;le&lt;/b&gt;&lt;/strong&gt; només es poden fer servir per a comparar valors individuals. &lt;/p&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="93"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="94"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="53"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="94"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="45"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.2%20-%20XQUERY:6.2.2%20-%20Variables"></string>
              <string role="key" value="parent"></string>
              <reference key="88"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="97">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="6.2.3 - Expressions avaluables"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="95">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="96">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="95"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;XQuery està pensat per poder mesclar les consultes amb qualsevol altre tipus de contingut. Si es mescla amb contingut, les expressions que s’hagen d’avaluar s’han de col·locar entre claus ”&lt;strong&gt;{…}&lt;/strong&gt;”.&lt;/p&gt;
&lt;p&gt;Per exemple, podem mesclar HTML i XQuery per tal que el processador XQuery genere una pàgina web amb les dades d’un document XML.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;&amp;lt;html&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;Llista de classe&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;body&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;h1&amp;gt;&lt;/div&gt;
&lt;div&gt;{&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;//assignatura&lt;/div&gt;
&lt;div&gt;}&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/body&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/html&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;html&amp;gt;&lt;br /&gt;  &amp;lt;head&amp;gt;&lt;br /&gt;    &amp;lt;title&amp;gt;Llista de classe&amp;lt;/title&amp;gt;&lt;br /&gt;  &amp;lt;/head&amp;gt;&lt;br /&gt;  &amp;lt;body&amp;gt;&lt;br /&gt;    &amp;lt;h1&amp;gt;&lt;br /&gt;      &amp;lt;assignatura&amp;gt;Llenguatges de Marques&amp;lt;/assignatura&amp;gt;&lt;br /&gt;    &amp;lt;/h1&amp;gt;&lt;br /&gt;  &amp;lt;/body&amp;gt;&lt;br /&gt;&amp;lt;/html&amp;gt;&lt;/p&gt;
&lt;p&gt;En mesclar contingut, el processador XQuery només avaluarà les instruccions que estiguen dins de les claus, i per tant ha deixat les etiquetes HTML tal com estan.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Creació d'elements i atributs&lt;/p&gt;
&lt;p&gt;Fent servir les expressions avaluables és fàcil crear nous elements.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;&amp;lt;modul&amp;gt;&lt;/div&gt;
&lt;div&gt;{  //assignatura/text() }&lt;/div&gt;
&lt;div&gt;&amp;lt;/modul&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;modul&amp;gt;Llenguatges de Marques&amp;lt;/modul&amp;gt;&lt;/p&gt;
&lt;p&gt;També es poden crear atributs (s’ha d’anar en compte de no deixar-se les cometes al voltant del valor que obtindran els atributs).&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;&amp;lt;modul nom=&quot;{ //assignatura/text() }&quot;/&amp;gt;&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;modul nom=&quot;Llenguatges de Marques&quot;/&amp;gt;&lt;/p&gt;
&lt;p&gt;Una manera alternativa i més potent de definir elements i atributs és fer servir les paraules clau &lt;strong&gt;element&lt;/strong&gt; i &lt;strong&gt;attribute&lt;/strong&gt;. Aquestes instruccions permeten crear elements i definir-ne el contingut especificant-lo dins de les claus.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;element modul {&lt;/div&gt;
&lt;div&gt;}&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Crearia l'element buit &lt;strong&gt;&amp;lt;modul/&amp;gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Si volem crear nous elements o atributs dins d’un element definit d’aquesta manera s’han d’especificar dins de les claus. Per exemple, el codi següent:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;element modul {&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;attribute nom { //assignatura/text()},&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;element alumnes { //alumne }&lt;/div&gt;
&lt;div&gt;}&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Que ens donarà el següent resultat:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div class=&quot;ace_text-layer ace_marker-layer&quot;&gt;
&lt;div class=&quot;results&quot;&gt;
&lt;div class=&quot;uneven&quot;&gt;
&lt;div class=&quot;item&quot;&gt;
&lt;div class=&quot;xml-element&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;modul&lt;/span&gt; &lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;Llenguatges de Marques&lt;/span&gt;&quot;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumnes&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt; &lt;span class=&quot;ace_keyword&quot;&gt;aprovat&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;si&lt;/span&gt;&quot;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Albert&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Alegre&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;6&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt; &lt;span class=&quot;ace_keyword&quot;&gt;aprovat&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;no&lt;/span&gt;&quot;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Bernat&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Balaguer&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;3&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt; &lt;span class=&quot;ace_keyword&quot;&gt;delegat&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;si&lt;/span&gt;&quot; &lt;span class=&quot;ace_keyword&quot;&gt;aprovat&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;si&lt;/span&gt;&quot;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Joan&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nom&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Centelles&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;cognoms&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;8&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nota&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumne&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;alumnes&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;modul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="96"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="97"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="54"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="97"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="46"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.2%20-%20XQUERY:6.2.3%20-%20Expressions%20avaluables"></string>
              <string role="key" value="parent"></string>
              <reference key="88"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="100">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="6.2.4 - Expressions FLWOR"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="98">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="99">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="98"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Les expressions FLWOR són la part més potent d’XQuery. Estan formades per cinc instruccions opcionals que permeten fer les consultes i alhora processar-les per seleccionar els ítems que interessen d’una seqüència.&lt;/p&gt;
&lt;table align=&quot;center&quot; border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr class=&quot;row0 borderth&quot;&gt;&lt;th class=&quot;col0&quot;&gt;           &lt;/th&gt;&lt;th class=&quot;col1 leftalign&quot;&gt;Clàusula&lt;/th&gt;&lt;th class=&quot;col2 leftalign&quot;&gt;Ús&lt;/th&gt;&lt;/tr&gt;
&lt;tr class=&quot;row1&quot;&gt;
&lt;td class=&quot;col0 centeralign&quot; style=&quot;text-align: center;&quot;&gt;&lt;strong&gt;f&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;&lt;strong&gt;&lt;b&gt;for&lt;/b&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col2&quot;&gt;Permet recórrer una seqüència, agafant cada vegada un element d'aquesta&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row2&quot;&gt;
&lt;td class=&quot;col0 centeralign&quot; style=&quot;text-align: center;&quot;&gt;&lt;strong&gt;l&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;&lt;strong&gt;&lt;b&gt;let&lt;/b&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col2 leftalign&quot;&gt;Serveix per assignar valors a una variable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row3&quot;&gt;
&lt;td class=&quot;col0 centeralign&quot; style=&quot;text-align: center;&quot;&gt;&lt;strong&gt;w&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;&lt;strong&gt;&lt;b&gt;where&lt;/b&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col2 leftalign&quot;&gt;Permet filtrar els resultats segons condicions&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row4&quot;&gt;
&lt;td class=&quot;col0 centeralign&quot; style=&quot;text-align: center;&quot;&gt;&lt;strong&gt;o&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1&quot;&gt;&lt;strong&gt;&lt;b&gt;order by&lt;/b&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col2 leftalign&quot;&gt;Ordena els resultats abans de mostrar-los&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;row5&quot;&gt;
&lt;td class=&quot;col0 centeralign&quot; style=&quot;text-align: center;&quot;&gt;&lt;strong&gt;r&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col1 leftalign&quot;&gt;&lt;strong&gt;&lt;b&gt;return&lt;/b&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td class=&quot;col2 leftalign&quot;&gt;Retorna el resultat de tota l’expressió&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p class=&quot;titolet&quot;&gt;&quot;FOR ... RETURN&quot;&lt;/p&gt;
&lt;p&gt;La instrucció &lt;strong&gt;&lt;b&gt;for&lt;/b&gt;&lt;/strong&gt; es fa servir per avaluar individualment cadascun dels resultats d’una seqüència de nodes. En un &lt;strong&gt;&lt;b&gt;for&lt;/b&gt;&lt;/strong&gt; es defineixen dues coses:&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;Una variable, que serà la que anirà agafant els elements de la seqüència un per un.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;La paraula clau &lt;strong&gt;&lt;b&gt;in&lt;/b&gt;&lt;/strong&gt;, en la qual es defineix quina és la seqüència d’elements per processar.&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La manera més senzilla d’expressió FLWOR és combinar el &lt;strong&gt;&lt;b&gt;for&lt;/b&gt;&lt;/strong&gt; amb el &lt;strong&gt;&lt;b&gt;return&lt;/b&gt;&lt;/strong&gt; per retornar els valors obtinguts de manera seqüencial: &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $i in ('Hola' , 'Adéu' )&lt;/div&gt;
&lt;div&gt;return $i&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;generarà:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;Hola&lt;/div&gt;
&lt;div&gt;Adéu&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Les seqüències de valors poden ser de qualsevol tipus. Per exemple, poden ser números. Així, el següent exemple:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $i in (1,2,3)&lt;/div&gt;
&lt;div&gt;return $i * $i&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;generarà:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;1&lt;/div&gt;
&lt;div&gt;4&lt;/div&gt;
&lt;div&gt;9&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;O bé una seqüència de nodes, per mig d'una expressió XPath. Per exemple amb l’expressió següent capturem una seqüència de nodes i els fem servir per obtenir-ne el cognom:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $alumne in //alumne&lt;/div&gt;
&lt;div&gt;return &amp;lt;alumne&amp;gt; { $alumne/cognoms } &amp;lt;/alumne&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;generarà:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;&amp;lt;alumne&amp;gt;&lt;br /&gt;   &amp;lt;cognoms&amp;gt;Alegre&amp;lt;/cognoms&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;br /&gt;&amp;lt;alumne&amp;gt;&lt;br /&gt;   &amp;lt;cognoms&amp;gt;Balaguer&amp;lt;/cognoms&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;br /&gt;&amp;lt;alumne&amp;gt;&lt;br /&gt;   &amp;lt;cognoms&amp;gt;Centelles&amp;lt;/cognoms&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;/div&gt;
&lt;p&gt;Es pot veure que els valors del &lt;strong&gt;&lt;b&gt;return&lt;/b&gt;&lt;/strong&gt; s’han anat processant un per un i per aquest motiu es repeteixen les etiquetes &lt;strong&gt;&lt;b&gt;&amp;lt;alumne&amp;gt;&lt;/b&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Un aspecte important és que no cal que el &lt;strong&gt;&lt;b&gt;for&lt;/b&gt;&lt;/strong&gt; siga la primera expressió de la consulta. També es pot posar com a paràmetre en una funció XPath.&lt;/p&gt;
&lt;p&gt;Per exemple, l’expressió següent ens tornarà el nombre d’alumnes: &lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;count (&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;for $alumne in //alumne&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;return $alumne&lt;/div&gt;
&lt;div&gt;)&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;3&lt;/p&gt;
&lt;p&gt;En el &lt;strong&gt;for&lt;/strong&gt; es pot incloure l’operador &lt;strong&gt;at&lt;/strong&gt;, que permet obtenir la posició del node que s’està processant. Amb aquest operador podem fer que aparega el número d’ordre en els resultats.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $alumne at $pos in //alumne &lt;/div&gt;
&lt;div&gt;return &amp;lt;alumne numero=&quot;{$pos}&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;{ $alumne/cognoms/text() }&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;/alumne&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;que donarà&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;&amp;lt;alumne numero=&quot;1&quot;&amp;gt;Alegre&amp;lt;/alumne&amp;gt;&lt;br /&gt;&amp;lt;alumne numero=&quot;2&quot;&amp;gt;Balaguer&amp;lt;/alumne&amp;gt;&lt;br /&gt;&amp;lt;alumne numero=&quot;3&quot;&amp;gt;Centelles&amp;lt;/alumne&amp;gt;&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;&quot;FOR NIUAT&quot; (&quot;anidat&quot;)&lt;/p&gt;
&lt;p&gt;Les ordres &lt;strong&gt;for&lt;/strong&gt; es poden posar unes dins d'unes altres, d’una manera similar a com ho fa SQL amb les subconsultes. Així es poden aconseguir resultats més complexos que es basen en els resultats obtinguts anteriorment.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $selec in //alumne &lt;/div&gt;
&lt;div&gt;return &lt;/div&gt;
&lt;div&gt;    &amp;lt;persona&amp;gt; &lt;/div&gt;
&lt;div&gt;        { $selec/nom } &lt;/div&gt;
&lt;div&gt;        { &lt;/div&gt;
&lt;div&gt;            for $selec2 in $selec &lt;/div&gt;
&lt;div&gt;            return $selec2//cognom &lt;/div&gt;
&lt;div&gt;        } &lt;/div&gt;
&lt;div&gt;    &amp;lt;/persona&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;persona&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;/persona&amp;gt;&lt;br /&gt;&amp;lt;persona&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;/persona&amp;gt;&lt;br /&gt;&amp;lt;persona&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;/persona&amp;gt; &lt;/p&gt;
&lt;p&gt;Aquesta sentència anterior queda un poc pobra, ja que en el document hi ha molt poques dades.&lt;/p&gt;
&lt;p&gt;Un exemple un poc més complet (i comprensiu) seria el següent:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;for $selec in //ruta &lt;br /&gt;return &lt;br /&gt;    &amp;lt;ruta&amp;gt; &lt;br /&gt;        &amp;lt;nomRuta&amp;gt;&lt;br /&gt;        { $selec/nom/text() }&lt;br /&gt;        &amp;lt;/nomRuta&amp;gt;&lt;br /&gt;        &amp;lt;punts&amp;gt;&lt;br /&gt;        { &lt;br /&gt;            for $selec2 in $selec//punt &lt;br /&gt;            return &amp;lt;punt&amp;gt; {$selec2/nom/text()} &amp;lt;/punt&amp;gt; &lt;br /&gt;        }&lt;br /&gt;        &amp;lt;/punts&amp;gt;&lt;br /&gt;    &amp;lt;/ruta&amp;gt;&lt;/div&gt;
&lt;p&gt;que donaria el sagüent resultat:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div class=&quot;uneven&quot;&gt;
&lt;div class=&quot;item&quot;&gt;
&lt;div class=&quot;xml-element&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;ruta&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nomRuta&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Pujada a Penyagolosa&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nomRuta&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punts&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Sant Joan&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Encreuament&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Barranc de la Pegunta&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;El Corralico&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Penyagolosa&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punts&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;ruta&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;even&quot;&gt;
&lt;div class=&quot;item&quot;&gt;
&lt;div class=&quot;xml-element&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;ruta&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nomRuta&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;La Magdalena&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;nomRuta&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punts&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Primer Molí&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Segon Molí&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Caminàs&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Riu Sec&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Sant Roc&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Explanada&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;xml-element&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;La Magdalena&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;punts&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;ruta&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;br /&gt;...&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="99"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="100"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="55"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="100"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="101">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="102">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="101"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;LET&lt;/p&gt;
&lt;p&gt;Ens permet declarar variables i assignar-los un valor. Sobretot es fa servir per guardar valors que s’han de fer servir més tard.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;let $num := 1&lt;/div&gt;
&lt;div&gt;let $nom := &quot;Pere&quot;&lt;/div&gt;
&lt;div&gt;let $i := (1 to 3)&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En les expressions FLWOR hi pot haver tants &lt;strong&gt;let&lt;/strong&gt; com calga.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $alumne in doc(&quot;db/Tema9/classe.xml&quot;)//alumne&lt;/div&gt;
&lt;div&gt;let $nom := $alumne/nom&lt;/div&gt;
&lt;div&gt;let $nota := $alumne/nota&lt;/div&gt;
&lt;div&gt;return &amp;lt;nom&amp;gt;{ concat($nom,&quot;: &quot;,$nota) }&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;nom&amp;gt;Albert: 6&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Bernat: 3&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Joan: 8&amp;lt;/nom&amp;gt;&lt;/p&gt;
&lt;p&gt;S’ha d’anar amb compte amb &lt;strong&gt;let&lt;/strong&gt; perquè el seu funcionament és molt diferent del de &lt;strong&gt;for&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;&lt;strong&gt;for&lt;/strong&gt; s’executa per a cada membre d’una seqüència.&lt;/div&gt;
&lt;/li&gt;
&lt;li class=&quot;level1&quot;&gt;
&lt;div class=&quot;li&quot;&gt;&lt;strong&gt;let&lt;/strong&gt; fa referència al seu valor en conjunt. Si és una seqüència, el que es processa són tots els valors de cop.&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Podem veure la diferència amb un exemple. Aquesta instrucció amb &lt;strong&gt;for&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $selec in //alumne&lt;/div&gt;
&lt;div&gt;return &amp;lt;persona&amp;gt;{$selec/nom}&amp;lt;/persona&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Dóna:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;persona&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;/persona&amp;gt;&lt;br /&gt;&amp;lt;persona&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;/persona&amp;gt;&lt;br /&gt;&amp;lt;persona&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;/persona&amp;gt;&lt;/div&gt;
&lt;p&gt;I en canvi amb &lt;strong&gt;let&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;let $selec := //alumne&lt;/div&gt;
&lt;div&gt;return &amp;lt;persona&amp;gt;{$selec/nom}&amp;lt;/persona&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Donarà:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;&amp;lt;persona&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;/persona&amp;gt;&lt;/div&gt;
&lt;p&gt;Els resultats són bastant diferents! Es pot veure clarament que &lt;strong&gt;let&lt;/strong&gt; ha tractat tots els valors de cop.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="102"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="100"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="60"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="100"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="103">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="104">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="103"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;WHERE&lt;/p&gt;
&lt;p&gt;La instrucció &lt;strong&gt;where&lt;/strong&gt; és la part que indicarà quin filtre s’ha de posar a les dades rebudes abans d’enviar-les a la sortida del &lt;b&gt;return&lt;/b&gt;. Normalment en el filtre es fa servir algun tipus de predicat XPath:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $alumne in //alumne&lt;/div&gt;
&lt;div&gt;where $alumne/@aprovat=&quot;si&quot;&lt;/div&gt;
&lt;div&gt;return $alumne/nom&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;/p&gt;
&lt;p&gt;Com que XPath forma part d’XQuery moltes vegades el mateix filtre es pot definir de diverses maneres. Per exemple, aquesta expressió és equivalent a l’anterior:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $alumne in //alumne[@aprovat=&quot;si&quot;]&lt;/div&gt;
&lt;div&gt;return $alumne/nom&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Això sí, en un &lt;strong&gt;where&lt;/strong&gt; hi pot haver tantes condicions com faça falta simplement encadenant-les amb les operacions lògiques &lt;strong&gt;and&lt;/strong&gt;, &lt;strong&gt;or&lt;/strong&gt; o &lt;strong&gt;not()&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Aquesta expressió retorna el cognom dels alumnes que han aprovat i que es diuen &lt;em&gt;Joan&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;for $alumne in //alumne&lt;br /&gt;where $alumne/@aprovat=&quot;si&quot; and $alumne/nom=&quot;Joan&quot;&lt;br /&gt;return $alumne/cognoms&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;cognoms&amp;gt;Centelles&amp;lt;/cognoms&amp;gt;&lt;/p&gt;
&lt;p&gt;El &lt;strong&gt;where&lt;/strong&gt; afegeix més potència del que sembla, ja que ens permet fer els &lt;strong&gt;inner joins&lt;/strong&gt; d’SQL en fitxers XML. Per exemple, a partir de dos fitxers amb les dades de dues classes diferents es poden obtenir només els alumnes que es repeteixen entre les dues classes amb:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;for $alum1 in doc(&quot;db/Tema9/classe.xml&quot;)//alumne&lt;/span&gt;&lt;/div&gt;
&lt;div&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;let $alum2 in doc(&quot;db/Tema9/classe2.xml&quot;)//alumne&lt;/span&gt;&lt;/div&gt;
&lt;div&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;where $alum1 = $alum2&lt;/span&gt;&lt;/div&gt;
&lt;div&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;return $alum1&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;Atenció&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;L'anterior només és un exemple que no funcionarà, ja que no disposem del document &lt;strong&gt;classe2.xml&lt;/strong&gt; &lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="104"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="100"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="61"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="100"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="105">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="106">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="105"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;ORDER BY&lt;/p&gt;
&lt;p&gt;Una de les operacions habituals en les cerques és representar els resultats en un ordre determinat. Aquesta és la funció que fa &lt;strong&gt;&lt;em&gt;order by&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Es pot ordenar de manera ascendent amb &lt;strong&gt;ascending&lt;/strong&gt; (que és el que fa per defecte) o bé descendent amb &lt;strong&gt;descending&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $alumne in &lt;span&gt;&lt;/span&gt;//alumne&lt;/div&gt;
&lt;div&gt;order by $alumne/cognoms descending&lt;/div&gt;
&lt;div&gt;return $alumne&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;alumne delegat=&quot;si&quot; aprovat=&quot;si&quot;&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;br /&gt;    &amp;lt;cognoms&amp;gt;Centelles&amp;lt;/cognoms&amp;gt;&lt;br /&gt;    &amp;lt;nota&amp;gt;8&amp;lt;/nota&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;br /&gt;&amp;lt;alumne aprovat=&quot;no&quot;&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;br /&gt;    &amp;lt;cognoms&amp;gt;Balaguer&amp;lt;/cognoms&amp;gt;&lt;br /&gt;    &amp;lt;nota&amp;gt;3&amp;lt;/nota&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;br /&gt;&amp;lt;alumne aprovat=&quot;si&quot;&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;br /&gt;    &amp;lt;cognoms&amp;gt;Alegre&amp;lt;/cognoms&amp;gt;&lt;br /&gt;    &amp;lt;nota&amp;gt;6&amp;lt;/nota&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;/p&gt;
&lt;p&gt;També es poden especificar diferents conceptes en l’ordenació. En aquest exemple els resultats s’ordenaran primer per cognom i després per nom:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $alumne in &lt;span&gt;&lt;/span&gt;//alumne&lt;/div&gt;
&lt;div&gt;order by $alumne/cognoms, $alumne/nom&lt;/div&gt;
&lt;div&gt;return $alumne&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En aquest altre el cognom s’ordena de manera descendent i el nom de manera ascendent.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $alumne in &lt;span&gt;&lt;/span&gt;//alumne&lt;/div&gt;
&lt;div&gt;order by $alumne/cognoms descending, $alumne/nom ascending&lt;/div&gt;
&lt;div&gt;return $alumne&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Per defecte ordena com si el contingut de les etiquetes fóra text. Si hem d'obtenir una ordenació numèrica, caldrà convertir els valors a números amb la funció d’XPath &lt;strong&gt;number()&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $ruta in doc(&quot;db/Tema9/Rutes.xml&quot;)//ruta&lt;/div&gt;
&lt;div&gt;order by number($ruta/desnivellAcumulat)&lt;/div&gt;
&lt;div&gt;return concat($ruta/nom, &quot; --&amp;gt; &quot;, $ruta/desnivellAcumulat)&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;La Magdalena --&amp;gt; 84&lt;br /&gt;Pujada a Penyagolosa --&amp;gt; 530&lt;br /&gt;Catí - Sant Pere de Castellfort --&amp;gt; 1286&lt;br /&gt;Pelegrins de Les Useres --&amp;gt; 1738&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="106"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="100"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="63"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="100"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="47"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.2%20-%20XQUERY:6.2.4%20-%20Expressions%20FLWOR"></string>
              <string role="key" value="parent"></string>
              <reference key="88"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="109">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="6.2.5 - Alternatives"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="107">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="108">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="107"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;La instrucció &lt;strong&gt;&lt;b&gt;if&lt;/b&gt;&lt;/strong&gt; ens permetrà fer una cosa o una altra segons si es compleix la condició especificada o no. Per exemple, podem fer una llista d’alumnes en què s’especifique si han aprovat o no a partir del valor que hi ha en l’element &lt;b&gt;&lt;strong&gt;&amp;lt;nota&lt;/strong&gt;&amp;gt;&lt;/b&gt;.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;let $doc := doc(&quot;/db/Tema9/classe.xml&quot;)&lt;/div&gt;
&lt;div&gt;let $aprovat := 5&lt;/div&gt;
&lt;div&gt;for $b in $doc//alumne&lt;/div&gt;
&lt;div&gt;return&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;if ($b/nota &amp;gt;= $aprovat) then&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;&lt;span&gt;aval&lt;/span&gt;&amp;gt; { $b/nom/text() } està aprovat&amp;lt;/&lt;span&gt;aval&lt;/span&gt;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;else&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;&lt;span&gt;aval&lt;/span&gt;&amp;gt; { $b/nom/text() } no està aprovat&amp;lt;/&lt;span&gt;aval&lt;/span&gt;&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Això generarà el resultat següent:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div class=&quot;ace_text-layer ace_marker-layer&quot;&gt;
&lt;div class=&quot;results&quot;&gt;
&lt;div class=&quot;uneven&quot;&gt;
&lt;div class=&quot;item&quot;&gt;
&lt;div class=&quot;xml-element&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;aval&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Albert està aprovat&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;aval&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;even&quot;&gt;
&lt;div class=&quot;item&quot;&gt;
&lt;div class=&quot;xml-element&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;aval&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Bernat no està aprovat&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;aval&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;uneven&quot;&gt;
&lt;div class=&quot;item&quot;&gt;
&lt;div class=&quot;xml-element&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;aval&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Joan està aprovat&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;ace_keyword&quot;&gt;aval&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;La instrucció &lt;strong&gt;&lt;b&gt;else&lt;/b&gt;&lt;/strong&gt; és habitual en llenguatges de programació, però a diferència del que passa normalment, en XQuery &lt;strong&gt;sempre s'ha d'especificar el else&lt;/strong&gt;, encara que no es vulga fer res (en aquest cas posaríem uns parèntesis sense res dins). Si no està l'&lt;strong&gt;else&lt;/strong&gt;, donarà error.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $alu in doc(&quot;/db/Tema9/classe.xml&quot;)//alumne&lt;/div&gt;
&lt;div&gt;return &amp;lt;alumne&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;{ $alu/nom }&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;{ if ($alu/nota &amp;gt; 5) then&lt;/div&gt;
&lt;div style=&quot;margin-left: 180px;&quot;&gt;&amp;lt;aprovat/&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;  else () }&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt; &amp;lt;/alumne&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;alumne&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Albert&amp;lt;/nom&amp;gt;&lt;br /&gt;    &amp;lt;aprovat/&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;br /&gt;&amp;lt;alumne&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;br /&gt;&amp;lt;alumne&amp;gt;&lt;br /&gt;    &amp;lt;nom&amp;gt;Joan&amp;lt;/nom&amp;gt;&lt;br /&gt;    &amp;lt;aprovat/&amp;gt;&lt;br /&gt;&amp;lt;/alumne&amp;gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="108"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="109"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="56"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="109"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="48"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.2%20-%20XQUERY:6.2.5%20-%20Alternatives"></string>
              <string role="key" value="parent"></string>
              <reference key="88"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="112">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="6.2.6 - Exemple de consulta &quot;elaborada&quot;"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="110">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="111">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="110"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Partint d’aquest XML d’exemple que representa comandes de llibres (guardeu-lo com un document anomenat &lt;strong&gt;comanda_llibres.xml&lt;/strong&gt;):&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;petició llibreria=&quot;Fantastica SL&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;data&amp;gt;15-11-2011&amp;lt;/data&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;autor&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;nom&amp;gt;Frédérik McCloud&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;llibres&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;llibre&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;titol&amp;gt;Les empentes&amp;lt;/titol&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;quantitat&amp;gt;2&amp;lt;/quantitat&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;/llibre&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;/llibres&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/autor&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;autor&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;nom&amp;gt;Corsaro Levy&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;llibres&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;llibre&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;titol&amp;gt;Marxant de la font del gat&amp;lt;/titol&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;quantitat&amp;gt;2&amp;lt;/quantitat&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;/llibre&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;llibre&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;titol&amp;gt;Bèstia!&amp;lt;/titol&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;quantitat&amp;gt;2&amp;lt;/quantitat&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;/llibre&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;/llibres&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/autor&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;autor&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;nom&amp;gt;Marc Blairet&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;llibres&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;llibre&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;titol&amp;gt;Tres de tres&amp;lt;/titol&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;quantitat&amp;gt;3&amp;lt;/quantitat&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;/llibre&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;/llibres&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/autor&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/petició&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Es vol respondre la pregunta següent: &lt;strong&gt;de quins autors s’han demanat tres o més llibres?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Anem a fer l'exercici a poc a poc, de manera constructiva.&lt;/p&gt;
&lt;p&gt;Per respondre aquesta pregunta el primer que cal és separar el document en blocs d’autor i processar-ne cada un de manera diferent. Per tant, es defineix un bucle amb un &lt;strong&gt;&lt;b&gt;for&lt;/b&gt;&lt;/strong&gt; per cada autor i s’escriu el nom per pantalla&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $autor in doc(&quot;/db/Tema9/comanda_llibres.xml&quot;)//autor&lt;/div&gt;
&lt;div&gt;return $autor/nom&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El resultat serà una llista de tots els autors:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;&amp;lt;nom&amp;gt;Frédérik McCloud&amp;lt;/nom&amp;gt;&lt;br /&gt;
&lt;div&gt;&amp;lt;nom&amp;gt;Corsaro Levy&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;nom&amp;gt;Marc Blairet&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Es vol definir una restricció amb la quantitat de llibres que s’han demanat de cada autor; per tant, ho podríem intentar fer amb el &lt;b&gt;where&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $autor in doc(&quot;&lt;span&gt;/db/Tema9/comanda_&lt;/span&gt;llibres.xml&quot;)//autor&lt;/div&gt;
&lt;div&gt;where $autor/llibres/llibre/quantitat &amp;gt;= 3&lt;/div&gt;
&lt;div&gt;return $autor/nom&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Aquesta és la llista dels autors que tenen alguna petició de 3 o més llibres&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;nom&amp;gt;Marc Blairet&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Però es pot veure que encara no és el demanat, ja que no apareix l’autor Corsaro Levy, del qual s’han demanat dues unitats llibres diferents. Per tant, agrupem les quantitats per obtenir el resultat correcte&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $autor in doc(&quot;&lt;span&gt;/db/Tema9/comanda_&lt;/span&gt;llibres.xml&quot;)//autor&lt;/div&gt;
&lt;div&gt;where sum($autor/llibres/llibre/quantitat) &amp;gt;= 3&lt;/div&gt;
&lt;div&gt;return $autor/nom&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Ara el resultat sí que és el correcte:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;nom&amp;gt;Corsaro Levy&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;nom&amp;gt;Marc Blairet&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Podem fer que el resultat siga més “bonic” mostrant les quantitats venudes al costat de cada autor i ordenant de més a menys els resultats.&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $autor in doc(&quot;&lt;span&gt;/db/Tema9/comanda_&lt;/span&gt;llibres.xml&quot;)//autor &lt;/div&gt;
&lt;div&gt;let $suma := sum($autor/llibres/llibre/quantitat)&lt;/div&gt;
&lt;div&gt;where $suma &amp;gt;=3&lt;/div&gt;
&lt;div&gt;order by $suma descending&lt;/div&gt;
&lt;div&gt;return concat($autor/nom,&quot; : &quot;, $suma)&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Es pot veure que per no haver d’escriure diverses vegades l’expressió de suma s’ha definit una variable &lt;b&gt;$suma&lt;/b&gt; i d’aquesta manera l’expressió ha quedat més fàcil d’escriure&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&quot;Corsaro Levy : 4&quot;&lt;/div&gt;
&lt;div&gt;&quot;Marc Blairet : 3&quot;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;La funció &lt;b&gt;concat()&lt;/b&gt; ha eliminat les etiquetes XML i ha generat un resultat de text. Si es vol mantenir una estructura XML es pot crear manualment amb l’ajuda de les expressions avaluables:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;
&lt;div&gt;for $autor in doc(&quot;&lt;span&gt;/db/Tema9/comanda_&lt;/span&gt;llibres.xml&quot;)//autor &lt;/div&gt;
&lt;div&gt;let $suma := sum($autor/llibres/llibre/quantitat)&lt;/div&gt;
&lt;div&gt;where $suma &amp;gt;=3&lt;/div&gt;
&lt;div&gt;order by $suma descending&lt;/div&gt;
&lt;div&gt;return &amp;lt;autor&amp;gt; { concat($autor/nom,&quot; : &quot;, $suma) } &amp;lt;/autor&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Que generarà:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;autor&amp;gt;Corsaro Levy : 4&amp;lt;/autor&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;autor&amp;gt;Marc Blairet : 3&amp;lt;/autor&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="111"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="112"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="58"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="112"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="49"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.2%20-%20XQUERY:6.2.6%20-%20Exemple%20de%20consulta%20%22elaborada%22"></string>
              <string role="key" value="parent"></string>
              <reference key="88"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="115">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="6.2.7 - Funcions de eXist-db de manipulació de BD"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="113">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="114">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="108_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="113"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value=""></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="114"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="115"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="84"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="115"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="116">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="117">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="109_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="116"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;A mode únicament il·lustratiu, anem a comentar una sèrie de funcions de &lt;strong&gt;eXist-db&lt;/strong&gt; que serveixen per a modificar les col·leccions i documents  de la Base de Dades.&lt;/p&gt;
&lt;p&gt;Són unes funcions que estan dins del paquet &lt;strong&gt;xmldb&lt;/strong&gt;, i per tant començaran totes per aquest prefix.&lt;/p&gt;
&lt;p&gt;Com que serveixen per a modificar la Base de Dades, serà obligatori autenticar-se (recordeu que l'usuari era &lt;strong&gt;admin / admin&lt;/strong&gt;).&lt;/p&gt;
&lt;p&gt;Veurem només algunes de les funcions. Si voleu aprofundir, aquesta és la pàgina de la documentació: &lt;a href=&quot;http://exist-db.org/exist/apps/fundocs/view.html?uri=http://exist-db.org/xquery/xmldb&quot;&gt;http://exist-db.org/exist/apps/fundocs/view.html?uri=http://exist-db.org/xquery/xmldb&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;xmldb:create-collection&lt;/p&gt;
&lt;p&gt;Crea una col·lecció, especificant també la col·lecció de qui dependrà&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;xmldb:get-child-collections&lt;/p&gt;
&lt;p&gt;S'obtindran totes les subcol·leccions de la col·lecció especificada.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;xmldb:get-child-resources&lt;/p&gt;
&lt;p&gt;S'obtindran tots els documents de la col·lecció especificada.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;xmldb:get-child-resources(&quot;Tema9&quot;)&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T9_6_2_7_1.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;775&quot; height=&quot;400&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;xmldb:store&lt;/p&gt;
&lt;p&gt;Guarda un document en la Base de Dades. Se li han d'especificar 3 paràmentres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nom de la col·lecció on es guardarà el document&lt;/li&gt;
&lt;li&gt;Nom del document&lt;/li&gt;
&lt;li&gt;Contingut del document&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;xmldb:store(&quot;Tema9&quot;,&quot;prof.xml&quot;,//professor)&lt;/p&gt;
&lt;p&gt;generarà el document &lt;strong&gt;prof.xml&lt;/strong&gt; dins de la col·lecció &lt;strong&gt;Tema9&lt;/strong&gt;, i el contingut és el resultat de fer la consulta XPath &lt;strong&gt;//professor&lt;/strong&gt;, que obté tots els elements professor de la Base de Dades (només hi ha un):&lt;/p&gt;
&lt;table style=&quot;width: 100%;&quot; border=&quot;0&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 50%; text-align: right;&quot;&gt;&lt;img src=&quot;resources/T9_6_2_7_2.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;710&quot; height=&quot;310&quot; /&gt;&lt;/td&gt;
&lt;td style=&quot;width: 50%;&quot;&gt;&lt;img src=&quot;resources/T9_6_2_7_3.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;704&quot; height=&quot;327&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="3888"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="85_109_2.18"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="118">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="116"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T9_6_2_7_3.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpBTRZm0/T9_6_2_7_3.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="744e81cfb18b3d63159fb0cfde10cb51"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="117"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="3899"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="85_109_2.19"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="119">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="116"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T9_6_2_7_2.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpBTRZm0/T9_6_2_7_2.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="6979a1de4973b1299b475c039e0d2731"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="117"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="3900"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="85_109_2.20"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="120">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="116"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T9_6_2_7_1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpBTRZm0/T9_6_2_7_1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="a2bfe22a8b8ce9d6f83cf422f672f1ee"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="117"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="117"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="21"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="115"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="85"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="115"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="118"></reference>
                  <reference key="119"></reference>
                  <reference key="120"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="57"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:6%20-%20Llenguatges%20de%20consultes%20XPATH%20i%20XQUERY:6.2%20-%20XQUERY:6.2.7%20-%20Funcions%20de%20eXist-db%20de%20manipulaci%C3%B3%20de%20BD"></string>
              <string role="key" value="parent"></string>
              <reference key="88"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="123">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="7 - API Java estàndards per a BD-XML natives"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="121">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="122">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="121"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;Les dades emmagatzemades a les BD han de poder ser accessibles des d’aplicacions desenvolupades en diferents llenguatges i, per aquest motiu, els SGBD es veuen obligats a facilitar interfícies de programació per als llenguatges de programació més comuns. Així, els fabricants d’SGBD, coneixedors de la tecnologia utilitzada en el seu producte, faciliten una &lt;acronym title=&quot;Application Programming Interface&quot;&gt;API&lt;/acronym&gt; per permetre-hi l’accés, desenvolupada de la manera més eficient possible per al seu producte, fet que comporta l’aparició d’un problema: l’API proporcionada per a cada SGBD és pròpia i diferent de les API dels altres SGBD i, en conseqüència, les aplicacions desenvolupades queden lligades a l’SGBD i els programadors han de conèixer un munt d’API diferents, tantes com SGBD diferents als quals han d’enllaçar.&lt;/p&gt;
&lt;p&gt;Davant l’anarquia d’API existent per atacar els SGBD d’un determinat tipus, acostumen a aparèixer intents per estandarditzar el mecanisme i proporcionar una &lt;acronym title=&quot;Application Programming Interface&quot;&gt;API&lt;/acronym&gt; estàndard. En el cas de les BD-XML natives hi ha hagut dos processos d’estandardització per al llenguatge Java, que han donat lloc a dues API estàndards: &lt;strong&gt;XML:DB&lt;/strong&gt; (també anomenada XAPI) i &lt;strong&gt;XQueryAPI for Java&lt;/strong&gt; (XQJ).&lt;/p&gt;
&lt;p&gt;Actualment hi ha molts SGBD-XML que faciliten la implementació de les dues API. En concret eXist-db només documenta l'accés a través de XML:DB (&lt;a href=&quot;https://exist-db.org/exist/apps/doc/devguide_xmldb&quot;&gt;https://exist-db.org/exist/apps/doc/devguide_xmldb&lt;/a&gt;). Encara que seria recomanable conèixer les dues &lt;acronym title=&quot;Application Programming Interface&quot;&gt;API&lt;/acronym&gt;, nosaltres només veurem &lt;strong&gt;XQJ&lt;/strong&gt;, per la seua senzillesa &lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="122"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="123"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="66"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="123"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="23"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:7%20-%20API%20Java%20est%C3%A0ndards%20per%20a%20BD-XML%20natives"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="126">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="7.1 - API XQJ"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="124">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="125">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="124"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;&lt;strong&gt;XQuery &lt;acronym title=&quot;Application Programming Interface&quot;&gt;API&lt;/acronym&gt; for Java&lt;/strong&gt; (&lt;strong&gt;XQJ&lt;/strong&gt;) és una interfície de programació d’aplicacions Java pensada per utilitzar el llenguatge XQuery per obtenir informació de BD-XML natives, de manera semblant a com JDBC és una &lt;acronym title=&quot;Application Programming Interface&quot;&gt;API&lt;/acronym&gt; pensada per utilitzar el llenguatge &lt;acronym title=&quot;Structured Query Language&quot;&gt;SQL&lt;/acronym&gt; per accedir a BD Relacionals.&lt;/p&gt;
&lt;p&gt;XQJ va néixer el 2003 i la seua versió definitiva ha estat publicada el 2009. També és coneguda com a JSR 225 ja que ha estat dissenyada com un projecte JCP (Java Community Process). De moment (versió 1.7 de Java), no forma part de la llibreria estàndard de classes Java.&lt;/p&gt;
&lt;p&gt;Nombrosos SGBD-XML natives faciliten la connectivitat des de Java mitjançant aquesta XQJ, de manera que podem desenvolupar aplicacions que accedesquen a SGBD-XML natives via XQJ amb l’única particularitat d’haver d’utilitzar la implementació de l’&lt;acronym title=&quot;Application Programming Interface&quot;&gt;API&lt;/acronym&gt; que facilita cada SGBD.&lt;/p&gt;
&lt;p&gt;A continuació desenvoluparem aplicacions Java que connecten contra SGBD-XML natives via XQJ i comprovarem que s'executen correctament en el SGBD-XML natives que estem utilitzant: &lt;strong&gt;eXist-db&lt;/strong&gt;. &lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="125"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="126"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="69"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="126"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="25"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:7%20-%20API%20Java%20est%C3%A0ndards%20per%20a%20BD-XML%20natives:7.1%20-%20API%20XQJ"></string>
           <string role="key" value="parent"></string>
           <reference key="123"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="129">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="7.1.1 - Descàrrega"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="127">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="128">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="127"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Podem descarregar-nos la API XQJ per a eXist des de la pàgina &lt;a href=&quot;http://xqj.net&quot;&gt;http://xqj.net&lt;/a&gt;, on estan les API per a les 3 Bases de Dades XML més utilitzades: eXist, BaseX i Sedna, a banda d'alguna coseta més.&lt;/p&gt;
&lt;p&gt;Concretament, la de eXist està en &lt;a href=&quot;http://xqj.net/exist&quot;&gt;http://xqj.net/exist&lt;/a&gt;:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_7_1.png&quot; alt=&quot;xqj.net&quot; width=&quot;1053&quot; height=&quot;887&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Com veiem, a banda de suggerir-nos instal·lar eXist i posar-lo en marxa, ens dóna un enllaç per a la descàrrega de l'API XQJ, a més d'un exemple d'utilització. L'enllaç és:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://xqj.net/exist/exist-xqj-api-1.0.1.zip&quot;&gt;http://xqj.net/exist/exist-xqj-api-1.0.1.zip&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;En aquest fitxer comprimit tenim tant les llibreries (.jar) com documentació. Com únicament són 3 els jar (no caldria incorporar el d'exemples), els podem afegir al projecte sense més, o bé podem col·locar-los en una llibreria d'usuari d'Eclipse (anomenada per exemple XQJ), per a més comoditat&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="3891"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="70_1.65"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="130">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="127"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_7_1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpBTRZm0/T7_7_1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="41fe49191d80d01dea13230885a4c270"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="128"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="128"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="66"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="129"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="70"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="129"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="130"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="51"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:7%20-%20API%20Java%20est%C3%A0ndards%20per%20a%20BD-XML%20natives:7.1%20-%20API%20XQJ:7.1.1%20-%20Desc%C3%A0rrega"></string>
              <string role="key" value="parent"></string>
              <reference key="126"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="133">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="7.1.2 - Connexió"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="131">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="132">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="131"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value=""></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="132"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="133"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="71"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="133"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="134">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="135">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="134"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Per a poder establir una connexió des de l'aplicació Java fins la Base de Dades (en el nostre cas eXist) necessitem dos objectes:&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;XQDataSource&lt;/p&gt;
&lt;p&gt;Servirà per a identificar l'origen de dades. A partir d'ell crearem les connexions (similars a sessions). De forma genèrica seria:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val xqs = &lt;em&gt;ClasseEspecíficaQueGeneraXQDataSource&lt;/em&gt;()&lt;/p&gt;
&lt;p&gt;que en el cas concret dels SGBD-XML natives més comuns s'haurà de particularitzar en:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt; eXist&lt;/strong&gt; serà &lt;strong&gt;ExistXQDataSource() &lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BaseX&lt;/strong&gt; seria &lt;strong&gt;BaseXQDataSource()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Sedna&lt;/strong&gt; seria &lt;strong&gt;SednoXQDataSource()&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I aquesta seria l'única diferència entre utilitzar un o un altre SGBD-XML natives, a banda de les dades de connexió.&lt;/p&gt;
&lt;p&gt;Com que en aquestos apunts únicament utilitzarem &lt;strong&gt;eXist-db&lt;/strong&gt;, la nostra classe serà &lt;strong&gt;ExistXQDataSource()&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;La manera d'indicar el servidor, port, usuari i contrasenya és per mig del mètode &lt;strong&gt;setProperty() &lt;/strong&gt; Aquest seria un exemple, on connectem al servidor situat en la mateixa màquina, al port &lt;strong&gt;8080&lt;/strong&gt; (que és el port per defecte), i com a usuari &lt;strong&gt;admin&lt;/strong&gt; (&lt;strong&gt;admin&lt;/strong&gt;), encara que si només volem fer consultes, no caldrà autenticar-nos. És a dir, que podem prescindir de les 4 últimes sentències:&lt;/p&gt;
&lt;div class=&quot;codi&quot;&gt;val s = ExistXQDataSource()&lt;br /&gt;
&lt;div&gt;s.setProperty(&quot;serverName&quot;, &quot;localhost&quot;)&lt;/div&gt;
&lt;div&gt;s.setProperty(&quot;port&quot;, &quot;8080&quot;)&lt;/div&gt;
&lt;div&gt;s.setProperty(&quot;user&quot;, &quot;admin&quot;)&lt;/div&gt;
&lt;div&gt;s.setProperty(&quot;password&quot;, &quot;admin&quot;)&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt; XQConnection&lt;/p&gt;
&lt;p&gt;Representa una connexió, una sessió. Mantindrà informació d'estat, transaccions, consultes executades i resultats.&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val conn = s.getConnection()&lt;/p&gt;
&lt;p&gt;També es podria passar l'usuari i contrasenya en el moment de fer la connexió (encara que ja hem comentat que no ens caldrà autenticar-nos per a fer només consultes):&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val conn = s.getConnection(&quot;admin&quot;,&quot;admin&quot;)&lt;/p&gt;
&lt;p&gt;I en finalitzar, hem de recordar tancar aquesta connexió:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;conn.close()&lt;/p&gt;
&lt;p&gt; Aquest seria un exemple on únicament avisem que hem pogut connectar. El podem fer en un projecte nou, anomenat &lt;strong&gt;Tema9&lt;/strong&gt;, dins del paquet &lt;strong&gt;exemples&lt;/strong&gt;, i amb el nom &lt;strong&gt;Prova01_XQJ.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource

fun main() {
	val s = ExistXQDataSource();
	//s.setProperty(&quot;serverName&quot;, &quot;localhost&quot;)
	//s.setProperty(&quot;port&quot;, &quot;8080&quot;)
	//s.setProperty(&quot;user&quot;, &quot;admin&quot;)
	//s.setProperty(&quot;password&quot;, &quot;admin&quot;)

	val conn = s.getConnection()
	println(&quot;Connexió feta&quot;)	
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Si volem connectar a un servidor diferent del local,per exemple el servidor de l'Institut, haurem d'especificar la propietat del &lt;strong&gt;serverName&lt;/strong&gt;. Copieu el següent exemple amb el nom &lt;strong&gt;Prova02.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource

fun main() {
    val s = ExistXQDataSource();
    s.setProperty(&quot;serverName&quot;, &quot;89.36.214.106&quot;)
    //s.setProperty(&quot;port&quot;, &quot;8080&quot;)

    val conn = s.getConnection()
    println(&quot;Connexió feta&quot;)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;b&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Si heu tingut problemes amb la instal·lació de eXist-db, utilitzeu sempre la connexió al servidor de l'Institut&lt;/p&gt;
&lt;/div&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="135"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="133"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="72"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="133"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="52"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:7%20-%20API%20Java%20est%C3%A0ndards%20per%20a%20BD-XML%20natives:7.1%20-%20API%20XQJ:7.1.2%20-%20Connexi%C3%B3"></string>
              <string role="key" value="parent"></string>
              <reference key="126"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="138">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="7.1.3 - Resultats de sentències XQuery"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="136">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="137">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="136"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Aquestes són les classes que utilitzarem per accedir a les dades:&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;XQExpression o XQPreparedExpression&lt;/p&gt;
&lt;p&gt;Són objectes creats a partir de la connexió per a l'execució d'una expressió (sentència) &lt;strong&gt;XQuery&lt;/strong&gt;. Ja sabem que XQuery inclou XPath, per tant també podem posar senzillament una expressió XPath.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;XQExpression&lt;/strong&gt; serveix per a executar sentències de forma immediata, si volem una darrere de l'altra. &lt;strong&gt;XQPreparedExpression&lt;/strong&gt; serveix més per a preparar-les, exactament igual que amb els &lt;strong&gt;Statement&lt;/strong&gt; de &lt;strong&gt;JDBC&lt;/strong&gt; per a BD Relacionals.&lt;/p&gt;
&lt;p&gt;Mentre que per a XQExpression no declarem la sentència en el moment de crear-la, sinó posteriorment amb &lt;strong&gt;executeQuery(&lt;em&gt;sentència&lt;/em&gt;)&lt;/strong&gt; passant-li la sentència, en XQExpression declarem la sentència en el moment de crear-la, i després només restarà executar-la (sense passar-li-la com a paràmetre amb &lt;strong&gt;executeQuery()&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;En ambdós casos el resultat vindrà en un &lt;strong&gt;XQResultSequence&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;XQResultSequence&lt;/p&gt;
&lt;p&gt;Arreplega el resultat de l'execució d'una sentència per qualsevol dels mètodes anteriors. Contindrà un conjunt de 0 o més &lt;strong&gt;XQResultItem&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;És un objecte que es pot recórrer. Veja'm un exemple, on per a obtenir l'element del &lt;strong&gt;ResultSequence&lt;/strong&gt; utilitzem el mètode &lt;strong&gt;getItemAsString(null)&lt;/strong&gt; per a convertir-lo tot sencer en string. Primer utilitzem &lt;strong&gt;XQPrepareExpression&lt;/strong&gt;:. Copieu el següent codi amb en un fitxer amb el nom &lt;strong&gt;Prova1_XQJ.kt&lt;/strong&gt;. Observeu com ens ha tocat escapar els &lt;strong&gt;$&lt;/strong&gt; per a que Kotlin no ho interprete com una extensió de les variables&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource

fun main() {
	val s = ExistXQDataSource()

	val conn = s.getConnection()
	println(&quot;Connexió feta&quot;)
	val sent = &quot;for \$alumne in doc(\&quot;/db/Tema9/classe.xml\&quot;)//alumne order by \$alumne/cognoms return \$alumne&quot;

	val cons = conn.prepareExpression (sent)
	val rs = cons.executeQuery ()

	while (rs.next())
		println(rs.getItemAsString(null))
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I ara anem a canviar la consulta per veure com queda amb &lt;strong&gt;XQExpression&lt;/strong&gt;. Serà substituir les línies 12 i 13 per aquestes:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	val cons = conn.createExpression()
	val rs = cons.executeQuery(sent)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En els programes anteriors hem buscat en un únic document, &lt;strong&gt;classe.xml&lt;/strong&gt;, posant-li la ruta. Com que per a posar el nom i ruta del document fan falta les cometes &lt;strong&gt;&quot;&lt;/strong&gt;, ens ha tocat &quot;escapar-les&quot; amb la contra-barra. Si no posàrem el document, ja sabem que eXist buscaria en totes les col·leccions.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;XQResultItem&lt;/p&gt;
&lt;p&gt;Representa un element d'un resultat. Ja hem vist que el XQResultSequence el podem recórrer, però si volem treballar millor o de forma més completa amb cada element, podem passar-lo al &lt;strong&gt;XQResultItem&lt;/strong&gt;. El mateix exemple d'abans quedaria d'aquesta manera. Guardeu el següent codi en el fitxer &lt;strong&gt;Prova2_XQJ.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource
import javax.xml.xquery.XQResultItem

fun main() {
	val s = ExistXQDataSource()

	val conn = s.getConnection()
	println(&quot;Connexió feta&quot;)
	val sent = &quot;for \$alumne in doc(\&quot;/db/Tema9/classe.xml\&quot;)//alumne order by \$alumne/cognoms return \$alumne&quot;

	val cons = conn.prepareExpression(sent)
	val rs = cons.executeQuery()

	var r_item: XQResultItem? = null
	while (rs.next()) {
		r_item = rs.getItem() as XQResultItem
		println(r_item.getItemAsString(null))
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="137"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="138"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="74"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="138"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="53"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:7%20-%20API%20Java%20est%C3%A0ndards%20per%20a%20BD-XML%20natives:7.1%20-%20API%20XQJ:7.1.3%20-%20Resultats%20de%20sent%C3%A8ncies%20XQuery"></string>
              <string role="key" value="parent"></string>
              <reference key="126"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="141">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="7.1.4 - Processar el resultat"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="139">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="140">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="139"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;En els exemples anteriors hem processat de forma molt bàsica el resultat. Hem recorregut el XQResultSequence, per a traure tot el contingut de cada element, passant-lo a String&lt;/p&gt;
&lt;p&gt;En realitat XQJ ens ofereix més possibilitats, que ara veurem de forma resumida.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Moviment&lt;/p&gt;
&lt;p&gt;XQJ ens permet els següents mètodes de moviment o relacionats amb el moviment: &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;next()&lt;/strong&gt;, &lt;strong&gt;previous()&lt;/strong&gt;, &lt;strong&gt;first()&lt;/strong&gt;, &lt;strong&gt;last()&lt;/strong&gt;, &lt;strong&gt;beforeFirst()&lt;/strong&gt;, &lt;strong&gt;afterLast()&lt;/strong&gt;, &lt;strong&gt;getPosition()&lt;/strong&gt;, &lt;strong&gt;isLast()&lt;/strong&gt;, &lt;strong&gt;isFirst()&lt;/strong&gt;&lt;strong&gt;, isAfterLast()&lt;/strong&gt;, &lt;strong&gt;isBeforeFirst()&lt;/strong&gt;, &lt;strong&gt;count()&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Tots ells són de fàcil comprensió. L'únic problema és que la connexió ha de permetre el moviment en les dues direccions. Per defecte només es pot anar cap avant (&lt;strong&gt;&lt;em&gt;forward only&lt;/em&gt;&lt;/strong&gt;). Es pot canviar modificant les propietats de la connexió per a que siga &lt;strong&gt;SCROLLTYPE_SCROLLABLE&lt;/strong&gt;, com es veu en el següent exemple, que és una modificació dels exercicis anteriors per a recórrer de forma inversa. Guardeu-lo en el fitxer Kotlin &lt;strong&gt;Prova3_XQJ.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource
import javax.xml.xquery.XQResultItem
import javax.xml.xquery.XQConstants

fun main() {
	val s = ExistXQDataSource()

	val conn = s.getConnection()
	println(&quot;Connexió feta&quot;)
	val sent = &quot;for \$alumne in //alumne order by \$alumne/cognoms return \$alumne&quot;

	val cntxt = conn.getStaticContext()
	cntxt.setScrollability(XQConstants.SCROLLTYPE_SCROLLABLE)
	conn.setStaticContext(cntxt)
	val cons = conn.prepareExpression(sent)

	val rs = cons.executeQuery()
	rs.afterLast()
	while (rs.previous())
		println(rs.getItemAsString(null))

	conn.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;titolet&quot;&gt;Obtenció del contingut&lt;/p&gt;
&lt;p&gt;Si volem traure ja directament contingut de text, per exemple els cognoms dels alumnes, podem endur-nos alguna sorpresa. Per exemple, el següent exemple per a traure els cognoms dels alumnes per ordre alfabètic, que podeu gaurdar amb el nom &lt;strong&gt;Prova4_XQJ.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource
import javax.xml.xquery.XQResultItem
import javax.xml.xquery.XQConstants

fun main() {
	val s = ExistXQDataSource()

	val conn = s.getConnection()
	val sent = &quot;//alumne/cognoms/text()&quot;
	val rs = conn.createExpression().executeQuery(sent)

	while (rs.next())
		println(rs.getItemAsString(null))

	conn.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;No ens traurà el text tan senzill com ens pensàvem, sinó que l'eixida serà:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;text { &quot;Alegre&quot; }&lt;br /&gt;text { &quot;Balaguer&quot; }&lt;br /&gt;text { &quot;Centelles&quot; }&lt;/p&gt;
&lt;p&gt;indicant-nos que el resultat són nodes de text. Ho podem solucionar d'una forma molt senzilla utilitzant la funció &lt;strong&gt;xs:string()&lt;/strong&gt;, que ho converteix a string normal. Únicament canviant la sentència per aquesta:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val sent = &quot;//alumne/cognoms/xs:string(text())&quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;el resultat ja serà el que preteníem:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;Alegre&lt;br /&gt;Balaguer&lt;br /&gt;Centelles&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;També tenim una sèrie de mètodes per a obtenir el contingut que ve en un determinat format (numèric, ...) de forma adequada:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;getInt()&lt;/strong&gt;, &lt;strong&gt;getBoolean()&lt;/strong&gt;,&lt;strong&gt; getByte()&lt;/strong&gt;,&lt;strong&gt; getDouble()&lt;/strong&gt;, ...&lt;/p&gt;
&lt;p&gt;Però hem de fer que des de la consulta vinga la informació ja en el format adequat. El següent exemple agafa únicament les notes dels alumnes. I aquesta informació ve de forma numèrica (amb la funció &lt;strong&gt;xs:int()&lt;/strong&gt; ), aleshores podem utilitzar &lt;strong&gt;getInt()&lt;/strong&gt; . Guardeu el següent codi amb el nom &lt;strong&gt;Prova5_XQJ.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource
import javax.xml.xquery.XQResultItem
import javax.xml.xquery.XQConstants

fun main() {
	val s = ExistXQDataSource()

	val conn = s.getConnection()
	val sent = &quot;for \$alumne in //alumne  return xs:int(\$alumne/nota/text())&quot;
	val rs = conn.createExpression().executeQuery(sent)

	while (rs.next())
		println(rs.getInt())

	conn.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;6&lt;br /&gt;3&lt;br /&gt;8&lt;/p&gt;
&lt;p&gt;Però encara serà més interessant que quan ens vinga un element, poder analitzar i extraure els seus subelements, atributs, ...&lt;/p&gt;
&lt;p&gt;Per a poder fer açò ens valdrem dels documents DOM, vistos en el tema 3. Per a poder passar la informació utilitzarem el mètode &lt;strong&gt;getObject()&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;En el següent exemple, de la consulta obtenim els element, que passem a un element DOM. Posteriorment extraurem la informació del nom, cognoms i nota. Guardeu-lo amb el nom &lt;strong&gt;Prova6_XQJ.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource
import org.w3c.dom.Element

fun main() {
	val s = ExistXQDataSource()

	val conn = s.getConnection()
	val sent =&quot;for \$alumne in //alumne order by \$alumne/cognoms return \$alumne&quot;

	val cons = conn.prepareExpression (sent)

	val rs = cons.executeQuery ()
	while (rs.next()) {
		val el = rs.getObject () as Element
		print(el.getElementsByTagName(&quot;nom&quot;).item(0).getFirstChild().getNodeValue() + &quot; &quot;)
		print(el.getElementsByTagName(&quot;cognoms&quot;).item(0).getFirstChild().getNodeValue() + &quot;: &quot;)
		println(el.getElementsByTagName(&quot;nota&quot;).item(0).getFirstChild().getNodeValue())
	}
	conn.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;codi2&quot;&gt;Albert Alegre: 6&lt;br /&gt;Bernat Balaguer: 3&lt;br /&gt;Joan Centelles: 8&lt;/p&gt;
&lt;p&gt;Un altre exemple interessant pot ser guardar un fitxer amb una determinada informació (transformada) d'un document guardat en la Base de Dades. Guardeu-lo amb el nom &lt;strong&gt;Prova7_XQJ.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource
import java.io.File
import java.io.IOException

fun main() {
	val f = File(&quot;notes.xml&quot;)
	val s = ExistXQDataSource()

	val conn = s.getConnection()
	val sent = &quot;for \$classe in /classe &quot; +
				&quot;return &amp;lt;notes&amp;gt;&amp;lt;modul nom=\&quot;{\$classe/assignatura/text()}\&quot;&amp;gt;&quot; +
								&quot;{for \$alumne in \$classe//alumne &quot; +
								&quot;order by \$alumne/cognoms &quot; +
								&quot;return &amp;lt;alumne nota=\&quot;{\$alumne/nota/text()}\&quot;&amp;gt;&quot; +
									&quot;{concat(\$alumne/nom/text(), \&quot; \&quot;, \$alumne/cognoms)}&quot; +
									&quot;&amp;lt;/alumne&amp;gt;}&amp;lt;/modul&amp;gt;&amp;lt;/notes&amp;gt; &quot;

	val cons = conn.prepareExpression (sent)

	val rs = cons.executeQuery ()
	var text =&quot;&amp;lt;?xml version='1.0' ?&amp;gt;\n&quot;
	while (rs.next()) {
		val linia = rs.getItemAsString (null)
		println(linia)
		text += linia
		}
	f.writeText(text)
	conn.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El resultat serà el següent fitxer &lt;strong&gt;notes.xml&lt;/strong&gt; (a banda que també eixirà per l'eixida estàndar):&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;?xml version='1.0'?&amp;gt; &lt;br /&gt;&amp;lt;notes&amp;gt;&lt;br /&gt;        &amp;lt;modul nom=&quot;Llenguatges de Marques&quot; xmlns=&quot;&quot;&amp;gt;&lt;br /&gt;            &amp;lt;alumne nota=&quot;6&quot; xmlns=&quot;&quot;&amp;gt;Albert Alegre&amp;lt;/alumne&amp;gt;&lt;br /&gt;            &amp;lt;alumne nota=&quot;3&quot; xmlns=&quot;&quot;&amp;gt;Bernat Balaguer&amp;lt;/alumne&amp;gt;&lt;br /&gt;            &amp;lt;alumne nota=&quot;8&quot; xmlns=&quot;&quot;&amp;gt;Joan Centelles&amp;lt;/alumne&amp;gt;&lt;br /&gt;        &amp;lt;/modul&amp;gt;&lt;br /&gt;    &amp;lt;/notes&amp;gt;&lt;/p&gt;
&lt;p&gt;que com es veu, està ben format. Aquesta seria la visualització des d'un navegador:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_7_1_4_1.png&quot; style=&quot;border: 1px solid black; display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;480&quot; height=&quot;174&quot; /&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="3885"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="75_1.18"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="142">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="139"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_7_1_4_1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpBTRZm0/T7_7_1_4_1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="4d0d46474cc497880376d36aa63835b5"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="140"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="140"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="19"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="141"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="75"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="141"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="142"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="54"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:7%20-%20API%20Java%20est%C3%A0ndards%20per%20a%20BD-XML%20natives:7.1%20-%20API%20XQJ:7.1.4%20-%20Processar%20el%20resultat"></string>
              <string role="key" value="parent"></string>
              <reference key="126"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="145">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="7.1.5 - Modificar la Base de Dades"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="143">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="144">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="110_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="143"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value=""></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="144"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="145"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="86"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="145"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="146">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="147">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="111_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="146"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Per a poder guardar documents en la Base de Dades ens aprofitarem de les funcions vistes en la pregunta 6.2.7. Per mig d'elles podíem modificar la Base de Dades utilitzant aquestes funcions dins una sentència XQuery: crear col·leccions, guardar documents, ...&lt;/p&gt;
&lt;p&gt;Per tant, serà tan senzill com executar una sentència XQuery. La única dificultat serà jugar amb les cometes: en la sentència XQuery li hauran d'arribar a &lt;strong&gt;eXist-db&lt;/strong&gt; alguns paràmetres amb cometes (simples o dobles).&lt;/p&gt;
&lt;p&gt;Com que anem a modificar la Base de Dades, ara sí que ens haurem d'autenticar.&lt;/p&gt;
&lt;p&gt;Mirem primer un programeta per a crear un document extremadament senzill, amb un únic element buit. Poseu-li el nom de &lt;strong&gt;Prova9_XQJ_GuardarDocument_1.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource

fun main() {
	val s = ExistXQDataSource()
	s.setProperty(&quot;serverName&quot;, &quot;localhost&quot;)
	s.setProperty(&quot;port&quot;, &quot;8080&quot;)
	s.setProperty(&quot;user&quot;, &quot;admin&quot;)
	s.setProperty(&quot;password&quot;, &quot;admin&quot;)
	val conn = s.getConnection()
	val exp = conn.createExpression()
	exp.executeCommand(&quot;xmldb:store(\&quot;Tema9\&quot;, \&quot;FitxerKotlin.xml\&quot;, \&quot;&amp;lt;Hola/&amp;gt;\&quot;)&quot;)
	conn.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Observeu, com en aquest exemple hem escapat les cometes dobles, per a que arriben a &lt;strong&gt;eXist-db&lt;/strong&gt;. Si refresquem el directori en &lt;strong&gt;eXide&lt;/strong&gt;, veurem que ja apareix el document nou, i podrem veure el seu contingut&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T9_7_1_5_1.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;710&quot; height=&quot;264&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Mirem un altre exemple, en el qual guardarem un altre document, més elaborat. És el mateix document que el que vam guardar en un fitxer en l'exemple &lt;strong&gt;Prova7_XQJ.kt&lt;/strong&gt;, però ara guardant-lo en la Base de Dades.&lt;/p&gt;
&lt;p&gt;Primer veurem una implementació en la qual ens baixem el resultat de la sentència de la qual volem guardar el resultat. Observeu com juguem amb les cometes simples i dobles, per no haver d'escapar les cometes dobles. Es mostra el resultat de la sentència de guardar el document, per veure que és correcta. Guardeu el programa amb el nom &lt;strong&gt;Prova9_XQJ_GuadarDocument_2.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource
import java.io.File
import java.io.IOException
import java.util.Properties

fun main() {
	//val f = File(&quot;notes.xml&quot;)
	val s = ExistXQDataSource()
	s.setProperty(&quot;serverName&quot;, &quot;89.36.214.106&quot;)
	s.setProperty(&quot;port&quot;, &quot;8080&quot;)
	s.setProperty(&quot;user&quot;, &quot;admin&quot;)
	s.setProperty(&quot;password&quot;, &quot;ieselcaminas.ad&quot;)


	val conn = s.getConnection()
	val sent = &quot;for \$classe in /classe &quot; +
				&quot;return &amp;lt;notes&amp;gt;&amp;lt;modul nom=\&quot;{\$classe/assignatura/text()}\&quot;&amp;gt;&quot; +
								&quot;{for \$alumne in \$classe//alumne &quot; +
								&quot;order by \$alumne/cognoms &quot; +
								&quot;return &amp;lt;alumne nota=\&quot;{\$alumne/nota/text()}\&quot;&amp;gt;&quot; +
									&quot;{concat(\$alumne/nom/text(), \&quot; \&quot;, \$alumne/cognoms)}&quot; +
									&quot;&amp;lt;/alumne&amp;gt;}&amp;lt;/modul&amp;gt;&amp;lt;/notes&amp;gt; &quot;;

	val cons = conn.prepareExpression (sent)

	val rs = cons.executeQuery ()
	var text =&quot;&amp;lt;?xml version=\&quot;1.0\&quot; ?&amp;gt;\n&quot;
	while (rs.next()) {
		text += rs.getItemAsString (null)
		}
	val col = &quot;Tema9&quot;
	val doc = &quot;classe_Kotlin.xml&quot;
	val com = &quot;xmldb:store('$col', '$doc', '$text')&quot;
	println(com)
	conn.createExpression().executeCommand(com)
	conn.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Evidentment ho podíem fer més curt, ja que en el programa no manipulem el resultat de la sentència XQuery. Aquesta és una segona versió del mateix programa, que queda més curta. Guardeu-lo amb el nom &lt;strong&gt;Prova10_XQJ_GuardarDocument_3.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import net.xqj.exist.ExistXQDataSource

fun main() {
	//val f = File(&quot;notes.xml&quot;)
	val s = ExistXQDataSource()
	s.setProperty(&quot;serverName&quot;, &quot;89.36.214.106&quot;)
	s.setProperty(&quot;port&quot;, &quot;8080&quot;)
	s.setProperty(&quot;user&quot;, &quot;admin&quot;)
	s.setProperty(&quot;password&quot;, &quot;ieselcaminas.ad&quot;)


	val conn = s.getConnection()
	val sent = &quot;for \$classe in /classe &quot; +
				&quot;return &amp;lt;notes&amp;gt;&amp;lt;modul nom=\&quot;{\$classe/assignatura/text()}\&quot;&amp;gt;&quot; +
								&quot;{for \$alumne in \$classe//alumne &quot; +
								&quot;order by \$alumne/cognoms &quot; +
								&quot;return &amp;lt;alumne nota=\&quot;{\$alumne/nota/text()}\&quot;&amp;gt;&quot; +
									&quot;{concat(\$alumne/nom/text(), \&quot; \&quot;, \$alumne/cognoms)}&quot; +
									&quot;&amp;lt;/alumne&amp;gt;}&amp;lt;/modul&amp;gt;&amp;lt;/notes&amp;gt; &quot;

	val col = &quot;Tema9&quot;
	val doc = &quot;classe_Kotlin_2.xml&quot;
	val com = &quot;xmldb:store('$col', '$doc', $sent)&quot;
	println(com)
	conn.createExpression().executeCommand(com)
	conn.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I aquest seria el resultat:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T9_7_1_5_2.png&quot; alt=&quot;&quot; width=&quot;715&quot; height=&quot;256&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;b&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Aquestos exemples no es podrien fer connectant amb el servidor de l'Institut.&lt;/p&gt;
&lt;p&gt;Si heu tingut problemes amb la instal·lació de &lt;strong&gt;eXist-db&lt;/strong&gt;, no cal que feu aquestos exemples&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="3878"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="87_111_2.12"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="148">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="146"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T9_7_1_5_2.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpBTRZm0/T9_7_1_5_2.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="29a9e452b1321f81e4009336b7fca40c"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="147"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="3898"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="87_111_2.13"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="149">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="146"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T9_7_1_5_1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpBTRZm0/T9_7_1_5_1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="b6fee34b439915c07e9dcca5f35df9dd"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="147"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="147"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="14"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="145"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="87"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="145"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="148"></reference>
                  <reference key="149"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="58"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:7%20-%20API%20Java%20est%C3%A0ndards%20per%20a%20BD-XML%20natives:7.1%20-%20API%20XQJ:7.1.5%20-%20Modificar%20la%20Base%20de%20Dades"></string>
              <string role="key" value="parent"></string>
              <reference key="126"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="152">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="7.2 - API XML:DB"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="150">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="151">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="114_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="150"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Únicament a mode d'exemple posarem alguns exemples d'utilització de l'altra API comentada anteriorment: XML:DB.&lt;/p&gt;
&lt;p&gt;Tenim documentació i exemples en la mateix a pàgina de eXist.db, actualitzada.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://exist-db.org/exist/apps/doc/devguide_xmldb&quot;&gt;https://exist-db.org/exist/apps/doc/devguide_xmldb&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Per tant sembla que estan apostant per aquesta via. De tota manera, com comprovarem, resulta un poc incòmoda, per això no insistirem i posarem només alguns exemples.&lt;/p&gt;
&lt;p&gt;En compte de buscar el driver jar d'aquesta API, construirem un projecte Maven, i posarem les dependències que ens diu aquesta pàgina per a que es decarregue Maven tot el necessari.&lt;/p&gt;
&lt;p&gt;Per tant, construïm un nou projecte, per exemple amb el nom &lt;strong&gt;Tema9_Maven&lt;/strong&gt;, i en el fitxer &lt;strong&gt;pom.xml&lt;/strong&gt; afegim aquestes dependències en la secció de &lt;strong&gt;&amp;lt;dependencies&amp;gt;&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;net.sf.xmldb-org&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;xmldb-api&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;1.7.0&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;

        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.exist-db&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;exist-core&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;6.2.0&amp;lt;/version&amp;gt;
            &amp;lt;scope&amp;gt;runtime&amp;lt;/scope&amp;gt;
        &amp;lt;/dependency&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Veurem 3 exemples, trets de la pàgina anterior i acoplats a les nostres Bases de Dades.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Agafar un document&lt;/p&gt;
&lt;p&gt;Per a poder connectar al servidor utilitzarem una URI, amb el protocol xmldb, el servidor i la ruta fins on tenim el document. Si no posem tota la ruta, després quan anem a pel document amb &lt;strong&gt;getResource()&lt;/strong&gt; completem la ruta fins al document.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val URI = &quot;xmldb:exist://localhost:8080/exist/xmlrpc/db/Tema9&quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Evidentment podem substituir localhost per l'adreça del servidor&lt;/p&gt;
&lt;p&gt;En el programa, registrarem una Database (classe proporcionada per la API) i posteriorment agafarem una col·lecció utilitzant la URI. Només quedarà anar a pel document amb &lt;strong&gt;getResource() &lt;/strong&gt;de la col·lecció.&lt;/p&gt;
&lt;p&gt;Copieu-vos el següent codi a un fitxer anomentat &lt;strong&gt;Prova_XML_DB_AgafarDocument.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import org.exist.xmldb.DatabaseImpl
import org.xmldb.api.DatabaseManager
import org.xmldb.api.modules.XMLResource

fun main(args: Array&amp;lt;String&amp;gt;) {
        val URI = &quot;xmldb:exist://localhost:8080/exist/xmlrpc/db/Tema9&quot;

        val database = DatabaseImpl()
        DatabaseManager.registerDatabase(database)
        var col= DatabaseManager.getCollection(URI)
        val res = col.getResource(&quot;Rutes.xml&quot;) as XMLResource
        println(res.content)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Podria donar-se el cas que el projecte Maven no estiga ben configurat i que done error en algunes classes de les importades per Maven:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T9_7_2_1.png&quot; alt=&quot;&quot; width=&quot;962&quot; height=&quot;439&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Es pot solucionar fàcilment anant a &lt;strong&gt;Project structure&lt;/strong&gt;, buscar la llibreria de &lt;strong&gt;eXist-db&lt;/strong&gt; importada i assegurar-nos que està amb l'opció &lt;strong&gt;Compile &lt;/strong&gt;(si està en &lt;strong&gt;Runtime&lt;/strong&gt; és quan no ho troba):&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T9_7_2_2.png&quot; alt=&quot;&quot; width=&quot;1044&quot; height=&quot;870&quot; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;titolet&quot;&gt;Executar una sentència XQuery&lt;/p&gt;
&lt;p&gt;Per a executar una sentència XQuery, en aquesta ocasió hem d'utilitzar un objecte &lt;strong&gt;XQueryService&lt;/strong&gt; a partir de la col·lecció, en el qual compilarem i executarem la sentència.&lt;/p&gt;
&lt;p&gt;El resultat és un &lt;strong&gt;ResourceSet&lt;/strong&gt; que lamentablement no es pot utilitzar amb un &lt;strong&gt;foreach&lt;/strong&gt;, sinó que s'ha d'utilitzar un iterador&lt;/p&gt;
&lt;p&gt;Copieu-vos el següent codi (equivalent a &lt;strong&gt;Prova1_XQJ.kt&lt;/strong&gt; del projecte de XQJ)  en un fitxer anomenat &lt;strong&gt;Prova_XML_DB_ExecutarXQuery.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import org.exist.xmldb.DatabaseImpl
import org.xmldb.api.DatabaseManager
import org.xmldb.api.base.*
import org.xmldb.api.modules.XQueryService

fun main(args: Array&amp;lt;String&amp;gt;) {
    val URI = &quot;xmldb:exist://localhost:8080/exist/xmlrpc/db/Tema9&quot;

    DatabaseManager.registerDatabase(DatabaseImpl())
    var col= DatabaseManager.getCollection(URI)
    val xqs = col.getService(&quot;XQueryService&quot;, &quot;1.0&quot;) as XQueryService
    val result = xqs.execute(xqs.compile(&quot;for \$alumne in doc(\&quot;/db/Tema9/classe.xml\&quot;)//alumne order by \$alumne/cognoms return \$alumne&quot;))

    val it = result.iterator
    while (it.hasMoreResources()) {
          val res = it.nextResource()
          println(res.content)
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;titolet&quot;&gt;Processar el resultat&lt;/p&gt;
&lt;p&gt;Per a poder passar còmodament un resultat a l'estructura DOM i a partir d'aquest moment utilitzar tot el que vam veure en el tema 3, ens anirà bé convertir el &lt;strong&gt;Resource &lt;/strong&gt;a &lt;strong&gt;XMLResource&lt;/strong&gt;, que ens aportarà el mètode &lt;strong&gt;getContentAsDOM()&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Copieu-vos el següent codi (equivalent a &lt;strong&gt;Prova6_XQJ.kt&lt;/strong&gt; del projecte de &lt;strong&gt;XQJ&lt;/strong&gt;)  en un fitxer anomenat &lt;strong&gt;Prova6_XML_DB.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import org.exist.xmldb.DatabaseImpl
import org.w3c.dom.Element
import org.xmldb.api.DatabaseManager
import org.xmldb.api.modules.XQueryService
import org.xmldb.api.modules.XMLResource

fun main(args: Array&amp;lt;String&amp;gt;) {
        val URI = &quot;xmldb:exist://localhost:8080/exist/xmlrpc/db&quot;

        DatabaseManager.registerDatabase(DatabaseImpl())
        var col= DatabaseManager.getCollection(URI)
        val xqs = col.getService(&quot;XQueryService&quot;, &quot;3.0&quot;) as XQueryService
        val result = xqs.execute(xqs.compile(&quot;for \$alumne in doc(\&quot;Tema9/classe.xml\&quot;)//alumne order by \$alumne/cognoms return \$alumne&quot;))

        val i = result.iterator
        while (i.hasMoreResources()) {
                val res = i.nextResource() as XMLResource
                val el = res.contentAsDOM as Element
                print(el.getElementsByTagName(&quot;nom&quot;).item(0).getFirstChild().getNodeValue() + &quot; &quot;)
                print(el.getElementsByTagName(&quot;cognoms&quot;).item(0).getFirstChild().getNodeValue() + &quot;: &quot;)
                println(el.getElementsByTagName(&quot;nota&quot;).item(0).getFirstChild().getNodeValue())
        }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="3903"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="88_114_2.0"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="153">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="150"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T9_7_2_1.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpV6cUcz.eXe/previews/allyourbase/T9_7_2_1.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="86608841532a62a2aba94508f1ffc2d3"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="151"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="3904"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="88_114_2.1"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="154">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="150"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T9_7_2_2.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpV6cUcz.eXe/previews/allyourbase/T9_7_2_2.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="daf134eac37cad26a4c33eb04aca70e5"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="151"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                   </list>
                   <string role="key" value="idevice"></string>
                   <reference key="151"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="2"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="152"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="88"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="152"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="153"></reference>
               <reference key="154"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="59"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:7%20-%20API%20Java%20est%C3%A0ndards%20per%20a%20BD-XML%20natives:7.2%20-%20API%20XML%3ADB"></string>
           <string role="key" value="parent"></string>
           <reference key="123"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="157">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Exercicis"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="155">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 9.0 (voluntari) (PostgreSQL)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="156">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="92_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="155"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Modifica (ampliant-la) la sentència de l'apartat 3.7 per a guardar en un únic document XML les comarques de la taula COMARQUES. En cada comarca hauran d'aparèixer tots els seu pobles (taula POBLACIONS), i en cada poble tots els seus instituts (taula INSTITUTS).&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="156"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="157"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="38"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="parentNode"></string>
           <reference key="157"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="158">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 9.1 (voluntari) (PostgreSQL)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="159">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="89_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="158"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Dins de la BD pròpia de cadascú (la mateixa ja utilitzada en el Tema 6; si no tens clar quina és, contacta amb el teu professor) crea una taula anomenada &lt;strong&gt;DOC_XML &lt;/strong&gt;amb 3 camps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;num&lt;/strong&gt; (de tipus &lt;strong&gt;serial&lt;/strong&gt;, que és l'autonumèric) que contindrà el número del document. Ha de ser &lt;strong&gt;clau principal&lt;/strong&gt;&lt;strong&gt;.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;nom&lt;/strong&gt; (de tipus cadena) que contindrà un nom per al document.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;doc&lt;/strong&gt; (de tipus xml) que contindrà els documents XML&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Puja la sentència de creació de la taula.&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="159"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="157"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="35"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="parentNode"></string>
           <reference key="157"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="160">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 9.2 (voluntari) (PostgreSQL)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="161">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="90_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="160"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Fes un programa en Java (en el projecte &lt;strong&gt;Tema9_1&lt;/strong&gt;, en un paquet nou anomenat &lt;strong&gt;exercicis&lt;/strong&gt;) anomenat &lt;strong&gt;Ruta_XML_PostgreSQL&lt;/strong&gt; que guarde en la taula creada en el punt anterior el contingut del document &lt;strong&gt;Rutes.xml&lt;/strong&gt; ja fet en anteriors exercicis (i que et proporcionarà el professor). El nom del document podria ser &lt;strong&gt;Rutes&lt;/strong&gt;, i el número no li l'has de proporcionar, ja que és un autonumèric.&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="161"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="157"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="36"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="parentNode"></string>
           <reference key="157"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="162">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 9.3 (voluntari) (PostgreSQL)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="163">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="90_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="162"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Fes un programa dins del mateix projecte i paquet anomenat &lt;strong&gt;Vis_Rutes_XML&lt;/strong&gt; (i el JFrame: &lt;strong&gt;Vis_Rutes_XML_Pantalla&lt;/strong&gt;) que aprofite les llibreries gràfiques Awt i Swing per a mostrar les rutes i els seus punts guardades en la taula DOC_XML del punt anterior, d'una forma molt similar a l'exercici 3.4 del tema 3.&lt;/p&gt;
&lt;p&gt;Observa que es tractarà d'accedir al document XML guardat en la Base de Dades PostgreSQL, però no cal guardar tota l'estructura, sinó que és suficient amb la recerca de determinades coses:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Per al JComboBox s'han de buscar els noms de les rutes.&lt;/li&gt;
&lt;li&gt;Per al JArea el nom dels punts de la ruta seleccionada.&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_Ex_1.png&quot; width=&quot;400&quot; height=&quot;400&quot; /&gt;&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="3889"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="40_90_2.65"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="164">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="162"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_Ex_1.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpBTRZm0/T7_Ex_1.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="19cb96c26eeed107ab84dbc117769f11"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="163"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="163"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="66"></int>
              <string role="key" value="parentNode"></string>
              <reference key="157"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="40"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="parentNode"></string>
           <reference key="157"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="164"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="165">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 9.4 (voluntari) (PostgreSQL)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="166">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="89_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="165"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Intenta fer l'exercici 6.5 , però ara accedint als document XML de la Base de Dades PostgreSQL. Anomena'l &lt;strong&gt;Vis_Rutes_XML_PostgreSQL_Complet&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; src=&quot;resources/T6_Ex_5.png&quot; width=&quot;455&quot; height=&quot;578&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Intenta traure concusions sobre quina manera és més còmoda.&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="3890"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="59_89_2.65"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="167">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="165"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T6_Ex_5.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpBTRZm0/T6_Ex_5.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="dbd042a5783a1f7e44ef93c391884593"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="166"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="166"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="66"></int>
              <string role="key" value="parentNode"></string>
              <reference key="157"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="59"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="parentNode"></string>
           <reference key="157"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="167"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="168">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 9.5 (eXist)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="169">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="91_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="168"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Realitzar les expressions XPath que tornen les següents qüestions (totes elles sobre &lt;strong&gt;Rutes.xml&lt;/strong&gt;):&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Traure el nom de totes les rutes.&lt;/li&gt;
&lt;li&gt;Traure el nom de les rutes amb un desnivell major que 600 m.&lt;/li&gt;
&lt;li&gt;Traure les rutes en les quals el desnivell acumulat duplica el desnivell. (&lt;strong&gt;Observació&lt;/strong&gt;: quan en una condició combinem alguna operació amb una comparació, és millor posar l'operació abans de l'operador de comparació)&lt;/li&gt;
&lt;li&gt;Traure el nom del primer punt de cada ruta.&lt;/li&gt;
&lt;li&gt;Traure el nom de l'últim punt de cada ruta&lt;/li&gt;
&lt;li&gt;Traure els punts de la tercera ruta.&lt;/li&gt;
&lt;li&gt;Traure el número de punts de la tercera ruta&lt;/li&gt;
&lt;li&gt;Traure el nom de les rutes que tenen estrictament més de 5 punts.&lt;/li&gt;
&lt;li&gt;Traure la mitjana de desnivell de les rutes&lt;/li&gt;
&lt;li&gt;Traure les rutes en les quals hi ha alun punt més avall del paral·lel 40&lt;/li&gt;
&lt;/ol&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="169"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="157"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="49"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="parentNode"></string>
           <reference key="157"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="170">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 9.6 (eXist)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="171">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="90_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="170"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Fer les expressions XQuery per a aconsequir:&lt;/p&gt;
&lt;p&gt;1. El mòdul amb el nom del professor com a atribut:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;modul &lt;span class=&quot;ace_keyword&quot;&gt;professor&lt;/span&gt;=&quot;&lt;span class=&quot;ace_string&quot;&gt;Joan Puig&lt;/span&gt;&quot;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ace_identifier&quot;&gt;Llenguatges de Marques&lt;/span&gt;&amp;lt;/modul&amp;gt;&lt;/p&gt;
&lt;p&gt;2. El nom de cada ruta amb el número de punts com a argument:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;rutes&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;ruta numPunts=&quot;5&quot;&amp;gt;Pujada a Penyagolosa&amp;lt;/ruta&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;ruta numPunts=&quot;7&quot;&amp;gt;La Magdalena&amp;lt;/ruta&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;ruta numPunts=&quot;6&quot;&amp;gt;Pelegrins de Les Useres&amp;lt;/ruta&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;ruta numPunts=&quot;6&quot;&amp;gt;Catí - Sant Pere de Castellfort&amp;lt;/ruta&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/rutes&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; 3. Cada ruta amb el nom com a atribut, la latitud mitjana dels seus punts i la longitud mitjana&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;ruta nom=&quot;Pujada a Penyagolosa&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;lat_mitj&amp;gt;40.2408508&amp;lt;/lat_mitj&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;long_mitj&amp;gt;-0.3515282&amp;lt;/long_mitj&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/ruta&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;ruta nom=&quot;La Magdalena&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;lat_mitj&amp;gt;40.01264257142857&amp;lt;/lat_mitj&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;long_mitj&amp;gt;-0.02034042857142857&amp;lt;/long_mitj&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/ruta&amp;gt;&lt;/div&gt;
&lt;div&gt;...&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; 4. La mitjana de punts de les rutes&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;6&lt;/p&gt;
&lt;p&gt;5. Quants punts de cada ruta estan en l'hemisferi est (és a dir, longitud positiva)&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;Pujada a Penyagolosa: 0&lt;/div&gt;
&lt;div&gt;La Magdalena: 0&lt;/div&gt;
&lt;div&gt;Pelegrins de Les Useres: 0&lt;/div&gt;
&lt;div&gt;Catí - Sant Pere de Castellfort: 2&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="171"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="157"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="77"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="parentNode"></string>
           <reference key="157"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="172">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 9.7 (eXist)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="173">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="89_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="172"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;En el projecte &lt;strong&gt;Tema9&lt;/strong&gt;, i en un paquet nou anomenat &lt;strong&gt;exercicis&lt;/strong&gt;, fer un programa similar a l'exercici 6.4, però aquesta vegada accedint a la Base de Dades  XML-Nativa eXist:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_Ex7.png&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;456&quot; height=&quot;561&quot; /&gt;&lt;/p&gt;
&lt;p&gt;En aquesta ocasió la connexió serà permanent, fins apretar el botó de tancar. Observeu com els objectes&lt;strong&gt; s&lt;/strong&gt; (XQDataSource), &lt;strong&gt;conn&lt;/strong&gt; (XQConnection) i &lt;strong&gt;rs &lt;/strong&gt;(XResultSequence) estan declarats al principi per no perdre la connexió, fins apretar el botó &lt;strong&gt;Tancar&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Ens aprofitarem dels mètodes de moviment (&lt;strong&gt;first()&lt;/strong&gt;, &lt;strong&gt;previous()&lt;/strong&gt;, &lt;strong&gt;next()&lt;/strong&gt;, &lt;strong&gt;last()&lt;/strong&gt;) per a menejar-nos d'una ruta a una altra, i per tant s'ha de poder permetre el moviment cap avant i cap arrere.&lt;/p&gt;
&lt;p&gt;Observeu com el mètode &lt;strong&gt;plenar_taula(element)&lt;/strong&gt; ha canviat. Us pot servir de model per a emplenar les altres coses, i observeu com se li ha de passar un element DOM (l'element &lt;strong&gt;punts&lt;/strong&gt;).&lt;/p&gt;
&lt;p&gt;Podeu anomenar al fitxer &lt;strong&gt;T9Ex7&lt;/strong&gt;&lt;strong&gt;_Rutes_XML_eXist.kt&lt;/strong&gt;:&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import javax.swing.JFrame
import java.awt.EventQueue
import javax.swing.JLabel
import javax.swing.JTextField
import javax.swing.JTable
import javax.swing.JButton
import javax.swing.JPanel
import java.awt.GridLayout
import javax.swing.BoxLayout
import javax.swing.JScrollPane
import java.awt.FlowLayout
import org.w3c.dom.Element
import javax.xml.xquery.XQDataSource
import javax.xml.xquery.XQConnection
import javax.xml.xquery.XQResultSequence
import net.xqj.exist.ExistXQDataSource
import javax.xml.xquery.XQConstants

class T9Ex7_Rutes_XML_eXist : JFrame() {
	val s = ExistXQDataSource()

	var conn: XQConnection = s.getConnection()
	var rs: XQResultSequence? = null

	val etiqueta = JLabel(&quot;&quot;)
	val etNom = JLabel(&quot;Ruta:&quot;)
	val qNom = JTextField(15)
	val etDesn = JLabel(&quot;Desnivell:&quot;)
	val qDesn = JTextField(5)
	val etDesnAcum = JLabel(&quot;Desnivell acumulat:&quot;)
	val qDesnAcum = JTextField(5)
	val etPunts = JLabel(&quot;Punts:&quot;)
	val punts = JTable(1, 3)
	val primer = JButton(&quot;&amp;lt;&amp;lt;&quot;)
	val anterior = JButton(&quot;&amp;lt;&quot;)
	val seguent = JButton(&quot;&amp;gt;&quot;)
	val ultim = JButton(&quot;&amp;gt;&amp;gt;&quot;)
	val tancar = JButton(&quot;Tancar&quot;)

	init {
		getContentPane().setLayout(GridLayout(0, 1))
		val p_prin = JPanel()
		p_prin.setLayout(BoxLayout(p_prin, BoxLayout.Y_AXIS))

		val panell1 = JPanel(GridLayout(0, 2))
		panell1.add(etNom)
		qNom.setEditable(false)
		panell1.add(qNom)
		panell1.add(etDesn)
		qDesn.setEditable(false)
		panell1.add(qDesn)
		panell1.add(etDesnAcum)
		qDesnAcum.setEditable(false)
		panell1.add(qDesnAcum)
		panell1.add(etPunts)

		val panell2 = JPanel(GridLayout(0, 1))
		punts.setEnabled(false)
		val scroll = JScrollPane(punts)
		panell2.add(scroll, null)

		val panell5 = JPanel(FlowLayout())
		panell5.add(primer)
		panell5.add(anterior)
		panell5.add(seguent)
		panell5.add(ultim)
		panell5.add(tancar)

		getContentPane().add(p_prin)
		p_prin.add(panell1)
		p_prin.add(panell2)
		p_prin.add(panell5)

		setVisible(true)
		pack()

		primer.addActionListener() {

		}
		
		anterior.addActionListener() {

		}
		
		seguent.addActionListener() {

		}
		
		ultim.addActionListener() {

		}
		
		tancar.addActionListener() {

		}

		inicialitzar()
		VisRuta()
	}

	fun plenar_taula(e_punts: Element) {
		val ll_punts = e_punts.getElementsByTagName(&quot;punt&quot;)
		val ll = Array(ll_punts.getLength()) { Array(3) { &quot;&quot; } }
		for (i in 0..ll_punts.getLength() - 1) {
			val p = ll_punts.item(i) as Element
			ll[i][0] = p.getElementsByTagName(&quot;nom&quot;).item(0).getFirstChild().getNodeValue()
			ll[i][1] = p.getElementsByTagName(&quot;latitud&quot;).item(0).getFirstChild().getNodeValue()
			ll[i][2] = p.getElementsByTagName(&quot;longitud&quot;).item(0).getFirstChild().getNodeValue()
		}
		val caps = arrayOf&amp;lt;String&amp;gt;(&quot;Nom punt&quot;, &quot;Latitud&quot;, &quot;Longitud&quot;)
		punts.setModel(javax.swing.table.DefaultTableModel(ll, caps))
	}

	fun inicialitzar() {

	}

	fun VisRuta() {

	}
}

fun main(args: Array&amp;lt;String&amp;gt;) {
	EventQueue.invokeLater {
		T9Ex7_Rutes_XML_eXist().isVisible = true
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="3896"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="76_89_2.65"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="174">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="172"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_Ex7.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpBTRZm0/T7_Ex7.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="91c8cc88d5ec36f896e6561a68bb4db4"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="173"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="173"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="66"></int>
              <string role="key" value="parentNode"></string>
              <reference key="157"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="76"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="parentNode"></string>
           <reference key="157"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="174"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="26"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%209%3A%20Bases%20de%20Dades%20XML:Exercicis"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
     </list>
    </dictionary>
   </instance>
   <unicode role="key" value="1"></unicode>
   <reference key="8"></reference>
   <unicode role="key" value="19"></unicode>
   <reference key="11"></reference>
   <unicode role="key" value="20"></unicode>
   <reference key="45"></reference>
   <unicode role="key" value="21"></unicode>
   <reference key="49"></reference>
   <unicode role="key" value="23"></unicode>
   <reference key="123"></reference>
   <unicode role="key" value="25"></unicode>
   <reference key="126"></reference>
   <unicode role="key" value="26"></unicode>
   <reference key="157"></reference>
   <unicode role="key" value="28"></unicode>
   <reference key="15"></reference>
   <unicode role="key" value="29"></unicode>
   <reference key="42"></reference>
   <unicode role="key" value="30"></unicode>
   <reference key="18"></reference>
   <unicode role="key" value="31"></unicode>
   <reference key="21"></reference>
   <unicode role="key" value="32"></unicode>
   <reference key="25"></reference>
   <unicode role="key" value="33"></unicode>
   <reference key="33"></reference>
   <unicode role="key" value="34"></unicode>
   <reference key="29"></reference>
   <unicode role="key" value="36"></unicode>
   <reference key="36"></reference>
   <unicode role="key" value="37"></unicode>
   <reference key="39"></reference>
   <unicode role="key" value="38"></unicode>
   <reference key="53"></reference>
   <unicode role="key" value="39"></unicode>
   <reference key="56"></reference>
   <unicode role="key" value="40"></unicode>
   <reference key="61"></reference>
   <unicode role="key" value="41"></unicode>
   <reference key="82"></reference>
   <unicode role="key" value="42"></unicode>
   <reference key="85"></reference>
   <unicode role="key" value="43"></unicode>
   <reference key="88"></reference>
   <unicode role="key" value="44"></unicode>
   <reference key="91"></reference>
   <unicode role="key" value="45"></unicode>
   <reference key="94"></reference>
   <unicode role="key" value="46"></unicode>
   <reference key="97"></reference>
   <unicode role="key" value="47"></unicode>
   <reference key="100"></reference>
   <unicode role="key" value="48"></unicode>
   <reference key="109"></reference>
   <unicode role="key" value="49"></unicode>
   <reference key="112"></reference>
   <unicode role="key" value="51"></unicode>
   <reference key="129"></reference>
   <unicode role="key" value="52"></unicode>
   <reference key="133"></reference>
   <unicode role="key" value="53"></unicode>
   <reference key="138"></reference>
   <unicode role="key" value="54"></unicode>
   <reference key="141"></reference>
   <unicode role="key" value="57"></unicode>
   <reference key="115"></reference>
   <unicode role="key" value="58"></unicode>
   <reference key="145"></reference>
   <unicode role="key" value="59"></unicode>
   <reference key="152"></reference>
  </dictionary>
  <string role="key" value="_objectives"></string>
  <unicode value=""></unicode>
  <string role="key" value="_preknowledge"></string>
  <unicode value=""></unicode>
  <string role="key" value="_templateFile"></string>
  <string value=""></string>
  <string role="key" value="anchor_fields"></string>
  <list>
   <reference key="60"></reference>
  </list>
  <string role="key" value="anchor_nodes"></string>
  <list>
   <reference key="61"></reference>
  </list>
  <string role="key" value="backgroundImgTile"></string>
  <bool value="0"></bool>
  <string role="key" value="currentNode"></string>
  <reference key="152"></reference>
  <string role="key" value="dublinCore"></string>
  <instance class="exe.engine.package.DublinCore">
   <dictionary>
    <string role="key" value="contributors"></string>
    <unicode value=""></unicode>
    <string role="key" value="coverage"></string>
    <unicode value=""></unicode>
    <string role="key" value="creator"></string>
    <unicode value=""></unicode>
    <string role="key" value="date"></string>
    <unicode value=""></unicode>
    <string role="key" value="description"></string>
    <unicode value="Tema 9 que abans era el tema 8"></unicode>
    <string role="key" value="format"></string>
    <unicode value=""></unicode>
    <string role="key" value="identifier"></string>
    <unicode value=""></unicode>
    <string role="key" value="language"></string>
    <unicode value="ca"></unicode>
    <string role="key" value="publisher"></string>
    <unicode value=""></unicode>
    <string role="key" value="relation"></string>
    <unicode value=""></unicode>
    <string role="key" value="rights"></string>
    <unicode value=""></unicode>
    <string role="key" value="source"></string>
    <unicode value=""></unicode>
    <string role="key" value="subject"></string>
    <unicode value=""></unicode>
    <string role="key" value="title"></string>
    <unicode value=""></unicode>
    <string role="key" value="type"></string>
    <unicode value=""></unicode>
   </dictionary>
  </instance>
  <string role="key" value="exe.engine.package.Package.persistenceVersion"></string>
  <int value="16"></int>
  <string role="key" value="exportMetadataType"></string>
  <string value="LOMES"></string>
  <string role="key" value="exportSource"></string>
  <bool value="1"></bool>
  <string role="key" value="footer"></string>
  <unicode value=""></unicode>
  <string role="key" value="isChanged"></string>
  <int value="1"></int>
  <string role="key" value="isLoading"></string>
  <bool value="0"></bool>
  <string role="key" value="license"></string>
  <unicode value="creative commons: attribution - non commercial - share alike 2.5"></unicode>
  <string role="key" value="lom"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.descriptionSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="string"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.LangStringSub">
           <dictionary>
            <string role="key" value="language"></string>
            <string value="ca"></string>
            <string role="key" value="valueOf_"></string>
            <string value="Tema 9 que abans era el tema 8"></string>
           </dictionary>
          </instance>
         </list>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg "></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <string value="0dcc429b-9a37-4272-8732-b3052f8f8ce6"></string>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Acc\xc3\xa9s a Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="175">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2015-01-14"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Data de creaci\xc3\xb3 de les metadades"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="176">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="177">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOMv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="175"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="176"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="177"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOMv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <none></none>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="yes"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="lomEs"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.descriptionSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="string"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.LangStringSub">
           <dictionary>
            <string role="key" value="language"></string>
            <string value="ca"></string>
            <string role="key" value="valueOf_"></string>
            <string value="Tema 9 que abans era el tema 8"></string>
           </dictionary>
          </instance>
         </list>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg "></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <string value="0dcc429b-9a37-4272-8732-b3052f8f8ce6"></string>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Acc\xc3\xa9s a Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="178">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2015-01-14"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Data de creaci\xc3\xb3 de les metadades"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="179">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="180">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOM-ESv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="178"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="179"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="180"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOM-ESv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <instance class="exe.engine.lom.lomsubs.accessSub">
       <dictionary>
        <string role="key" value="accessType"></string>
        <instance class="exe.engine.lom.lomsubs.accessTypeSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOM-ESv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="uniqueElementName"></string>
          <string value="accessType"></string>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.accessTypeValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="universal"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
        <string role="key" value="description"></string>
        <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list>
           <instance class="exe.engine.lom.lomsubs.LangStringSub">
            <dictionary>
             <string role="key" value="language"></string>
             <string value="ca"></string>
             <string role="key" value="valueOf_"></string>
             <unicode value="Per defecte"></unicode>
            </dictionary>
           </instance>
          </list>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="access"></string>
       </dictionary>
      </instance>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="creative commons: attribution - non commercial - share alike"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <string value="rights"></string>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="mxmlforcemediaonly"></string>
  <bool value="0"></bool>
  <string role="key" value="mxmlheight"></string>
  <string value=""></string>
  <string role="key" value="mxmlprofilelist"></string>
  <string value=""></string>
  <string role="key" value="mxmlwidth"></string>
  <string value=""></string>
  <string role="key" value="release"></string>
  <string value="2.7"></string>
  <string role="key" value="resources"></string>
  <dictionary>
   <string role="key" value="19cb96c26eeed107ab84dbc117769f11"></string>
   <list>
    <reference key="164"></reference>
   </list>
   <string role="key" value="29a9e452b1321f81e4009336b7fca40c"></string>
   <list>
    <reference key="148"></reference>
   </list>
   <string role="key" value="2b9cd7b2f7cca7ab8f3276076c3598fb"></string>
   <list>
    <reference key="58"></reference>
   </list>
   <string role="key" value="3a30065e169211dd3e6502c43e9800a8"></string>
   <list>
    <reference key="57"></reference>
   </list>
   <string role="key" value="3b220f96d39a16d8265a972a1d40eb09"></string>
   <list>
    <reference key="12"></reference>
   </list>
   <string role="key" value="41562b57c0b528bfeb51f3e69bcb06b6"></string>
   <list>
    <reference key="65"></reference>
   </list>
   <string role="key" value="41fe49191d80d01dea13230885a4c270"></string>
   <list>
    <reference key="130"></reference>
   </list>
   <string role="key" value="4d0d46474cc497880376d36aa63835b5"></string>
   <list>
    <reference key="142"></reference>
   </list>
   <string role="key" value="50a50b2be08937f6187263737a870357"></string>
   <list>
    <reference key="46"></reference>
   </list>
   <string role="key" value="57c54ecdb287bee58af697bd3bce2016"></string>
   <list>
    <reference key="5"></reference>
   </list>
   <string role="key" value="6979a1de4973b1299b475c039e0d2731"></string>
   <list>
    <reference key="119"></reference>
   </list>
   <string role="key" value="744e81cfb18b3d63159fb0cfde10cb51"></string>
   <list>
    <reference key="118"></reference>
   </list>
   <string role="key" value="804a99cea57cb4549d1536763eb8b997"></string>
   <list>
    <reference key="69"></reference>
   </list>
   <string role="key" value="86608841532a62a2aba94508f1ffc2d3"></string>
   <list>
    <reference key="153"></reference>
   </list>
   <string role="key" value="8a61eec424ee6873e3f2a120de92e54c"></string>
   <list>
    <reference key="26"></reference>
   </list>
   <string role="key" value="90752293ece0068f6cdc761b335b4e96"></string>
   <list>
    <reference key="62"></reference>
   </list>
   <string role="key" value="91c8cc88d5ec36f896e6561a68bb4db4"></string>
   <list>
    <reference key="174"></reference>
   </list>
   <string role="key" value="96a11b265a791238c3c5bc35754b848c"></string>
   <list>
    <reference key="22"></reference>
   </list>
   <string role="key" value="a2bfe22a8b8ce9d6f83cf422f672f1ee"></string>
   <list>
    <reference key="120"></reference>
   </list>
   <string role="key" value="a84004f3bb33ccbb212b053afa545d32"></string>
   <list>
    <reference key="64"></reference>
   </list>
   <string role="key" value="adf52c9c30ba2180b3f92cd428e0d394"></string>
   <list>
    <reference key="50"></reference>
   </list>
   <string role="key" value="b6fee34b439915c07e9dcca5f35df9dd"></string>
   <list>
    <reference key="149"></reference>
   </list>
   <string role="key" value="bfaf93226b90039563b068c9c016af5a"></string>
   <list>
    <reference key="30"></reference>
   </list>
   <string role="key" value="daf134eac37cad26a4c33eb04aca70e5"></string>
   <list>
    <reference key="154"></reference>
   </list>
   <string role="key" value="dbb9caa198cf6d6aa4365d70aa7c3d87"></string>
   <list>
    <reference key="66"></reference>
   </list>
   <string role="key" value="dbd042a5783a1f7e44ef93c391884593"></string>
   <list>
    <reference key="167"></reference>
   </list>
   <string role="key" value="fb072a935356a1b51a792e0d2c1639f7"></string>
   <list>
    <reference key="63"></reference>
   </list>
  </dictionary>
  <string role="key" value="root"></string>
  <reference key="4"></reference>
  <string role="key" value="scolinks"></string>
  <bool value="0"></bool>
  <string role="key" value="scowsinglepage"></string>
  <bool value="0"></bool>
  <string role="key" value="scowwebsite"></string>
  <bool value="0"></bool>
  <string role="key" value="style"></string>
  <unicode value="caminas 3.1"></unicode>
  <string role="key" value="tempFile"></string>
  <bool value="0"></bool>
 </dictionary>
</instance>