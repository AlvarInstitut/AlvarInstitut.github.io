<?xml version="1.0" encoding="utf-8"?>

<instance xmlns="http://www.exelearning.org/content/v0.3" reference="2" version="0.3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://www.exelearning.org/content/v0.3 content.xsd" class="exe.engine.package.Package">
 <dictionary>
  <string role="key" value="_title"></string>
  <unicode value="Accés a Dades"></unicode>
  <string role="key" value="idevices"></string>
  <list></list>
  <string role="key" value="_addPagination"></string>
  <bool value="0"></bool>
  <string role="key" value="_addSearchBox"></string>
  <bool value="0"></bool>
  <string role="key" value="_author"></string>
  <unicode value="Àlvar Serrano Calduch"></unicode>
  <string role="key" value="_backgroundImg"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextMode"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextPlace"></string>
  <unicode value=""></unicode>
  <string role="key" value="_description"></string>
  <unicode value="AD: Tema 3"></unicode>
  <string role="key" value="_docType"></string>
  <unicode value="XHTML"></unicode>
  <string role="key" value="_exportElp"></string>
  <bool value="0"></bool>
  <string role="key" value="_extraHeadContent"></string>
  <unicode value=""></unicode>
  <string role="key" value="_fieldValidationInfo"></string>
  <dictionary>
   <unicode role="key" value="all"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_title"></unicode>
     <unicode value="pp_lang"></unicode>
     <unicode value="pp_description"></unicode>
     <unicode value="pp_author"></unicode>
     <unicode value="pp_newlicense"></unicode>
    </list>
   </dictionary>
   <unicode role="key" value="procomun"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_learningResourceType"></unicode>
    </list>
    <unicode role="key" value="values_from_list"></unicode>
    <dictionary>
     <unicode role="key" value="pp_learningResourceType"></unicode>
     <list>
      <unicode value="master class"></unicode>
      <unicode value="closed exercise or problem"></unicode>
      <unicode value="real project"></unicode>
      <unicode value="didactic game"></unicode>
      <unicode value="webquest"></unicode>
      <unicode value="open problem"></unicode>
      <unicode value="simulation"></unicode>
      <unicode value="questionnaire"></unicode>
      <unicode value="conceptual map"></unicode>
     </list>
    </dictionary>
   </dictionary>
  </dictionary>
  <string role="key" value="_intendedEndUserRoleGroup"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleTutor"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_isChanged"></string>
  <bool value="0"></bool>
  <string role="key" value="_isTemplate"></string>
  <bool value="0"></bool>
  <string role="key" value="_lang"></string>
  <unicode value="ca"></unicode>
  <string role="key" value="_learningResourceType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_levelNames"></string>
  <list>
   <unicode value="Tema"></unicode>
   <unicode value="Secció"></unicode>
   <unicode value="Apartat"></unicode>
  </list>
  <string role="key" value="_name"></string>
  <unicode value="AD_T3_Fitxers_de_diferents_formats"></unicode>
  <string role="key" value="_nextIdeviceId"></string>
  <int value="44"></int>
  <string role="key" value="_nextNodeId"></string>
  <int value="32"></int>
  <string role="key" value="_nodeIdDict"></string>
  <dictionary>
   <unicode role="key" value="0"></unicode>
   <instance class="exe.engine.node.Node" reference="4">
    <dictionary>
     <string role="key" value="_title"></string>
     <unicode value="Tema 3: Fitxers de diferents formats"></unicode>
     <string role="key" value="idevices"></string>
     <list>
      <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="1">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Free Text"></unicode>
        <string role="key" value="_author"></string>
        <unicode value="University of Auckland"></unicode>
        <string role="key" value="_purpose"></string>
        <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
        <string role="key" value="_tip"></string>
        <string value=""></string>
        <string role="key" value="childs"></string>
        <list></list>
        <string role="key" value="content"></string>
        <instance class="exe.engine.field.TextAreaField" reference="3">
         <dictionary>
          <string role="key" value="_id"></string>
          <int value="1"></int>
          <string role="key" value="_idevice"></string>
          <reference key="1"></reference>
          <string role="key" value="_instruc"></string>
          <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
          <string role="key" value="_name"></string>
          <unicode value="Free Text"></unicode>
          <string role="key" value="anchor_names"></string>
          <list></list>
          <string role="key" value="anchors_linked_from_fields"></string>
          <dictionary></dictionary>
          <string role="key" value="buttonCaption"></string>
          <string value=""></string>
          <string role="key" value="content_w_resourcePaths"></string>
          <unicode content="true" value="&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T3_Portada.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;500&quot; /&gt;&lt;/p&gt;"></unicode>
          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
          <int value="4"></int>
          <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
          <int value="2"></int>
          <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
          <int value="3"></int>
          <string role="key" value="htmlTag"></string>
          <string value="div"></string>
          <string role="key" value="images"></string>
          <instance class="exe.engine.galleryidevice.GalleryImages">
           <dictionary>
            <string role="key" value=".listitems"></string>
            <list>
             <instance class="exe.engine.galleryidevice.GalleryImage">
              <dictionary>
               <string role="key" value="_caption"></string>
               <instance class="exe.engine.field.TextField">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <int value="2799"></int>
                 <string role="key" value="_idevice"></string>
                 <none></none>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="content"></string>
                 <string value=""></string>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                </dictionary>
               </instance>
               <string role="key" value="_id"></string>
               <unicode value="10_1.71"></unicode>
               <string role="key" value="_imageResource"></string>
               <instance class="exe.engine.resource.Resource" reference="5">
                <dictionary>
                 <string role="key" value="_idevice"></string>
                 <reference key="1"></reference>
                 <string role="key" value="_package"></string>
                 <reference key="2"></reference>
                 <string role="key" value="_storageName"></string>
                 <string value="T3_Portada.png"></string>
                 <string role="key" value="_userName"></string>
                 <string value="/tmp/tmphE1SCl/T3_Portada.png"></string>
                 <string role="key" value="checksum"></string>
                 <string value="a95f904c4e9cf49d7bb410f99489eda5"></string>
                 <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="warningMsg"></string>
                 <string value=""></string>
                </dictionary>
               </instance>
               <string role="key" value="_parent"></string>
               <reference key="3"></reference>
               <string role="key" value="_thumbnailResource"></string>
               <none></none>
               <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
               <int value="3"></int>
               <string role="key" value="makeThumbnail"></string>
               <bool value="0"></bool>
              </dictionary>
             </instance>
            </list>
            <string role="key" value="idevice"></string>
            <reference key="3"></reference>
           </dictionary>
          </instance>
          <string role="key" value="intlinks_to_anchors"></string>
          <dictionary></dictionary>
          <string role="key" value="nextImageId"></string>
          <int value="72"></int>
          <string role="key" value="parentNode"></string>
          <reference key="4"></reference>
         </dictionary>
        </instance>
        <string role="key" value="edit"></string>
        <bool value="0"></bool>
        <string role="key" value="emphasis"></string>
        <int value="0"></int>
        <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
        <int value="7"></int>
        <string role="key" value="icon"></string>
        <string value=""></string>
        <string role="key" value="id"></string>
        <unicode value="10"></unicode>
        <string role="key" value="lastIdevice"></string>
        <bool value="0"></bool>
        <string role="key" value="parent"></string>
        <none></none>
        <string role="key" value="parentNode"></string>
        <reference key="4"></reference>
        <string role="key" value="systemResources"></string>
        <list></list>
        <string role="key" value="type"></string>
        <none></none>
        <string role="key" value="undo"></string>
        <bool value="1"></bool>
        <string role="key" value="userResources"></string>
        <list>
         <reference key="5"></reference>
        </list>
        <string role="key" value="version"></string>
        <int value="0"></int>
       </dictionary>
      </instance>
     </list>
     <string role="key" value="_id"></string>
     <unicode value="0"></unicode>
     <string role="key" value="_package"></string>
     <reference key="2"></reference>
     <string role="key" value="anchor_fields"></string>
     <list></list>
     <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
     <int value="2"></int>
     <string role="key" value="exportType"></string>
     <string value="website"></string>
     <string role="key" value="last_full_node_path"></string>
     <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats"></string>
     <string role="key" value="parent"></string>
     <none></none>
     <string role="key" value="top_anchors_linked_from_fields"></string>
     <list></list>
     <string role="key" value="children"></string>
     <list>
      <instance class="exe.engine.node.Node" reference="8">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Objectius"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="6">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Objectius"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="Objectives describe the expected outcomes of the learning and should
define what the learners will be able to do when they have completed the
learning tasks."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="objectives"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="7">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="90_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="6"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Type the learning objectives for this resource."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Objectives"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Aquest tema servirà per a finalitzar el contacte amb els fitxers. Una vegada hem vist com accedir als fitxers i al seu contingut, ara és el moment de plantejar-nos com guardar dades de diferents tipus, com guardar objectes, ... , farem menció especial als fitxers XML i al format JSON&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Per una banda es gestionen fitxers amb dades de diferents tipus, ben al contrari que en els fitxers de text, o els exemples d'agafar un fitxer i tractar tots els bytes de la mateixa manera.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Per una altra els fitxers d'accés directe (també anomenats d'accés relatiu o aleatori).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;També s'introdueix el tema de la seriació d'objectes, és a dir, intentar guardar objectes directament en fitxers. Una tècnica senzilla però que té inconvenients.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Després es tracten els documents XML, no com un fitxer de text (que ho és), sinó amb un tractament específic per poder accedir a la informació jerarquitzada d'un document XML.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;I finalment farem el mateix amb el format JSON&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="7"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="8"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="objectives"></unicode>
           <string role="key" value="id"></string>
           <unicode value="11"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="parentNode"></string>
           <reference key="8"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="5"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:Objectius"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="11">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="1.- Fitxers binaris amb formats específics"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="9">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="10">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="9"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;DataInputStream i DataOutputStream&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ja hem vist com utilitzar els fitxers de caràcters i també de bytes. Però en aquest últim cas sempre ha estat per a llegir o escriure byte a byte, fins al final de fitxer.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ens plantegem ara com utilitzar els fitxer per a guardar dades estructurades de tipus bàsics &lt;strong&gt;diferents&lt;/strong&gt;. De moment no seran complicades però enseguida veurem que ens fa falta alguna cosa per a poder treballar còmodament.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Suposem un exemple d'una empresa que vol guardar dades dels seus empleats. Concretament vol guardar el número d'empleat, el nom, el departament al qual pertany, l'edat i el sou.&lt;/p&gt;
&lt;table border=&quot;1&quot; align=&quot;center&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Número &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Nom &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Depart&lt;br /&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Edat&lt;br /&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Sou&lt;br /&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;1&lt;/td&gt;
&lt;td&gt;Andreu&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;10&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;32&lt;/td&gt;
&lt;td&gt;1000.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;2&lt;/td&gt;
&lt;td&gt;Bernat&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;20&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;28&lt;/td&gt;
&lt;td&gt;1200.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;3&lt;/td&gt;
&lt;td&gt;Claudia&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;10&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;26&lt;/td&gt;
&lt;td&gt;1100.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;4&lt;/td&gt;
&lt;td&gt;Damià&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;10&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;40&lt;/td&gt;
&lt;td&gt;1500.00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ja es veu que les dades són de difrents tipus. Si tot fóra de text no hi hauria problema. Però si considerem les dades com a numèriques enteres o reals no ens serveixen els Stream de caràcters (Reader i Writer). Per tant hem d'anar a InputStream i OutputStream, però seria molt dur treballar directament amb bytes. Hauríem de saber exactament quants bytes ocupa cada dada: &lt;strong&gt;int&lt;/strong&gt; utilitza 4 bytes; &lt;strong&gt;short&lt;/strong&gt; utilitza 2 bytes, &lt;strong&gt;byte&lt;/strong&gt; utilitza 1 byte, i &lt;strong&gt;long&lt;/strong&gt; utilitza 8 bytes; en el cas dels reals, &lt;strong&gt;float&lt;/strong&gt; utilitza 4 bytes i &lt;strong&gt;double&lt;/strong&gt; utilitza 8 bytes. Massa varietat i massa fiena recordar-los tots. Ens falta doncs una ajuda per a poder guardar i recuperar dades d'aquestos diferents tipus.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Aquesta funcionalitat ens la proporciona la parella &lt;strong&gt;DataInputStream&lt;/strong&gt; i &lt;strong&gt;DataOutputStream&lt;/strong&gt;, que són decoradors dels Stream i que disposen de mètodes per a guardar o recuperar dades de diferents tipus, sense haver de saber el format intern de cadascun ni quants bytes ocupen. En la següent taula tenim uns quants mètodes d'aquestos:&lt;/p&gt;
&lt;table border=&quot;1&quot; align=&quot;center&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DataInputStream&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Explicació&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;DataOutputStream&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;byte &lt;strong&gt;readByte&lt;/strong&gt;()&lt;/td&gt;
&lt;td&gt;Un byte&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;writeByte&lt;/strong&gt;(int)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;short &lt;strong&gt;readShort&lt;/strong&gt;()&lt;/td&gt;
&lt;td&gt;Un enter xicotet (2 bytes)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;writeShort&lt;/strong&gt;(short)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;int &lt;strong&gt;readInt&lt;/strong&gt;()&lt;/td&gt;
&lt;td&gt;Un enter (4 bytes)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;writeInt&lt;/strong&gt;(int)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;long &lt;strong&gt;readLong&lt;/strong&gt;()&lt;/td&gt;
&lt;td&gt;Un enter llarg (8 bytes)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;writeLong&lt;/strong&gt;(long)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;float &lt;strong&gt;readFloat&lt;/strong&gt;()&lt;/td&gt;
&lt;td&gt;Un real en simple precisió&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;writeFloat&lt;/strong&gt;(flaot)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;double &lt;strong&gt;readDouble&lt;/strong&gt;()&lt;/td&gt;
&lt;td&gt;Un real en doble precisió&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;writeDouble&lt;/strong&gt;(double)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;char &lt;strong&gt;readChar&lt;/strong&gt;()&lt;/td&gt;
&lt;td&gt;Un caràcter Unicode (16 bits)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;writeChar&lt;/strong&gt;(int)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;String &lt;strong&gt;readUTF&lt;/strong&gt;()&lt;/td&gt;
&lt;td&gt;Una cadena de caràcters UTF-8 i la converteix en String (16 bits)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;writeUTF&lt;/strong&gt;(String)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Anem a veure l'exemple, en el qual guardarem en un fitxer anomenat &lt;strong&gt;Empleats.dat&lt;/strong&gt; les dades dels 4 empleats. Per comoditat ens els definirem  en arrays de 4 elements: un array per als noms, un altre per als departaments, etc. Enganxeu el següent codi en un fitxer de Kotlin anomenat &lt;strong&gt;Exemple_3_1_1_CrearEmpleats.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import java.io.DataOutputStream
import java.io.FileOutputStream

fun main(args: Array&amp;lt;String&amp;gt;) {
    val f = DataOutputStream(FileOutputStream(&quot;Empleats.dat&quot;))

    val noms = arrayOf(&quot;Andreu&quot;, &quot;Bernat&quot;, &quot;Clàudia&quot;, &quot;Damià&quot;)
    val departaments = arrayOf( 10, 20, 10, 10 )
    val edats = arrayOf( 32, 28, 26, 40 )
    val sous = arrayOf( 1000.0, 1200.0, 1100.0, 1500.0 )

    for (i in 0..3){
        f.writeInt(i + 1)
        f.writeUTF(noms[i])
        f.writeInt(departaments[i])
        f.writeInt(edats[i])
        f.writeDouble(sous[i])
    }
    f.close()
    println(&quot;Fitxer creat&quot;)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I aquesta seria la recuperació de les dades. Enganxeu el següent codi en un fitxer de Kotlin anomenat &lt;strong&gt;Exemple_3_1_2_ConsultarEmpleats.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import java.io.FileInputStream
import java.io.DataInputStream

fun main(args: Array&amp;lt;String&amp;gt;) {
    val f = DataInputStream(FileInputStream(&quot;Empleats.dat&quot;))

    while (f.available() &amp;gt; 0) {
        System.out.println(&quot;Número: &quot; + f.readInt())
        System.out.println(&quot;Nom: &quot; + f.readUTF())
        System.out.println(&quot;Depart: &quot; + f.readInt())
        System.out.println(&quot;Edat: &quot; + f.readInt())
        System.out.println(&quot;Sou: &quot; + f.readDouble())
        System.out.println()
    }
    f.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt; &lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="10"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="11"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="1"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="11"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="1"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:1.-%20Fitxers%20binaris%20amb%20formats%20espec%C3%ADfics"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="14">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="2.- Accés directe a fitxers"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="12">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="13">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="12"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt; &lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Els exemples de l'apartat anterior ens poden fer reflexionar sobre un altre tipus d'accés als fitxers. De moment tots els accessos que hem fet als fitxers, tant binaris com de caràcter, ha estat &lt;strong&gt;seqüencials&lt;/strong&gt;. Això vol dir que sempre comencem pel principi del fitxer fins que arribem a la informació que volem, o en la major part dels casos fins el final de fitxer.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Però, i si volem únicament una determinada informació? En l'exemple de l'apartat anterior, què hauríem de fer si volguérem només la informació de l'empleada 3 (Clàudia)? Doncs hauríem de passar primer per tots els anteriors. Com només hi ha 2 davant, no sembla molta feina, però és fàcil de veure la dificultat (o millor dit el cost) si el fitxer constara de centenars o milers d'empleats. Suposem un fitxer de 10.000 empleats. Si volem accedir a l'empleat 9.500 hauríem de passar pels 9.499 empleats anteriors, ja que l'accés seqüencial obliga a començar pel principi i anar passant fins que trobem la informació. I encara pitjor: i si després de consultar l'empleat 9.500 ara volem consultar el 9.000? Doncs hauríem de començar des del principi, perquè ja ens l'havíem passat.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Afortunadament i ha una altra manera d'accedir, un altre tipus d'accés. S'anomena &lt;strong&gt;accés directe&lt;/strong&gt; perquè permetrà anar directament a una posició determinada del fitxer. Moltes vegades també es diu &lt;strong&gt;accés relatiu&lt;/strong&gt; o &lt;strong&gt;accés aleatori&lt;/strong&gt;, però el funcionament sempre és el mateix. I mireu que estem parlant d'accés. Per tant el que canviarà no és la classe &lt;strong&gt;File&lt;/strong&gt; sinó qui permet accedir al contingut, és a dir les classes de &lt;strong&gt;flux d'informació&lt;/strong&gt; (els Streams).&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Les classes &lt;strong&gt;InputStream-OutputStream&lt;/strong&gt; i &lt;strong&gt;Reader-Writer&lt;/strong&gt; només permeten l'accés seqüencial. Per tant per a l'accés directe disposarem d'una altra classe que ens permetrà fer totes les operacions, tant de lectura com d'escriptura. Té l'avantatge que disposa de molts mètodes per a poder accedir a la informació. No ens fara falta, per tant, les classes &quot;decoradores&quot; que afegeixen funcionalitats. Amb aquesta classe tindrem suficient.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;RandomAccessFile&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;La classe &lt;strong&gt;RandomAccessFile&lt;/strong&gt; ens permetrà accedir de forma directa a un fitxer. No ens farà falta, en principi, cap altra classe més. Ens proporcionarà tota la funcionalitat necessària.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En els constructors aniran 2 paràmetres. El primer farà referència al fitxer. El segon al mode d'accés: només lectura (&lt;strong&gt;r&lt;/strong&gt;) o lectura-escriptura (&lt;strong&gt;rw&lt;/strong&gt;).&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;RandomAccessFile(fitxer: File, mode: String)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;RandomAccessFile(fitxer: String, mode: String)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En el primer cas li especifiquem un &lt;strong&gt;File &lt;/strong&gt;en el primer paràmetre. En el segon un &lt;strong&gt;String &lt;/strong&gt;que correspondrà amb el nom del fitxer&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En ambdós casos, el segon paràmetre indicarà el mode:&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;&lt;strong&gt;&quot;r&quot;&lt;/strong&gt; indica només lectura&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&quot;rw&quot;&lt;/strong&gt; indica lectura escriptura&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt; &lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;A pesar de ser una classe completament diferent de la jerarquia de &lt;strong&gt;InputStream-OutpuStream&lt;/strong&gt; (o &lt;strong&gt;Readre-Writer&lt;/strong&gt;) implementa mètodes que es diuen exactament igual que els d'aquelles classes, cosa que fa molt més còmoda la utilització. Els mètodes més importants són:&lt;/p&gt;
&lt;table border=&quot;1&quot; align=&quot;center&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Mètode&lt;/td&gt;
&lt;td&gt;Explicació&lt;/td&gt;
&lt;td&gt;Mètode&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;int &lt;strong&gt;read()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;llig (escriu) un byte (encara així torna o se li passa un enter)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;write(int)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;int &lt;strong&gt;read(byte[])&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;llig (escriu) un sèrie de bytes, tants com la grandària de l'array (si pot)&lt;/td&gt;
&lt;td&gt;int &lt;strong&gt;write(byte[])&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;byte &lt;strong&gt;readByte()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;llig (escriu) un byte interpretat com número de 8 bits amb signe&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;writeByte(int)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;char &lt;strong&gt;readChar()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;llig (escriu) un caràcter&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;write(char)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;int &lt;strong&gt;readInt()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;llig (escriu) un enter (4 bytes)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;write(int)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;short &lt;strong&gt;readShort()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;llig (escriu) un enter xicotet (2 bytes)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;write(short)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;long &lt;strong&gt;readLong()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;llig (escriu) un enter llarg (8 bytes)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;write(long)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;float &lt;strong&gt;readFloat()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;llig (escriu) un número real en simple precisió (4 bytes)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;write(float)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;double &lt;strong&gt;readDouble()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;llig (escriu) un número real en doble precisió (8 bytes)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;write(double)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;String &lt;strong&gt;readUTF()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;llig (escriu) un cadena de caràcters (interpretat com UTF-8)&lt;/td&gt;
&lt;td&gt;void &lt;strong&gt;writeUTF()&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;/td&gt;
&lt;td&gt; &lt;/td&gt;
&lt;td&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;void &lt;strong&gt;seek(long)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;situa el punter en la posició, mesurat des del principi del fitxer&lt;/td&gt;
&lt;td&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;long &lt;strong&gt;length()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna la grandària del fitxer&lt;/td&gt;
&lt;td&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;void &lt;strong&gt;close()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Tanca el flux de l'accés directe&lt;/td&gt;
&lt;td&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En cada lectura, després de llegir el punter que apunta al fitxer estarà situat després de la dada llegida, siga quina siga la grandària.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Anem a veure un exemple utilitzant el fitxer &lt;strong&gt;Empleats.dat&lt;/strong&gt; creat en l'apartat anterior. Obrim l'accés directe únicament en mode lectura, i ens situem directament a la posició 56, que és on comença la informació de l'empleada 3 (Clàudia). Posteriorment utilitzem el mètode de lectura apropiat per a cada tipus de dada. Copieu el codi següent en un fitxer de kotlin anomenat &lt;strong&gt;Exemple_3_2_1_EmpleatsDirecte.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import java.io.RandomAccessFile

fun main(args: Array&amp;lt;String&amp;gt;) {
    val f = RandomAccessFile(&quot;Empleats.dat&quot;, &quot;r&quot;)
    f.seek(56)
    println(&quot;Núm.: &quot; + f.readInt())
    println(&quot;Nom: &quot; + f.readUTF())
    println(&quot;Depart: &quot; + f.readInt())
    println(&quot;Edat: &quot; + f.readInt())
    println(&quot;Sou: &quot; + f.readDouble())
    f.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ràpidament observem una cosa: com sabíem que ens havíem de situar en la posició 56? I si els noms del dos primers hagueren sigut més llargs o més curts?&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per a poder solucionar els problemes anteriors, podríem fer que els noms siguen de llargària fixa. Les altres dades no donen problemes. Intentarem ara donar sempre una grandària de 10 caràcters a cada nom (si sospitàrem que no en tenim prou, hauríem de fer-los més grans). Anem a crear el fitxer &lt;strong&gt;Empleats2.dat&lt;/strong&gt;, i serà exactament igual al de l'anterior apartat, excepte que en el moment de posar els noms (en un array de strings) posem exactament 10 caràcters, omplint amb blancs si és necessari. Evidentment, aquesta no és l'única manera, però per a les poques dades que tenim, sí la més ràpida.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val noms = arrayOf(&quot;Andreu    &quot;,&quot;Bernat    &quot;,&quot;Clàudia   &quot;,&quot;Damià     &quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;La sentència anterior és l'única diferència respecte al programa de creació d'Empleats.dat de la pregunta anterior, a banda del nom del fitxer, que ara serà &lt;strong&gt;Empleat2.dat&lt;/strong&gt;:. Copieu el següent codi en el fitxer Kotlin: &lt;strong&gt;Exemple_3_2_2_Crear_Empleats2.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import java.io.DataOutputStream
import java.io.FileOutputStream

fun main(args: Array&amp;lt;String&amp;gt;) {
    val f = DataOutputStream(FileOutputStream(&quot;Empleats2.dat&quot;))

    val noms = arrayOf(&quot;Andreu    &quot;,&quot;Bernat    &quot;,&quot;Clàudia   &quot;,&quot;Damià     &quot;)
    val departaments = arrayOf( 10, 20, 10, 10 )
    val edats = arrayOf( 32, 28, 26, 40 )
    val sous = arrayOf( 1000.0, 1200.0, 1100.0, 1500.0 )

    for (i in 0..3){
        f.writeInt(i + 1)
        f.writeUTF(noms[i])
        f.writeInt(departaments[i])
        f.writeInt(edats[i])
        f.writeDouble(sous[i])
    }
    f.close()
    println(&quot;Fitxer creat&quot;)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ara que sabem la grandària exacta del nom, podem saber que la informació de cada empleat és:&lt;/p&gt;
&lt;table border=&quot;0&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Número d'empleat (enter)&lt;/td&gt;
&lt;td&gt;4 bytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Nom (10 caràcters + 2 bytes)  &lt;/td&gt;
&lt;td&gt;10 + 2 bytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Departament (enter)&lt;/td&gt;
&lt;td&gt;4 bytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Edat (enter)&lt;/td&gt;
&lt;td&gt;4 bytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Sou (doble precisió)&lt;/td&gt;
&lt;td&gt;8 bytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;Total:&lt;br /&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;32 bytes&lt;br /&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Sabent que cada registre (la informació de cada empleat) ocupa 32 bytes, sembla fàcil anar a un determinat empleat. Per a poder provar-lo bé, introduirem el número d'empleat per teclat, fins introduir 0. Observeu que si s'introdueix 1, hem d'anar a pel primer registre, que està a principi de fitxer. Si introduïm 2, anem a pel segon, que només en té un davant, per tant 32 bytes. Copieu el següent codi en un fitxer Kotlin anomenat &lt;strong&gt;Exemple_3_2_3_Empleats2Directe.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import java.io.RandomAccessFile
import java.util.Scanner

fun main(args: Array&amp;lt;String&amp;gt;) {
    val f = RandomAccessFile(&quot;Empleats2.dat&quot;, &quot;rw&quot;)
    val sc = Scanner(System.`in`)
    println(&quot;Quin registre? (-1 per a eixir): &quot;)
    var num = sc.nextInt ()
    while (num != -1) {
        f.seek(32 * (num - 1).toLong())
        println(&quot;Núm.: &quot; + f.readInt())
        println(&quot;Nom: &quot; + f.readUTF())
        println(&quot;Depart: &quot; + f.readInt())
        println(&quot;Edat: &quot; + f.readInt())
        println(&quot;Sou: &quot; + f.readDouble())
        println()
        println(&quot;Quin registre? (-1 per a eixir): &quot;)
        num = sc.nextInt()

    }
    f.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El problema ara també sembla obvi. Hem assumit que cada caràcter ocupa un byte. Com es codificarà en UTF-8, mentre siguen caràcters normals així serà. Però què passarà quan hi haja un caràcter accentuat? Que ocuparà 2 caràcters. Així, com Clàudia té un d'aquestos caràcters, la cadena no ocuparà 10+2 = 12 bytes, sinó 13. Aleshores, si intentem anar al quart empleat, ens donarà problemes.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;La manera de solucionar-lo serà escriure de manera que tots els caràcters ocupen sempre el mateix. Hi ha un mètode que ens ho permet: &lt;strong&gt;writeChars&lt;/strong&gt;. Guardarà cada caràcter amb dos bytes, i no es guardarà la llargària de la cadena. Podem intentar utilitzar-lo per construir el fitxer &lt;strong&gt;Empleats3.dat&lt;/strong&gt;. Només haurem de substituir la següent sentència:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;f.writeChars(noms[i])&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;a banda del nom del fitxer, clar. Copieu el següent codi en un fitxer Kotlin anomenat &lt;strong&gt;Exemple_3_2_4_CrearEmpleat3.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import java.io.DataOutputStream
import java.io.FileOutputStream

fun main(args: Array&amp;lt;String&amp;gt;) {
    val f = DataOutputStream(FileOutputStream(&quot;Empleats3.dat&quot;))

    val noms = arrayOf(&quot;Andreu    &quot;,&quot;Bernat    &quot;,&quot;Clàudia   &quot;,&quot;Damià     &quot;)
    val departaments = arrayOf( 10, 20, 10, 10 )
    val edats = arrayOf( 32, 28, 26, 40 )
    val sous = arrayOf( 1000.0, 1200.0, 1100.0, 1500.0 )

    for (i in 0..3){
        f.writeInt(i + 1)
        f.writeChars(noms[i])
        f.writeInt(departaments[i])
        f.writeInt(edats[i])
        f.writeDouble(sous[i])
    }
    f.close()
    println(&quot;Fitxer creat&quot;)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Lamentablement la lectura no és tan fàcil. Haurem de llegir exactament 10 caràcters (podríem utilitzar algun altre mètode, però el que es mostra permet identificar clarament que es llegiran 10 caràcters). Els anirem acumulant en un String poder mostrar-lo. Recordeu també que ara el nom ocupa 20 bytes, que sumats als altres 20 de les altres dades fan un total de 40 bytes per registre. Copieu el següent codi en el fitxer Kotlin &lt;strong&gt;Exemple_3_2_5_Empleats3Directe.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import java.io.RandomAccessFile
import java.util.Scanner

fun main(args: Array&amp;lt;String&amp;gt;) {
    val f = RandomAccessFile(&quot;Empleats3.dat&quot;, &quot;rw&quot;)
    val sc = Scanner(System.`in`)
    println(&quot;Quin registre? (-1 per a eixir): &quot;)
    var num = sc.nextInt()
    while (num != -1) {
        f.seek(40 * (num - 1).toLong())
        println(&quot;Núm.: &quot; + f.readInt())
        var nom = &quot;&quot;
        for (i in 1..10)
            nom += f.readChar()
        println(&quot;Nom: &quot; + nom)
        println(&quot;Depart: &quot; + f.readInt())
        println(&quot;Edat: &quot; + f.readInt())
        println(&quot;Sou: &quot; + f.readDouble())
        println()
        println(&quot;Quin registre? (-1 per a eixir): &quot;)
        num = sc.nextInt()

    }
    f.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="13"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="14"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="3"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="14"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="2"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:2.-%20Acc%C3%A9s%20directe%20a%20fitxers"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="17">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="3.- Seriació d'objectes"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="15">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="16">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="15"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Seriació d'objectes&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;La tècnica de la &lt;strong&gt;seriació &lt;/strong&gt;és segurament la més senzilla de totes, però també a la vegada la més problemàtica. Java, i per tant també Kotlin, disposa d’un sistema genèric de seriació de qualsevol objecte, un sistema &lt;strong&gt;recursiu&lt;/strong&gt; que es repeteix per cada objecte contingut a la instància que s’està seriant. Aquest procés para en arribar als tipus primitius, els quals es guarden com una sèrie de bytes. A banda dels tipus primitius, Java serialitza també molta informació addicional o metadades específiques de cada classe (el nom de les classe, els noms dels atributs i molta més informació addicional). Gràcies a les metadades es fa possible automatitzar la seriació de forma genèrica &lt;strong&gt;amb garanties de recuperar un objecte tal com es va guardar&lt;/strong&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Lamentablement, &lt;strong&gt;aquest és un procediment específic de Java&lt;/strong&gt;. És a dir, no és possible recuperar els objectes seriats des de Java utilitzant un altre llenguatge. D’altra banda, el fet de guardar metadades pot arribar a comportar també problemes, encara que utilitzem sempre el llenguatge Java. La modificació d’una classe pot fer variar les seues metadades. Aquestes variacions poden donar problemes de recuperació d’instàncies que hagen estat guardades amb algunes versions anteriors a la modificació, impedint que l’objecte puga ser recuperat.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Aquestes consideracions fa que no siga pràctica aquesta tècnica per guardar objectes de forma més o menys permanent. En canvi, la seua senzillesa la fa una perfecta candidata per a l’emmagatzematge temporal, per exemple dins de la mateixa sessió.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per a que un objecte puga ser seriat cal que la seua classe i tot el seu contingut implementen la interfície &lt;strong&gt;Serializable&lt;/strong&gt;. Es tracta d’una interfície sense mètodes, perquè l’únic objectiu de la interfície és actuar de marcador per indicar a la màquina virtual quines classes es poden seriar i quines no.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Totes les classes equivalents als tipus bàsics ja implementen Serializable. També implementen aquesta interfície la classe String i tots els contenidors i els objectes Array. La seriació de col·leccions depèn en últim terme dels elements continguts. Si aquestos són seriables, la col·lecció també ho serà.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En cas que la classe de l’objecte que s’intente seriar, o les d’algun dels objectes que continga, no implementaren la interfície Serializable, es llançaria una excepció de tipus &lt;strong&gt;NotSerializableException&lt;/strong&gt;, impedint l’emmagatzematge.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Els Streams &lt;strong&gt;ObjectInputStream &lt;/strong&gt;i &lt;strong&gt;ObjectOutputStream &lt;/strong&gt;són decoradors que afegeixen a qualsevol altre Stream la capacitat de seriar qualsevol objecte Serializable. El stream d'eixida disposarà del mètode &lt;strong&gt;writeObject&lt;/strong&gt;. i el stream d’entrada, el mètode de lectura &lt;strong&gt;readObject&lt;/strong&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El mètode readObject només permet recuperar instàncies que siguen de la mateixa classe que la que es va guardar. En cas contrari, es llançaria una excepció de tipus &lt;strong&gt;ClassCastExeception&lt;/strong&gt;. A més, cal que l’aplicació dispose del codi compilat de la classe; si no fóra així, l’excepció llançada seria &lt;strong&gt;ClassNotFoundException&lt;/strong&gt;.&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="16"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="17"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="4"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="17"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="18">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="19">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="18"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Exemple&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ens recolzarem en un exemple utilitzat en els anteriors punts, en els empleats. Ara anem a suposar que els empleats són objectes, i intentarem guardar aquestos objectes en un fitxer amb una seriació.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El primer pas serà construir la classe &lt;strong&gt;Empleat&lt;/strong&gt;, que contindrà la mateixa informació que en els altres apartats: número d'empleat, nom, departament, edat i sou.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import java.io.Serializable

class Empleat (var num: Int, var nom: String, var departament: Int, var edat: Int, var sou: Double): Serializable&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Anem a intentar construir el fitxer de dades amb els objectes guardats. El flux de dades serà un &lt;strong&gt;ObjectOutputStream&lt;/strong&gt; per a poder escriure (&lt;strong&gt;writeObject&lt;/strong&gt;). I observeu com s'ha de recolzar en un OutputStream, que en aquest cas serà d'un fitxer, és a dir un &lt;strong&gt;FileOutputStream&lt;/strong&gt;. A cada iteració del bucle senzillament construirem un objecte de la classe &lt;strong&gt;Empleat&lt;/strong&gt; i l'escriurem al fitxer. Copieu el següent codi en un fitxer Kotlin anomenat &lt;strong&gt;Exemple_3_3_1_GuardarObjectes.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import java.io.ObjectOutputStream
import java.io.FileOutputStream

fun main(args: Array&amp;lt;String&amp;gt;) {
	val f = ObjectOutputStream(FileOutputStream(&quot;Empleats.obj&quot;))

	val noms = arrayOf(&quot;Andreu&quot;, &quot;Bernat&quot;, &quot;Clàudia&quot;, &quot;Damià&quot;)
	val departaments = arrayOf(10, 20, 10, 10)
	val edats = arrayOf(32, 28, 26, 40)
	val sous = arrayOf(1000.0, 1200.0, 1100.0, 1500.0)

	for (i in 0..3){
		val e = Empleat (i + 1, noms[i], departaments[i], edats[i], sous[i])
		f.writeObject(e)
	}

	f.close();
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;/div&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;El fitxer creat, &lt;strong&gt;Empleats.obj&lt;/strong&gt;, evidentment no és de text. Tanmateix si l'obrim amb un editor de text podrem veure alguna cosa.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T3_3_1.png&quot; alt=&quot;&quot; width=&quot;966&quot; height=&quot;202&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;La primera qüestió és que es guarda el nom de la classe amb el nom del paquet davant. &lt;strong&gt;exemples.Empleat&lt;/strong&gt; és realment el nom de la classe creada.&lt;/li&gt;
&lt;li&gt;Es guarden també els noms dels camps. Tot això són les metadades que havíem comentat, i que permeten la recuperació posterior dels objectes guardats&lt;/li&gt;
&lt;li&gt;I després ja podem veure la informació guardada, on identifiquem els noms dels empleats&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per a llegir el fitxer creat, &lt;strong&gt;Empleats.obj&lt;/strong&gt;, utilitzarem el &lt;strong&gt;ObjectInputStream&lt;/strong&gt; per a poder fer &lt;strong&gt;readObject&lt;/strong&gt;. S'ha de basar en un InputStream, que en aquest cas serà un &lt;strong&gt;FileInputStream&lt;/strong&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Lamentablement el mètode &lt;strong&gt;available() &lt;/strong&gt;no funcionarà correctament, i no ens dirà realment els bytes que queden per llegir.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El tractament de final de fitxer el farem capturant l'excepció (l'error) d'haver arribat al final i intentat llegir encara: &lt;strong&gt; EOFException&lt;/strong&gt;. La raó és que &lt;strong&gt;readObject &lt;/strong&gt;no torna null, a no ser que s'haja introduït aquest valor. Per tant muntem un bucle infinit, però capturant amb &lt;strong&gt;try ... catch&lt;/strong&gt; l'error, que és quan tancarem el Stream. Copieu el següent codi a un fitxer Kotlin anomenat &lt;strong&gt;Exemple_3_3_2_LlegirObjectes.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import java.io.ObjectInputStream
import java.io.FileInputStream
import java.io.EOFException

fun main(args: Array&amp;lt;String&amp;gt;) {
    val f = ObjectInputStream(FileInputStream(&quot;Empleats.obj&quot;))

    try {
        while (true) {
            val e = f.readObject() as Empleat
            println(&quot;Número: &quot; + e.num)
            println(&quot;Nom: &quot; + e.nom)
            println(&quot;Departament: &quot; + e.departament)
            println(&quot;Edat: &quot; + e.edat)
            println(&quot;Sou: &quot; + e.sou)
            println();
        }
    } catch (eof: EOFException) {
        f.close()
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;En realitat, en el fitxer es guarda, a més del nom del paquet i el nom de la classe, l'identificador de la classe: el &lt;strong&gt;serialVersionUID&lt;/strong&gt;, per a poder identificar unívocament la classe. Això ens pot donar problemes si intentem compartir la informació entre nosaltres, ja que perfectament ens pot generar UID diferents. Per a evitar-lo podríem definir nosaltres aquest &lt;strong&gt;serialVersionUID&lt;/strong&gt;, i aleshores no hi haurà problemes per a compartir. Fins i tot serviria per a poder compartir el fitxer d'objectes entre &lt;strong&gt;Kotlin&lt;/strong&gt; i &lt;strong&gt;Java&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import java.io.Serializable

class Empleat (var num: Int,var nom: String,var departament: Int,var edat: Int,var sou: Double): Serializable {
    companion object {
        private const val serialVersionUID: Long = 1
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Si fem aquest canvi en la classe Empleat haurem de tornar a generar el fitxer (&lt;strong&gt;Exemple_3_3_1_GuardarObjectes.kt&lt;/strong&gt;) abans de poder consultar-lo (&lt;strong&gt;Exemple_3_3_2_LlegirObjectes.kt&lt;/strong&gt;), perquè a tots els efectes seria una classe nova.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="2807"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="5_1.50"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="20">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="18"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T3_3_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmphE1SCl/T3_3_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="ca2633ef7ca7f630211dc3f83818d26f"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="19"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="19"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="51"></int>
             <string role="key" value="parentNode"></string>
             <reference key="17"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="5"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parentNode"></string>
           <reference key="17"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="20"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="3"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:3.-%20Seriaci%C3%B3%20d%27objectes"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="23">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="4.- Documents XML"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="21">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="22">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="21"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;Hem vist que la manera més còmoda de guardar objectes és amb la seriació, per mig del &lt;strong&gt;ObjectInputStream &lt;/strong&gt;i &lt;strong&gt;ObjectOutputStream&lt;/strong&gt;, però que &lt;strong&gt;fora&lt;/strong&gt; de Java o de Kotlin &lt;strong&gt;no és possible&lt;/strong&gt; l'accés a aquestes dades. I com havíem comentat en l'última nota de la pregunta anterior, també dins de Kotlin podem tenir problemes, perquè el nom de la classe amb el nom del paquet es guarda en el fitxer com a metades, i en un altre programa haurem de tenir la classe creada en un paquet amb el mateix nom, sinó no es podran recuperar les dades. I fins i tot dient-se exactament igual, poden haver problemes si el &lt;strong&gt;serialVersionUID&lt;/strong&gt; de la classe no és el mateix.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;També hem vist que per a guardar dades individuals de diferents tipus ens van molt bé les classes &lt;strong&gt;DataInputStream&lt;/strong&gt; i &lt;strong&gt;DataOutputStream&lt;/strong&gt;, però haurem de saber molt bé l'ordre i tipus de dades que estan guardades, sinó, no les podrem recuperar.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I no entrem ja en la possibilitat que diferents Sistemes Operatius representen la informació de forma diferent (per exemple, hi ha Sistemes Operatius que representen els números amb BCD i altres que utilitzen complement a 2).&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per tant, quan vulguem guardar dades que puguen ser llegides per aplicacions fetes en diferents llenguatges i/o executades en diferents plataformes, ens farà falta un format estàndar que tots el puguen entendre i reconéixer, i millor si és autoexplicatiu com és el cas dels&lt;strong&gt; llenguatges de marques&lt;/strong&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El llenguatge de marques més conegut i més utilitzat és el &lt;strong&gt;XML&lt;/strong&gt; (&lt;em&gt;&lt;strong&gt;eXtensible Markup Language&lt;/strong&gt;&lt;/em&gt;)&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Els documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; aconsegueixen estructurar la informació intercalant unes marques anomenades etiquetes, cada etiqueta amb un principi i un final, i que poden anar unes dins d'unes altres, i també contenir informació de text. D’aquesta manera, es podrà subdividir la informació estructurant-la de forma que puga ser fàcilment interpretada.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Tota la informació serà de text, i per tant no hi haurà el problema mencionat abans de representar les dades de diferent manera. Qualsevol dada, ja siga numèrica, booleana o com siga, es posarà en mode text, i per tant sempre es podrà llegir i interpretar correctament tota la informació continguda en un fitxer &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;És cert que els caràcters es poden escriure utilitzant diferents sistemes de codificació, però &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; ofereix diverses tècniques per evitar que això siga un problema, com per exemple, incloent a la capçalera del fitxer quina codificació s’ha fet servir en el moment de guardar-lo.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Amb les etiquetes, &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; aconsegueix estructurar qualsevol tipus d’informació jeràrquica. Es pot establir certa similitud entre la forma com la informació es guarda en els objectes d’una aplicació i la forma com es guardaria en un document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;. La informació, en les aplicacions orientades a objectes, s’estructura, agrupa i jerarquitza en classes, i en els documents &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; s’estructura, organitza i jerarquitza en etiquetes contingudes unes dins les altres i atributs de les etiquetes.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/u1_import_image_14.png&quot; width=&quot;590&quot; height=&quot;773&quot; /&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;div&gt;Imaginem que volem representar les dades dels empleats com els de l’aparat anterior utilitzant un format &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;. No existeix una única solució, però és obligatori que totes respecten la jerarquia del model. Un possible format podria ser el següent: &lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div class=&quot;codi&quot;&gt;&amp;lt;empresa&amp;gt;&lt;br /&gt;
&lt;blockquote&gt;&amp;lt;empleat&amp;gt;&lt;br /&gt;
&lt;blockquote&gt;&amp;lt;num&amp;gt;1&amp;lt;/num&amp;gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&amp;lt;nom&amp;gt;Andreu&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;departament&amp;gt;10&amp;lt;/departament&amp;gt;&lt;br /&gt;&amp;lt;edat&amp;gt;32&amp;lt;/edat&amp;gt;&lt;br /&gt;&amp;lt;sou&amp;gt;1000.0&amp;lt;/sou&amp;gt;&lt;/blockquote&gt;
&amp;lt;/empleat&amp;gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;br /&gt;&amp;lt;empleat&amp;gt;&lt;br /&gt;
&lt;blockquote&gt;&amp;lt;num&amp;gt;2&amp;lt;/num&amp;gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;departament&amp;gt;20&amp;lt;/departament&amp;gt;&lt;br /&gt;&amp;lt;edat&amp;gt;28&amp;lt;/edat&amp;gt;&lt;br /&gt;&amp;lt;sou&amp;gt;1200.0&amp;lt;/sou&amp;gt;&lt;/blockquote&gt;
&amp;lt;/empleat&amp;gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;br /&gt;&amp;lt;empleat&amp;gt;&lt;br /&gt;
&lt;blockquote&gt;&amp;lt;num&amp;gt;3&amp;lt;/num&amp;gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&amp;lt;nom&amp;gt;Clàudia&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;departament&amp;gt;10&amp;lt;/departament&amp;gt;&lt;br /&gt;&amp;lt;edat&amp;gt;26&amp;lt;/edat&amp;gt;&lt;br /&gt;&amp;lt;sou&amp;gt;1100.0&amp;lt;/sou&amp;gt;&lt;/blockquote&gt;
&amp;lt;/empleat&amp;gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;br /&gt;&amp;lt;empleat&amp;gt;&lt;br /&gt;
&lt;blockquote&gt;&amp;lt;num&amp;gt;4&amp;lt;/num&amp;gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&amp;lt;nom&amp;gt;Damià&amp;lt;/nom&amp;gt;&lt;br /&gt;&amp;lt;departament&amp;gt;10&amp;lt;/departament&amp;gt;&lt;br /&gt;&amp;lt;edat&amp;gt;40&amp;lt;/edat&amp;gt;&lt;br /&gt;&amp;lt;sou&amp;gt;1500.0&amp;lt;/sou&amp;gt;&lt;/blockquote&gt;
&amp;lt;/empleat&amp;gt;&lt;/blockquote&gt;
&amp;lt;/empresa&amp;gt;&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;Però aquesta també podria ser una manera de representar-lo:&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;
&lt;div class=&quot;codi&quot;&gt;&amp;lt;empresa&amp;gt;&lt;br /&gt;
&lt;blockquote&gt;&amp;lt;empleat num='1' nom='Andreu' departament='10' edat='32' sou='1000.0'/&amp;gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;span&gt;&amp;lt;empleat num='2' nom='Bernat' departament='20' edat='28' sou='1200.0'/&amp;gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;span&gt;&lt;span&gt;&amp;lt;empleat num='3' nom='Clàudia' departament='10' edat='26' sou='1100.0'/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;span&gt;&amp;lt;empleat num='4' nom='Damià' departament='10' edat='40' sou='1500.0'/&amp;gt;&lt;/span&gt;&lt;/blockquote&gt;
&amp;lt;/empresa&amp;gt;&lt;/div&gt;
&lt;p&gt; I podem imaginar moltes altres solucions, combinant considerant com atributs o subetiquetes les diferents característiques dels empleats que volem guardar. Aquest seria el problema principal del XML, les múltiples solucions. Però també és veritat que totes elles són fàcils d'entendre.&lt;/p&gt;
&lt;/div&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="2804"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="103_1.70"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="24">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="21"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="u1_import_image_14.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmphE1SCl/u1_import_image_14.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="5212c06a6978582d7215b802c2848b1f"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="22"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="22"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="71"></int>
             <string role="key" value="parentNode"></string>
             <reference key="23"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="103"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="23"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="24"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="11"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:4.-%20Documents%20XML"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="27">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="4.1 - Parser o analitzador XML"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="25">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="26">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="25"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;Un &lt;strong&gt;&lt;em&gt;Parser&lt;/em&gt; XML&lt;/strong&gt; és una classe que ens permet analitzar i classificar el contingut d’un arxiu XML extraient la informació continguda en cada una de les etiquetes, i relacionar-la d’acord amb la seua posició dins la jerarquia.&lt;/p&gt;
&lt;p&gt;Hi ha dos tipus d'analitzadors depenent de la manera de funcionar.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Analitzadors seqüencials&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Els &lt;strong&gt;analitzadors seqüencials&lt;/strong&gt; permeten extreure el contingut a mida que es van descobrint les etiquetes d’obertura i tancament. També s’anomenen &lt;strong&gt;analitzadors sintàctics&lt;/strong&gt;. Són analitzadors molt ràpids, però presenten el problema que cada vegada que es necessita accedir a una part del contingut, s'ha de rellegir tot el document de dalt a baix.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En Java, l’analitzador sintàctic més popular s’anomena &lt;strong&gt;SAX&lt;/strong&gt;, que vol dir &lt;strong&gt;Simple &lt;acronym title=&quot;Application Programming Interface&quot;&gt;API&lt;/acronym&gt; for XML&lt;/strong&gt;. És una analitzador molt utilitzat en diverses biblioteques de tractament de dades XML, però no sol utilitzar-se en aplicacions finals, pel problema abans comentat d'haver de llegir-se tot el document XML a cada consulta. Per aquesta raó no els veurem en aquest curs.&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="26"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="27"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="12"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="27"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="28">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="29">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="28"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Analitzadors jeràrquics&lt;/p&gt;
&lt;div&gt;
&lt;p&gt;Generalment, les aplicacions finals que han de treballar amb dades &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; solen utilitzar analitzadors jeràrquics.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Els &lt;strong&gt;analitzadors jeràrquics&lt;/strong&gt; guarden totes les dades del document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; en memòria dins una estructura jeràrquica, a mida que van analitzant el seu contingut. I per això són ideals per a aplicacions que requereixen una consulta contínua de les dades.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El&lt;strong&gt; format de l’estructura&lt;/strong&gt; on es guarda la informació en memòria ha estat especificat per l’organisme internacional &lt;acronym title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/acronym&gt; (World Wide Web Consortium) i es coneix com a &lt;strong&gt;&lt;acronym title=&quot;Document Object Model&quot;&gt;DOM&lt;/acronym&gt;&lt;/strong&gt; (&lt;em&gt;&lt;strong&gt;Document Object Model&lt;/strong&gt;&lt;/em&gt;). És una estructura que &lt;acronym title=&quot;HyperText Markup Language&quot;&gt;HTML&lt;/acronym&gt; i javascript han popularitzat molt i es tracta d’una especificació que Java materialitza en forma d’interfícies. La principal s’anomena &lt;strong&gt;&lt;em&gt;Document &lt;/em&gt;&lt;/strong&gt;i representa tot un document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;. En tractar-se d’una interfície, pot ser implementada per diverses classes.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;L’estàndard &lt;acronym title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/acronym&gt; defineix la classe &lt;strong&gt;DocumentBuilder&lt;/strong&gt; (constructor de documents) per a poder crear estructures &lt;acronym title=&quot;Document Object Model&quot;&gt;DOM&lt;/acronym&gt; a partir d’un &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;. Aquesta classe &lt;strong&gt;DocumentBuilder&lt;/strong&gt; és una classe abstracta, i per tal que es puga adaptar a les diferents plataformes, pot necessitar fonts de dades o requeriments diversos. Recordeu que les classes abstractes no es poden instanciar de forma directa. Per aquest motiu, el consorci W3 especifica també la classe &lt;strong&gt;DocumentBuilderFactory&lt;/strong&gt;, és a dir, el &lt;em&gt;fabricador &lt;/em&gt;de &lt;em&gt;DocumentBuilder&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Les llibreries des d'on importarem les classes comentades són:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;DocumentBuilderFactory&lt;/strong&gt; i &lt;strong&gt;DocumentBuilder&lt;/strong&gt; les importarem de la llibreria &lt;strong&gt;javax.xml.parsers.*&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Document&lt;/strong&gt; l'importarem de &lt;strong&gt;org.w3c.dom.*&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hem de cuidar sobretot aquesta última importació, perquè per defecte Java ens ofereix moltes llibreries des d'on importar &lt;strong&gt;Document&lt;/strong&gt;. I si no la importem de la llibreria correcta, evidentment després tindrem errors.&lt;/p&gt;
&lt;p&gt;Les instruccions necessàries per llegir un fitxer &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; i crear un objecte &lt;strong&gt;Document&lt;/strong&gt; serien les següents:  &lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import java.io.FileInputStream

import javax.xml.parsers.DocumentBuilder
import javax.xml.parsers.DocumentBuilderFactory

import org.w3c.dom.Document

...

    val dbFactory = DocumentBuilderFactory.newInstance()

    val dBuilder = dbFactory.newDocumentBuilder()

    val doc = dBuilder.parse(File(“fitxer.xml”))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Tornem a insistir en la necessitat d'importar &lt;strong&gt;Document&lt;/strong&gt; de la llibreria &lt;strong&gt;org.w3c.dom.*&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Anem a basar-nos en un exemple per poder veure a poc a poc la manera d'utilitzar el parser. És un exemple que possiblement es va veure en primer, en el mòdul de Llenguatge de Marques. Suposarem que està en el fitxer &lt;strong&gt;cotxes.xml&lt;/strong&gt;, i que està en el directori del projecte on farem les proves.&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;oferta&amp;gt;&lt;/div&gt;
&lt;div&gt;  &amp;lt;vehiculo&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;marca&amp;gt;ford&amp;lt;/marca&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;modelo color=&quot;gris&quot;&amp;gt;focus&amp;lt;/modelo&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;motor combustible=&quot;gasolina&quot;&amp;gt;duratorc 1.4&amp;lt;/motor&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;matricula&amp;gt;1234AAA&amp;lt;/matricula&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;kilometros&amp;gt;12500&amp;lt;/kilometros&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;precio_inicial&amp;gt;12000&amp;lt;/precio_inicial&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;precio_oferta&amp;gt;10000&amp;lt;/precio_oferta&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;extra valor=&quot;250&quot;&amp;gt;pintura metalizada&amp;lt;/extra&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;extra valor=&quot;300&quot;&amp;gt;llantas&amp;lt;/extra&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;foto&amp;gt;11325.jpg&amp;lt;/foto&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;foto&amp;gt;11326.jpg&amp;lt;/foto&amp;gt;&lt;/div&gt;
&lt;div&gt;  &amp;lt;/vehiculo&amp;gt;&lt;/div&gt;
&lt;div&gt;  &amp;lt;vehiculo&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;marca&amp;gt;ford&amp;lt;/marca&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;modelo color=&quot;gris&quot;&amp;gt;focus&amp;lt;/modelo&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;motor combustible=&quot;diesel&quot;&amp;gt;duratorc 2.0&amp;lt;/motor&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;matricula&amp;gt;1235AAA&amp;lt;/matricula&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;kilometros&amp;gt;125000&amp;lt;/kilometros&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;precio_inicial&amp;gt;10000&amp;lt;/precio_inicial&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;precio_oferta&amp;gt;9000&amp;lt;/precio_oferta&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;extra valor=&quot;250&quot;&amp;gt;pintura metalizada&amp;lt;/extra&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;extra valor=&quot;200&quot;&amp;gt;spoiler trasero&amp;lt;/extra&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;extra valor=&quot;500&quot;&amp;gt;climatizador&amp;lt;/extra&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;foto&amp;gt;11327.jpg&amp;lt;/foto&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;foto&amp;gt;11328.jpg&amp;lt;/foto&amp;gt;&lt;/div&gt;
&lt;div&gt;  &amp;lt;/vehiculo&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/oferta&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El primer que farem serà intentar connectar amb aquest fitxer, però d'una forma un poc més reduïda que abans, sense definir objectes del &lt;strong&gt;DocumentBuilderFactory&lt;/strong&gt; ni &lt;strong&gt;DocumentBuilder&lt;/strong&gt;. Tampoc ens caldrà definir-nos el &lt;strong&gt;File&lt;/strong&gt; (&lt;strong&gt;FileInputStream&lt;/strong&gt;) ja que el mètode &lt;strong&gt;parse&lt;/strong&gt; també agafa un &lt;strong&gt;String &lt;/strong&gt;com a paràmetre:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import javax.xml.parsers.DocumentBuilderFactory

import org.w3c.dom.Document

...

    val doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(&quot;cotxes.xml&quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Però, i si el procés que necessitem és l'invers? És a dir, i si el que volem és guardar una estructura DOM en un fitxer XML?&lt;/p&gt;
&lt;p&gt;En aquest cas el que haurem de fer serà construir un &lt;strong&gt;document buit&lt;/strong&gt;, anar posant els elements i atributs (amb els seus valors) d'alguna manera, i posteriorment guardar-lo en un fitxer. Deixem per a un poc més avant com anar construint els nodes del document i centrem-nos en el fet de crear el document buit i guardar-lo en un fitxer. Podem construir un document nou a partir del &lt;strong&gt;DocumentBuilder&lt;/strong&gt;, utilitzant el mètode &lt;strong&gt;newDocument()&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import javax.xml.parsers.DocumentBuilderFactory

import org.w3c.dom.Document

...

    val doc1 = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument()&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Per a escriure la informació continguda al &lt;acronym title=&quot;Document Object Model&quot;&gt;DOM&lt;/acronym&gt; a un fitxer, es pot fer utilitzant una altra utilitat de Java anomenada &lt;strong&gt;&lt;em&gt;Transformer&lt;/em&gt;&lt;/strong&gt;. Es tracta d’una utilitat que permet realitzar fàcilment conversions entre diferents representacions d’informació jeràrquica. És capaç, per exemple, de passar la informació continguda en un objecte &lt;strong&gt;Document a un fitxer de text en format &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt;&lt;/strong&gt;. També seria capaç de fer l’operació inversa, però no val la pena perquè el mateix &lt;em&gt;DocumentBuilder&lt;/em&gt; ja s’encarrega d’això.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;Transformer &lt;/em&gt;&lt;/strong&gt;és també una classe abstracta i requereix d’una &lt;em&gt;factory&lt;/em&gt; per poder ser instanciada. La &lt;span&gt;classe&lt;/span&gt; &lt;strong&gt;Transformer&lt;/strong&gt; pot treballar amb multitud de contenidors d’informació perquè en realitat treballa amb un parell de tipus adaptadors (classes que fan compatibles jerarquies diferents) que s’anomenen &lt;strong&gt;Source&lt;/strong&gt; i &lt;strong&gt;Result&lt;/strong&gt;. Les classes que implementen aquestes interfícies s’encarregaran de fer compatible un tipus de contenidor específic al requeriment de la classe &lt;strong&gt;Transformer&lt;/strong&gt;. Així, disposem de les classes &lt;strong&gt;DOMSource&lt;/strong&gt;, &lt;strong&gt;SAXSource&lt;/strong&gt; o &lt;strong&gt;StreamSource&lt;/strong&gt; com a adaptadors del contenidor de la font d’informació (&lt;acronym title=&quot;Document Object Model&quot;&gt;DOM&lt;/acronym&gt;, SAX o Stream respectivament). &lt;strong&gt;DOMResult&lt;/strong&gt;, &lt;strong&gt;SAXResult&lt;/strong&gt; o &lt;strong&gt;StreamResult&lt;/strong&gt; són els adaptadors equivalents del contenidor destí. A nosaltres ara, com que volem passar un document DOM a un fitxer, ens convindrà un &lt;strong&gt;DOMSource&lt;/strong&gt; i un &lt;strong&gt;StreamResult&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;El codi bàsic per realitzar una transformació de &lt;acronym title=&quot;Document Object Model&quot;&gt;DOM&lt;/acronym&gt; a fitxer de text &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; seria el següent:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val trans = TransformerFactory.newInstance().newTransformer()

val source = DOMSource(doc)
val result = StreamResult(file)

trans.transform(source, result)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;De tota manera, veurem més avant un exemple on ens guardarem una estructura DOM en un fitxer XML. &lt;/p&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="29"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="3"></int>
                <string role="key" value="parentNode"></string>
                <reference key="27"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="100"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="27"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="12"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:4.-%20Documents%20XML:4.1%20-%20Parser%20o%20analitzador%20XML"></string>
           <string role="key" value="parent"></string>
           <reference key="23"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="32">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="4.2 - L'estructura DOM"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="30">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="31">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="30"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;L’estructura &lt;acronym title=&quot;Document Object Model&quot;&gt;DOM&lt;/acronym&gt; pren la forma d’un arbre, on cada part del XML es  trobarà representada en forma de &lt;strong&gt;node&lt;/strong&gt;. En funció de la posició en el document XML, parlarem de diferents tipus de nodes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;El node principal que representa tot el XML sencer s’anomena &lt;strong&gt;Document.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Les diverses etiquetes, inclosa l’etiqueta arrel, es coneixen com a nodes &lt;strong&gt;Element&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;El contingut d’una etiqueta de tipus text, serà un node de tipus &lt;strong&gt;TextElement&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Els atributs seran nodes de tipus &lt;strong&gt;Attribute&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En l'exemple de la pàgina anterior, el fitxer &lt;strong&gt;cotxes.xml&lt;/strong&gt;, que té aquesta estructura:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;oferta&amp;gt;&lt;/div&gt;
&lt;div&gt;  &amp;lt;vehiculo&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;marca&amp;gt;ford&amp;lt;/marca&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;modelo color=&quot;gris&quot;&amp;gt;focus&amp;lt;/modelo&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;motor combustible=&quot;gasolina&quot;&amp;gt;duratorc 1.4&amp;lt;/motor&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;matricula&amp;gt;1234AAA&amp;lt;/matricula&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;kilometros&amp;gt;12500&amp;lt;/kilometros&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;precio_inicial&amp;gt;12000&amp;lt;/precio_inicial&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;precio_oferta&amp;gt;10000&amp;lt;/precio_oferta&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;extra valor=&quot;250&quot;&amp;gt;pintura metalizada&amp;lt;/extra&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;extra valor=&quot;300&quot;&amp;gt;llantas&amp;lt;/extra&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;foto&amp;gt;11325.jpg&amp;lt;/foto&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;foto&amp;gt;11326.jpg&amp;lt;/foto&amp;gt;&lt;/div&gt;
&lt;div&gt;  &amp;lt;/vehiculo&amp;gt;&lt;/div&gt;
&lt;div&gt;  &amp;lt;vehiculo&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;marca&amp;gt;ford&amp;lt;/marca&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;modelo color=&quot;gris&quot;&amp;gt;focus&amp;lt;/modelo&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;motor combustible=&quot;diesel&quot;&amp;gt;duratorc 2.0&amp;lt;/motor&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;matricula&amp;gt;1235AAA&amp;lt;/matricula&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;kilometros&amp;gt;125000&amp;lt;/kilometros&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;precio_inicial&amp;gt;10000&amp;lt;/precio_inicial&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;precio_oferta&amp;gt;9000&amp;lt;/precio_oferta&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;extra valor=&quot;250&quot;&amp;gt;pintura metalizada&amp;lt;/extra&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;extra valor=&quot;200&quot;&amp;gt;spoiler trasero&amp;lt;/extra&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;extra valor=&quot;500&quot;&amp;gt;climatizador&amp;lt;/extra&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;foto&amp;gt;11327.jpg&amp;lt;/foto&amp;gt;&lt;/div&gt;
&lt;div&gt;    &amp;lt;foto&amp;gt;11328.jpg&amp;lt;/foto&amp;gt;&lt;/div&gt;
&lt;div&gt;  &amp;lt;/vehiculo&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/oferta&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Veient-lo com una estructura jeràrquica ens quedaria així:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T3_4_2_1.jpg&quot; alt=&quot;&quot; width=&quot;1123&quot; height=&quot;794&quot; /&gt;&lt;/p&gt;
&lt;p&gt;On:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;El node &lt;strong&gt;Document&lt;/strong&gt; és el rombe&lt;/li&gt;
&lt;li&gt;Els nodes &lt;strong&gt;Element&lt;/strong&gt; són els cercles&lt;/li&gt;
&lt;li&gt;Els nodes &lt;strong&gt;TextElement&lt;/strong&gt; són els rectàngles de fons taronja.&lt;/li&gt;
&lt;li&gt;Els nodes &lt;strong&gt;Attribute&lt;/strong&gt; són els rectàngles arrodonits de color groc&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Cada node específic disposa de mètodes per accedir a les seues dades concretes (nom, valor, nodes fills, node pare, etc.). És a dir, que el &lt;strong&gt;node&lt;/strong&gt; serveix per a situar-se en una determinada posició (element, atribut, element de text, ...). Tindrà uns mètodes, sobretot per a navegar, encara que també alguns per a traure el contingut. &lt;strong&gt;Element&lt;/strong&gt; és un classe derivada de &lt;strong&gt;Node&lt;/strong&gt; (per tant hereta tots els seus mètodes), i proporciona algunes coses més, sobretot per a accedir còmodament a les seues parts. Mirem els mètodes més importants, tant de&lt;strong&gt; Node&lt;/strong&gt; com de &lt;strong&gt;Element &lt;/strong&gt;i &lt;strong&gt;Document&lt;/strong&gt;&lt;/p&gt;
&lt;div&gt;
&lt;p&gt;&lt;strong&gt;Mètodes de NODE&lt;/strong&gt;&lt;/p&gt;
&lt;table border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Valor tornat&lt;/td&gt;
&lt;td&gt;Mètode&lt;/td&gt;
&lt;td&gt;Descripció&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getNodeName()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna el nom d'aquest node&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;short&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getNodeType()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna el tipus d'aquest node (ELEMENT_NODE, ATTRIBUTE_NODE, TEXT_NODE, ...&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getNodeValue()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna el valor del node, si en té&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;NodeList&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getChildNodes()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna una llista amb els nodes fills&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Node&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getFirstChild()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna el primer fill&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Node&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getLastChild()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna l'últim fill&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;NamedNodeMap&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getAttributes()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna una llista amb els atributs del node (null si no en té cap)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Node&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getParentNode()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna el pare&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getTextContent()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna el text contingut en l'element i el de tots els seus descendents, si en té&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;hasChildNodes()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna cert si el node té algun fill&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;hasAttributes()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna cert si el node té algun atribut&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Mètodes d' &lt;strong&gt;ELEMENT&lt;/strong&gt;&lt;/p&gt;
&lt;table border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Valor tornat&lt;/td&gt;
&lt;td&gt;Mètode&lt;/td&gt;
&lt;td&gt;Descripció&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getAttribute(&lt;/strong&gt;String nom&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna el valor de l'atribut que té aquest nom&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;NodeList&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getElementsByTagName(&lt;/strong&gt;String nom&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna una llista de nodes amb tots els descendents que tenen aquest nom&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;hasAttribute(&lt;/strong&gt;String nom&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna cert si l'element té aquest atribut&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Mètodes de DOCUMENT&lt;/strong&gt;&lt;/p&gt;
&lt;table border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Valor tornat&lt;/td&gt;
&lt;td&gt;Mètode&lt;/td&gt;
&lt;td&gt;Descripció&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Element&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getDocumentElement()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna l'element arrel del document&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;NodeList&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;getElementsByTagName(&lt;/strong&gt;String nom&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;torna una llista de nodes amb tots els descendents que tenen aquest nom&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Kotlin ens &quot;suggerirà&quot; canviar molts dels mètodes anteriors per propietats. Per exemple per al mètode &lt;strong&gt;getNodeName() &lt;/strong&gt;ens suggerirà de canviar-lo per la propietat &lt;strong&gt;nodeName&lt;/strong&gt;. Podeu substituir per la propietat o deixar el mètode, el que vulgueu.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Sempre que tinguem una&lt;strong&gt; llista de nodes&lt;/strong&gt;, podrem accedir a cadascun dels membres de la llista amb el mètode &lt;strong&gt;item&lt;/strong&gt; especificant el número d'ordre. Així, si volem accedir al primer posarem &lt;strong&gt;item(0)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Posterioment posarem els mètodes que serveixen per anar posant contingut a un document: crear fills, crear atributs, posar contingut, ...&lt;/p&gt;
&lt;p&gt;El &lt;acronym title=&quot;Document Object Model&quot;&gt;DOM&lt;/acronym&gt; resultant obtingut des d’un &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; acaba sent un còpia exacta del fitxer, però disposat de diferent manera. Tant al &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; com al &lt;acronym title=&quot;Document Object Model&quot;&gt;DOM&lt;/acronym&gt; hi haurà informació no visible, com ara els &lt;em&gt;retorns de carro&lt;/em&gt;, que cal tenir en compte per tal de saber processar correctament el contingut i evitar sorpreses poc comprensibles.&lt;/p&gt;
&lt;p&gt;Per a il·lustrar el problema que poden suposar els retorn de carro, imaginem que disposem d’un document &lt;acronym title=&quot;Extensible Markup Language&quot;&gt;XML&lt;/acronym&gt; amb el següent contingut:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;table&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;tr&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;td&amp;gt; &amp;lt;/td&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;td&amp;gt; &amp;lt;/td&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/div&gt;
&lt;div&gt;&amp;lt;/table&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;de1&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;de1&quot;&gt;&lt;span class=&quot;sc3&quot;&gt;Veurem més clar si representem els retorn de carro en el mateix document:&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;de1&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;de1&quot;&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;table&amp;gt;¶&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;tr&amp;gt;¶&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;td&amp;gt; &amp;lt;/td&amp;gt;¶&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;td&amp;gt; &amp;lt;/td&amp;gt;¶&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/tr&amp;gt;¶ &lt;/div&gt;
&lt;div&gt;&amp;lt;/table&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;de1&quot;&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;de1&quot;&gt;&lt;span class=&quot;sc3&quot;&gt;A la següent figura es mostra la representació que tindria l’objecte &lt;acronym title=&quot;Document Object Model&quot;&gt;DOM&lt;/acronym&gt;, un vegada estiga ja copiat en memòria. Observeu com l’element &lt;strong&gt;&lt;em&gt;table&lt;/em&gt;&lt;/strong&gt; tindrà tres fills. En un es guardarà el &lt;strong&gt;retorn de carro&lt;/strong&gt; que situa l’etiqueta &lt;strong&gt;&lt;em&gt;&amp;lt;tr&amp;gt; &lt;/em&gt;&lt;/strong&gt;a la següent línia, en el segon trobarem l’etiqueta &lt;strong&gt;&lt;em&gt;&amp;lt;tr&amp;gt;&lt;/em&gt;&lt;/strong&gt;, i en el tercer el retorn de carro que fa que &lt;strong&gt;&amp;lt;/table&amp;gt;&lt;/strong&gt; estiga en la línia de baix. El mateix passa amb els fills de &lt;strong&gt;&lt;em&gt;&amp;lt;tr&amp;gt;&lt;/em&gt;&lt;/strong&gt;, abans i després de cada node &lt;strong&gt;&lt;em&gt;&amp;lt;td&amp;gt;&lt;/em&gt;&lt;/strong&gt; trobarem un &lt;strong&gt;retorn de carro&lt;/strong&gt;. &lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;br /&gt;&lt;img src=&quot;resources/T3_4_2_1.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;566&quot; height=&quot;315&quot; /&gt; &lt;/p&gt;
&lt;p&gt;En canvi, si haguérem partit d'un XML equivalent però sense retorns de carro, el resultat hauria estat diferent:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;p&gt;&amp;lt;table&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/table&amp;gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: center;&quot;&gt; &lt;img src=&quot;resources/T3_4_2_2.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;391&quot; height=&quot;297&quot; /&gt;&lt;/p&gt;
&lt;div&gt;
&lt;p&gt;L’absència de retorns de carro en el fitxer implica també l’absència de nodes contenint els retorns de carro en l’estructura &lt;acronym title=&quot;Document Object Model&quot;&gt;DOM&lt;/acronym&gt;.&lt;/p&gt;
&lt;p&gt;Un altre aspecte a tenir en compte és que el contingut de les etiquetes es plasma en el &lt;acronym title=&quot;Document Object Model&quot;&gt;DOM&lt;/acronym&gt; com un node fill de l’etiqueta contenidora. És a dir, per obtenir el text d’una etiqueta cal obtenir el primer fill d’aquesta.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;aaa&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;bbb&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;text de l'etiqueta bbb&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/bbb&amp;gt; &lt;/div&gt;
&lt;div&gt;&amp;lt;/aaa&amp;gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;de1&quot;&gt; &lt;/div&gt;
&lt;div class=&quot;de1&quot; style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T3_4_2_3.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;455&quot; height=&quot;306&quot; /&gt;&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;div&gt;&lt;/div&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="2800"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="101_1.251"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="33">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="30"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T3_4_2_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmphE1SCl/T3_4_2_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="3a75dd0c0e4e70217ef00ad6a1458151"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="31"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="2805"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="101_1.252"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="34">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="30"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T3_4_2_3.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmphE1SCl/T3_4_2_3.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="75a7a1307b3b0a26bdb67e794f2a98e1"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="31"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="2808"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="101_1.253"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="35">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="30"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T3_4_2_1.jpg"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmphE1SCl/T3_4_2_1.jpg"></string>
                       <string role="key" value="checksum"></string>
                       <string value="b7f1edd07e867003d6dba6df9fe30dfa"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="31"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="2809"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="101_1.254"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="36">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="30"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T3_4_2_2.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmphE1SCl/T3_4_2_2.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="3799877bf96392b47d845e68ee45c9e6"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="31"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="31"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="255"></int>
                <string role="key" value="parentNode"></string>
                <reference key="32"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="101"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="32"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="33"></reference>
               <reference key="34"></reference>
               <reference key="35"></reference>
               <reference key="36"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="13"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:4.-%20Documents%20XML:4.2%20-%20L%27estructura%20DOM"></string>
           <string role="key" value="parent"></string>
           <reference key="23"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="39">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="4.2.1 Lectura"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="37">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="38">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="37"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;div&gt;
&lt;p&gt;Anem a fer proves per poder comprovar el funcionament. Ens basem en el document &lt;strong&gt;cotxes.xml&lt;/strong&gt; esmentat en la pregunta 4.1&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Aneu amb compte, perquè en el document &lt;strong&gt;cotxes.xml&lt;/strong&gt; davant de la primera etiqueta no pot haver ni retorn de carro ni un espai en blanc ni res&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Coieu el següent codi en un fitxer Kotlin anomenat &lt;strong&gt;Exemple_3_4_1_XMLMirar.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import javax.xml.parsers.DocumentBuilderFactory

fun main(args: Array&amp;lt;String&amp;gt;){

    val doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(&quot;cotxes.xml&quot;)
    println(doc.getNodeName())     			// torna el nom del document. No és l'element arrel. Ens dirà #document
    val arrel = doc.getDocumentElement()	// apuntarà a l'element arrel
    println(arrel.getNodeName())			// torna el nom de l'element. Ens dirà oferta
    println(arrel.getNodeValue())			// torna el valor de l'element. Com és un element que conté altres elements, el valor és null
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Tal i com està documentat, aquesta serà l'eixida:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;#document&lt;br /&gt;oferta&lt;br /&gt;null&lt;/p&gt;
&lt;p&gt;Anem a comprovar ara que el primer fill de &lt;strong&gt;oferta&lt;/strong&gt; no és &lt;strong&gt;vehiculo&lt;/strong&gt; sinó el retorn de carro. Els element &lt;strong&gt;vehiculo&lt;/strong&gt; són el segon i el quart (índex 1 i 3). Copieu el següent codi enun fitxer Kotlin anomenat &lt;strong&gt;Exemple_3_4_2_XMLMirar2.kt&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import javax.xml.parsers.DocumentBuilderFactory

fun main(args: Array&amp;lt;String&amp;gt;) {

    val doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(&quot;cotxes.xml&quot;)
    val arrel = doc.getDocumentElement()  // apuntarà a l'element arrel
    val fills = arrel.getChildNodes()
    println(fills.item(0).getNodeName())   // el primer fill és el retorn de carro; ens dirà que és de text
    println(fills.item(1).getNodeName())   // el segon fill sí que és vehiculo
    println(fills.item(2).getNodeName())   // el tercer fill és el retorn de carro; ens dirà que és de text
    println(fills.item(3).getNodeName())   // el quart fill sí que és vehiculo
    println(fills.item(4).getNodeName())   // el cinquè fill és el retorn de carro; ens dirà que és de text
    println(fills.item(5).getNodeName())   // no existeix el sisè fill. Donarà error
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Observeu que en l'última sentència estem provocant un error:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;#text&lt;br /&gt;vehiculo&lt;br /&gt;#text&lt;br /&gt;vehiculo&lt;br /&gt;#text&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;    at exemples.Exemple_4_2_MirarXML2.main(Exemple_4_2_MirarXML2.kt:15)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Per tant, hem d'anar molt en compte amb els &lt;em&gt;&lt;strong&gt;retorns de carro&lt;/strong&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Per a poder esquivar els &lt;em&gt;retorn de carro&lt;/em&gt; podríem mirar el tipus de cada node ( &lt;strong&gt;getNodeType()&lt;/strong&gt; ), menysprear els els de tipus &lt;em&gt;&lt;strong&gt;TEXT_NODE&lt;/strong&gt;&lt;/em&gt; i considerar només els de tipus &lt;em&gt;&lt;strong&gt;ELEMENT_NODE&lt;/strong&gt;&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Però normalment l'accés que farem serà un poc més directe i més fàcil. Agafarem la llista de tots els element que tinguen un determinat nom amb &lt;strong&gt;getElementsByTagName(&lt;em&gt;nom&lt;/em&gt;)&lt;/strong&gt; .&lt;strong&gt; &lt;/strong&gt;Evidentment en la llista no estaran els retorns de carro&lt;strong&gt; &lt;/strong&gt;i així no tindrem problemes amb ells.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En el següent exemple recorrerem tots els element &lt;strong&gt;vehiculo&lt;/strong&gt;. De cadascun agafarem el contingut dels elements &lt;strong&gt;marca&lt;/strong&gt; i &lt;strong&gt;matricula&lt;/strong&gt;. També agafem el contingut de l'atribut &lt;strong&gt;combustible&lt;/strong&gt; de l'element &lt;strong&gt;motor&lt;/strong&gt;. Guardeu el següent codi en un fitxer Kotlin anomenat &lt;strong&gt;Exemple_3_4_3_XMLMirarCotxes.kt &lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import javax.xml.parsers.DocumentBuilderFactory
import org.w3c.dom.Element

fun main(args: Array&amp;lt;String&amp;gt;) {

    val doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(&quot;cotxes.xml&quot;)
    val arrel = doc.getDocumentElement()  // apuntarà a l'element arrel
    val llista = arrel.getElementsByTagName(&quot;vehiculo&quot;)

    for (i in 0 until llista.getLength()) {
        val el = llista.item(i) as Element
        println(el.getNodeName() + &quot; &quot; + (i + 1))
        println(&quot;Marca: &quot; + el.getElementsByTagName(&quot;marca&quot;).item(0).getChildNodes().item(0).getNodeValue())
        println(&quot;Matrícula: &quot; + el.getElementsByTagName(&quot;matricula&quot;).item(0).getFirstChild().getNodeValue())
        println(&quot;Motor: &quot; + el.getElementsByTagName(&quot;motor&quot;).item(0).getTextContent())
        println(&quot;Combustible: &quot; + el.getElementsByTagName(&quot;motor&quot;).item(0).getAttributes().item(0).getNodeValue())
        val m = el . getElementsByTagName (&quot;motor&quot;).item(0) as Element
        println(&quot;Combustible: &quot; + m.getAttribute(&quot;combustible&quot;))
        println()
    }
    println(arrel.getTextContent())
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;És molt important observar que quan tenim un element que ja té contingut, la informació no és accessible, sinó que hem d'anar al primer fill, que aquest ja és de tips &lt;em&gt;&lt;strong&gt;TEXT_NODE&lt;/strong&gt;&lt;/em&gt;, per agafar el seu valor.&lt;/p&gt;
&lt;p&gt;En l'exemple:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Per a &lt;strong&gt;marca&lt;/strong&gt; hem agafat de tota la llista de fills el primer, per traure el seu valor.&lt;/li&gt;
&lt;li&gt;En &lt;strong&gt;matricula&lt;/strong&gt; en compte d'agafar tota la llista de fills, només hem agafat el primer, i per tant és més ràpid.&lt;/li&gt;
&lt;li&gt;I per a &lt;strong&gt;motor&lt;/strong&gt; utilitzem el mètode &lt;strong&gt;getTextContent&lt;/strong&gt;, que agafa el congingut de text de l'element i de tots els seus descendents. Com és un node de text ja sabem a priori que ens anirà bé, i per tant &lt;strong&gt;és la forma més ràpida&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;L'atribut &lt;strong&gt;combustible&lt;/strong&gt; de l'element &lt;strong&gt;motor&lt;/strong&gt; l'hem tret de 2 maneres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;La primera agafant la llista d'atributs, i després el primer d'aquesta llista.&lt;/li&gt;
&lt;li&gt;En la segona manera s'ha fet més elegant, anat a buscar la propietat en qüestió. Per això hem convertit el node en l'&lt;strong&gt;element&lt;/strong&gt; &lt;strong&gt;m&lt;/strong&gt;, per a poder utilitzar &lt;strong&gt;getAttribute&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Al final fem el &lt;strong&gt;getTextContent()&lt;/strong&gt; sobre l'arrel per a comprovar que trau el seu contingut i el de tots els seus fills, per això apareix la informació duplicada&lt;/p&gt;
&lt;p&gt;Aquest serà el resultat de l'exemple anterior:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;vehiculo 1&lt;br /&gt;Marca: ford&lt;br /&gt;Matrícula: 1234AAA&lt;br /&gt;Motor: duratorc 1.4&lt;br /&gt;Combustible: gasolina&lt;br /&gt;Combustible: gasolina&lt;br /&gt;&lt;br /&gt;vehiculo 2&lt;br /&gt;Marca: ford&lt;br /&gt;Matrícula: 1235AAA&lt;br /&gt;Motor: duratorc 2.0&lt;br /&gt;Combustible: diesel&lt;br /&gt;Combustible: diesel&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;  &lt;br /&gt;    ford&lt;br /&gt;    focus&lt;br /&gt;    duratorc 1.4&lt;br /&gt;    1234AAA&lt;br /&gt;    12500&lt;br /&gt;    12000&lt;br /&gt;    10000&lt;br /&gt;    pintura metalizada&lt;br /&gt;    llantas&lt;br /&gt;    11325.jpg&lt;br /&gt;    11326.jpg&lt;br /&gt;  &lt;br /&gt;  &lt;br /&gt;    ford&lt;br /&gt;    focus&lt;br /&gt;    duratorc 2.0&lt;br /&gt;    1235AAA&lt;br /&gt;    125000&lt;br /&gt;    10000&lt;br /&gt;    9000&lt;br /&gt;    pintura metalizada&lt;br /&gt;    spoiler trasero&lt;br /&gt;    climatizador&lt;br /&gt;    11327.jpg&lt;br /&gt;    11328.jpg&lt;br /&gt;  &lt;br /&gt;&lt;br /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="38"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="39"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="32"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="39"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="23"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:4.-%20Documents%20XML:4.2%20-%20L%27estructura%20DOM:4.2.1%20Lectura"></string>
              <string role="key" value="parent"></string>
              <reference key="32"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="42">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="4.2.2 Escriptura"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="40">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="41">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="40"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Anem ara a crear un nou document XML i a guardar-lo en un fitxer. Utilitzarem com a exemple &lt;strong&gt;Empleats&lt;/strong&gt;. Al final de tot convertirem el fitxer &lt;strong&gt;Empleats.obj&lt;/strong&gt;, generat en la pregunta 3, en el fitxer &lt;strong&gt;Empleats.xml&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;La primera consideració a fer és que partirem d'un document buit. Anirem construint els elements i posant els atributs, i quan tinguem un element creat del tot, l'afegirem a l'estructura, és a dir farem que siga el fill d'un que ja està en l'estructura. Podríem fer-ho també al revés, és a dir, primer penjar-lo de l'estructura i després anar omplint-lo.&lt;/p&gt;
&lt;p&gt;Els principals mètodes per anar construint l'estructura són:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mètodes de DOCUMENT&lt;/strong&gt;&lt;/p&gt;
&lt;table border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Valor tornat&lt;/td&gt;
&lt;td&gt;Mètode&lt;/td&gt;
&lt;td&gt;Descripció&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Element&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;createElement(&lt;/strong&gt;String nom&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;crea un nou element amb el nom indicat (s'haurà de penjar en l'estructura)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Text&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;createTextNode(&lt;/strong&gt;String dades&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;crea un nou element de text (amb contingut)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Node&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;appendChild(&lt;/strong&gt;Node nou&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;afegeix el node nou, que serà l'arrel&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Mètodes de NODE&lt;/strong&gt;&lt;/p&gt;
&lt;table border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Valor tornat&lt;/td&gt;
&lt;td&gt;Mètode&lt;/td&gt;
&lt;td&gt;Descripció&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Node&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;appendChild(&lt;/strong&gt;Node nou&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;afegeix el node nou com a l'últim fill fins el moment&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;void&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;removeChild(&lt;/strong&gt;Node vell&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;lleva el node vell com a fill&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Mètodes de ELEMENT&lt;/strong&gt;&lt;/p&gt;
&lt;table border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Valor tornat&lt;/td&gt;
&lt;td&gt;Mètode&lt;/td&gt;
&lt;td&gt;Descripció&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;void&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;setAttribute(&lt;/strong&gt;String nom,String valor&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;afegeix un nou atribut a l'element, amb el nom i valor indicats&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;void&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;removeAttribute(&lt;/strong&gt;String nom&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;lleva l'atribut de l'element&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;void&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;setTextContent(&lt;/strong&gt;String dades&lt;strong&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;afegeix un fill que serà de text, amb el contingut passat com a paràmetre&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Anem a fer directament ja l'exemple dels empleats. Totes les dades seran elements, excepte el número d'empleat, que farem que siga un atribut d'empleat per a practicar. A l'element arrel li direm &lt;strong&gt;empleats. &lt;/strong&gt;El resultat ha de ser el fitxer &lt;strong&gt;Empleats.xml&lt;/strong&gt;. Copieu el següent codi en el fitxer Kotlin &lt;strong&gt;Exemple_3_4_4_XMLCrearEmpleats.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import java.io.ObjectInputStream
import java.io.FileInputStream
import javax.xml.parsers.DocumentBuilderFactory
import java.io.EOFException
import javax.xml.transform.TransformerFactory
import javax.xml.transform.dom.DOMSource
import javax.xml.transform.stream.StreamResult
import javax.xml.transform.OutputKeys

fun main(args: Array&amp;lt;String&amp;gt;) {
	val f = ObjectInputStream(FileInputStream (&quot;Empleats.obj&quot;))

	val doc = DocumentBuilderFactory.newInstance ().newDocumentBuilder().newDocument()
	val arrel = doc.createElement (&quot;empleats&quot;)
	doc.appendChild(arrel)

	try {
		while (true) {
			val e = f.readObject () as Empleat
			val emp = doc.createElement (&quot;empleat&quot;)
			emp.setAttribute(&quot;numero&quot;, Integer.toString(e.num))

			val nom = doc.createElement (&quot;nom&quot;)
			nom.appendChild(doc.createTextNode(e.nom)) // forma llarga: afegim un fill que és un node de text
			emp.appendChild(nom)

			val dep = doc.createElement(&quot;departament&quot;)
			dep.setTextContent(e.departament.toString()) // forma curta: amb setTextContent() li posem contingut
			emp.appendChild(dep)

			val edat = doc.createElement(&quot;edat&quot;)
			edat.setTextContent(e.edat.toString())
			emp.appendChild(edat)

			val sou = doc.createElement(&quot;sou&quot;);
			sou.setTextContent(e.sou.toString())
			emp.appendChild(sou)

			arrel.appendChild(emp)
		}

	} catch (eof: EOFException) {
		f.close();
	}
	val trans = TransformerFactory.newInstance().newTransformer()

	trans.transform(DOMSource(doc), StreamResult(&quot;Empleats.xml&quot;))
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En el fitxer XML generat, observareu que no hi ha retorns de carro, tot està en una mateixa línia. Si voleu veure'l bé, el podeu obrir per exemple amb un navegador web, que interpreta bé el format XML.&lt;/p&gt;
&lt;p&gt;Però també podem crear el fitxer donant-li un aspecte agradable incorporant aquestes dues línies immediatament abans de crear el fitxer, és a dir, immediatament abans de la línia 49:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;    trans.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;)
    trans.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;2&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I el fitxer quedarà així:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&amp;gt;
&amp;lt;empleats&amp;gt;
  &amp;lt;empleat numero=&quot;1&quot;&amp;gt;
    &amp;lt;nom&amp;gt;Andreu&amp;lt;/nom&amp;gt;
    &amp;lt;departament&amp;gt;10&amp;lt;/departament&amp;gt;
    &amp;lt;edat&amp;gt;32&amp;lt;/edat&amp;gt;
    &amp;lt;sou&amp;gt;1000.0&amp;lt;/sou&amp;gt;
  &amp;lt;/empleat&amp;gt;
  &amp;lt;empleat numero=&quot;2&quot;&amp;gt;
    &amp;lt;nom&amp;gt;Bernat&amp;lt;/nom&amp;gt;
    &amp;lt;departament&amp;gt;20&amp;lt;/departament&amp;gt;
    &amp;lt;edat&amp;gt;28&amp;lt;/edat&amp;gt;
    &amp;lt;sou&amp;gt;1200.0&amp;lt;/sou&amp;gt;
  &amp;lt;/empleat&amp;gt;
  &amp;lt;empleat numero=&quot;3&quot;&amp;gt;
    &amp;lt;nom&amp;gt;Clàudia&amp;lt;/nom&amp;gt;
    &amp;lt;departament&amp;gt;10&amp;lt;/departament&amp;gt;
    &amp;lt;edat&amp;gt;26&amp;lt;/edat&amp;gt;
    &amp;lt;sou&amp;gt;1100.0&amp;lt;/sou&amp;gt;
  &amp;lt;/empleat&amp;gt;
  &amp;lt;empleat numero=&quot;4&quot;&amp;gt;
    &amp;lt;nom&amp;gt;Damià&amp;lt;/nom&amp;gt;
    &amp;lt;departament&amp;gt;10&amp;lt;/departament&amp;gt;
    &amp;lt;edat&amp;gt;40&amp;lt;/edat&amp;gt;
    &amp;lt;sou&amp;gt;1500.0&amp;lt;/sou&amp;gt;
  &amp;lt;/empleat&amp;gt;
&amp;lt;/empleats&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="41"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="17"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="42"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="31"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="42"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="22"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:4.-%20Documents%20XML:4.2%20-%20L%27estructura%20DOM:4.2.2%20Escriptura"></string>
              <string role="key" value="parent"></string>
              <reference key="32"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="45">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="4.3 - Binding"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="43">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="44">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="43"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;div&gt;
&lt;h1 style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;VOLUNTARI&lt;/span&gt;&lt;/h1&gt;
&lt;p&gt;El &lt;strong&gt;&lt;em&gt;Binding&lt;/em&gt;&lt;/strong&gt; és una tècnica que consisteix en generar (i vincular) &lt;strong&gt;automàticament&lt;/strong&gt; classes de Java amb formats específics d’emmagatzematge, que en el cas que ens interessa seran documents XML.&lt;/p&gt;
&lt;p&gt;D'aquesta manera, cada etiqueta o atribut de XML es correspondrà amb una propietat d'una determinada classe. Això s'anomena &lt;em&gt;&lt;strong&gt;mapar&lt;/strong&gt;&lt;/em&gt;, perquè és fer una espècie de mapa per a indicar que una etiqueta (o atribut) es correspon a una propietat de la classe. Per a poder fer la aquesta correspondència o &lt;em&gt;&lt;strong&gt;mapatge&lt;/strong&gt;&lt;/em&gt; de forma correcta entre les classes de Java i el document XML, farà falta una miqueta d'ajuda o aclaracions, perquè com ja hem vist la mateixa informació es pot guardar de més d'una manera en XML (utilitzant o no atributs, ...).&lt;/p&gt;
&lt;p&gt;En Java existeixen diverses biblioteques per gestionar el &lt;em&gt;binding&lt;/em&gt;, com per exemple &lt;em&gt;JAXB&lt;/em&gt;, &lt;em&gt;JiBX&lt;/em&gt;, &lt;em&gt;XMLBinding&lt;/em&gt;, etc. Des de la versió 6.0 s’ha incorporat en el &lt;acronym title=&quot;Java Development Kit&quot;&gt;JDK&lt;/acronym&gt; estàndard &lt;strong&gt;JAXB&lt;/strong&gt; (&lt;em&gt;&lt;strong&gt;Java Architecture for XML Binding&lt;/strong&gt;&lt;/em&gt;), una potent biblioteca. &lt;/p&gt;
&lt;div&gt;
&lt;p&gt;&lt;strong&gt;JAXB&lt;/strong&gt; utilitza &lt;strong&gt;&lt;em&gt;Anotacions&lt;/em&gt;&lt;/strong&gt; per aconseguir la informació extra necessària per &lt;em&gt;mapar&lt;/em&gt; el &lt;em&gt;binding&lt;/em&gt;. Les &lt;em&gt;Anotacions&lt;/em&gt; són unes classes de Java molt especials. Serveixen per associar informació i funcionalitat als objectes sense interferir en l’estructura del model de dades. Abans d'aparéixer les &lt;em&gt;Anotacions &lt;/em&gt;era necessari fer servir l’herència per poder afegir funcionalitat a una classe sense haver de codificar-la, però ho complicava molt.&lt;/p&gt;
&lt;p&gt;Si, per contra, fem servir &lt;em&gt;Anotacions&lt;/em&gt;, els objectes disposaran d’informació o de funcionalitat extra sense que el model de dades quede modificat, ja que les &lt;em&gt;Anotacions&lt;/em&gt; no són visibles des dels objectes. Les &lt;em&gt;Anotacions&lt;/em&gt; poden associar-se a un paquet, a una classe, a un atribut o fins i tot a un paràmetre. Aquestes classes especials es declaren en el codi de l’aplicació posant el símbol &lt;strong&gt;@&lt;/strong&gt; davant del nom de l’&lt;em&gt;Anotació&lt;/em&gt;. Quan el compilador de Java detecta una &lt;em&gt;Anotació &lt;/em&gt;crea una instància i la injecta dins l’element afectat (paquet, classe, mètode, atribut, etc.). Això fa que aquestes no apareguen com a atributs o mètodes propis de l’objecte, i per això diem que no interacciona amb el model de dades, però les aplicacions que ho necessiten poden obtenir la instància injectada i fer-la servir. &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Nosaltres en aquest curs, únicament aspirarem a veure com realment a partir d'un &lt;strong&gt;esquema XML&lt;/strong&gt; que valida una sèrie de documents XML, podem generar còmodament les classes en Java, que permetrien guardar objectes d'aquestes classes. Una vegada construïdes les classes es podria utilitzar JAXB per a transferir informació dels fitxers XML (vàlids per a l'esquema) cap als objectes o a l'inrevès.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;La generació de les classes és extremadament senzilla a partir d'una determinada versió d'Eclipse. Com hem comentat la llibreria JAXB està present des de la versió 6.0 del JDK SE (Standard Edition). Però per a la generació còmoda ens fan falta eines (tools) proporcionades en la JDK EE 7.0 (Enterprise Edition). Si tenim aquesta plataforma podrem utilitzar la versió 2.2 de JAXB. &lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;b&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Lamentablement, a partir de la versió de Java JDK EE 8.0 comença a estar en desús el JAXB (&lt;em&gt;deprecated&lt;/em&gt;), i a la versió 11 ja no està implementat. Per tant, per a poder provar el que va a continuació &lt;strong&gt;és preferible que utilitzeu una versió antiga de Java &lt;/strong&gt; (Java 7 o Java 8). Si no la teniu instal·lada, no valdrà la pena que feu aquest exemple. &lt;strong&gt;Per això aquesta pregunta és voluntària&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Evidentment, es pot aconseguir que funcione en Java 11, a pesar que no està implementat JAXB, però és a costa d'assenyalar que agafe configuracions anteriors, o important tots els jar necessaris, baixant-los prèviament. No valdrà la pena, perquè no l'utilitzarem&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Ens recolzarem en un exemple utilitzat l'any passat. El següent esquema (.xsd) valida documents com el de l'oferta de vehicles, vist en apartats anteriors. Podeu guardar-lo amb el nom &lt;strong&gt;cotxes.xsd&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&amp;gt;
 
&amp;lt;xs:simpleType name=&quot;Combust&quot;&amp;gt;
  &amp;lt;xs:restriction base=&quot;xs:string&quot;&amp;gt;
      &amp;lt;xs:enumeration value=&quot;gasolina&quot;/&amp;gt;
      &amp;lt;xs:enumeration value=&quot;diesel&quot;/&amp;gt;
  &amp;lt;/xs:restriction&amp;gt;
&amp;lt;/xs:simpleType&amp;gt;
 
&amp;lt;xs:simpleType name=&quot;Matr&quot;&amp;gt;
  &amp;lt;xs:restriction base=&quot;xs:string&quot;&amp;gt;
      &amp;lt;xs:pattern value=&quot;[0-9]{4}[A-Z]{3}&quot;/&amp;gt;  
  &amp;lt;/xs:restriction&amp;gt;
&amp;lt;/xs:simpleType&amp;gt;
 
&amp;lt;xs:element name=&quot;oferta&quot;&amp;gt;
  &amp;lt;xs:complexType&amp;gt;
    &amp;lt;xs:sequence&amp;gt;
        &amp;lt;xs:element name=&quot;vehiculo&quot; maxOccurs=&quot;unbounded&quot; &amp;gt;
            &amp;lt;xs:complexType&amp;gt;
                &amp;lt;xs:sequence&amp;gt;
                    &amp;lt;xs:element name=&quot;marca&quot; type=&quot;xs:string&quot;/&amp;gt;
                    &amp;lt;xs:element name=&quot;modelo&quot; &amp;gt;
                        &amp;lt;xs:complexType&amp;gt;
                            &amp;lt;xs:simpleContent&amp;gt;
                                &amp;lt;xs:extension base=&quot;xs:string&quot;&amp;gt;
                                    &amp;lt;xs:attribute name=&quot;color&quot; type=&quot;xs:string&quot; /&amp;gt;
                                &amp;lt;/xs:extension&amp;gt;
                            &amp;lt;/xs:simpleContent&amp;gt;
                        &amp;lt;/xs:complexType&amp;gt;  
                    &amp;lt;/xs:element&amp;gt;  
                    &amp;lt;xs:element name=&quot;motor&quot; &amp;gt;
                        &amp;lt;xs:complexType&amp;gt;
                            &amp;lt;xs:simpleContent&amp;gt;
                                &amp;lt;xs:extension base=&quot;xs:string&quot;&amp;gt;
                                    &amp;lt;xs:attribute name=&quot;combustible&quot; type=&quot;Combust&quot; /&amp;gt;
                                &amp;lt;/xs:extension&amp;gt;
                            &amp;lt;/xs:simpleContent&amp;gt;
                        &amp;lt;/xs:complexType&amp;gt;   
                    &amp;lt;/xs:element&amp;gt;
                    &amp;lt;xs:element name=&quot;matricula&quot; type=&quot;Matr&quot;/&amp;gt;
                    &amp;lt;xs:element name=&quot;kilometros&quot; type=&quot;xs:integer&quot;/&amp;gt;
                    &amp;lt;xs:element name=&quot;precio_inicial&quot;  type=&quot;xs:integer&quot;/&amp;gt;
                    &amp;lt;xs:element name=&quot;precio_oferta&quot; type=&quot;xs:integer&quot;/&amp;gt;
                    &amp;lt;xs:element name=&quot;extra&quot; maxOccurs=&quot;unbounded&quot; &amp;gt;
                        &amp;lt;xs:complexType&amp;gt;
                            &amp;lt;xs:simpleContent&amp;gt;
                                &amp;lt;xs:extension base=&quot;xs:string&quot;&amp;gt;
                                    &amp;lt;xs:attribute name=&quot;valor&quot; type=&quot;xs:integer&quot; /&amp;gt;
                                &amp;lt;/xs:extension&amp;gt;
                            &amp;lt;/xs:simpleContent&amp;gt;
                        &amp;lt;/xs:complexType&amp;gt;  
                    &amp;lt;/xs:element&amp;gt;   
                    &amp;lt;xs:element name=&quot;foto&quot; maxOccurs=&quot;unbounded&quot; type=&quot;xs:string&quot;/&amp;gt;     
                &amp;lt;/xs:sequence&amp;gt;
            &amp;lt;/xs:complexType&amp;gt;
        &amp;lt;/xs:element&amp;gt;        
    &amp;lt;/xs:sequence&amp;gt;    
  &amp;lt;/xs:complexType&amp;gt;
&amp;lt;/xs:element&amp;gt;
 
&amp;lt;/xs:schema&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Per exemple, el següent document XML &lt;strong&gt;cotxes.xml&lt;/strong&gt; (el vist en els apartats anteriors)  és vàlid segons l'anterior esquema.&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;oferta&amp;gt;
  &amp;lt;vehiculo&amp;gt;
    &amp;lt;marca&amp;gt;ford&amp;lt;/marca&amp;gt;
    &amp;lt;modelo color=&quot;gris&quot;&amp;gt;focus&amp;lt;/modelo&amp;gt;
    &amp;lt;motor combustible=&quot;gasolina&quot;&amp;gt;duratorc 1.4&amp;lt;/motor&amp;gt;
    &amp;lt;matricula&amp;gt;1234AAA&amp;lt;/matricula&amp;gt;
    &amp;lt;kilometros&amp;gt;12500&amp;lt;/kilometros&amp;gt;
    &amp;lt;precio_inicial&amp;gt;12000&amp;lt;/precio_inicial&amp;gt;
    &amp;lt;precio_oferta&amp;gt;10000&amp;lt;/precio_oferta&amp;gt;
    &amp;lt;extra valor=&quot;250&quot;&amp;gt;pintura metalizada&amp;lt;/extra&amp;gt;
    &amp;lt;extra valor=&quot;300&quot;&amp;gt;llantas&amp;lt;/extra&amp;gt;
    &amp;lt;foto&amp;gt;11325.jpg&amp;lt;/foto&amp;gt;
    &amp;lt;foto&amp;gt;11326.jpg&amp;lt;/foto&amp;gt;
  &amp;lt;/vehiculo&amp;gt;
  &amp;lt;vehiculo&amp;gt;
    &amp;lt;marca&amp;gt;ford&amp;lt;/marca&amp;gt;
    &amp;lt;modelo color=&quot;gris&quot;&amp;gt;focus&amp;lt;/modelo&amp;gt;
    &amp;lt;motor combustible=&quot;diesel&quot;&amp;gt;duratorc 2.0&amp;lt;/motor&amp;gt;
    &amp;lt;matricula&amp;gt;1235AAA&amp;lt;/matricula&amp;gt;
    &amp;lt;kilometros&amp;gt;125000&amp;lt;/kilometros&amp;gt;
    &amp;lt;precio_inicial&amp;gt;10000&amp;lt;/precio_inicial&amp;gt;
    &amp;lt;precio_oferta&amp;gt;9000&amp;lt;/precio_oferta&amp;gt;
    &amp;lt;extra valor=&quot;250&quot;&amp;gt;pintura metalizada&amp;lt;/extra&amp;gt;
    &amp;lt;extra valor=&quot;200&quot;&amp;gt;spoiler trasero&amp;lt;/extra&amp;gt;
    &amp;lt;extra valor=&quot;500&quot;&amp;gt;climatizador&amp;lt;/extra&amp;gt;
    &amp;lt;foto&amp;gt;11327.jpg&amp;lt;/foto&amp;gt;
    &amp;lt;foto&amp;gt;11328.jpg&amp;lt;/foto&amp;gt;
  &amp;lt;/vehiculo&amp;gt;
&amp;lt;/oferta&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Però per a generar les classes el que ens fa falta és el de l'esquema, &lt;strong&gt;cotxes.xsd&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;En el següent vídeo es veu com generar les classes a partir de l'esquema.&lt;strong&gt; No cal que ho feu si no voleu, perquè es mostra a nivell únicament il·lustratiu de com es generen les classes, però no ho utilitzarem després&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;iframe width=&quot;929&quot; height=&quot;538&quot; src=&quot;https://slides.com/alvarinstitut/ad-t3-jaxb/embed&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;webkitallowfullscreen&quot; mozallowfullscreen=&quot;mozallowfullscreen&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;p&gt;I aquest és el programa per provar que es pot accedir que es comenta en el vídeo:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package classesJAXB

import java.io.File
import javax.xml.bind.JAXBContext
import javax.xml.bind.JAXBException

fun main() {
    try {
        val file = File(&quot;cotxes.xml&quot;)
        val jaxbContext = JAXBContext.newInstance(Oferta::class.java)
        val jaxbUnmarshaller = jaxbContext.createUnmarshaller()
        val oferta = jaxbUnmarshaller.unmarshal(file) as Oferta
        for (v in oferta.getVehiculo())
            println(v.getMatricula() + &quot; (&quot; + v.getMarca() + &quot;)&quot;)
    } catch (e: JAXBException) {
        e.printStackTrace()
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="44"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="90"></int>
                <string role="key" value="parentNode"></string>
                <reference key="45"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="102"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="45"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="14"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:4.-%20Documents%20XML:4.3%20-%20Binding"></string>
           <string role="key" value="parent"></string>
           <reference key="23"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="48">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="5.- Documents JSON"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="46">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="47">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="46"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value=""></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="47"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="48"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="21"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="48"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="49">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="50">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="49"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;JSON&lt;/strong&gt; vol dir &lt;strong&gt;J&lt;/strong&gt;ava&lt;strong&gt;S&lt;/strong&gt;cript &lt;strong&gt;O&lt;/strong&gt;bject &lt;strong&gt;N&lt;/strong&gt;&lt;strong&gt;otation&lt;/strong&gt;, és a dir Notació d'Objectes de JavaScript. És una manera de representar objectes inicialment per a JavaScript, però per la seua senzillesa, i com és en text pla, serveix per a qualsevol entorn. Permet representar estructures de dades d'una determinada complexitat, com el XML, però pesa molt menys que aquest, i per això està convertint-se en un estàndar d'intercanvi de dades, sobretot entre un servidor i una aplicació web.&lt;/p&gt;
&lt;p&gt;L'extensió d'un fitxer JSON és &lt;strong&gt;.json&lt;/strong&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="50"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="48"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="22"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="48"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="17"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:5.-%20Documents%20JSON"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="53">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="5.1 - Estructura JSON"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="51">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="52">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="85"></int>
                <string role="key" value="_idevice"></string>
                <reference key="51"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;Amb JSON podrem representar:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Valors&lt;/strong&gt;, de tipus &lt;strong&gt;caràcter&lt;/strong&gt; (entre cometes dobles), &lt;strong&gt;numèric&lt;/strong&gt; (sense cometes) , &lt;strong&gt;booleà&lt;/strong&gt; (true o false) o &lt;strong&gt;null&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Parelles clau valor&lt;/strong&gt;, és a dir un nom simbòlic acompanyat d'un valor associat.. Es representen així: &lt;strong&gt;&quot;nom&quot; : valor&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Objectes&lt;/strong&gt;, que és una col·lecció de membres, cadascú dels quals pot ser una parella clau valor, o altres objectes (fins i tot arrays): es representen entre claus, i amb els elements separats per comes: &lt;strong&gt;{ &quot;nom1&quot; : &quot;valor1&quot; , &quot;nom2&quot;: valor2 , valor 3 , ... }&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Arrays&lt;/strong&gt;, que són llistes d'elements. Els elements no tenen per què tenir la mateixa estructura, però nosaltres intentarem que sí que la tinguen per coherència. Cada element pot ser un valor , una parella clau valor, un objecte o un array.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Veja'm algun exemples:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;{ &quot;p1&quot; : 2 , &quot;p2&quot; : 4 , &quot;p3&quot; : 6 , &quot;p4&quot; : 8 , &quot;p5&quot; : 10 }&lt;/p&gt;
&lt;p style=&quot;margin-left: 60px;&quot;&gt;en aquest cas tenim un objecte, l'arrel, que té 5 membres, tots ells parelles clau-valor.&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;{&lt;br /&gt;  &quot;num&quot;: 1 ,&lt;br /&gt;  &quot;nom&quot;: &quot;Andreu&quot; ,&lt;br /&gt;  &quot;departament&quot;: 10 ,&lt;br /&gt;  &quot;edat&quot;: 32 ,&lt;br /&gt;  &quot;sou&quot;: 1000.0 &lt;br /&gt;}&lt;/p&gt;
&lt;p style=&quot;margin-left: 60px;&quot;&gt;ara un objecte, l'arrel, també amb 5 membres que són parelles clau-valor. Observeu com la clau sempre la posem entre cometes, i el valor quan és un string també, però quan és numèric, no.&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;{ &quot;empleat&quot; :&lt;br /&gt;  { &quot;num&quot;: 1 ,&lt;br /&gt;    &quot;nom&quot;: &quot;Andreu&quot; ,&lt;br /&gt;    &quot;departament&quot;: 10 ,&lt;br /&gt;    &quot;edat&quot;: 32 ,&lt;br /&gt;    &quot;sou&quot;: 1000.0 &lt;br /&gt;  }&lt;br /&gt;}&lt;/p&gt;
&lt;p style=&quot;margin-left: 60px;&quot;&gt;en aquest cas tenim un objecte, l'arrel que consta d'un únic objecte, &lt;strong&gt;empleat&lt;/strong&gt;, el qual consta de 5 membres clau-valor.&lt;/p&gt;
&lt;p style=&quot;margin-left: 60px;&quot;&gt;Mirem ara un exemple amb un array:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;{ &quot;notes&quot; :&lt;br /&gt;  [ 5 , 7 , 8 , 7 ]&lt;br /&gt;}&lt;/p&gt;
&lt;p style=&quot;margin-left: 60px;&quot;&gt;on tenim l'element arrel que consta d'un únic membre, notes, que és un array.&lt;/p&gt;
&lt;p style=&quot;margin-left: 60px;&quot;&gt;També seria correcte d'aquesta manera, per veure que l'element arrel no té perquè ser un objecte, sinó també un array&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;[ 5 , 7 , 8 , 7 ]&lt;/p&gt;
&lt;p style=&quot;margin-left: 60px;&quot;&gt;I ara un més complet amb la mateixa estructura que el fitxer XML que havíem vist en la pregunta 4. Tindrem un objecte arrel, amb només un objecte, &lt;strong&gt;empresa&lt;/strong&gt;, que té un únic element &lt;strong&gt;empleat&lt;/strong&gt; que és un array amb 4 elements, cadascun dels empleats:&lt;/p&gt;
&lt;p class=&quot;codi2&quot; style=&quot;margin-left: 60px;&quot;&gt;{ &quot;empresa&quot;: &lt;br /&gt;   { &quot;empleat&quot;: &lt;br /&gt;     [  {&lt;br /&gt;           &quot;num&quot;: &quot;1&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Andreu&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;10&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;32&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1000.0&quot;&lt;br /&gt;        },&lt;br /&gt;        {&lt;br /&gt;           &quot;num&quot;: &quot;2&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Bernat&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;20&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;28&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1200.0&quot;&lt;br /&gt;        },&lt;br /&gt;        {&lt;br /&gt;           &quot;num&quot;: &quot;3&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Clàudia&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;10&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;26&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1100.0&quot;&lt;br /&gt;        },&lt;br /&gt;        {&lt;br /&gt;           &quot;num&quot;: &quot;4&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Damià&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;10&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;40&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1500.0&quot;&lt;br /&gt;        }&lt;br /&gt;     ]&lt;br /&gt;   }&lt;br /&gt;}&lt;/p&gt;
&lt;p style=&quot;margin-left: 60px;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Anem a veure un parell de casos més reals. Aquesta és la contestació que fa el WebService de &lt;strong&gt;Bicicas&lt;/strong&gt; en sol·licitar l'estat actual de bicicletes en els diferents punts (en el moment de fer els apunts es consulta en l'adreça &lt;a href=&quot;http://gestiona.bicicas.es/apps/apps.php&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;http://gestiona.bicicas.es/apps/apps.php&lt;/a&gt;):&lt;/p&gt;
&lt;p class=&quot;codi2&quot; style=&quot;margin-left: 60px;&quot;&gt;[&lt;br /&gt;  {&quot;ocupacion&quot;:&lt;br /&gt;    [&lt;br /&gt;      {&quot;id&quot;:&quot;01&quot;,&quot;punto&quot;:&quot;UJI - FCHS&quot;,&quot;puestos&quot;:27,&quot;ocupados&quot;:12,&quot;latitud&quot;:&quot;39.99533&quot;,&quot;longitud&quot;:&quot;-0.06999&quot;, &quot;porcentajeAltaOcupacion&quot;:&quot;80&quot;,&quot;porcentajeBajaOcupacion&quot;:&quot;20&quot;},&lt;br /&gt;      {&quot;id&quot;:&quot;02&quot;,&quot;punto&quot;:&quot;ESTACIÓN DE FERROCARRIL Y AUTOBUSES&quot;,&quot;puestos&quot;:24,&quot;ocupados&quot;:7,&quot;latitud&quot;:&quot;39.98765&quot;,&quot;longitud&quot;:&quot;-0.05281&quot;, &quot;porcentajeAltaOcupacion&quot;:&quot;80&quot;,&quot;porcentajeBajaOcupacion&quot;:&quot;20&quot;},&lt;br /&gt;      {&quot;id&quot;:&quot;03&quot;,&quot;punto&quot;:&quot;PLAZA DE PESCADERÍA&quot;,&quot;puestos&quot;:28,&quot;ocupados&quot;:4,&quot;latitud&quot;:&quot;39.98580&quot;,&quot;longitud&quot;:&quot;-0.03798&quot;, &quot;porcentajeAltaOcupacion&quot;:&quot;80&quot;,&quot;porcentajeBajaOcupacion&quot;:&quot;20&quot;},&lt;br /&gt;      ...&lt;br /&gt;    ]&lt;br /&gt;  }&lt;br /&gt;]&lt;/p&gt;
&lt;p style=&quot;margin-left: 60px;&quot;&gt;Com podeu comprovar, l'arrel no és un objecte, sinó un &lt;strong&gt;Array&lt;/strong&gt;. En l'array només ens interessa el primer element que és un objecte amb un únic membre, &lt;strong&gt;ocupacion &lt;/strong&gt;(en l'exemple no hi ha més elements, però en poden haver més en un moment determinat, quan volen fer avisos). I &lt;strong&gt;ocupacion és un array&lt;/strong&gt;, amb &lt;strong&gt;un objecte per cada estació de bicicas&lt;/strong&gt;, amb les parelles clau valor &lt;strong&gt;id&lt;/strong&gt;, &lt;strong&gt;punto&lt;/strong&gt;, &lt;strong&gt;puestos&lt;/strong&gt; (les bicicletes que caben), &lt;strong&gt;ocupados&lt;/strong&gt; (quantes bicicletes hi ha col·locades en aquest moment), &lt;strong&gt;latitud&lt;/strong&gt; i &lt;strong&gt;longitud&lt;/strong&gt; (les coordenades), ...&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;En realitat ens apareixerà tota la informació molt més apegada, perquè realment està en una única línia.&lt;/p&gt;
&lt;p&gt;Per a poder observar millor l'estructura podem utilitzar un &lt;strong&gt;visor&lt;/strong&gt; de json. Normalment el navegador Firefox els visualitza bé, encara que també depén de la versió. Si tenim instal·lada una versió que admet la visualització de JSON, ho intentarà interpretar, encara que segurament la millor manera de veure el format JSON és,tiar les opcions &lt;strong&gt;Dades sense processar --&amp;gt; Format d'impressió&lt;/strong&gt;, que és la que veiem a la dreta:&lt;/p&gt;
&lt;table style=&quot;width: 100%;&quot; border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 50%; text-align: center;&quot;&gt;&lt;img src=&quot;resources/T3_5_1_0_1.png&quot; alt=&quot;&quot; width=&quot;675&quot; height=&quot;734&quot; /&gt;&lt;/td&gt;
&lt;td style=&quot;width: 50%; text-align: center;&quot;&gt;&lt;img src=&quot;resources/T3_5_1_0_2.png&quot; alt=&quot;&quot; width=&quot;675&quot; height=&quot;734&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Si la versió nostra de Firefox no visualitza el format JSON, podem buscar un visor dels molts que hi ha per internet. En la figura n'hem utilitzat un, i es pot observar com facilita molt la lectura.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T3_5_1_1.png&quot; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Un altre exemple. Un WebService de GeoNames (una Base de Dade geogràfica gratuïta i accessible a través d'Internet) ens proporciona informació dels llocs que troba dins d'un rectangle delimitat per un latitud al nord i al sud, i una longitud a l'esti a l'oest  (en l'exemple: nord 40.01, sud 39.9, est 0.1 i oest -0.1). Per exemple, &lt;a href=&quot;https://maps.googleapis.com/maps/api/geocode/json?latlng=40,0&quot;&gt;http://api.geonames.org/citiesJSON?north=40.01&amp;amp;south=39.99&amp;amp;east=0.01&amp;amp;west=-0.01&amp;amp;lang=ES&amp;amp;username=demo&lt;/a&gt; torna el següent:&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;pre&gt;{
  &quot;geonames&quot;: [
    {
      &quot;lng&quot;: -0.04935,
      &quot;geonameId&quot;: 2519752,
      &quot;countrycode&quot;: &quot;ES&quot;,
      &quot;name&quot;: &quot;Castelló de la Plana&quot;,
      &quot;fclName&quot;: &quot;city, village,...&quot;,
      &quot;toponymName&quot;: &quot;Castelló de la Plana&quot;,
      &quot;fcodeName&quot;: &quot;seat of a second-order administrative division&quot;,
      &quot;wikipedia&quot;: &quot;en.wikipedia.org/wiki/Castell%C3%B3n_de_la_Plana&quot;,
      &quot;lat&quot;: 39.98567,
      &quot;fcl&quot;: &quot;P&quot;,
      &quot;population&quot;: 180005,
      &quot;fcode&quot;: &quot;PPLA2&quot;
    },
    {
      &quot;lng&quot;: -0.06313,
      &quot;geonameId&quot;: 2521909,
      &quot;countrycode&quot;: &quot;ES&quot;,
      &quot;name&quot;: &quot;Almazora&quot;,
      &quot;fclName&quot;: &quot;city, village,...&quot;,
      &quot;toponymName&quot;: &quot;Almassora&quot;,
      &quot;fcodeName&quot;: &quot;populated place&quot;,
      &quot;wikipedia&quot;: &quot;en.wikipedia.org/wiki/Almassora&quot;,
      &quot;lat&quot;: 39.94729,
      &quot;fcl&quot;: &quot;P&quot;,
      &quot;population&quot;: 24963,
      &quot;fcode&quot;: &quot;PPL&quot;
    },
    ...
    ]
}&lt;/pre&gt;
&lt;/div&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;A partir de l'arrel (que ara sí que és un objecte), tenim un membre: &lt;strong&gt;geonames&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;, que és un array (un element per cada &quot;lloc&quot; trobat), on cada element té informació diversa, com el nom del lloc, les coordenades, la població, ...&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;&lt;strong&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;De fa uns mesos que Google limita el servei anterior, i ha de ser amb un usuari validat. No valdrà la pena, per al poc profit que li trauríem. Mostrem en què consisteix el servei únicament a nivell il·lustratiu&lt;/p&gt;
&lt;/div&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="2801"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="24_85.106"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="54">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="51"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T3_5_1_0_2.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmphE1SCl/T3_5_1_0_2.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="be706cad47e19cf4336cf5ab354bfdcb"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="52"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="2803"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="24_85.107"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="55">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="51"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T3_5_1_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmphE1SCl/T3_5_1_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="d317dfc8c0cfb42c8e2ee79339e21723"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="52"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="2810"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="24_85.108"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="56">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="51"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T3_5_1_0_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmphE1SCl/T3_5_1_0_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="4657ea0c05d9f5ec5e97195dd65e3f54"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="52"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="52"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="109"></int>
                <string role="key" value="parentNode"></string>
                <reference key="53"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="24"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="53"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="54"></reference>
               <reference key="55"></reference>
               <reference key="56"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="18"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:5.-%20Documents%20JSON:5.1%20-%20Estructura%20JSON"></string>
           <string role="key" value="parent"></string>
           <reference key="48"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="59">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="5.2 Driver org.json"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="57">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="58">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="112_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="57"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Hi ha més d'una llibreria per a poder accedir i analitzar els documents json.&lt;/p&gt;
&lt;p&gt;Per exemple, es comenten prou per Internet són &lt;strong&gt;GSON&lt;/strong&gt; (de Google) i &lt;strong&gt;Jackson&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Però nosaltres anem a utilitzar dues altres llibreries&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Una, la del grup &lt;strong&gt;org.json&lt;/strong&gt; que en principi serà la mateixa que s'utilitzarà en Android&lt;/li&gt;
&lt;li&gt;Una altra, la de &lt;strong&gt;Moshi&lt;/strong&gt;, que ens permetrà elaborar més el resultat ja que podrem fer una conversió entre Json i objectes de Java o de Kotlin&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Pel que fa a la primera, en el moment de fer aquestos apunts l'última versió estable és la &lt;strong&gt;20210307&lt;/strong&gt;, és a dir, de juliol de 2018. En aquest enllaç teniu d'on us la podeu baixar: &lt;a href=&quot;https://jar-download.com/artifacts/org.json/json/20210307&quot;&gt;https://jar-download.com/artifacts/org.json/json/20210307&lt;/a&gt;. Una vegada baixada l'haurem d'incorporar al nostre projecte (sobre el projecte &lt;strong&gt;F4 --&amp;gt; Modules --&amp;gt; pestanya dependencies --&amp;gt; +&lt;/strong&gt;)&lt;/p&gt;
&lt;p&gt; En ella trobem el més bàsic:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;JSONObject&lt;/strong&gt;: equivaldrà a un objecte&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;JSONArray&lt;/strong&gt;: equivaldrà a un array&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;JSONTokener&lt;/strong&gt;:ens permetrà analitzar el document Json, i tornarà l'objecte arrel. El mètode que utilitzarem serà sempre &lt;strong&gt;nextValue()&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="58"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="59"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="36"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="59"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="26"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:5.-%20Documents%20JSON:5.2%20Driver%20org.json"></string>
           <string role="key" value="parent"></string>
           <reference key="48"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="62">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.2.1 - Lectura"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="60">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="61">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="60"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;JSONTokener&lt;/p&gt;
&lt;p&gt;El primer que haurem de fer serà analitzar el document per a obtenir l'element arrel (que com hem vist normalment serà un objecte, però de vegades pot ser un array).&lt;/p&gt;
&lt;p&gt;El constructor de &lt;strong&gt;JSONTokener&lt;/strong&gt; admet un &lt;strong&gt;String&lt;/strong&gt;, amb la qual cosa analitzarem una cadena que posem directament, o també un &lt;strong&gt;InputStream&lt;/strong&gt; o un &lt;strong&gt;Reader&lt;/strong&gt;, amb la qual cosa podrem analitzar directament el contingut d'un fitxer&lt;/p&gt;
&lt;p&gt;El mètode &lt;strong&gt;nextValue()&lt;/strong&gt; de &lt;strong&gt;JSONTokener&lt;/strong&gt; tornarà l'arrel del document Json, i només haurem de fer un cast a l'ojecte que és l'arrel: un &lt;strong&gt;JSONObject&lt;/strong&gt; o un &lt;strong&gt;JSONArray&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;En el següent exemple agafem el json directament d'un &lt;strong&gt;string&lt;/strong&gt;, on teníem els números parells.&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;{ &quot;p1&quot; : 2 , &quot;p2&quot; : 4 , &quot;p3&quot; : 6 , &quot;p4&quot; : 8 , &quot;p5&quot; : 10 }&lt;/p&gt;
&lt;p&gt;Observeu com per a la definició del String ens ha tocat escapar les dobles cometes. Copieu el següent codi en el fitxer Kotlin&lt;strong&gt; Exemple_3_5_11_JSONAnalitzarCadena.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import org.json.JSONTokener
import org.json.JSONObject

fun main(args: Array&amp;lt;String&amp;gt;) {

    val cadena = &quot;{ \&quot;p1\&quot; : 2 , \&quot;p2\&quot; : 4 , \&quot;p3\&quot; : 6 , \&quot;p4\&quot; : 8 , \&quot;p5\&quot; : 10 }&quot;

    val arrel = JSONTokener(cadena).nextValue() as JSONObject

    println(arrel.get(&quot;p1&quot;))
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Mentre que en aquest exemple accedim al fitxer &lt;strong&gt;parelles.json&lt;/strong&gt; (que assumirem que té el mateix contingut). Podríem passar el contingut del fitxer a una cadena, però és molt més còmode passar el &lt;strong&gt;Reader&lt;/strong&gt; com paràmetre en el constructor, i ell s'encarrega de llegir-lo tot. Copieu el següent codi en el fitxer &lt;strong&gt;Exemple_3_5_12_JSONAnalitzarFitxer.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import org.json.JSONTokener
import org.json.JSONObject
import java.io.FileReader

fun main(args: Array&amp;lt;String&amp;gt;) {

    val r_json = FileReader(&quot;parelles.json&quot;)

    val arrel = JSONTokener(r_json).nextValue() as JSONObject

    println(arrel.get(&quot;p3&quot;));
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="61"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="62"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="107"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="62"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="63">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="64">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="63"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;JSONObject&lt;/p&gt;
&lt;p&gt;Contindrà un &lt;strong&gt;objecte json&lt;/strong&gt;. Recordeu que l'&lt;strong&gt;objecte&lt;/strong&gt; es delimita amb les claus: &lt;strong&gt;{  }&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;El mètode més important serà &lt;strong&gt;get(&lt;em&gt;clau&lt;/em&gt;)&lt;/strong&gt; al qual li passem la clau del membre que volem obtenir. Si el membre és una parella clau-valor, obtindrem directament el valor. Si és un altre objecte, doncs obtindrem l'objecte o també podria ser un array. El cas que siga una parella clau-valor, ja l'hem vist en l'exemple anterior.&lt;/p&gt;
&lt;p&gt;En el següent exemple, en el fitxer &lt;strong&gt;Empleat.json&lt;/strong&gt; tindrem un empleat&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;{ &quot;empleat&quot; :&lt;br /&gt;  { &quot;num&quot;: 1 ,&lt;br /&gt;    &quot;nom&quot;: &quot;Andreu&quot; ,&lt;br /&gt;    &quot;departament&quot;: 10 ,&lt;br /&gt;    &quot;edat&quot;: 32 ,&lt;br /&gt;    &quot;sou&quot;: 1000.0 &lt;br /&gt;  }&lt;br /&gt;}&lt;/p&gt;
&lt;p&gt;Observeu com ara de l'element arrel hem d'agafar &lt;strong&gt;empleat&lt;/strong&gt;, que és un objecte amb les parelles clau-valor &lt;strong&gt;num&lt;/strong&gt;, &lt;strong&gt;nom&lt;/strong&gt;, ....&lt;/p&gt;
&lt;p&gt;Copieu el segúent codi en el fitxer Kotlin &lt;strong&gt;Exemple_3_5_13_JSONAnalitzarEmpleat.kt &lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import org.json.JSONTokener
import org.json.JSONObject
import java.io.FileReader

fun main(args: Array&amp;lt;String&amp;gt;) {

    val r_json = FileReader(&quot;Empleat.json&quot;)

    val arrel = JSONTokener(r_json).nextValue() as JSONObject

    val empleat = arrel.get(&quot;empleat&quot;) as JSONObject

    println(&quot;&quot; + empleat.get(&quot;nom&quot;) + &quot; (&quot; + empleat.get(&quot;sou&quot;) + &quot;)&quot;)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;També podem utilitzar els mètodes &lt;strong&gt;getJSONObject()&lt;/strong&gt;, &lt;strong&gt;getJSONArray&lt;/strong&gt;, &lt;strong&gt;getInt()&lt;/strong&gt;, &lt;strong&gt;getString()&lt;/strong&gt;, ..., que directament ens ho dóna en el tipus especificat, i no cal fer cast.&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="64"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="62"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="108"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="62"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="65">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="66">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="65"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;JSONArray&lt;/p&gt;
&lt;p&gt;Serà l'array, que recordem que ve limitat per els claudàtors: &lt;strong&gt;[  ]&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Per a obtenir els elements de l'array utilitzarem el mètode &lt;strong&gt;get(&lt;em&gt;index&lt;/em&gt;)&lt;/strong&gt;, on l'índex és el&lt;strong&gt; número d'ordre&lt;/strong&gt; de l'element que volem obtenir.&lt;/p&gt;
&lt;p&gt;També tindrem els mètodes &lt;strong&gt;getJSONObject(&lt;em&gt;index&lt;/em&gt;)&lt;/strong&gt;, &lt;strong&gt;getJSONArray(&lt;em&gt;index&lt;/em&gt;)&lt;/strong&gt;, &lt;strong&gt;getInt(&lt;em&gt;index&lt;/em&gt;)&lt;/strong&gt;, ..., que tornen directament el tipus especificat&lt;/p&gt;
&lt;p&gt;Posem el primer exemple sobre un json que només té un array els elements del qual són valors:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;[ 5 , 7 , 8 , 7 ]&lt;/p&gt;
&lt;p&gt;Observeu com ara l'arrel és un Array, i ens muntem un bucle per obtenir tots els elements. Copieu el següent codi en el fitxer &lt;strong&gt;Exemple_3_5_14_JSONAnalitzarArray.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import org.json.JSONTokener
import org.json.JSONArray

fun main(args: Array&amp;lt;String&amp;gt;) {

    val cadena = &quot;[ 5 , 7 , 8 , 7 ]&quot;

    val arrel = JSONTokener(cadena).nextValue() as JSONArray

    for (i in arrel)
        println(i)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Com veieu podem fer servir els bucles foreach, però lamentablement no podem obtenir directament un JsonObject, i per tant l'hem de reconvertir. Ho mostrarem en el següent exemple en el qual agafem tots els empleats de l'empresa, on &lt;strong&gt;Empresa.json&lt;/strong&gt; és així:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;{ &quot;empresa&quot; : &lt;br /&gt;    { &quot;empleats&quot;: &lt;br /&gt;           [&lt;br /&gt;        { &quot;num&quot;:1, &quot;nom&quot;: &quot;Andreu&quot;, &quot;departament&quot;: 10, &quot;edat&quot;: 32, &quot;sou&quot;: 1000.0}  ,&lt;br /&gt;        { &quot;num&quot;:2, &quot;nom&quot;: &quot;Bernat&quot;, &quot;departament&quot;: 20, &quot;edat&quot;: 28, &quot;sou&quot;: 1200.0}  ,&lt;br /&gt;        { &quot;num&quot;:3, &quot;nom&quot;: &quot;Clàudia&quot;, &quot;departament&quot;: 10, &quot;edat&quot;: 26, &quot;sou&quot;: 1100.0}  ,&lt;br /&gt;        { &quot;num&quot;:4, &quot;nom&quot;: &quot;Damià&quot;, &quot;departament&quot;: 10, &quot;edat&quot;: 40, &quot;sou&quot;: 1500.0}&lt;br /&gt;       ]&lt;br /&gt;    }&lt;br /&gt;}&lt;/p&gt;
&lt;p&gt;Tindrem un objecte arrel, amb només un objecte, &lt;strong&gt;empresa&lt;/strong&gt;, que té un únic membre empleat que és un array amb 4 elements, cadascun dels empleats. Copieu el següent exemple en el fitxer kotlin &lt;strong&gt;Exemple_3_5_15_JSONAnalitzarEmpresa.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import org.json.JSONTokener
import org.json.JSONObject
import java.io.FileReader

fun main(args: Array&amp;lt;String&amp;gt;) {

    val r_json = FileReader(&quot;Empresa.json&quot;)

    val arrel = JSONTokener(r_json).nextValue() as JSONObject
    val empresa = arrel.getJSONObject(&quot;empresa&quot;)

    for (e in empresa.getJSONArray(&quot;empleats&quot;)){
        val emp = e as JSONObject
        println(&quot;&quot; + emp.get(&quot;nom&quot;) + &quot; (&quot; + emp.get(&quot;sou&quot;) + &quot;)&quot;)
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Mireu com ens hem estalviat un pas, i no hem definit la variable &lt;strong&gt;empleats&lt;/strong&gt;, sinó que ho especifiquem en el bucle. També podríem haver estalviat la variable &lt;strong&gt;empresa&lt;/strong&gt; si en el bucle haguérem posat :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;for (e in arrel.getJSONObject(&quot;empresa&quot;).getJSONArray(&quot;empleats&quot;)){&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="66"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="62"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="109"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="62"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="67">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="68">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="111_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="67"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Exemple més complet&lt;/p&gt;
&lt;p&gt;Mirem algun exemple ja més elaborat, on ens tocarà analitzar amb detall l'estructura json. Fem-lo sobre l'exemple de &lt;strong&gt;BICICAS&lt;/strong&gt;. Podeu tornar a fer la consulta de l'estat actual en aquest moment a la pàgina &lt;a href=&quot;http://gestiona.bicicas.es/apps/apps.php&quot; onclick=&quot;browseURL(this); return false&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;http://gestiona.bicicas.es/apps/apps.php&lt;/a&gt; , seleccionar-ho tot i guardar-lo en el fitxer &lt;strong&gt;Bicicas.json&lt;/strong&gt;. És molt possible que tinguem problemes amb els caràcers especials, com les vocals accentuades, a causa de que el navegador utilitzat no les reconega, i en copiar-les al fitxer no tinguem ja la codificació correcta. No li donarem importància en aquest moment. Recordem ací l'estructura:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;codi2&quot; style=&quot;margin-left: 60px;&quot;&gt;[&lt;br /&gt;  {&quot;ocupacion&quot;:&lt;br /&gt;    [  {&quot;id&quot;:&quot;01&quot;,&quot;punto&quot;:&quot;UJI - FCHS&quot;,&quot;puestos&quot;:28,&quot;ocupados&quot;:11,&quot;latitud&quot;:&quot;39.99533&quot;,&quot;longitud&quot;:&quot;-0.06999&quot;,&lt;br /&gt;       &quot;porcentajeAltaOcupacion&quot;:&quot;80&quot;,&quot;porcentajeBajaOcupacion&quot;:&quot;20&quot;},&lt;br /&gt;      {&quot;id&quot;:&quot;02&quot;,&quot;punto&quot;:&quot;ESTACIÓN DE FERROCARRIL Y AUTOBUSES&quot;,&quot;puestos&quot;:28,&quot;ocupados&quot;:8,&quot;latitud&quot;:&quot;39.98765&quot;,&lt;br /&gt;       &quot;longitud&quot;:&quot;-0.05281&quot;,&quot;porcentajeAltaOcupacion&quot;:&quot;80&quot;,&quot;porcentajeBajaOcupacion&quot;:&quot;20&quot;},&lt;br /&gt;      {&quot;id&quot;:&quot;03&quot;,&quot;punto&quot;:&quot;PLAZA DE PESCADERÍA&quot;,&quot;puestos&quot;:28,&quot;ocupados&quot;:13,&quot;latitud&quot;:&quot;39.98580&quot;,&quot;longitud&quot;:&quot;-0.03798&quot;,&lt;br /&gt;       &quot;porcentajeAltaOcupacion&quot;:&quot;80&quot;,&quot;porcentajeBajaOcupacion&quot;:&quot;20&quot;},&lt;br /&gt;      ...&lt;br /&gt;    ]&lt;br /&gt;  }&lt;br /&gt;]&lt;/p&gt;
&lt;p&gt;Com podem observar, comença per un &lt;strong&gt;array&lt;/strong&gt;, no per un objecte, com sol ser habitual. L'únic que ens interessa és el &lt;strong&gt;primer element&lt;/strong&gt; de l'array, ja que en posteriors anirien en tot cas missatges. El primer element és un &lt;strong&gt;objecte&lt;/strong&gt; que té un únic membre &lt;strong&gt;ocupacion&lt;/strong&gt; (o si en té més no ens interessen), que és un &lt;strong&gt;array&lt;/strong&gt; amb totes les estacions. Cada estació és un objecte amb la informació que ens interessa.&lt;/p&gt;
&lt;p&gt;Copieu el següent codi en el fitxer Kotlin &lt;strong&gt;Exemple_3_5_16_JSONAnalitzarBicicas.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import org.json.JSONTokener
import org.json.JSONObject
import org.json.JSONArray
import java.io.FileReader

fun main(args: Array&amp;lt;String&amp;gt;) {

    val r_json = FileReader(&quot;Bicicas.json&quot;)

    val arrel = JSONTokener(r_json).nextValue() as JSONArray

    val estacions = arrel.getJSONObject(0).getJSONArray(&quot;ocupacion&quot;)

    for (e in estacions){
        val est = e as JSONObject
        println(&quot;&quot; + e.get(&quot;id&quot;) + &quot;.- &quot; + e.get(&quot;punto&quot;) + &quot; (&quot; + e.get(&quot;ocupados&quot;) + &quot;/&quot; + e.get(&quot;puestos&quot;) + &quot;)&quot;)
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Hem agafat l'array, d'ell hem agafat el primer objecte i d'ell l'array. I hem utilitzat un bucle &lt;strong&gt;for&lt;/strong&gt;, per a tots els valors de l'array&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="68"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="62"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="34"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="62"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="24"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:5.-%20Documents%20JSON:5.2%20Driver%20org.json:5.2.1%20-%20Lectura"></string>
              <string role="key" value="parent"></string>
              <reference key="59"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="71">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.2.2 - Escriptura"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="69">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="70">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="69"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Ens falta veure com escriure un document JSON. És molt fàcil anar creant l'estructura JSON. Només hem de recordar la manera d'afegir al &lt;strong&gt;JSONObject&lt;/strong&gt; i al &lt;strong&gt;JSONArray&lt;/strong&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;put(&quot;nom&quot;, element)&lt;/strong&gt; per afegir un nou membre a un &lt;strong&gt;JSONObject&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;put(element) &lt;/strong&gt;per afegir un nou element a un &lt;strong&gt;JSONArray&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;u&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/u&gt;&lt;/p&gt;
&lt;p&gt;La major part de drivers utilitzen &lt;strong&gt;add(element) &lt;/strong&gt;per a afegir un element a un JSONArray, en compte de &lt;strong&gt;put&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Una vegada tinguem l'estructura, podrem passar-la a un &lt;strong&gt;string&lt;/strong&gt; amb el mètode &lt;strong&gt;toString&lt;/strong&gt;, i la podrem guardar directament en un fitxer, per exemple.&lt;/p&gt;
&lt;p&gt;Farem més d'un exemple, per poder practicar.&lt;/p&gt;
&lt;p&gt;En el primer exemple generarem un JSON a partir de dades definides en el mateix programa, per mig de vectors. Intentarem generar aquest fitxer JSON:&lt;/p&gt;
&lt;p class=&quot;codi2&quot; style=&quot;margin-left: 60px;&quot;&gt;{ &quot;empresa&quot;: &lt;br /&gt;   { &quot;empleat&quot;: &lt;br /&gt;     [  {&lt;br /&gt;           &quot;num&quot;: &quot;1&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Andreu&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;10&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;32&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1000.0&quot;&lt;br /&gt;        },&lt;br /&gt;        {&lt;br /&gt;           &quot;num&quot;: &quot;2&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Bernat&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;20&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;28&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1200.0&quot;&lt;br /&gt;        },&lt;br /&gt;        {&lt;br /&gt;           &quot;num&quot;: &quot;3&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Clàudia&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;10&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;26&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1100.0&quot;&lt;br /&gt;        },&lt;br /&gt;        {&lt;br /&gt;           &quot;num&quot;: &quot;4&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Damià&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;10&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;40&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1500.0&quot;&lt;br /&gt;        }&lt;br /&gt;     ]&lt;br /&gt;   }&lt;br /&gt;}&lt;/p&gt;
&lt;p&gt;Analitzem l'estructura. Tenim un objecte arrel, que consta d'un únic membre, empresa, que és un objecte. Aquest objecte té un únic membre que és un array. Cada element de l'array és un objecte, i els seus membres ja són clau-valor.&lt;/p&gt;
&lt;p&gt;Copieu el següent codi en el fitxer kotlin &lt;strong&gt;Exemple_3_5_17_JSONEscriureEmpleats.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import org.json.JSONObject
import org.json.JSONArray
import java.io.FileWriter

fun main(args: Array&amp;lt;String&amp;gt;) {
	val noms = arrayOf(&quot;Andreu&quot;, &quot;Bernat&quot;, &quot;Clàudia&quot;, &quot;Damià&quot;)
	val departaments = arrayOf( 10, 20, 10, 10 )
	val edats = arrayOf( 32, 28, 26, 40 )
	val sous = arrayOf( 1000.0, 1200.0, 1100.0, 1500.0)

	val arrel = JSONObject()
	val empresa = JSONObject()
	arrel.put(&quot;empresa&quot;, empresa)
	val empleats = JSONArray()
	empresa.put(&quot;empleat&quot;, empleats)

	for (i in 0..3){
		val emp = JSONObject()
		emp.put(&quot;num&quot;, i + 1)
		emp.put(&quot;nom&quot;, noms[i])
		emp.put(&quot;departament&quot;, departaments[i])
		emp.put(&quot;edat&quot;, edats[i])
		emp.put(&quot;sou&quot;, sous[i])
		empleats.put(emp)
	}

	val f = FileWriter(&quot;Empleats.json&quot;)
	f.write(arrel.toString(4))
	f.close()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Hem posat en el moment de passar el JSONObject a String el paràmetre 4, per a que idente en diferents linies a 4 espais. Com veureu el resultat és quasi perfecte&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-json&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;{&quot;empresa&quot;: {&quot;empleat&quot;: [
    {
        &quot;num&quot;: 1,
        &quot;sou&quot;: 1000,
        &quot;nom&quot;: &quot;Andreu&quot;,
        &quot;edat&quot;: 32,
        &quot;departament&quot;: 10
    },
    {
        &quot;num&quot;: 2,
        &quot;sou&quot;: 1200,
        &quot;nom&quot;: &quot;Bernat&quot;,
        &quot;edat&quot;: 28,
        &quot;departament&quot;: 20
    },
    {
        &quot;num&quot;: 3,
        &quot;sou&quot;: 1100,
        &quot;nom&quot;: &quot;Clàudia&quot;,
        &quot;edat&quot;: 26,
        &quot;departament&quot;: 10
    },
    {
        &quot;num&quot;: 4,
        &quot;sou&quot;: 1500,
        &quot;nom&quot;: &quot;Damià&quot;,
        &quot;edat&quot;: 40,
        &quot;departament&quot;: 10
    }
]}}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Tenim el problema aparent que els membres de cada empleat estan &lt;strong&gt;desordenats&lt;/strong&gt;. No és que haja eixit malament, perquè hem de recordar que un objecte JSON és un conjunt no ordenat de membres.&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="70"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="86"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="71"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="110"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="71"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="72">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="73">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="111_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="72"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Exemple BICICAS&lt;/p&gt;
&lt;p&gt;Un altre exemple, el de &lt;strong&gt;Bicicas&lt;/strong&gt;, i el que farem per a practicar tant la lectura com l'escriptura, serà donar-li una altra estructura. Per tant llegirem l'original, i anirem construint la següent estructura en què està la informació més resumida:&lt;/p&gt;
&lt;p class=&quot;codi2&quot; style=&quot;margin-left: 60px;&quot;&gt;{ &quot;bicicas&quot;:&lt;br /&gt;    [ {&quot;num&quot;:&quot;01&quot;,&quot;nom&quot;:&quot;UJI - FCHS&quot;,&quot;llocs&quot;:28,&quot;ocupats&quot;:11,&quot;lliures&quot;:17},&lt;br /&gt;      {&quot;num&quot;:&quot;02&quot;,&quot;nom&quot;:&quot;ESTACIÓN DE FERROCARRIL Y AUTOBUSES&quot;,&quot;llocs&quot;:28,&quot;ocupats&quot;:8,&quot;lliures&quot;:20},&lt;br /&gt;      {&quot;num&quot;:&quot;03&quot;,&quot;nom&quot;:&quot;PLAZA DE PESCADERÍA&quot;,&quot;llocs&quot;:28,&quot;ocupats&quot;:13,&quot;lliures&quot;:15},&lt;br /&gt;      ...&lt;br /&gt;    ]&lt;br /&gt;}&lt;/p&gt;
&lt;p&gt;Tindrem per una banda les estacions d'origen, i per una altra les de destí .&lt;/p&gt;
&lt;p&gt;Copieu el següent codi en el fitxer Kotlin &lt;strong&gt;Exemple_3_5_18_JSONEscriureBicicas.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import org.json.JSONTokener
import org.json.JSONObject
import org.json.JSONArray
import java.io.FileReader
import java.io.FileWriter

fun main(args: Array&amp;lt;String&amp;gt;) {

	val r_json = FileReader(&quot;Bicicas.json&quot;)
	val arrel = JSONTokener(r_json).nextValue() as JSONArray
	val estacions = arrel.getJSONObject(0).getJSONArray(&quot;ocupacion&quot;)

	val destEstacions = JSONArray()	

	for (e in estacions){
		e as JSONObject
		val destE = JSONObject();
		destE.put(&quot;num&quot;, e.get(&quot;id&quot;));
		destE.put(&quot;nom&quot;, e.get(&quot;punto&quot;));
		destE.put(&quot;llocs&quot;, e.get(&quot;puestos&quot;));
		destE.put(&quot;ocupats&quot;, e.get(&quot;ocupados&quot;));
		val lliures = e.get(&quot;puestos&quot;) as Int - e.get(&quot;ocupados&quot;) as Int
		destE.put(&quot;lliures&quot;, lliures)
		destEstacions.put(destE)
	}

	val bicicas = JSONObject()
	bicicas.put(&quot;bicicas&quot;, destEstacions)

	val w_json = FileWriter(&quot;Bicicas2.json&quot;);
	w_json.write(bicicas.toString(4));
	w_json.close();
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El resultat seria aquest (observeu que havíem posat una tabulació de 4):&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-json&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;{&quot;bicicas&quot;: [
    {
        &quot;num&quot;: &quot;01&quot;,
        &quot;ocupats&quot;: 23,
        &quot;llocs&quot;: 28,
        &quot;nom&quot;: &quot;UJI - FCHS&quot;,
        &quot;lliures&quot;: 5
    },
    {
        &quot;num&quot;: &quot;02&quot;,
        &quot;ocupats&quot;: 0,
        &quot;llocs&quot;: 28,
        &quot;nom&quot;: &quot;ESTACIÃ³N DE FERROCARRIL Y AUTOBUSES&quot;,
        &quot;lliures&quot;: 28
    },
...
]}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="73"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="71"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="35"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="71"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="25"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:5.-%20Documents%20JSON:5.2%20Driver%20org.json:5.2.2%20-%20Escriptura"></string>
              <string role="key" value="parent"></string>
              <reference key="59"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="76">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="5.3 Driver Moshi"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="74">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="75">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="111_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="74"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p style=&quot;text-align: justify;&quot;&gt;El driver anterior tenia un funcionament molt senzill, però que obliga a seguir en tot moment l'estructura que té el fitxer Json, buscar entre els objectes i arrays cada vegada que es fa un accés.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Si són relativament pocs els accessos, és molt còmode, però si s'ha de fer un accés continuat pot resultar més pesat.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Existeix una altra llibreria, que ens permet passar d'un fitxer Json a objectes de Java o Kotlin, la qual cosa ens anirà bé quan siguen molts els accessos, perquè en definitiva tindrem les dades en l'entorn natural del nostre llenguatge: els objectes.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Es tracta de la llibreria &lt;strong&gt;MOSHI&lt;/strong&gt;, i aquest és el lloc on poder trobar-la:&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;a href=&quot;https://github.com/square/moshi&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/square/moshi&lt;/a&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En el moment de fer aquestos apunts, va per la versió 1.14.0. Tanmateix en les últimes versions dóna un error de compatibilitat. Ens conformarem per tant amb una versió anterior. Podem trobar totes les versions en aquest enllaç:&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;a href=&quot;https://jar-download.com/artifacts/com.squareup.moshi/moshi&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://jar-download.com/artifacts/com.squareup.moshi/moshi&lt;/a&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Podem agafar per exemple versió 1.8.0:&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;a href=&quot;https://jar-download.com/artifacts/com.squareup.moshi/moshi/1.8.0/source-code&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://jar-download.com/artifacts/com.squareup.moshi/moshi/1.8.0/source-code&lt;/a&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Veureu que hi ha dos drivers, el propi de &lt;strong&gt;Moshi&lt;/strong&gt; i un altre driver anomenat &lt;strong&gt;okio&lt;/strong&gt;. Haurem d'incorporar els dos al nostre projecte.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Recordeu que la manera d'incorporar els drivers al projecte IntelliJ és amb:&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;Sobre el projecte F4 (Project Structure) --&amp;gt; Modules --&amp;gt; pestanya dependencies --&amp;gt; +&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="75"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="76"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="37"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="76"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="27"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:5.-%20Documents%20JSON:5.3%20Driver%20Moshi"></string>
           <string role="key" value="parent"></string>
           <reference key="48"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="79">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.3.1 Lectura"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="77">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="78">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="111_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="77"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Com comentàvem en la pregunta anterior, la llibreria Moshi permet passar d'un document JSON directament a objectes Java o Kotlin.&lt;/p&gt;
&lt;p&gt;Ho mostrarem en dos exemples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Primer per a poder llegir Empresa.json, en què l'element arrel és un objecte Json.&lt;/li&gt;
&lt;li&gt;Després per a llegir Bicicas,json, en què l'element arrel és un array Json, cosa que ens complica un poc la lectura&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;titolet&quot;&gt;Cas 1: l'arrel és un objecte&lt;/p&gt;
&lt;p&gt;Tant en un com en l'altre primer haurem de crear les classes Java o Kotlin on anirà la lectura del fitxer. Aquestes classes hauran de tenir la mateixa estructura que en JSON, però adaptades a Java o Kotlin.&lt;/p&gt;
&lt;p&gt;Anem per tant a analitzar &lt;strong&gt;Empresa.json&lt;/strong&gt;, que ja el teníem creat i tenia aquesta estructura:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;{ &quot;empresa&quot; : &lt;br /&gt;    { &quot;empleats&quot;: &lt;br /&gt;           [&lt;br /&gt;        { &quot;num&quot;:1, &quot;nom&quot;: &quot;Andreu&quot;, &quot;departament&quot;: 10, &quot;edat&quot;: 32, &quot;sou&quot;: 1000.0}  ,&lt;br /&gt;        { &quot;num&quot;:2, &quot;nom&quot;: &quot;Bernat&quot;, &quot;departament&quot;: 20, &quot;edat&quot;: 28, &quot;sou&quot;: 1200.0}  ,&lt;br /&gt;        { &quot;num&quot;:3, &quot;nom&quot;: &quot;Clàudia&quot;, &quot;departament&quot;: 10, &quot;edat&quot;: 26, &quot;sou&quot;: 1100.0}  ,&lt;br /&gt;        { &quot;num&quot;:4, &quot;nom&quot;: &quot;Damià&quot;, &quot;departament&quot;: 10, &quot;edat&quot;: 40, &quot;sou&quot;: 1500.0}&lt;br /&gt;       ]&lt;br /&gt;    }&lt;br /&gt;}&lt;/p&gt;
&lt;p&gt;També teníem creada la classe Empleat, des de la pregunta 3 d'aquest tema, i tenia aquesta estructura. &lt;strong&gt;Empleat.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class Empleat (var num: Int, var nom: String, var departament: Int, var edat: Int, var sou: Double)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;L'havíem fet &lt;strong&gt;Serializable&lt;/strong&gt;, però això no importa en aquest exemple. El podem deixar tal qual estava.&lt;/p&gt;
&lt;p&gt;L'estuctura del fitxer JSON, ens marca que l'arrel és un &lt;strong&gt;objecte&lt;/strong&gt; que té un únic membre que es diu &lt;strong&gt;empresa&lt;/strong&gt;, que és un &lt;strong&gt;objecte&lt;/strong&gt; que té un únic membre anomenat &lt;strong&gt;empleats&lt;/strong&gt;, que és un &lt;strong&gt;array&lt;/strong&gt; d'objectes (que  coincideixen ja amb la classe &lt;strong&gt;Empleat&lt;/strong&gt;).&lt;/p&gt;
&lt;p&gt;Per tant ens hem de construir una &lt;strong&gt;classe&lt;/strong&gt; que que tinga una propietat anomenada &lt;strong&gt;empleats&lt;/strong&gt;, que siga un conjunt de &lt;strong&gt;Empleat&lt;/strong&gt;. Ens vindrà bé un &lt;strong&gt;List&lt;/strong&gt;. Com que la utilitzarem en més d'un exemple, la guardem en el fitxer de classe &lt;strong&gt;Empleats.kt&lt;/strong&gt;;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class Empleats(val empleats: List&amp;lt;Empleat&amp;gt; = listOf&amp;lt;Empleat&amp;gt;())&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I a partir d'aquesta hem de construir una altra classe que tinga una única propietat anomenada &lt;strong&gt;empresa&lt;/strong&gt; que siga de tipus &lt;strong&gt;Empleats&lt;/strong&gt;. Com que la utilitzarem en més d'un exemple, la guardem en el fitxer de classe &lt;strong&gt;Empresa.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class Empresa(val empresa: Empleats)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;La lectura del fitxer la fem a partir d'un objecte &lt;strong&gt;Moshi&lt;/strong&gt; al qual per mig del mètode &lt;strong&gt;adapter&lt;/strong&gt; definim quina classe volem llegir. Una vegada llegit ja podem utilitzar els objectes Java o Kotlin.&lt;/p&gt;
&lt;p&gt;Copieu el següent codi en el fitxer Kotlin &lt;strong&gt;Exemple_3_5_21_MOSHIAnalitzarEmpresa.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import com.squareup.moshi.*
import java.io.File

fun main (args: Array&amp;lt;String&amp;gt;){
    val json = File(&quot;Empresa.json&quot;).readText()

    val moshi = Moshi.Builder().build()
    val adapter = moshi.adapter(Empresa::class.java)
    val empresa = adapter.fromJson(json)

    val llEmpleats= empresa!!.empresa.empleats
    println(&quot;Hi ha &quot; + llEmpleats.size + &quot; empleats:&quot;)
    for (e in llEmpleats)
        println(e.nom + &quot; (&quot; + e.sou  +&quot;)&quot;)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="78"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="79"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="38"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="79"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="80">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="81">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="112_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="80"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Cas 2: l'arrel és un array&lt;/p&gt;
&lt;p&gt;En cas que l'arrel del fitxer JSON siga un array, se'ns complica un poc, perquè en el moment de definir quina classe volem llegir, no és en realitat una classe, sinó un col·lecció (un List havíem vist que és el que utilitzàvem).&lt;/p&gt;
&lt;p&gt;Moshi utilitza una tècnica per a poder fer la lectura de l'array, que consisteix a crear-se un tipus de dades que seria la concatenació d'un List i de la classe de la qual volem l'array. Ho veurem molt millor en l'exemple.&lt;/p&gt;
&lt;p&gt;L'exemple serà per a llegir el fitxer Bicicas.json, que recordem que començava per un array:&lt;/p&gt;
&lt;p class=&quot;codi2&quot; style=&quot;margin-left: 60px;&quot;&gt;[&lt;br /&gt;  {&quot;ocupacion&quot;:&lt;br /&gt;    [  {&quot;id&quot;:&quot;01&quot;,&quot;punto&quot;:&quot;UJI - FCHS&quot;,&quot;puestos&quot;:28,&quot;ocupados&quot;:11,&quot;latitud&quot;:&quot;39.99533&quot;,&quot;longitud&quot;:&quot;-0.06999&quot;,&lt;br /&gt;       &quot;porcentajeAltaOcupacion&quot;:&quot;80&quot;,&quot;porcentajeBajaOcupacion&quot;:&quot;20&quot;},&lt;br /&gt;      {&quot;id&quot;:&quot;02&quot;,&quot;punto&quot;:&quot;ESTACIÓN DE FERROCARRIL Y AUTOBUSES&quot;,&quot;puestos&quot;:28,&quot;ocupados&quot;:8,&quot;latitud&quot;:&quot;39.98765&quot;,&lt;br /&gt;       &quot;longitud&quot;:&quot;-0.05281&quot;,&quot;porcentajeAltaOcupacion&quot;:&quot;80&quot;,&quot;porcentajeBajaOcupacion&quot;:&quot;20&quot;},&lt;br /&gt;      {&quot;id&quot;:&quot;03&quot;,&quot;punto&quot;:&quot;PLAZA DE PESCADERÍA&quot;,&quot;puestos&quot;:28,&quot;ocupados&quot;:13,&quot;latitud&quot;:&quot;39.98580&quot;,&quot;longitud&quot;:&quot;-0.03798&quot;,&lt;br /&gt;       &quot;porcentajeAltaOcupacion&quot;:&quot;80&quot;,&quot;porcentajeBajaOcupacion&quot;:&quot;20&quot;},&lt;br /&gt;      ...&lt;br /&gt;    ]&lt;br /&gt;  }&lt;br /&gt;]&lt;/p&gt;
&lt;p&gt;Era un array d'un únic element , però en definitiva un array. Només ens interessa el primer element, que serà un objecte amb un únic membre anomenat &lt;strong&gt;ocupacion&lt;/strong&gt;, que és un array on cada element és un objecte corresponent a una estació, amb les seues característiques com a parelles clau-valor.&lt;/p&gt;
&lt;p&gt;Definim per tant la classe &lt;strong&gt;Estacio.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class Estacio(
	val id: Long, val punto: String, val puestos: Int,
	val ocupados: Int, val latitud: Double, val longitud: Double,
	val porcentajeAltaOcupacion: Int, val porcentajeBajaOcupacion: Int
)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I la classe &lt;strong&gt;Estacions.kt&lt;/strong&gt; &lt;strong&gt;&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class Estacions(val ocupacion: List&amp;lt;Estacio&amp;gt; = listOf&amp;lt;Estacio&amp;gt;())&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Copieu el següent codi en un fitxer Kotlin anomenat &lt;strong&gt;Exemple_3_5_22_MOSHIAnalitzarBicicas.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import com.squareup.moshi.*
import java.io.File

fun main(args: Array&amp;lt;String&amp;gt;) {
    val json = File(&quot;Bicicas.json&quot;).readText()

    val moshi = Moshi.Builder().build()
    val llistaTipus = Types.newParameterizedType(List::class.java, Estacions::class.java)
    val adapter: JsonAdapter&amp;lt;List&amp;lt;Estacions&amp;gt;&amp;gt; = moshi.adapter(llistaTipus)
    val bicicas = adapter.fromJson(json)

    val estacions = bicicas!!.get(0).ocupacion
    println(&quot;Hi ha &quot; + estacions.size + &quot; estacions:&quot;)
    for (e in estacions)
        println(&quot;&quot; + e.id + &quot;: &quot; + e.punto + &quot; (&quot; + e.ocupados + &quot;/&quot; + e.puestos + &quot;)&quot;)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="81"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="79"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="39"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="79"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="28"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:5.-%20Documents%20JSON:5.3%20Driver%20Moshi:5.3.1%20Lectura"></string>
              <string role="key" value="parent"></string>
              <reference key="76"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="84">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.3.2 Escriptura"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="82">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="83">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="113_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="82"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;També farem 2 exemples d'escriptura, el d'Empleats i el de Bicicas, els mateixos que en la pregunta 5.2.2&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Cas 1: Empleats&lt;/p&gt;
&lt;p&gt;Per a &lt;strong&gt;Empleats.json&lt;/strong&gt; aquest és l'estructura que volem aconseguir:&lt;/p&gt;
&lt;p class=&quot;codi2&quot; style=&quot;margin-left: 60px;&quot;&gt;{ &quot;empresa&quot;: &lt;br /&gt;   { &quot;empleat&quot;: &lt;br /&gt;     [  {&lt;br /&gt;           &quot;num&quot;: &quot;1&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Andreu&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;10&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;32&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1000.0&quot;&lt;br /&gt;        },&lt;br /&gt;        {&lt;br /&gt;           &quot;num&quot;: &quot;2&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Bernat&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;20&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;28&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1200.0&quot;&lt;br /&gt;        },&lt;br /&gt;        {&lt;br /&gt;           &quot;num&quot;: &quot;3&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Clàudia&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;10&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;26&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1100.0&quot;&lt;br /&gt;        },&lt;br /&gt;        {&lt;br /&gt;           &quot;num&quot;: &quot;4&quot;,&lt;br /&gt;           &quot;nom&quot;: &quot;Damià&quot;,&lt;br /&gt;           &quot;departament&quot;: &quot;10&quot;,&lt;br /&gt;           &quot;edat&quot;: &quot;40&quot;,&lt;br /&gt;           &quot;sou&quot;: &quot;1500.0&quot;&lt;br /&gt;        }&lt;br /&gt;     ]&lt;br /&gt;   }&lt;br /&gt;}&lt;/p&gt;
&lt;p&gt;L'estructura de les classes serà la mateixa que en el cas de la lectura, però ara les dades estaran definides en 4 arrays. A partir dels arrays inicialitzarem els objectes Kotlin, i quan ho tinguem tot ple passarem a JSON.&lt;/p&gt;
&lt;p&gt;NO HEM DE DEFINIR LES CLASSES, ja que les tenim definides des punt 5.3.1. Les posem ací únicament per a il·lustrar:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre class=&quot;  language-java&quot;&gt;&lt;code class=&quot;  language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Empleat&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;var num&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Int&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; var nom&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; var departament&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Int&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; var edat&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Int&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; var sou&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Double&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre class=&quot;  language-java&quot;&gt;&lt;code class=&quot;  language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Empleats&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;val empleats&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Empleat&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; listOf&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Empleat&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre class=&quot;  language-java&quot;&gt;&lt;code class=&quot;  language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Empresa&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;val empresa&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Empleats&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Aleshores, inicialitzem els objectes a partir de les dades que tenim en els 4 arrays, i després &lt;strong&gt;guardem &lt;/strong&gt;en JSON. Mireu que la definició de les classes de &lt;strong&gt;Moshi&lt;/strong&gt; és la mateixa, però ara utilitzem el mètode &lt;strong&gt;toJson()&lt;/strong&gt; per a passar d'objectes Kotlin a JSON. Obtenim un String que és la cadena JSON, i senzillament l'escrivim en un fitxer.&lt;/p&gt;
&lt;p&gt;Copieu el següent codi en un fitxer Kotlin anomenat &lt;strong&gt;Exemple_3_5_23_MOSHIEscriureEmpleats.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import com.squareup.moshi.*
import java.io.File

fun main (args: Array&amp;lt;String&amp;gt;){
    val noms = arrayOf(&quot;Andreu&quot;, &quot;Bernat&quot;, &quot;Clàudia&quot;, &quot;Damià&quot;)
    val departaments = arrayOf(10, 20, 10, 10)
    val edats = arrayOf(32, 28, 26, 40)
    val sous = arrayOf(1000.0, 1200.0, 1100.0, 1500.0)

    val empleats = arrayListOf&amp;lt;Empleat&amp;gt;()
    for (i in 0..3)
        empleats.add(Empleat((i+1),noms[i],departaments[i],edats[i],sous[i]))

    val empresa = Empresa(Empleats(empleats))

    val moshi = Moshi.Builder().build()
    val adapter = moshi.adapter(Empresa::class.java)
    val json = adapter.toJson(empresa)

    File(&quot;Empleats2.json&quot;).writeText(json)

}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="83"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="84"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="40"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="84"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="85">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="86">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="112_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="85"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Cas 2: Bicicas&lt;/p&gt;
&lt;p&gt;Farem el mateix exercici que en l'apartat 5.2.2, però ara utilitzant la llibreria &lt;strong&gt;Moshi&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Voldrem aconseguir aquesta estructura i guardar-la en el fitxer&lt;/p&gt;
&lt;p class=&quot;codi2&quot; style=&quot;margin-left: 60px;&quot;&gt;{ &quot;bicicas&quot;:&lt;br /&gt;    [ {&quot;num&quot;:&quot;01&quot;,&quot;nom&quot;:&quot;UJI - FCHS&quot;,&quot;llocs&quot;:28,&quot;ocupats&quot;:11,&quot;lliures&quot;:17},&lt;br /&gt;      {&quot;num&quot;:&quot;02&quot;,&quot;nom&quot;:&quot;ESTACIÓN DE FERROCARRIL Y AUTOBUSES&quot;,&quot;llocs&quot;:28,&quot;ocupats&quot;:8,&quot;lliures&quot;:20},&lt;br /&gt;      {&quot;num&quot;:&quot;03&quot;,&quot;nom&quot;:&quot;PLAZA DE PESCADERÍA&quot;,&quot;llocs&quot;:28,&quot;ocupats&quot;:13,&quot;lliures&quot;:15},&lt;br /&gt;      ...&lt;br /&gt;    ]&lt;br /&gt;}&lt;/p&gt;
&lt;p&gt;Tindrem per una banda l'estructura d'origen, per a la qual utilitzem les classes ja definides en l'apartat 5.3.1, és a dir, per a llegir el fitxer Bicicas.json original fem el mateix que l'altra vegada, per tant serà copiar les primeres sentències del programa &lt;strong&gt;Exemple_3_5_22_MOSHIAnalitzarBicicas.kt&lt;/strong&gt; .&lt;/p&gt;
&lt;p&gt;A partir dels objectes inicialitzats amb la lectura de Bicicas.json, construirem els objectes que ens serviran per a l'escriptura. L'estructura d'aquestes classes que ens serviran per a l'escriptura seran:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class EstDesti (val num: Int, val nom: String, val llocs: Int, val ocupats: Int, val lliures: Int)

class Bicicas2 (val bicicas: List&amp;lt;EstDesti&amp;gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Per comoditat, com que només anem a utilitzar-les en aquesta ocasió, les definirem en el mateix fitxer del programa.&lt;/p&gt;
&lt;p&gt;Observeu com senzillament llegim passant a les classes d'entrada, convertim a les classes d'eixida, i utilitzem aquestes últimes per escriure el fitxer.&lt;/p&gt;
&lt;p&gt;Copieu el següent codi en el fitxer Kotlin anomenat &lt;strong&gt;Exemple_3_5_24_MOSHIEscriureBicicas.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import com.squareup.moshi.*
import java.io.File

class EstDesti (val num: Int, val nom: String, val llocs: Int, val ocupats: Int, val lliures: Int)

class Bicicas2 (val bicicas: List&amp;lt;EstDesti&amp;gt;)

fun main(args: Array&amp;lt;String&amp;gt;) {
    val json = File(&quot;Bicicas.json&quot;).readText()

    val moshi = Moshi.Builder().build()
    val llistaTipus = Types.newParameterizedType(List::class.java, Estacions::class.java)
    val adapter: JsonAdapter&amp;lt;List&amp;lt;Estacions&amp;gt;&amp;gt; = moshi.adapter(llistaTipus)
    val estacions = adapter.fromJson(json).get(0).ocupacion

    val llistaEstDesti = arrayListOf&amp;lt;EstDesti&amp;gt;()
    val bicicas2 = Bicicas2(llistaEstDesti)
    for (e in estacions)
        llistaEstDesti.add(EstDesti(e.id.toInt(),e.punto,e.puestos,e.ocupados,e.puestos-e.ocupados))

    val adapter2 = moshi.adapter(Bicicas2::class.java)
    val json2 = adapter2.toJson(bicicas2)

    File(&quot;Bicicas2.json&quot;).writeText(json2)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Segurament aquesta estructura és la més coherent. Amb la finalitat únicament d'escriure un JSON que té com a arrel un array i no un objecte, anem a ferun altre exemple en el qual guardarem en un fitxer aquesta estructura:&lt;/p&gt;
&lt;p class=&quot;codi2&quot; style=&quot;margin-left: 60px;&quot;&gt;[&lt;br /&gt;    {&quot;num&quot;:&quot;01&quot;,&quot;nom&quot;:&quot;UJI - FCHS&quot;,&quot;llocs&quot;:28,&quot;ocupats&quot;:11,&quot;lliures&quot;:17},&lt;br /&gt;    {&quot;num&quot;:&quot;02&quot;,&quot;nom&quot;:&quot;ESTACIÓN DE FERROCARRIL Y AUTOBUSES&quot;,&quot;llocs&quot;:28,&quot;ocupats&quot;:8,&quot;lliures&quot;:20},&lt;br /&gt;    {&quot;num&quot;:&quot;03&quot;,&quot;nom&quot;:&quot;PLAZA DE PESCADERÍA&quot;,&quot;llocs&quot;:28,&quot;ocupats&quot;:13,&quot;lliures&quot;:15},&lt;br /&gt;      ...&lt;br /&gt;]&lt;/p&gt;
&lt;p&gt;En aquesta ocasió tenim només un array d'objectes.&lt;/p&gt;
&lt;p&gt;L'única estructura d'eixida que ens cal és la classe &lt;strong&gt;EstDesti&lt;/strong&gt;, ja definida en l'exercici anterior, i per tant ara no caldrà definir-la. Només hem d'anar amb compte amb l'estructura d'eixida, que ara no serà una classe sinó una combinació de &lt;strong&gt;List&lt;/strong&gt; i &lt;strong&gt;EstDesti&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Copieu el següent codi en el fitxer Kotlin &lt;strong&gt;Exemple_3_5_25_MOSHIEscriureBicicas3.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exemples

import com.squareup.moshi.*
import java.io.File

fun main(args: Array&amp;lt;String&amp;gt;) {
    val json = File(&quot;Bicicas.json&quot;).readText()

    val moshi = Moshi.Builder().build()
    val llistaTipus = Types.newParameterizedType(List::class.java, Estacions::class.java)
    val adapter: JsonAdapter&amp;lt;List&amp;lt;Estacions&amp;gt;&amp;gt; = moshi.adapter(llistaTipus)
    val estacions = adapter.fromJson(json).get(0).ocupacion

    val llistaEstDesti = arrayListOf&amp;lt;EstDesti&amp;gt;()
    for (e in estacions)
        llistaEstDesti.add(EstDesti(e.id.toInt(),e.punto,e.puestos,e.ocupados,e.puestos-e.ocupados))

    val llistaTipusDesti = Types.newParameterizedType(List::class.java, EstDesti::class.java)
    val adapter2: JsonAdapter&amp;lt;List&amp;lt;EstDesti&amp;gt;&amp;gt; = moshi.adapter(llistaTipusDesti)
    val json2 = adapter2.toJson(llistaEstDesti)

    File(&quot;Bicicas3.json&quot;).writeText(json2)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="86"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="84"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="43"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="84"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="31"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:5.-%20Documents%20JSON:5.3%20Driver%20Moshi:5.3.2%20Escriptura"></string>
              <string role="key" value="parent"></string>
              <reference key="76"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="89">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Exercicis"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="87">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 3_1"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="88">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="41_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="87"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;En el projecte anomenat &lt;strong&gt;Tema3&lt;/strong&gt;, crea't un paquet anomenat &lt;strong&gt;exercicis&lt;/strong&gt; on col·locarem tot el relatiu als exercicis d'aquest tema. Copia't dins del projecte el fitxer &lt;strong&gt;Rutes.dat&lt;/strong&gt; que us passarà el professor. En ell tenim dades prèviament guardades que seran unes &lt;strong&gt;rutes&lt;/strong&gt; consistents en una sèrie de punts amb una descripció. Cada punt seran unes coordenades (com en un mapa).&lt;/p&gt;
&lt;p&gt;L'estructura de les dades guardades és la següent&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nom de la ruta (string)&lt;/li&gt;
&lt;li&gt;desnivell (int)&lt;/li&gt;
&lt;li&gt;desnivell acumulat (int)&lt;/li&gt;
&lt;li&gt;número de punts (int)&lt;/li&gt;
&lt;li&gt;Per cada punt:
&lt;ul&gt;
&lt;li&gt;nom (string)&lt;/li&gt;
&lt;li&gt;latitud (double)&lt;/li&gt;
&lt;li&gt;longitud (double)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Observa que la quarta dada és un enter amb el número de punts de la ruta.&lt;/p&gt;
&lt;p&gt;Fes un programa (amb &lt;strong&gt;fun main()&lt;/strong&gt;) en el fitxer Kotlin &lt;strong&gt;Ex3_1_LlegirRutesSerial.kt&lt;/strong&gt; que agafe les dades del fitxer (hi ha 2 rutes, però ho heu de fer genèric per a un número indeterminat de rutes) i les traga per pantalla amb aquest aspecte:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;Ruta: Pujada a Penyagolosa&lt;br /&gt;Desnivell: 530&lt;br /&gt;Desnivell acumulat: 530&lt;br /&gt;Té 5 punts&lt;br /&gt;Punt 1: Sant Joan (40.251036,-0.354223)&lt;br /&gt;Punt 2: Encreuament (40.25156,-0.352507)&lt;br /&gt;Punt 3: Barranc de la Pegunta (40.247318,-0.351713)&lt;br /&gt;Punt 4: El Corralico (40.231708,-0.348859)&lt;br /&gt;Punt 5: Penyagolosa (40.222632,-0.350339)&lt;br /&gt;&lt;br /&gt;Ruta: La Magdalena&lt;br /&gt;Desnivell: 51&lt;br /&gt;Desnivell acumulat: 84&lt;br /&gt;Té 7 punts&lt;br /&gt;Punt 1: Primer Molí (39.99385,-0.032941)&lt;br /&gt;Punt 2: Segon Molí (39.99628,-0.029427)&lt;br /&gt;Punt 3: Caminàs (40.00513,-0.022569)&lt;br /&gt;Punt 4: Riu Sec (40.006765,-0.02237)&lt;br /&gt;Punt 5: Sant Roc (40.017906,-0.02289)&lt;br /&gt;Punt 6: Explanada (40.034048,-0.00633)&lt;br /&gt;Punt 7: La Magdalena (40.034519,-0.005856)&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="88"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="89"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="17"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="89"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="90">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 3_2"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="91">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="42_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="90"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;box generalbox center clearfix&quot;&gt;
&lt;div class=&quot;no-overflow&quot;&gt;&lt;strong&gt;&lt;/strong&gt;Construeix les següents classes:
&lt;p&gt;&lt;span style=&quot;font-size: large;&quot;&gt;&lt;strong&gt;Coordenades&lt;/strong&gt;&lt;/span&gt;, que derivarà de &lt;strong&gt;Serializable&lt;/strong&gt; (i que és convenient posar-li el número de versió per defecte: &lt;strong&gt;private const val serialVersionUID: Long = 1&lt;/strong&gt;). Podeu consultar la classe Ruta que us passe per veure la manera de derivar de Serializable i posar-li número de sèrie.&lt;/p&gt;
&lt;p&gt;Contindrà:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;latitud&lt;/strong&gt; (double)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;longitud&lt;/strong&gt; (double)&lt;/li&gt;
&lt;/ul&gt;
No caldrà contructor, ni getters ni setters, ja que Kotlin els genera automàticament&lt;br /&gt;&lt;hr /&gt;
&lt;p&gt;&lt;span style=&quot;font-size: large;&quot;&gt;&lt;strong&gt;PuntGeo&lt;/strong&gt;&lt;/span&gt;, que derivarà de &lt;strong&gt;Serializable&lt;/strong&gt; (i que és convenient posar-li el número de versió per defecte: &lt;strong&gt;private const val serialVersionUID: Long = 1&lt;/strong&gt;). Podeu consultar la classe Ruta que us passe per veure la manera de derivar de Serializable i posar-li número de sèrie.&lt;/p&gt;
&lt;p&gt;Contindrà:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;nom&lt;/strong&gt; (String)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;coord&lt;/strong&gt; (Coordenades)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;span style=&quot;font-size: large;&quot;&gt;&lt;strong&gt;Ruta&lt;/strong&gt;&lt;/span&gt; . Aquesta classe us la passarà el professor.&lt;/p&gt;
&lt;p&gt;També implementa &lt;strong&gt;Serializable&lt;/strong&gt; i conté:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;nom&lt;/strong&gt; (String)&lt;strong&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;desnivell&lt;/strong&gt; (int)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;desnivellAcumulat&lt;/strong&gt; (int)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;llistaDePunts&lt;/strong&gt;: un ArrayList de PuntGeo&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;margin-left: 30px;&quot;&gt;Observa com per a més comoditat té els mètodes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;addPunt(PuntGeo)&lt;/strong&gt;, que afegirà un nou PuntGeo a la llista&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getPunt(int)&lt;/strong&gt;, al qual se li passa l'índex del punt que es vol i torna tot aquest punt&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getPuntNom(int)&lt;/strong&gt;, al qual se li passa l'índex del punt que es vol i tornarà el seu nom&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getPuntLatitud(int)&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;, al qual se li passa l'índex del punt que es vol i tornarà la seua latitud&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getPuntLongitud(int)&lt;/strong&gt;, al qual se li passa l'índex del punt que es vol i tornarà la seua longitud&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;size()&lt;/strong&gt;, que ens dóna el número de punts guardats en la llista.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;L'únic que has de fer en aquesta classe és:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Fes un mètode nou en la classe &lt;strong&gt;Ruta&lt;/strong&gt; anomenat &lt;strong&gt;mostraRuta()&lt;/strong&gt;, que mostre el contingut de la ruta amb aquest aspecte:&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;codi2&quot; style=&quot;margin-left: 30px;&quot;&gt;Ruta: Pujada a Penyagolosa&lt;br /&gt;Desnivell: 530&lt;br /&gt;Desnivell Acumulat: 530&lt;br /&gt;Té 5 punts&lt;br /&gt;Punt 1: Sant Joan (40.251036,-0.354223)&lt;br /&gt;Punt 2: Encreuament (40.25156,-0.352507)&lt;br /&gt;Punt 3: Barranc de la Pegunta (40.247318,-0.351713)&lt;br /&gt;Punt 4: El Corralico (40.231708,-0.348859)&lt;br /&gt;Punt 5: Penyagolosa (40.222632,-0.350339)&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;En un fitxer Kotlin anomenat &lt;strong&gt;Ex3_2_PassarRutesSerialObj.kt &lt;/strong&gt;, fes el programa que passe del fitxe &lt;strong&gt;Rutes.dat&lt;/strong&gt; al fitxer &lt;strong&gt;Rutes.obj&lt;/strong&gt;. És a dir, has d'anar agafant la informació del fitxer &lt;strong&gt;Rutes.dat&lt;/strong&gt; , guardar la informació en un objecte &lt;strong&gt;Ruta&lt;/strong&gt;, visualitzar la seua informació amb &lt;strong&gt;mostraRuta() &lt;/strong&gt; i per últim guardar la informació de l'objecte en un fitxer anomenat &lt;strong&gt;Rutes.obj&lt;/strong&gt;. I això fins el final de fitxer (hi ha 2 rutes)&lt;/p&gt;
&lt;p&gt;En un fitxer Kotlin anomenat &lt;strong&gt;Ex3_2_LlegirRutesObj.kt&lt;/strong&gt;, llig les rutes guardades en el fitxer &lt;strong&gt;Rutes.obj&lt;/strong&gt; i mostra-les per pantalla utilitzant el mètode &lt;strong&gt;mostraRuta()&lt;/strong&gt;&lt;strong&gt;&lt;br /&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="91"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="89"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="47"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="89"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="92">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 3_3"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="93">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="41_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="92"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Fes un programa en el fitxer &lt;strong&gt;Ex3_3_PassarRutesObjXML.kt&lt;/strong&gt; (amb main) que passe el fitxer &lt;strong&gt;Rutes.obj&lt;/strong&gt; a un fitxer XML anomenat &lt;strong&gt;Rutes.xml &lt;/strong&gt;amb aquest aspecte. Els punts suspensius indiquen que hi ha més d'un punt en cada ruta, i que hi ha més d'una ruta&lt;/p&gt;
&lt;div class=&quot;codi2&quot;&gt;
&lt;div&gt;&amp;lt;rutes&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;ruta&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;nom&amp;gt;Pujada a Penyagolosa&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;desnivell&amp;gt;530&amp;lt;/desnivell&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;desnivellAcumulat&amp;gt;530&amp;lt;/desnivellAcumulat&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;punts&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;punt num=&quot;1&quot;&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;nom&amp;gt;Sant Joan&amp;lt;/nom&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;latitud&amp;gt;...&amp;lt;/latitud&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 120px;&quot;&gt;&amp;lt;longitud&amp;gt;...&amp;lt;/longitud&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;&amp;lt;/punt&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 90px;&quot;&gt;...&lt;/div&gt;
&lt;div style=&quot;margin-left: 60px;&quot;&gt;&amp;lt;/punts&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;&amp;lt;/ruta&amp;gt;&lt;/div&gt;
&lt;div style=&quot;margin-left: 30px;&quot;&gt;...&lt;/div&gt;
&lt;div&gt;&amp;lt;/rutes&amp;gt;&lt;/div&gt;
&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="93"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="89"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="19"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="89"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="94">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 3_4"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="95">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="41_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="94"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Fer una aplicació gràfica que llegirà el fitxer &lt;strong&gt;Rutes.xml&lt;/strong&gt; per a que apareguen els noms de les rutes en un JComboBox. Quan se seleccione una, ha d'aparèixer la llista de punts (nom, latitud i longitud) en un JTextArea. L'aspecte podria ser el següent:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T3_Ex3_4_1.png&quot; width=&quot;450&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Hi ha dos mètodes per a saber quin és l'element seleccionat del &lt;strong&gt;JComboBox&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;getSelectedItem() &lt;/strong&gt;torna un String amb l'element seleccionat&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getSelectedIndex() &lt;/strong&gt;torna un enter amb el número d'ordre de l'element seleccionat (0 per al primer; 1 per al segon; ...)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Observeu com en aquest cas ens convé &lt;strong&gt;getSelectedIndex()&lt;/strong&gt;, ja que el número d'ordre de l'element seleccionat serà el mateix que el número d'ordre de la ruta que busquem en el NodeList &lt;strong&gt;doc.getElementsByTagName(&quot;ruta&quot;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;L'esquelet del programa seria aquest. Copieu-lo en un fitxer Kotlin anomenat &lt;strong&gt;Ex3_4_VisRutesXML.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import javax.swing.*
import java.awt.*
import org.w3c.dom.Document
import org.w3c.dom.Element
import javax.xml.parsers.DocumentBuilderFactory


class Finestra : JFrame() {
	
	init {
		var doc: Document
		// sentències per a omplir doc
		
		defaultCloseOperation = JFrame.EXIT_ON_CLOSE
		setTitle(&quot;Punts d'una ruta&quot;)
		setSize(400, 300)
		setLayout(BorderLayout())
		
		val panell1 = JPanel(FlowLayout())
		val panell2 = JPanel(BorderLayout())
		add(panell1,BorderLayout.NORTH)
		add(panell2,BorderLayout.CENTER)
		
		val llistaRutes = arrayListOf&amp;lt;String&amp;gt;()
		// sentències per a omplir l'ArrayList anterior amb el nom de les rutes
		
		val combo = JComboBox(llistaRutes.toArray())
		panell1.add(combo)
		
		panell2.add(JLabel(&quot;Llista de punts de la ruta:&quot;),BorderLayout.NORTH)
		val area = JTextArea()
		panell2.add(area)
		
		combo.addActionListener{
			// accions quan s'ha seleccionat un element del combobox,
			// i que han de consistir en omplir el JTextArea
			
		}
	}
}

fun main(args: Array&amp;lt;String&amp;gt;) {
	EventQueue.invokeLater {
		Finestra().isVisible = true
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="2806"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="20_41_2.60"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="96">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="94"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T3_Ex3_4_1.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmphE1SCl/T3_Ex3_4_1.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="479b29cdb873b0a2e1503a3b1760b044"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="95"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="95"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="61"></int>
              <string role="key" value="parentNode"></string>
              <reference key="89"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="20"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="89"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="96"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="97">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 3_5"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="98">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="41_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="97"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;iDevice_inner&quot;&gt;
&lt;div class=&quot;iDevice_content_wrapper&quot;&gt;
&lt;div id=&quot;ta19_41_2&quot; class=&quot;block iDevice_content&quot;&gt;
&lt;p&gt;Fer un programa en el fitxer Kotlin &lt;strong&gt;Ex3_5_PassarRutesObjJSON.kt&lt;/strong&gt; que passe el fitxer &lt;strong&gt;Rutes.obj&lt;/strong&gt; a un fitxer JSON &lt;strong&gt;Rutes.json &lt;/strong&gt;amb aquest aspecte:&lt;/p&gt;
&lt;div style=&quot;margin-left: 60px;&quot; class=&quot;codi2&quot;&gt;
&lt;pre class=&quot;data&quot;&gt;{
  &quot;rutes&quot;: [
    {
      &quot;nom&quot;: &quot;Pujada a Penyagolosa&quot;, &lt;br /&gt;      &quot;desnivell&quot;: 530,
      &quot;desnivellAcumulat&quot;: 530,
      &quot;llistaDePunts&quot;: [
        {
          &quot;nom&quot;: &quot;Sant Joan&quot;,&lt;br /&gt;          &quot;coord&quot;: {
            &quot;latitud&quot;: 40.251036,
            &quot;longitud&quot;: -0.354223
          }
        },
        ...&lt;br /&gt;       ]
    },
    ...&lt;br /&gt;   ]&lt;br /&gt;}&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Com que ja tenim creades les classes &lt;strong&gt;Ruta&lt;/strong&gt;, &lt;strong&gt;PuntGeo&lt;/strong&gt; i &lt;strong&gt;Coord&lt;/strong&gt;, el més còmode serà utilitzar &lt;strong&gt;Moshi&lt;/strong&gt;. Tan sols ens farà falta una classe que ho englobe tot:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class Rutes(var rutes: MutableList&amp;lt;Ruta&amp;gt; = mutableListOf&amp;lt;Ruta&amp;gt;())&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="98"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="89"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="28"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="89"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="99">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 3_6"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="100">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="42_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="99"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Replicar l'exercici 3_4, però ara llegint del fitxer &lt;strong&gt;Rutes.json&lt;/strong&gt;, en compte de &lt;strong&gt;Rutes.xml&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Fer una aplicació gràfica que llegirà el fitxer &lt;strong&gt;Rutes.json &lt;/strong&gt;i que aparega el nom de les rutes en un JComboBox. Quan se seleccione una, ha d'aparèixer la llista de punts (nom, latitud i longitud) en un JTextArea. L'aspecte podria ser el següent:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;border: 1px solid black;&quot; src=&quot;resources/T3_Ex6.png&quot; width=&quot;450&quot; height=&quot;328&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Hi ha dos mètodes per a saber quin és l'element seleccionat del &lt;strong&gt;JComboBox&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;getSelectedItem() &lt;/strong&gt;torna un String amb l'element seleccionat&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getSelectedIndex() &lt;/strong&gt;torna un enter amb el número d'ordre de l'element seleccionat (0 per al primer; 1 per al segon; ...)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Observeu com en aquest cas, igual que en l'exercici 3_4, ens convé &lt;strong&gt;getSelectedIndex()&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;I com que ja tenim definides les classes, ens convé utilitzar &lt;strong&gt;Moshi&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Aquest seria l'esquelet del programa. Copieu el següent codi en un fitxer Kotlin anomenat &lt;strong&gt;Ex3_6_VisRutaJSON.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import javax.swing.*
import java.awt.*
import com.squareup.moshi.Moshi
import java.io.File

class FinestraJSON : JFrame() {

	init {
		var llistaRutes: ArrayList&amp;lt;Ruta&amp;gt;
		// sentències per a omplir llistaRutes

		defaultCloseOperation = JFrame.EXIT_ON_CLOSE
		setTitle(&quot;JSON: Punts d'una ruta&quot;)
		setSize(400, 300)
		setLayout(BorderLayout())

		val panell1 = JPanel(FlowLayout())
		val panell2 = JPanel(BorderLayout())
		add(panell1, BorderLayout.NORTH)
		add(panell2, BorderLayout.CENTER)

		var nomsLlistaRutes = arrayListOf&amp;lt;String&amp;gt;()
		// sentències per a omplir l'ArrayList anterior amb el nom de les rutes

		val combo = JComboBox(nomsLlistaRutes.toArray())
		panell1.add(combo)

		panell2.add(JLabel(&quot;Llista de punts de la ruta:&quot;), BorderLayout.NORTH)
		val area = JTextArea()
		panell2.add(area)

		combo.addActionListener {
			// accions quan s'ha seleccionat un element del combobox,
			// i que han de consistir en omplir el JTextArea

		}
	}
}

fun main(args: Array&amp;lt;String&amp;gt;) {
	EventQueue.invokeLater {
		FinestraJSON().isVisible = true
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="2802"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="29_42_2.52"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="101">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="99"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T3_Ex6.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmphE1SCl/T3_Ex6.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="36c72e53c21c3ceef3fe5d8f67c5f5a3"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="100"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="100"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="53"></int>
              <string role="key" value="parentNode"></string>
              <reference key="89"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="29"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="89"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="101"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="102">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 3_7 (voluntari)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="103">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="41_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="102"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Per a practicar un poquet més, anem a fer un altre exercici per a construir un fitxer JSON però ara amb la llibreria &lt;strong&gt;org.json&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Feu un programa en el fitxer Kotlin anomenat  &lt;strong&gt;Ex3_7_PassarCotxesXMLJSON.kt&lt;/strong&gt;,&lt;strong&gt; &lt;/strong&gt;que haurà de passar el fitxer &lt;strong&gt;cotxes.xml&lt;/strong&gt; al fitxer &lt;strong&gt;cotxes.json&lt;/strong&gt;. No tenim creades les classes dels cotxes, i per això utilitzarem la llibreria &lt;strong&gt;org.json&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Aquest és el fitxer &lt;strong&gt;cotxes.xml&lt;/strong&gt;:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;&amp;lt;oferta&amp;gt;&lt;br /&gt;  &amp;lt;vehiculo&amp;gt;&lt;br /&gt;    &amp;lt;marca&amp;gt;ford&amp;lt;/marca&amp;gt;&lt;br /&gt;    &amp;lt;modelo color=&quot;gris&quot;&amp;gt;focus&amp;lt;/modelo&amp;gt;&lt;br /&gt;    &amp;lt;motor combustible=&quot;gasolina&quot;&amp;gt;duratorc 1.4&amp;lt;/motor&amp;gt;&lt;br /&gt;    &amp;lt;matricula&amp;gt;1234AAA&amp;lt;/matricula&amp;gt;&lt;br /&gt;    &amp;lt;kilometros&amp;gt;12500&amp;lt;/kilometros&amp;gt;&lt;br /&gt;    &amp;lt;precio_inicial&amp;gt;12000&amp;lt;/precio_inicial&amp;gt;&lt;br /&gt;    &amp;lt;precio_oferta&amp;gt;10000&amp;lt;/precio_oferta&amp;gt;&lt;br /&gt;    &amp;lt;extra valor=&quot;250&quot;&amp;gt;pintura metalizada&amp;lt;/extra&amp;gt;&lt;br /&gt;    &amp;lt;extra valor=&quot;300&quot;&amp;gt;llantas&amp;lt;/extra&amp;gt;&lt;br /&gt;    &amp;lt;foto&amp;gt;11325.jpg&amp;lt;/foto&amp;gt;&lt;br /&gt;    &amp;lt;foto&amp;gt;11326.jpg&amp;lt;/foto&amp;gt;&lt;br /&gt;  &amp;lt;/vehiculo&amp;gt;&lt;br /&gt;  &amp;lt;vehiculo&amp;gt;&lt;br /&gt;    &amp;lt;marca&amp;gt;ford&amp;lt;/marca&amp;gt;&lt;br /&gt;    &amp;lt;modelo color=&quot;gris&quot;&amp;gt;focus&amp;lt;/modelo&amp;gt;&lt;br /&gt;    &amp;lt;motor combustible=&quot;diesel&quot;&amp;gt;duratorc 2.0&amp;lt;/motor&amp;gt;&lt;br /&gt;    &amp;lt;matricula&amp;gt;1235AAA&amp;lt;/matricula&amp;gt;&lt;br /&gt;    &amp;lt;kilometros&amp;gt;125000&amp;lt;/kilometros&amp;gt;&lt;br /&gt;    &amp;lt;precio_inicial&amp;gt;10000&amp;lt;/precio_inicial&amp;gt;&lt;br /&gt;    &amp;lt;precio_oferta&amp;gt;9000&amp;lt;/precio_oferta&amp;gt;&lt;br /&gt;    &amp;lt;extra valor=&quot;250&quot;&amp;gt;pintura metalizada&amp;lt;/extra&amp;gt;&lt;br /&gt;    &amp;lt;extra valor=&quot;200&quot;&amp;gt;spoiler trasero&amp;lt;/extra&amp;gt;&lt;br /&gt;    &amp;lt;extra valor=&quot;500&quot;&amp;gt;climatizador&amp;lt;/extra&amp;gt;&lt;br /&gt;    &amp;lt;foto&amp;gt;11327.jpg&amp;lt;/foto&amp;gt;&lt;br /&gt;    &amp;lt;foto&amp;gt;11328.jpg&amp;lt;/foto&amp;gt;&lt;br /&gt;  &amp;lt;/vehiculo&amp;gt;&lt;br /&gt;&amp;lt;/oferta&amp;gt;&lt;/p&gt;
&lt;p&gt;I aquest ha de ser l'aspecte de &lt;strong&gt;cotxes.json&lt;/strong&gt;:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;{&lt;br /&gt;  &quot;oferta&quot;: {&lt;br /&gt;    &quot;vehiculos&quot;: [&lt;br /&gt;      {&lt;br /&gt;        &quot;marca&quot;: &quot;ford&quot;,&lt;br /&gt;        &quot;modelo&quot;: {&lt;br /&gt;          &quot;color&quot;: &quot;gris&quot;,&lt;br /&gt;          &quot;nombre_modelo&quot;: &quot;focus&quot;&lt;br /&gt;        },&lt;br /&gt;        &quot;motor&quot;: {&lt;br /&gt;          &quot;combustible&quot;: &quot;gasolina&quot;,&lt;br /&gt;          &quot;nombre_motor&quot;: &quot;duratorc 1.4&quot;&lt;br /&gt;        },&lt;br /&gt;        &quot;matricula&quot;: &quot;1234AAA&quot;,&lt;br /&gt;        &quot;kilometros&quot;: &quot;12500&quot;,&lt;br /&gt;        &quot;precio_inicial&quot;: &quot;12000&quot;,&lt;br /&gt;        &quot;precio_oferta&quot;: &quot;10000&quot;,&lt;br /&gt;        &quot;extra&quot;: [&lt;br /&gt;          {&lt;br /&gt;            &quot;valor&quot;: &quot;250&quot;,&lt;br /&gt;            &quot;nombre_extra&quot;: &quot;pintura metalizada&quot;&lt;br /&gt;          },&lt;br /&gt;          {&lt;br /&gt;            &quot;valor&quot;: &quot;300&quot;,&lt;br /&gt;            &quot;nombre_extra&quot;: &quot;llantas&quot;&lt;br /&gt;          }&lt;br /&gt;        ],&lt;br /&gt;        &quot;foto&quot;: [&lt;br /&gt;          &quot;11325.jpg&quot;,&lt;br /&gt;          &quot;11326.jpg&quot;&lt;br /&gt;        ]&lt;br /&gt;      },&lt;br /&gt;      {&lt;br /&gt;        &quot;marca&quot;: &quot;ford&quot;,&lt;br /&gt;        &quot;modelo&quot;: {&lt;br /&gt;          &quot;color&quot;: &quot;gris&quot;,&lt;br /&gt;          &quot;nombre_modelo&quot;: &quot;focus&quot;&lt;br /&gt;        },&lt;br /&gt;        &quot;motor&quot;: {&lt;br /&gt;          &quot;combustible&quot;: &quot;diesel&quot;,&lt;br /&gt;          &quot;nombre_motor&quot;: &quot;duratorc 2.0&quot;&lt;br /&gt;        },&lt;br /&gt;        &quot;matricula&quot;: &quot;1235AAA&quot;,&lt;br /&gt;        &quot;kilometros&quot;: &quot;125000&quot;,&lt;br /&gt;        &quot;precio_inicial&quot;: &quot;10000&quot;,&lt;br /&gt;        &quot;precio_oferta&quot;: &quot;9000&quot;,&lt;br /&gt;        &quot;extra&quot;: [&lt;br /&gt;          {&lt;br /&gt;            &quot;valor&quot;: &quot;250&quot;,&lt;br /&gt;            &quot;nombre_extra&quot;: &quot;pintura metalizada&quot;&lt;br /&gt;          },&lt;br /&gt;          {&lt;br /&gt;            &quot;valor&quot;: &quot;200&quot;,&lt;br /&gt;            &quot;nombre_extra&quot;: &quot;spoiler trasero&quot;&lt;br /&gt;          },&lt;br /&gt;          {&lt;br /&gt;            &quot;valor&quot;: &quot;500&quot;,&lt;br /&gt;            &quot;nombre_extra&quot;: &quot;climatizador&quot;&lt;br /&gt;          }&lt;br /&gt;        ],&lt;br /&gt;        &quot;foto&quot;: [&lt;br /&gt;          &quot;11327.jpg&quot;,&lt;br /&gt;          &quot;11328.jpg&quot;&lt;br /&gt;        ]&lt;br /&gt;      }&lt;br /&gt;    ]&lt;br /&gt;  }&lt;br /&gt;}&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="103"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="89"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="30"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="89"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="104">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 3.8 (voluntari)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="105">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="111_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="104"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="buttonCaption"></string>
              <string value=""></string>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Visualitzar en un programa gràfic l'estat actual de Bicicas, agafant-lo directament de la pàgina &lt;a href=&quot;http://gestiona.bicicas.es/apps/apps.php&quot; onclick=&quot;browseURL(this); return false&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;http://gestiona.bicicas.es/apps/apps.php&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;En el mètode &lt;strong&gt;agafarBicicas() &lt;/strong&gt;farem les instruccions per agafar-lo directament d'Internet, utilitzant un &lt;strong&gt;URL&lt;/strong&gt;, en el qual:&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Inicialitzarem amb la pàgina que busquem&lt;/li&gt;
&lt;li&gt;Obrirem la connexió amb el mètode &lt;strong&gt;openConnection()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Després obtindrem el contingut amb el mètode &lt;strong&gt;getInputStream()&lt;/strong&gt;, que com el seu nom indica serà un InputStream&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;En el mètode &lt;strong&gt;mostrarEstacions() &lt;/strong&gt;introduirem les instruccions per a visualitzar les estacions, utilitzant un &lt;strong&gt;JList&lt;/strong&gt; (el que està a la part de l'esquerra), que s'ha de construir a partir d'un &lt;strong&gt;DefaultListModel&lt;/strong&gt;. Per anar col·locant els diferents elements del JList, els haurem d'anar afegint al &lt;strong&gt;DefaultListModel&lt;/strong&gt;, i aniran apareixent en el JList. Intentarem mostrar el número d'estació, nom i número de bicicletes (posicions ocupades) i el total de posicions.&lt;/li&gt;
&lt;li&gt;El mètode &lt;strong&gt;visualitzaEstacio()&lt;/strong&gt; s'activa quan seleccionem un element del JList, i en ell mostrarem les propietats de l'estació seleccionada en el &lt;strong&gt;TextArea&lt;/strong&gt; que està a la part de la dreta.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Aquest seria l'aspecte:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T3_Ex8.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;800&quot; height=&quot;500&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Aquest és l'esquelet. Copieu-lo en un fitxer Kotlin anomenat &lt;strong&gt;Ex3_8_VisBicicasJSONList.kt&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import javax.swing.*
import java.awt.*
import org.json.JSONTokener
import org.json.JSONObject
import org.json.JSONArray
import java.net.URL
import java.io.InputStreamReader

class FinestraBicicas : JFrame() {
	var estacions = JSONArray()
	var listModel = DefaultListModel&amp;lt;String&amp;gt;()
	var list = JList(listModel)
	var area = JTextArea(5, 15)

	init {

		defaultCloseOperation = JFrame.EXIT_ON_CLOSE
		setTitle(&quot;JSON: Vista detallada BICICAS&quot;)
		setSize(800, 800)
		setLayout(BorderLayout())

		val panell1 = JPanel(FlowLayout())
		val panell2 = JPanel(GridLayout(1, 2))
		add(panell1, BorderLayout.NORTH)
		add(panell2, BorderLayout.CENTER)
		list.setForeground(Color.blue)
		var scroll1 = JScrollPane(list)
		var scroll2 = JScrollPane(area)
		panell2.add(scroll1)
		panell2.add(scroll2)

		panell1.add(JLabel(&quot;LListat actual BICICAS&quot;))

		agafarBicicas()

		mostrarEstacions()

		list.addListSelectionListener() {
			if (list.getSelectedIndex() &amp;gt;= 0)
				visualitzaEstacio(list.getSelectedIndex())
		}
	}

	fun agafarBicicas() {
		// Instruccions per a llegir de la pàgina de Bicicas i col·locar en arrel
		val bicicas = URL(&quot;http://gestiona.bicicas.es/apps/apps.php&quot;);
		val arrel = (JSONTokener(bicicas.openConnection().getInputStream()).nextValue() as JSONArray).get(0) as JSONObject
		// Instruccions per a col·locar les estacions en estacions (JsonArray)&lt;br /&gt;
	}

	fun mostrarEstacions() {
		// Instruccions per a introduir en el JList les estacions
		// La manera d'anar introduint informació en el JList és a través del DefaultListModel:
		// listModel.addElement(&quot;Linia que es vol introduir &quot;)
&lt;br /&gt;	}

	fun visualitzaEstacio(numEst: Int) {
		// Instruccions per a mostrar les característiques en el area, el JTextArea de la dreta anomenat area
&lt;br /&gt;	}
}

fun main(args: Array&amp;lt;String&amp;gt;) {
	EventQueue.invokeLater {
		FinestraBicicas().isVisible = true
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="2798"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="33_111_2.35"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="106">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="104"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T3_Ex8.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmphE1SCl/T3_Ex8.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="499812d9a4513056e56346a4e0baaa5c"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="105"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="105"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="36"></int>
              <string role="key" value="parentNode"></string>
              <reference key="89"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="33"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="89"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="106"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="15"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%203%3A%20Fitxers%20de%20diferents%20formats:Exercicis"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
     </list>
    </dictionary>
   </instance>
   <unicode role="key" value="1"></unicode>
   <reference key="11"></reference>
   <unicode role="key" value="11"></unicode>
   <reference key="23"></reference>
   <unicode role="key" value="12"></unicode>
   <reference key="27"></reference>
   <unicode role="key" value="13"></unicode>
   <reference key="32"></reference>
   <unicode role="key" value="14"></unicode>
   <reference key="45"></reference>
   <unicode role="key" value="15"></unicode>
   <reference key="89"></reference>
   <unicode role="key" value="17"></unicode>
   <reference key="48"></reference>
   <unicode role="key" value="18"></unicode>
   <reference key="53"></reference>
   <unicode role="key" value="2"></unicode>
   <reference key="14"></reference>
   <unicode role="key" value="22"></unicode>
   <reference key="42"></reference>
   <unicode role="key" value="23"></unicode>
   <reference key="39"></reference>
   <unicode role="key" value="24"></unicode>
   <reference key="62"></reference>
   <unicode role="key" value="25"></unicode>
   <reference key="71"></reference>
   <unicode role="key" value="26"></unicode>
   <reference key="59"></reference>
   <unicode role="key" value="27"></unicode>
   <reference key="76"></reference>
   <unicode role="key" value="28"></unicode>
   <reference key="79"></reference>
   <unicode role="key" value="3"></unicode>
   <reference key="17"></reference>
   <unicode role="key" value="31"></unicode>
   <reference key="84"></reference>
   <unicode role="key" value="5"></unicode>
   <reference key="8"></reference>
  </dictionary>
  <string role="key" value="_objectives"></string>
  <unicode value=""></unicode>
  <string role="key" value="_preknowledge"></string>
  <unicode value=""></unicode>
  <string role="key" value="_templateFile"></string>
  <string value=""></string>
  <string role="key" value="anchor_nodes"></string>
  <list></list>
  <string role="key" value="backgroundImgTile"></string>
  <bool value="0"></bool>
  <string role="key" value="currentNode"></string>
  <reference key="84"></reference>
  <string role="key" value="dublinCore"></string>
  <instance class="exe.engine.package.DublinCore">
   <dictionary>
    <string role="key" value="contributors"></string>
    <unicode value=""></unicode>
    <string role="key" value="coverage"></string>
    <unicode value=""></unicode>
    <string role="key" value="creator"></string>
    <unicode value="Àlvar Serrano Calduch"></unicode>
    <string role="key" value="date"></string>
    <unicode value=""></unicode>
    <string role="key" value="description"></string>
    <unicode value="AD: Tema 3"></unicode>
    <string role="key" value="format"></string>
    <unicode value=""></unicode>
    <string role="key" value="identifier"></string>
    <unicode value=""></unicode>
    <string role="key" value="language"></string>
    <unicode value="ca"></unicode>
    <string role="key" value="publisher"></string>
    <unicode value=""></unicode>
    <string role="key" value="relation"></string>
    <unicode value=""></unicode>
    <string role="key" value="rights"></string>
    <unicode value=""></unicode>
    <string role="key" value="source"></string>
    <unicode value=""></unicode>
    <string role="key" value="subject"></string>
    <unicode value=""></unicode>
    <string role="key" value="title"></string>
    <unicode value=""></unicode>
    <string role="key" value="type"></string>
    <unicode value=""></unicode>
   </dictionary>
  </instance>
  <string role="key" value="exe.engine.package.Package.persistenceVersion"></string>
  <int value="16"></int>
  <string role="key" value="exportMetadataType"></string>
  <string value="LOMES"></string>
  <string role="key" value="exportSource"></string>
  <bool value="1"></bool>
  <string role="key" value="footer"></string>
  <unicode value=""></unicode>
  <string role="key" value="isChanged"></string>
  <int value="1"></int>
  <string role="key" value="isLoading"></string>
  <bool value="0"></bool>
  <string role="key" value="license"></string>
  <unicode value="creative commons: attribution - non commercial - share alike 2.5"></unicode>
  <string role="key" value="lom"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.descriptionSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="string"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.LangStringSub">
           <dictionary>
            <string role="key" value="language"></string>
            <string value="ca"></string>
            <string role="key" value="valueOf_"></string>
            <string value="AD: Tema 3"></string>
           </dictionary>
          </instance>
         </list>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg"></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <string value="17082a4e-b6c4-4cc7-9bc0-496bd8f66ded"></string>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Acc\xc3\xa9s a Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="107">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2019-10-02T10:54:28.00+02:00"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Data de creaci\xc3\xb3 de les metadades"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="108">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="109">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOMv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="107"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="108"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="109"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOMv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <none></none>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="yes"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="lomEs"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.descriptionSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="string"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.LangStringSub">
           <dictionary>
            <string role="key" value="language"></string>
            <string value="ca"></string>
            <string role="key" value="valueOf_"></string>
            <string value="AD: Tema 3"></string>
           </dictionary>
          </instance>
         </list>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg"></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <string value="17082a4e-b6c4-4cc7-9bc0-496bd8f66ded"></string>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Acc\xc3\xa9s a Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="110">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2019-10-02T10:54:28.00+02:00"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Data de creaci\xc3\xb3 de les metadades"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="111">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="112">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOM-ESv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="110"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="111"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="112"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOM-ESv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <instance class="exe.engine.lom.lomsubs.accessSub">
       <dictionary>
        <string role="key" value="accessType"></string>
        <instance class="exe.engine.lom.lomsubs.accessTypeSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOM-ESv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="uniqueElementName"></string>
          <string value="accessType"></string>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.accessTypeValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="universal"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
        <string role="key" value="description"></string>
        <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list>
           <instance class="exe.engine.lom.lomsubs.LangStringSub">
            <dictionary>
             <string role="key" value="language"></string>
             <string value="ca"></string>
             <string role="key" value="valueOf_"></string>
             <unicode value="Per defecte"></unicode>
            </dictionary>
           </instance>
          </list>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="access"></string>
       </dictionary>
      </instance>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="creative commons: attribution - non commercial - share alike"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <string value="rights"></string>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="mxmlforcemediaonly"></string>
  <bool value="0"></bool>
  <string role="key" value="mxmlheight"></string>
  <string value=""></string>
  <string role="key" value="mxmlprofilelist"></string>
  <string value=""></string>
  <string role="key" value="mxmlwidth"></string>
  <string value=""></string>
  <string role="key" value="release"></string>
  <string value="2.7"></string>
  <string role="key" value="resources"></string>
  <dictionary>
   <string role="key" value="36c72e53c21c3ceef3fe5d8f67c5f5a3"></string>
   <list>
    <reference key="101"></reference>
   </list>
   <string role="key" value="3799877bf96392b47d845e68ee45c9e6"></string>
   <list>
    <reference key="36"></reference>
   </list>
   <string role="key" value="3a75dd0c0e4e70217ef00ad6a1458151"></string>
   <list>
    <reference key="33"></reference>
   </list>
   <string role="key" value="4657ea0c05d9f5ec5e97195dd65e3f54"></string>
   <list>
    <reference key="56"></reference>
   </list>
   <string role="key" value="479b29cdb873b0a2e1503a3b1760b044"></string>
   <list>
    <reference key="96"></reference>
   </list>
   <string role="key" value="499812d9a4513056e56346a4e0baaa5c"></string>
   <list>
    <reference key="106"></reference>
   </list>
   <string role="key" value="5212c06a6978582d7215b802c2848b1f"></string>
   <list>
    <reference key="24"></reference>
   </list>
   <string role="key" value="75a7a1307b3b0a26bdb67e794f2a98e1"></string>
   <list>
    <reference key="34"></reference>
   </list>
   <string role="key" value="a95f904c4e9cf49d7bb410f99489eda5"></string>
   <list>
    <reference key="5"></reference>
   </list>
   <string role="key" value="b7f1edd07e867003d6dba6df9fe30dfa"></string>
   <list>
    <reference key="35"></reference>
   </list>
   <string role="key" value="be706cad47e19cf4336cf5ab354bfdcb"></string>
   <list>
    <reference key="54"></reference>
   </list>
   <string role="key" value="ca2633ef7ca7f630211dc3f83818d26f"></string>
   <list>
    <reference key="20"></reference>
   </list>
   <string role="key" value="d317dfc8c0cfb42c8e2ee79339e21723"></string>
   <list>
    <reference key="55"></reference>
   </list>
  </dictionary>
  <string role="key" value="root"></string>
  <reference key="4"></reference>
  <string role="key" value="scolinks"></string>
  <bool value="0"></bool>
  <string role="key" value="scowsinglepage"></string>
  <bool value="0"></bool>
  <string role="key" value="scowwebsite"></string>
  <bool value="0"></bool>
  <string role="key" value="style"></string>
  <unicode value="caminas 3.1"></unicode>
  <string role="key" value="tempFile"></string>
  <bool value="0"></bool>
 </dictionary>
</instance>