<?xml version="1.0" encoding="utf-8"?>

<instance xmlns="http://www.exelearning.org/content/v0.3" reference="2" version="0.3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://www.exelearning.org/content/v0.3 content.xsd" class="exe.engine.package.Package">
 <dictionary>
  <string role="key" value="_title"></string>
  <unicode value="Accés a Dades"></unicode>
  <string role="key" value="idevices"></string>
  <list></list>
  <string role="key" value="_addPagination"></string>
  <bool value="0"></bool>
  <string role="key" value="_addSearchBox"></string>
  <bool value="0"></bool>
  <string role="key" value="_author"></string>
  <unicode value="Àlvar Serrano Calduch"></unicode>
  <string role="key" value="_backgroundImg"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextMode"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextPlace"></string>
  <unicode value=""></unicode>
  <string role="key" value="_description"></string>
  <unicode value=""></unicode>
  <string role="key" value="_docType"></string>
  <unicode value="XHTML"></unicode>
  <string role="key" value="_exportElp"></string>
  <bool value="0"></bool>
  <string role="key" value="_extraHeadContent"></string>
  <unicode value=""></unicode>
  <string role="key" value="_fieldValidationInfo"></string>
  <dictionary>
   <unicode role="key" value="all"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_title"></unicode>
     <unicode value="pp_lang"></unicode>
     <unicode value="pp_description"></unicode>
     <unicode value="pp_author"></unicode>
     <unicode value="pp_newlicense"></unicode>
    </list>
   </dictionary>
   <unicode role="key" value="procomun"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_learningResourceType"></unicode>
    </list>
    <unicode role="key" value="values_from_list"></unicode>
    <dictionary>
     <unicode role="key" value="pp_learningResourceType"></unicode>
     <list>
      <unicode value="master class"></unicode>
      <unicode value="closed exercise or problem"></unicode>
      <unicode value="real project"></unicode>
      <unicode value="didactic game"></unicode>
      <unicode value="webquest"></unicode>
      <unicode value="open problem"></unicode>
      <unicode value="simulation"></unicode>
      <unicode value="questionnaire"></unicode>
      <unicode value="conceptual map"></unicode>
     </list>
    </dictionary>
   </dictionary>
  </dictionary>
  <string role="key" value="_intendedEndUserRoleGroup"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleTutor"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_isChanged"></string>
  <bool value="0"></bool>
  <string role="key" value="_isTemplate"></string>
  <bool value="0"></bool>
  <string role="key" value="_lang"></string>
  <unicode value="ca"></unicode>
  <string role="key" value="_learningResourceType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_levelNames"></string>
  <list>
   <unicode value="Tema"></unicode>
   <unicode value="Secció"></unicode>
   <unicode value="Apartat"></unicode>
  </list>
  <string role="key" value="_name"></string>
  <unicode value="AD_Annex_Android"></unicode>
  <string role="key" value="_nextIdeviceId"></string>
  <int value="39"></int>
  <string role="key" value="_nextNodeId"></string>
  <int value="20"></int>
  <string role="key" value="_nodeIdDict"></string>
  <dictionary>
   <unicode role="key" value="0"></unicode>
   <instance class="exe.engine.node.Node" reference="4">
    <dictionary>
     <string role="key" value="_title"></string>
     <unicode value="Annex: Permanència en ANDROID"></unicode>
     <string role="key" value="idevices"></string>
     <list>
      <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="1">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Free Text"></unicode>
        <string role="key" value="_author"></string>
        <unicode value="University of Auckland"></unicode>
        <string role="key" value="_purpose"></string>
        <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
        <string role="key" value="_tip"></string>
        <string value=""></string>
        <string role="key" value="childs"></string>
        <list></list>
        <string role="key" value="content"></string>
        <instance class="exe.engine.field.TextAreaField" reference="3">
         <dictionary>
          <string role="key" value="_id"></string>
          <int value="1"></int>
          <string role="key" value="_idevice"></string>
          <reference key="1"></reference>
          <string role="key" value="_instruc"></string>
          <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
          <string role="key" value="_name"></string>
          <unicode value="Free Text"></unicode>
          <string role="key" value="anchor_names"></string>
          <list></list>
          <string role="key" value="anchors_linked_from_fields"></string>
          <dictionary></dictionary>
          <string role="key" value="buttonCaption"></string>
          <string value=""></string>
          <string role="key" value="content_w_resourcePaths"></string>
          <unicode content="true" value="&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_Portada.png&quot; width=&quot;800&quot; height=&quot;500&quot; alt=&quot;Permanencia Android&quot; /&gt;&lt;/p&gt;"></unicode>
          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
          <int value="4"></int>
          <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
          <int value="2"></int>
          <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
          <int value="3"></int>
          <string role="key" value="htmlTag"></string>
          <string value="div"></string>
          <string role="key" value="images"></string>
          <instance class="exe.engine.galleryidevice.GalleryImages">
           <dictionary>
            <string role="key" value=".listitems"></string>
            <list>
             <instance class="exe.engine.galleryidevice.GalleryImage">
              <dictionary>
               <string role="key" value="_caption"></string>
               <instance class="exe.engine.field.TextField">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <int value="3893"></int>
                 <string role="key" value="_idevice"></string>
                 <none></none>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="content"></string>
                 <string value=""></string>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                </dictionary>
               </instance>
               <string role="key" value="_id"></string>
               <unicode value="0_1.85"></unicode>
               <string role="key" value="_imageResource"></string>
               <instance class="exe.engine.resource.Resource" reference="5">
                <dictionary>
                 <string role="key" value="_idevice"></string>
                 <reference key="1"></reference>
                 <string role="key" value="_package"></string>
                 <reference key="2"></reference>
                 <string role="key" value="_storageName"></string>
                 <string value="Annex_Android_Portada.png"></string>
                 <string role="key" value="_userName"></string>
                 <string value="/tmp/tmp95QT7f/Annex_Android_Portada.png"></string>
                 <string role="key" value="checksum"></string>
                 <string value="ad06f1f9e2b0f0d08e84e70a4d7a02c3"></string>
                 <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="warningMsg"></string>
                 <string value=""></string>
                </dictionary>
               </instance>
               <string role="key" value="_parent"></string>
               <reference key="3"></reference>
               <string role="key" value="_thumbnailResource"></string>
               <none></none>
               <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
               <int value="3"></int>
               <string role="key" value="makeThumbnail"></string>
               <bool value="0"></bool>
              </dictionary>
             </instance>
            </list>
            <string role="key" value="idevice"></string>
            <reference key="3"></reference>
           </dictionary>
          </instance>
          <string role="key" value="intlinks_to_anchors"></string>
          <dictionary></dictionary>
          <string role="key" value="nextImageId"></string>
          <int value="86"></int>
          <string role="key" value="parentNode"></string>
          <reference key="4"></reference>
         </dictionary>
        </instance>
        <string role="key" value="edit"></string>
        <bool value="0"></bool>
        <string role="key" value="emphasis"></string>
        <int value="0"></int>
        <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
        <int value="7"></int>
        <string role="key" value="icon"></string>
        <string value=""></string>
        <string role="key" value="id"></string>
        <unicode value="0"></unicode>
        <string role="key" value="lastIdevice"></string>
        <bool value="0"></bool>
        <string role="key" value="parent"></string>
        <none></none>
        <string role="key" value="parentNode"></string>
        <reference key="4"></reference>
        <string role="key" value="systemResources"></string>
        <list></list>
        <string role="key" value="type"></string>
        <none></none>
        <string role="key" value="undo"></string>
        <bool value="1"></bool>
        <string role="key" value="userResources"></string>
        <list>
         <reference key="5"></reference>
        </list>
        <string role="key" value="version"></string>
        <int value="0"></int>
       </dictionary>
      </instance>
     </list>
     <string role="key" value="_id"></string>
     <unicode value="0"></unicode>
     <string role="key" value="_package"></string>
     <reference key="2"></reference>
     <string role="key" value="anchor_fields"></string>
     <list></list>
     <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
     <int value="2"></int>
     <string role="key" value="exportType"></string>
     <string value="website"></string>
     <string role="key" value="last_full_node_path"></string>
     <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID"></string>
     <string role="key" value="parent"></string>
     <none></none>
     <string role="key" value="top_anchors_linked_from_fields"></string>
     <list></list>
     <string role="key" value="children"></string>
     <list>
      <instance class="exe.engine.node.Node" reference="8">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Objectius"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="6">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="7">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="6"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;Aquest annex vol ser d'utilitat per a poder utilitzar les coses que estem veient en el mòdul d'Accés a Dades en la programació en Android, és a dir, per al mòdul PMDM.&lt;/p&gt;
&lt;p&gt;En un principi, en l'entorn d'Android la programació pot ser en Java o en Kotlin. I per tant tot el que hem fet en Kotlin ens podria servir.&lt;/p&gt;
&lt;p&gt;Però la realitat és que sempre canvien les coses un poc, i per tant no podrem fer les coses exactament igual, sobretot amb la Base de Dades SQLite. A més hi haurà vegades que Android ens proporcionarà eines, classes, que ens poden facilitar les coses, com veurem també en els fitxers.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Estudiarem un poc tant la permanència en fitxers com la permanència en Bases de Dades. En aquest últim cas, farem menció especial de la Base de Dades SQLite, que per ser tan lleugera és una clara candidata a utilitzar-la per a guardar la Base de Dades en el dispositiu mòbil.&lt;/p&gt;
&lt;p&gt;Concretament veurem:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Permanència en fitxers (Tema 3)&lt;/li&gt;
&lt;li&gt;Permanència en BD Relacionals (Tema 4)&lt;/li&gt;
&lt;li&gt;Eina ORM per a BD Relacionals (Tema 5)&lt;/li&gt;
&lt;li&gt;Permanència en BD Orientades a Objectes (Tema6)&lt;/li&gt;
&lt;/ul&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="7"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="8"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="1"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="8"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="1"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:Objectius"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="11">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="1 - Permanència en fitxers"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="9">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="10">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="9"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;En el cas dels fitxers, el comportament en Android és similar que en Java i Kotlin. Per tant ho tenim fàcil.&lt;/p&gt;
&lt;p&gt;Insistirem en algun detall i mencionarem alguna utilitat.&lt;/p&gt;
&lt;p&gt;Per a practicar, ho farem sobre un exemple, en el qual senzillament col·locarem en un &lt;strong&gt;EditText&lt;/strong&gt; el contingut d'un fitxer de text. Encara que només anem a mostrar el contingut del fitxer, ho fem sobre un &lt;strong&gt;EditText&lt;/strong&gt; i no un &lt;strong&gt;TextView&lt;/strong&gt; per a poder després reutilitzar-lo en un exemple un poc més complex.&lt;/p&gt;
&lt;p&gt;Crearem un projecte nou, anomenat &lt;strong&gt;EditorText&lt;/strong&gt;. amb la plantilla &lt;strong&gt;Empty&lt;/strong&gt; Activity.Per a poder copiar sense problemes els programes posteriors, posarem el domini &lt;strong&gt;example.com &lt;/strong&gt;, així el paquet es dirà &lt;strong&gt;com.example.editortext&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;En l'&lt;strong&gt;activity_main.xml&lt;/strong&gt;, només posem el &lt;strong&gt;EditText&lt;/strong&gt;, que ocuparà tota la pantalla, i el text no estarà centrat, sinó cap amunt.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;androidx.constraintlayout.widget.ConstraintLayout
        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
        xmlns:tools=&quot;http://schemas.android.com/tools&quot;
        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        tools:context=&quot;.MainActivity&quot;&amp;gt;
    &amp;lt;EditText
            android:text=&quot;&quot;
            android:id=&quot;@+id/text&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;match_parent&quot;
            android:inputType=&quot;textMultiLine&quot;
            android:gravity=&quot;top&quot; /&amp;gt;

&amp;lt;/androidx.constraintlayout.widget.ConstraintLayout&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El programa principal de moment no té res, així que el seu esquelet és el següent.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package com.example.editortext

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import kotlinx.android.synthetic.main.activity_main.*

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;On únicament fem referència a l'&lt;strong&gt;EditText&lt;/strong&gt; per a poder utilitzar-lo posteriorment.&lt;/p&gt;
&lt;p&gt;Executar-lo per veure el seu aspecte.&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="10"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="11"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="2"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="11"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="12">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="13">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="12"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Classes de Flux de dades&lt;/p&gt;
&lt;p&gt;Podem utilitzar qualsevol de les classes de flux de dades que hem vist en els temes 2 i 3 per a accedir al fitxer, però en aquelles en les quals posem el nom del fitxer, és molt convenient posar tota la ruta, i evidentment que es tinguen permisos en el directori. Una bona idea, si no s'han de compartir, és posar el fitxer en la zona reservada per a l'aplicació que està en:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;/data/data/&lt;em&gt;paquet_de_la_aplicació&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I dins d'aquesta ruta és una costum utilitzar un altre directori per als fitxers anomenat &lt;strong&gt;files&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Així per exemple, si la nostra aplicació s'ha creat en un paquet anomenat &lt;strong&gt;com.example&lt;/strong&gt;.&lt;strong&gt;editortext&lt;/strong&gt; i volem accedir al fitxer &lt;strong&gt;notes.txt&lt;/strong&gt;, la ruta recomanada del fitxer seria:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;/data/data/&lt;strong&gt;com.example.&lt;/strong&gt;editortext/files/notes.txt&lt;/p&gt;
&lt;p&gt;És a dir, que si per exemple volem accedir a un fitxer de text (per tant ens convé &lt;em&gt;&lt;strong&gt;Reader&lt;/strong&gt;&lt;/em&gt;), i després volem decorar-lo amb &lt;em&gt;&lt;strong&gt;BufferedReader&lt;/strong&gt;&lt;/em&gt; per legir línia a línia, posaríem:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val f = BufferedReader(FileReader(&quot;/data/data/&lt;strong&gt;com.example.&lt;/strong&gt;editortext/files/notes.txt&quot;))&lt;/p&gt;
&lt;p&gt;I si el que volem és escriure en ell (&lt;em&gt;&lt;strong&gt;FileWriter&lt;/strong&gt;&lt;/em&gt;), però afegint al final i línia a línia (&lt;em&gt;&lt;strong&gt;PrintWriter&lt;/strong&gt;&lt;/em&gt;):&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val f = PrintWriter(FileWriter(&lt;span&gt;&quot;/data/data/&lt;/span&gt;&lt;span&gt;&lt;strong&gt;com.example.&lt;/strong&gt;editortext/files/notes.txt&quot;&lt;/span&gt;,true))&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Si en canvi volem accedir a un fitxer binari (&lt;em&gt;&lt;strong&gt;InputStream&lt;/strong&gt;&lt;/em&gt;), i llegir diferents tipus de dades (&lt;em&gt;&lt;strong&gt;DataInputStream&lt;/strong&gt;&lt;/em&gt;):&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val f = DataInputStream(FileInputStream(&quot;/data/data/&lt;span&gt;&lt;span&gt;&lt;strong&gt;com.example.&lt;/strong&gt;editortext&lt;/span&gt;&lt;/span&gt;/files/fitxer.dat&quot;))&lt;/p&gt;
&lt;p&gt; I per a escriure en ell diferents tipus de dades:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val f = DataOututStream(FileOutputStream(&quot;/data/data/&lt;strong&gt;com.example.&lt;/strong&gt;editortext/files/fitxer.dat&quot;))&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Per a més comoditat hem utilitzat en aquestos apunts una versió anterior d'Android, concretament la 5.1 (API 22). A partir de la API 23 és necessari donar expressament el permís d'accedir en el &lt;strong&gt;AndroidManifest.xml&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong class=&quot;codi&quot;&gt;&amp;lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&amp;gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;En l'exemple inicial, per poder veure que accedim a un fitxer, podríem col·locar-lo a mà prèviament d'aquesta manera:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Editem el fitxer &lt;strong&gt;notes.txt&lt;/strong&gt; des de qualsevol editor de textos (per exemple Gedit o Notepad) posant el contingut que vulgueu.&lt;/li&gt;
&lt;li&gt;Posteriorment des de Android Studio anem a &lt;strong&gt;View -&amp;gt; Tool Windows -&amp;gt; Device File Explorer&lt;/strong&gt;. Ha d'estar el simulador en marxa.&lt;/li&gt;
&lt;li&gt;A la dreta ens apareixerà una finestra per explorar pel dispositiu. Ens situem en &lt;strong&gt;/data/data/&lt;/strong&gt;&lt;strong&gt;com.example.&lt;/strong&gt;&lt;strong&gt;editortext&lt;/strong&gt; (o el nom del paquet que hem posat).&lt;strong&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Si ja havíem executat el projecte, existirà el directori anterior, i el seu contingut serà únicament els subdirectoris &lt;strong&gt;cache&lt;/strong&gt; i &lt;strong&gt;code_cache&lt;/strong&gt;, segurament. Potser existesca el directori &lt;strong&gt;files&lt;/strong&gt;, o potser no.&lt;/li&gt;
&lt;li&gt;Si no existeix el directori &lt;strong&gt;files&lt;/strong&gt;, el creem dins de &lt;strong&gt;/data/data&lt;/strong&gt;&lt;strong&gt;/com.example.&lt;/strong&gt;&lt;strong&gt;editortext&lt;/strong&gt; , amb el botó de la dreta &lt;strong&gt;New --&amp;gt; Directory &lt;/strong&gt;, situats en el directori anterior.&lt;/li&gt;
&lt;li&gt;Estant situats en &lt;strong&gt;files&lt;/strong&gt;, pugem el fitxer &lt;strong&gt;notes.txt&lt;/strong&gt; amb el botó de la dreta i opció &lt;strong&gt;Upload&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;En versions anteriors de Android Studio es feia des de &lt;strong&gt;Tools -&amp;gt; Andoid -&amp;gt; Andoid Device Monitor&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Ara modifiquem el programeta inicial, fent que carregue el contingut del fitxer al EditText. Ho fem utilitzant un &lt;strong&gt;BufferedReader&lt;/strong&gt; per a llegir línia a línia i anar acumulant abans d'escriure en el EditText. Ja veurem més avant que ho podrem simplificar molt.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package com.example.editortext

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import kotlinx.android.synthetic.main.activity_main.*
import java.io.BufferedReader
import java.io.FileReader

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        val f = BufferedReader(FileReader(&quot;/data/data/com.example.editortext/files/notes.txt&quot;))
        var cont = &quot;&quot;
        var linia = f.readLine()
        while (linia != null) {
            cont += linia + &quot;\n&quot;
            linia = f.readLine()
        }
        text.setText(cont)
        f.close()
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Per a no haver de registrar en el programa principal tots els components del layout, hem posat la línia&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;import kotlinx.android.synthetic.main.activity_main.*&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Si us dóna error és perquè no teniu les &lt;strong&gt;kotlin-android-extensions&lt;/strong&gt; en el gradle.build de la aplicació. Aleshores obriu el &lt;strong&gt;gradle.build&lt;/strong&gt; de la aplicació i afegiu la línia corresponent a les kotlin-android-extensions en els plugins, de manera que quede així:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;plugins {
    id 'com.android.application'
    id 'kotlin-android'
    id 'kotlin-android-extensions'
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Aquest podria ser el resultat:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_2_1.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;367&quot; height=&quot;609&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El següent vídeo mostra tot el procés, incloent la pujada del fitxer notes.txt al dispositiu.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;iframe width=&quot;1000&quot; height=&quot;700&quot; src=&quot;https://slides.com/alvarinstitut/annexandroid_androiddeviceexplorer/embed&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;webkitallowfullscreen&quot; mozallowfullscreen=&quot;mozallowfullscreen&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="3899"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="8_85.83"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="14">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="12"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="Annex_Android_2_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmp95QT7f/Annex_Android_2_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="ebd1cb8664a0a500a9b668ab81c93036"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="13"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="13"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="84"></int>
             <string role="key" value="parentNode"></string>
             <reference key="11"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="8"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="11"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="14"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="15">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="16">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="15"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Mètodes propis: openFileInput() i openFileOutput()&lt;/p&gt;
&lt;p&gt;Android ens proporciona uns mètodes que ens poden fer un poc més còmode l'accés al fitxer. Sobretot ho mencionem perquè la seua utilització està molt estesa.&lt;/p&gt;
&lt;p&gt;Es tracta de  &lt;strong&gt;openFileIntput&lt;/strong&gt;&lt;strong&gt; i openFileOutput&lt;/strong&gt;, ambdós estan en &lt;strong&gt;android.content.ContextWrapper&lt;/strong&gt;. La seua sintaxi és:&lt;/p&gt;
&lt;p class=&quot;code&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span style=&quot;font-size: large;&quot;&gt;public FileInputStream &lt;strong&gt;openFileInput &lt;/strong&gt;(String &lt;em&gt;nom&lt;/em&gt;)&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;code&quot; style=&quot;margin-left: 30px;&quot;&gt;&lt;span style=&quot;font-size: large;&quot;&gt;&lt;span&gt;public FileOutputStream &lt;strong&gt;openFileOutput &lt;/strong&gt;(String &lt;em&gt;nom&lt;/em&gt;, int &lt;em&gt;mode&lt;/em&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Com veieu, en el primer cas accepta en un string el nom d'un fitxer i torna un &lt;strong&gt;FileInputStream&lt;/strong&gt;. Amb aquest &lt;strong&gt;InputStream&lt;/strong&gt; ja podem fer el que ens convinga: decorar-lo amb un &lt;strong&gt;&lt;em&gt;ObjectInputStream&lt;/em&gt;&lt;/strong&gt; o &lt;strong&gt;&lt;em&gt;DataInputStream&lt;/em&gt;&lt;/strong&gt;, o convertir-lo a &lt;em&gt;Reader&lt;/em&gt; amb &lt;em&gt;&lt;strong&gt;InputStreamReader&lt;/strong&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;En el segon cas torna un &lt;strong&gt;FileOutputStream&lt;/strong&gt; i accepta un segon paràmetre, a banda del nom del fitxer també posarem el mode d'obertura. Els diferents modes són:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MODE_PRIVATE&lt;/strong&gt; (0): és el mode per defecte, i si ja existeix el fitxer, matxacarà el seu contingut&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MODE_APPEND&lt;/strong&gt;: si ja existeix, no matxacarà el contingut, sinó que introduirà després.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MODE_WORLD_READABLE&lt;/strong&gt; i &lt;strong&gt;MODE_WORLD_WRITABLE&lt;/strong&gt; serveixen per a controlar els permisos. En principi no els utilitzarem.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Es pot comprovar que senzillament és un pas previ abans de tenir el InputStream o OutputStream. &lt;strong&gt;Per defecte&lt;/strong&gt;, si no posem la ruta del fitxer, aquest estarà en l'entorn del paquet de l'aplicació més concretament en el directori &lt;strong&gt;files&lt;/strong&gt;:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;/data/data/&lt;em&gt;paquet_de_la_aplicació&lt;/em&gt;/files&lt;/p&gt;
&lt;p&gt;Com ja és per defecte, si el volem ahí (que serà el més habitual), només haurem de posar el nom del fitxer. En el mateix exemple anterior, en què volíem al final un &lt;em&gt;BufferedReader&lt;/em&gt;, haurem de convertir el &lt;em&gt;InputStream&lt;/em&gt; que ens dóna &lt;em&gt;openFileInput&lt;/em&gt; en un &lt;em&gt;Reader&lt;/em&gt;, amb &lt;em&gt;InputStreamReader&lt;/em&gt;:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val f = BufferedReader(InputStreamReader(openFileInput(&quot;fitxer.txt&quot;)));&lt;/p&gt;
&lt;p&gt;I per a escriure, també com en l'exemple anterior:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val f = PrintWriter(OutputStreamWriter(openFileOutput(&quot;fitxer.txt&quot;,MODE_APPEND)));&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;I els exemples d'accés a fitxers binaris, en cas de lectura:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val f = DataInputStream(openFileInput(&quot;fitxer.dat&quot;));&lt;/p&gt;
&lt;p&gt;i en cas d'escriptura (en aquest cas matxacant el possible contingut anterior):&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val f = DataOutputStream(openFileOutput(&quot;fitxer.dat&quot;,MODE_PRIVATE));&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;En el cas de l'exemple que estem utilitzant, podríem haver substituït la línia:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val f = BufferedReader(FileReader(&quot;/data/data/com.example.editortext/files/notes.txt&quot;));&lt;/p&gt;
&lt;p&gt;Per aquesta altra:&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;val f = BufferedReader(InputStreamReader(openFileInput(&quot;notes.txt&quot;)));&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="16"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="11"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="9"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="11"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="17">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_editionFolder"></string>
           <string value="text/edition/"></string>
           <string role="key" value="_editionResources"></string>
           <list>
            <string value="text.js"></string>
           </list>
           <string role="key" value="_exportFolder"></string>
           <none></none>
           <string role="key" value="_exportResources"></string>
           <list></list>
           <string role="key" value="_iDeviceDir"></string>
           <string value="text"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="text"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="18">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="51_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="17"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;KOTLIN&lt;/p&gt;
&lt;p&gt;Tot l'anterior serviria per a Java també (amb les di), i funcionen en Kotlin perquè ja sabem que és una extensió de Java, és a dir tot el de Java funciona en Kotlin. Però Kotlin ens ofereix més coses de manera que tot queda molt més senzill i còmode. Encara que utilitzem les mateixes classes que en Java, aquestes tindran uns iteradors que faran les coses molt senzilles. També té mètodes per a poder llegir el fitxer sencer.&lt;/p&gt;
&lt;h3&gt;Alguns mètodes de File:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;appendBytes&lt;/strong&gt;: afegeix un array de bytes al final del fitxer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;appendText&lt;/strong&gt;: afegeix un string al final del fitxer, podent especificar fins i tot la codificació&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;inputStream, bufferedReader, bufferedWriter, ...&lt;/strong&gt;: torna directament la classe especificada (sense haver de passar per un FileReader en el cas de BufferedReader)&lt;strong&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;copyTo&lt;/strong&gt;: copia el fitxer en un altre&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;copyRecursively&lt;/strong&gt;: copia el File i tots els seus possibles descendents&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;forEachLine&lt;/strong&gt;: agafa cada línia del fitxer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;readBytes&lt;/strong&gt;: llig de cop tot el fitxer i ho guarda en un array de bytes&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;readLines:&lt;/strong&gt; llig totes les línies del fitxer i les guarda en un List&lt;string&gt;&lt;/string&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;readText&lt;/strong&gt;: llig de cop tot el fitxer i ho guarda en un string&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;writeBytes&lt;/strong&gt;: escriu tot l'array de bytes&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;writeText&lt;/strong&gt;: escriu el string, fins i tot especificant la codificació&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Alguns dels mètodes són d'extremada utilitat, fent que la lectura i tractament del fitxer ens ocupe una única línia.&lt;/p&gt;
&lt;p&gt;Així per exemple, en l'exemple anterior, podem substituir les següents sentències:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;f = BufferedReader(FileReader(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/data/data/com.example.editortext/files/notes.txt&quot;&lt;/span&gt;))&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;var &lt;/span&gt;cont = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;var &lt;/span&gt;linia = f.readLine()&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;while &lt;/span&gt;(linia != &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;/span&gt;) {&lt;br /&gt;    cont += linia + &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;linia = f.readLine()&lt;br /&gt;}&lt;br /&gt;text.setText(cont)&lt;br /&gt;f.close()&lt;/pre&gt;
&lt;p&gt;Per aquestes:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;var &lt;/span&gt;cont = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&quot;&lt;br /&gt;&lt;/span&gt;File(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/data/data/com.example.editortext/files/notes.txt&quot;&lt;/span&gt;).&lt;span style=&quot;font-style: italic;&quot;&gt;forEachLine&lt;/span&gt;&lt;span style=&quot;color: #808080;&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;{ &lt;/span&gt;cont += &lt;span style=&quot;font-weight: bold;&quot;&gt;it&lt;/span&gt;+&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;br /&gt;&lt;/span&gt;text.setText(cont)&lt;/pre&gt;
&lt;p&gt;on hem agafat línia a línia, i per cadascuna traem el seu contingut més la baixada de línia.&lt;/p&gt;
&lt;p&gt;I encara més curt i còmode si llegim de cop tot el fitxer:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;text.setText(File(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/data/data/com.example.editortext/files/notes.txt&quot;&lt;/span&gt;).&lt;span style=&quot;font-style: italic;&quot;&gt;readText&lt;/span&gt;())&lt;/pre&gt;
&lt;p&gt;De manera que el programa quedaria així. Com veieu molt més còmode:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;package &lt;/span&gt;com.example.editortext&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.appcompat.app.AppCompatActivity&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.os.Bundle&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;kotlinx.android.synthetic.main.activity_main.*&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;java.io.File&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;MainActivity : AppCompatActivity() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreate(savedInstanceState: Bundle?) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)&lt;br /&gt;        setContentView(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;activity_main&lt;/span&gt;)&lt;br /&gt;        text.setText(File(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/data/data/com.example.editortext/files/notes.txt&quot;&lt;/span&gt;).&lt;span style=&quot;font-style: italic;&quot;&gt;readText&lt;/span&gt;())&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="18"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="11"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="17"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="11"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="2"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:1%20-%20Perman%C3%A8ncia%20en%20fitxers"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="21">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="1.1 - Exemple"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="19">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="20">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="19"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;Anem a treballar sobre un exercici senzill, ampliant el que hem fet fins ara. Per tant ho podeu fer sobre el mateix projecte. Mostrarem un EditText, però ara podrem fer anotacions que es podran guardar en un únic fitxer anomenat &lt;strong&gt;notes.txt&lt;/strong&gt;, i així no caldrà demanar ni el nom del fitxer ni navegar.&lt;/p&gt;
&lt;p&gt;Hi haurà tres botons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Obrir&lt;/strong&gt;: obrirà el contingut del fitxer &lt;strong&gt;notes.txt &lt;/strong&gt;i el mostrarà en el EditText&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Guardar&lt;/strong&gt;: guardarà el contingut del EditText en el fitxer &lt;strong&gt;notes.txt&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Esborrar&lt;/strong&gt;: únicament esborrarà el contingut del EditText.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Aquest podria ser l'aspecte:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_2_1_1.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;369&quot; height=&quot;611&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;El &lt;strong&gt;Activity_Main.xml&lt;/strong&gt;: ara contindrà, a banda de l'&lt;strong&gt;EditText&lt;/strong&gt;, un &lt;strong&gt;LinearLayout&lt;/strong&gt; horitzontal situat a la banda de baix, i que contindrà els 3 botons.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:id=&quot;@+id/activity_main&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;com.example.editortext.MainActivity&quot;&amp;gt;

    &amp;lt;EditText
        android:text=&quot;&quot;
        android:id=&quot;@+id/text&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        android:inputType=&quot;textMultiLine&quot;
        android:gravity=&quot;top&quot; /&amp;gt;
    &amp;lt;LinearLayout
        android:orientation=&quot;horizontal&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentBottom=&quot;true&quot;
        android:gravity=&quot;center_horizontal&quot;
        android:layout_centerHorizontal=&quot;true&quot;&amp;gt;
        &amp;lt;Button
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:text=&quot;Obrir&quot;
            android:id=&quot;@+id/obrir&quot; /&amp;gt;
        &amp;lt;Button
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:text=&quot;Guardar&quot;
            android:id=&quot;@+id/guardar&quot; /&amp;gt;
        &amp;lt;Button
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:text=&quot;Esborrar&quot;
            android:id=&quot;@+id/esborrar&quot; /&amp;gt;
    &amp;lt;/LinearLayout&amp;gt;
&amp;lt;/RelativeLayout&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;/strong&gt;En el programa principal, a banda de col·locar les coses, ens definim la variable &lt;strong&gt;PATH&lt;/strong&gt; que contindrà la ruta on volem col·locar el fitxer, i també el tractament dels 3 botons.&lt;/p&gt;
&lt;p&gt;Podeu comprovar que tant en el botó d'obrir com en el de guardar, mirem primer l'existència de la ruta (podria ser que no existira el subdirectori &lt;strong&gt;files&lt;/strong&gt;, i aleshores el crearíem).&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package com.example.editortext

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import kotlinx.android.synthetic.main.activity_main.*
import java.io.*

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        val PATH = &quot;/data/data/$packageName/files&quot;

        obrir.setOnClickListener {
                try {
                    val dir = File(PATH)
                    if (!dir.exists())
                        dir.mkdir()
                    val f = (File(dir, &quot;notes.txt&quot;))
                    text.setText(f.readText())

                } catch (e: FileNotFoundException) {
                    e.printStackTrace()
                } catch (e: IOException) {
                    e.printStackTrace()
                }

            }

        guardar.setOnClickListener {
                try {
                    val dir = File(PATH)
                    if (!dir.exists())
                        dir.mkdir()
                    val f = PrintWriter(FileWriter(File(dir, &quot;notes.txt&quot;)))
                    f.write(text.text.toString())
                    f.close()

                } catch (e: FileNotFoundException) {
                    e.printStackTrace()
                } catch (e: IOException) {
                    e.printStackTrace()
                }

            }

        esborrar.setOnClickListener {
                text.setText(&quot;&quot;)
            }
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="3886"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="3_1.84"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="22">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="19"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="Annex_Android_2_1_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmp95QT7f/Annex_Android_2_1_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="7f6a1f14a1413f35fe8d24e65397a590"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="20"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="20"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="85"></int>
                <string role="key" value="parentNode"></string>
                <reference key="21"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="3"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="21"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="22"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="3"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:1%20-%20Perman%C3%A8ncia%20en%20fitxers:1.1%20-%20Exemple"></string>
           <string role="key" value="parent"></string>
           <reference key="11"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="25">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="1.2 - Fitxers JSON"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="23">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="24">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="112_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="23"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Com havíem vist en el Tema 3, 2 són les maneres que hem vist d'accedir a JSON, amb un driver molt senzillet anomenat &lt;strong&gt;org.json&lt;/strong&gt;, i amb un driver molt més complicat que ens permetia fer un mapatge entre el fitxer json i classes de Kotlin (realment de Java). Mirem les 2 maneres per a un mateix exemple, el de Bicicas&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Driver org.json&lt;/p&gt;
&lt;p&gt;Està incorporat en Android, és d'utilització immediata. Tot el que havíem fet en el Tema 3 ens servirà ací també, sense més variació.&lt;/p&gt;
&lt;p&gt;Anem a veure un exemple, que el complicarem un poc més per a que no siga tan immediat. En compte d'agafar un fitxer (que potser l'hauríem de col·locar directament al dispositiu...) anem a accedir directament a la pàgina de Bicicas. Tindrem la complicació afegida de que haurem de donar permisos d'Internet, i també permetre que la informació ens arribe en text clar, ja que a partir de Android 9 (API level 28), no està permesa per defecte.&lt;/p&gt;
&lt;p&gt;Per tant, en el &lt;strong&gt;AndroidManifest.xml&lt;/strong&gt;, afegirem les línies 3 i 6 (es posen les altres per a que quede clar el lloc on van)&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java line-numbers&quot;&gt;
&lt;div&gt;
&lt;div class=&quot;highlighted-code language-markup line-numbers&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;manifest ...&amp;gt;
    &amp;lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&amp;gt;
    &amp;lt;application
        ...
        android:usesCleartextTraffic=&quot;true&quot;
        ...&amp;gt;
        ...
    &amp;lt;/application&amp;gt;
&amp;lt;/manifest&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En el &lt;strong&gt;activity_main.xml&lt;/strong&gt; col·locarem un únic EditText per a visualitzar l'estat actual de Bicicas. Quedaria d'aquesta manera:&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;.MainActivity&quot;&amp;gt;
    &amp;lt;EditText
        android:text=&quot;&quot;
        android:id=&quot;@+id/text&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        android:inputType=&quot;textMultiLine&quot;
        android:gravity=&quot;top&quot; /&amp;gt;

&amp;lt;/androidx.constraintlayout.widget.ConstraintLayout&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En el &lt;strong&gt;MainActivity.kt&lt;/strong&gt; accedirem a la pàgina de Bicicas, i després farem el mateix procés que en el Tema3. La dificultat afegida ara és evidentment accedir a Internet, que a més d'haver de posar el permís en el AndroidManifest, ens impedeix accedir a Internet des del programa principal. Ho esquivem muntant un fil (thread) que s'execute en paral·lel. Des del programa principal llancem el fil, i ens esperem a que acabe. En el fil és on tenim realment l'accés a JSON.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java line-numbers&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import kotlinx.android.synthetic.main.activity_main.*
import org.json.JSONArray
import org.json.JSONObject
import org.json.JSONTokener

import java.io.InputStreamReader
import java.net.URL

class MainActivity : AppCompatActivity() {
    internal var cont: String = &quot;&quot;


    private var sqlThread: Thread = object : Thread() {
        override fun run() {

            val adr = URL(&quot;http://gestiona.bicicas.es/apps/apps.php&quot;)
            val ent = InputStreamReader(adr.openConnection().getInputStream(),&quot;UTF-8&quot;)
            val json = ent.readText()

            val arrel = JSONTokener(json).nextValue() as JSONArray

            val estacions = arrel.getJSONObject(0).getJSONArray(&quot;ocupacion&quot;)

            for (i in 0 until estacions.length()){
                val e = estacions.get(i) as JSONObject
                cont += &quot;&quot; + e.get(&quot;id&quot;) + &quot;.- &quot; + e.get(&quot;punto&quot;) + &quot; (&quot; + e.get(&quot;ocupados&quot;) + &quot;/&quot; + e.get(&quot;puestos&quot;) + &quot;)\n&quot;
            }
        }
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        // Des de la versió 3 d'Android, no es permet obrir una connexió des del thread principal.
        // Per tant s'ha de crear un nou.
        sqlThread.start()

        // i ara esperem a que finalitze el thread fill unint-lo (join)
        try {
            sqlThread.join()
        } catch (e: InterruptedException) {
            e.printStackTrace()
        }
        text.setText(cont)
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Observeu com les línies 24 a 29 són idèntiques al programa del Tema 3, excepte que ara en compte de guardar en l'eixida estàndar, ho guardem en una variable, per a poder assignar aquesta variable en el programa principal, quan ja s'han ajuntat els dos threads.&lt;/p&gt;
&lt;p&gt;A banda d'això, estem utilitzant la llibreria &lt;strong&gt;synthetic&lt;/strong&gt;, la qual cosa ens obliga a posar dins de &lt;strong&gt;plugins&lt;/strong&gt; del &lt;strong&gt;build.gradle&lt;/strong&gt; de la app les extensions:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-json&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;    id 'kotlin-android-extensions'&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El resultat de l'execució seria el següent:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/AD_Annex_Android_1_2_1.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;389&quot; height=&quot;720&quot; /&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="3903"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="38_112_2.0"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="26">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="23"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="AD_Annex_Android_1_2_1.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmp506XHZ.eXe/previews/allyourbase/AD_Annex_Android_1_2_1.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="0d2f648885c9977c377371f72281726f"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="24"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                   </list>
                   <string role="key" value="idevice"></string>
                   <reference key="24"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="1"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="25"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="38"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="25"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="26"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="19"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:1%20-%20Perman%C3%A8ncia%20en%20fitxers:1.2%20-%20Fitxers%20JSON"></string>
           <string role="key" value="parent"></string>
           <reference key="11"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="29">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="2 - Permanència en BD Relacionals"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="27">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="28">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="1"></int>
             <string role="key" value="_idevice"></string>
             <reference key="27"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;La permanència en Bases de Dades Relacionals la dividirem en dues parts, depenent on fem la connexió, és a dir, on estiga el Sistema Gestor de Bases de Dades.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Connexió remota&lt;/strong&gt;: la Base de Dades no està en la mateixa màquina, és a dir, no està en el dispositiu mòbil. Serà el tipus de connexió que faríem si connectàrem a Oracle, PostgreSQL o MySQL, ja que evidentment no instal·larem en el dispositiu mòbil aquestos SGBD.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Connexió local&lt;/strong&gt;: la Base de Dades està en el mateix dispositiu mòbil. És el cas de SQLite, que ja ve instal·lat per defecte en Android, per ser molt lleuger. Aleshores la Base de Dades estarà en el mateix dispositiu.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;En contra del que cabria esperar, la primera connexió és més fàcil, ja que les classes que hem vist per a Java ens serviran per a Android. Només haurem d'anar amb compte de permetre la connexió a Internet a l'aplicació i evidentment incloure en el projecte la classe corresponent al Driver JDBC del SGBD triat.&lt;/p&gt;
&lt;p&gt;En canvi, la connexió local resulta ser un poc més complicada, ja que no podrem utilitzar còmodament el driver que utilitzàvem per a SQLite, i ens obligarà a canviar les coses.&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="28"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="29"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="4"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="29"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="4"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:2%20-%20Perman%C3%A8ncia%20en%20BD%20Relacionals"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="32">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="2.1 - Connexió remota"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="30">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="31">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="30"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;Utilitzarem les mateixes classes que en Java. És a dir, el driver JDBC ens funcionarà bé, i tot serà igual que allà. Tan sols haurem de preocupar-nos de donar permís a l'aplicació de connectar-se a Internet, i evidentment acoplar-lo per a poder visualitzar les coses en Android.&lt;/p&gt;
&lt;p&gt;La veurem per a PostgreSQL, però seria senzillíssim fer-la per a Oracle o MySQL, senzillament canviant el driver JDBC i en tot cas la consulta d'accés.&lt;/p&gt;
&lt;p&gt;L'exemple que veurem serà molt senzill: ens connectem a una Base de Dades, consultem una taula i intentem veure el contingut en un EditText multilínia. Anirem comentant i solucionant els problemes que poden sorgir.&lt;/p&gt;
&lt;p&gt;El primer que farem serà dissenyar l'aplicació, dissenyar el layout, per a poder contenir les dades. Només ens plantegem un EditText per a visualitzar les dades.&lt;/p&gt;
&lt;p&gt;Sobre un projecte Android nou, anomenat &lt;strong&gt;ConnexioPostgreSQL&lt;/strong&gt;. Per a poder copiar sense problemes els programes posteriors, posarem el domini &lt;strong&gt;example.com&lt;/strong&gt;, i així el paquet es dirà &lt;strong&gt;com.example.connexiopostgresql&lt;/strong&gt;. Podeu copiar el layout &lt;strong&gt;activity_main.xml&lt;/strong&gt;:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;RelativeLayout &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;.MainActivity&quot; &lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;EditText&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:inputType&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;textMultiLine&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:gravity&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;top&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;RelativeLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;Es pot observar que únicament hem muntat un EditText  amb el nom &lt;strong&gt;text&lt;/strong&gt;, que s'ajusta a tota la pantalla, i que és multilínia.&lt;/p&gt;
&lt;p&gt;El programa és senzill. Només hauríem de connectar, executar la sentència (com és un SELECT serà &lt;strong&gt;executeQuery&lt;/strong&gt; que retorna un &lt;strong&gt;ResultSet&lt;/strong&gt;), recórrer el ResultSet i anar afegint al EditText.&lt;/p&gt;
&lt;p&gt;Tenim, però, una complicació. Des de la versió 3 d'Android no es permet una connexió a Internet des del programa principal, i per tant haurem de muntar un &lt;strong&gt;thread&lt;/strong&gt; on es faça la connexió a PostgreSQL. Podríem estar temptats de fer-lo tot en el thread fill, però tenim una altra complicació, i és que només es poden canviar els controls del layout principal des del programa principal. És a dir, que el &lt;strong&gt;EditText&lt;/strong&gt; només es pot canviar des del &lt;strong&gt;MainActivity&lt;/strong&gt; (si no li hem canviat el nom, es dirà així).&lt;/p&gt;
&lt;p&gt;La solució serà omplir en el thread fill una estructura de dades, per exemple un &lt;strong&gt;ArrayList&lt;/strong&gt; de &lt;strong&gt;Strings&lt;/strong&gt;. I en el programa principal esperar a l'execució del thread fill, i després posar tot el ArrayList al EditText.&lt;/p&gt;
&lt;p&gt;En el següent programa, per a més senzillesa i comoditat, estem utilitzant &lt;strong&gt;kotlin.android.synthetic&lt;/strong&gt; per a no haver de patir col·locant els elements al programa.&lt;/p&gt;
&lt;p&gt;Si dóna algun problema en la importació de &lt;strong&gt;kotlinx&lt;/strong&gt;, senzillament hem de col·locar en el &lt;strong&gt;build-gradle&lt;/strong&gt; de la &lt;strong&gt;app &lt;/strong&gt;el &lt;strong&gt;kotlin-android-extensions&lt;/strong&gt;, és a dir:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;plugins &lt;span style=&quot;font-weight: bold;&quot;&gt;{&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;    &lt;/span&gt;id &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;'com.android.application'&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;id &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;'kotlin-android'&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;id &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;'kotlin-android-extensions'&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import android.os.Bundle

import androidx.appcompat.app.AppCompatActivity
import kotlinx.android.synthetic.main.activity_main.*
import java.sql.DriverManager


class MainActivity : AppCompatActivity() {
    internal var cont: String = &quot;&quot;


    private var sqlThread: Thread = object : Thread() {
        override fun run() {

                val conn = DriverManager.getConnection(
                    &quot;jdbc:postgresql://89.36.214.106:5432/geo_ad&quot;,
                    &quot;geo_ad&quot;,
                    &quot;geo_ad&quot;
                )

                val sentencia = &quot;SELECT * FROM COMARCA ORDER BY 1&quot;
                val st = conn.createStatement()
                val rs = st.executeQuery(sentencia)
                while (rs.next()) {
                    cont+=(rs.getString(1) + &quot; - &quot; + rs.getString(2) + &quot;\n&quot;)
                }
                rs.close()
                conn.close()


        }
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        // Des de la versió 3 d'Android, no es permet obrir una connexió des del thread principal.
        // Per tant s'ha de crear un nou.
        sqlThread.start()

        // i ara esperem a que finalitze el thread fill unint-lo (join)
        try {
            sqlThread.join()
        } catch (e: InterruptedException) {
            e.printStackTrace()
        }

            text.setText(cont)

    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Per últim tan sols queda donar el permís d'accés a Internet. Hem de modificar l'arxiu &lt;strong&gt;AndroidManifest.xml&lt;/strong&gt;, i afegir en la penúltima línia (dins de &lt;strong&gt;manifest&lt;/strong&gt; però fora d'&lt;strong&gt;application&lt;/strong&gt;):&lt;/p&gt;
&lt;p class=&quot;codi&quot;&gt;&amp;lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&amp;gt;&lt;/p&gt;
&lt;p&gt;I no ens hem d'oblidar d'afegir el driver JDBC de PostgreSQL al projecte. En &lt;strong&gt;Android Studio &lt;/strong&gt;ho podem fer copiant el driver al directori &lt;strong&gt;libs&lt;/strong&gt; (per tenir-ho més ordenat), i després amb el botó de la dreta sobre el fitxer triar &lt;strong&gt;Add as library&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Podria donar-se el cas que la versió del driver de PostgreSQL done problemes de compatibilitat amb API's antigues. Senzillament hauríem de pujar el nivell del &lt;strong&gt;minSdkVersion&lt;/strong&gt; en el &lt;strong&gt;build.gradle&lt;/strong&gt; que està dins de &lt;strong&gt;src&lt;/strong&gt;. En el cas de fer aquestos apunts, amb el driver de PostgreSQL &lt;strong&gt;postgresql-42.2.5.jar&lt;/strong&gt;, avisava que el mínim havia de ser &lt;strong&gt;26&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/Annex_Android_3_1_0.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;576&quot; height=&quot;37&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Canviant &lt;strong&gt;minSdkVersion&lt;/strong&gt; a &lt;strong&gt;26&lt;/strong&gt; desapareix l'error. Una altra solució, evidentment seria afegir una versió del driver anterior.&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;p&gt;La següent imatge mostra l'execució sobre el simulador:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;border: 1px solid black;&quot; src=&quot;resources/Annex_Android_3_1_1.png&quot; width=&quot;370&quot; height=&quot;612&quot; /&gt;&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="3887"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="5_1.140"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="33">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="30"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="Annex_Android_3_1_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmp95QT7f/Annex_Android_3_1_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="7da466914065110155b0a8ef69cfe497"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="31"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="3894"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="5_1.141"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="34">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="30"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="Annex_Android_3_1_0.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmp95QT7f/Annex_Android_3_1_0.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="3b19b0502331117b2541f1d2c89874d2"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="31"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="31"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="142"></int>
                <string role="key" value="parentNode"></string>
                <reference key="32"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="5"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="32"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="33"></reference>
               <reference key="34"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="5"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:2%20-%20Perman%C3%A8ncia%20en%20BD%20Relacionals:2.1%20-%20Connexi%C3%B3%20remota"></string>
           <string role="key" value="parent"></string>
           <reference key="29"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="37">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="2.2 - Connexió local"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="35">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="36">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="1"></int>
                <string role="key" value="_idevice"></string>
                <reference key="35"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p&gt;Com comentàvem, la connexió local resulta ser un poc més complicada, a causa de que el driver JDBC per a SQLite no funciona en Android.&lt;/p&gt;
&lt;p&gt;Hi ha per la xarxa un driver JDBC de SQLite per a Android anomenat SQLDroid, però el seu funcionament és inestable i en molts llocs no el recomanen.&lt;/p&gt;
&lt;p&gt;El que està més recomanat per la xarxa per a utilitzar SQLite són unes classe noves, que estudiarem a continuació.&lt;/p&gt;
&lt;p&gt;Per a poder practicar inicialment, ens crearem un nou projecte Android anomenat &lt;strong&gt;ConnexioSQLite&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;, sobre el paquet &lt;strong&gt;com.example.connexiosqlite&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Posarem, com en exemples anteriors, únicament un EditText per agafar el contingut d'una determinada taula, o millor dit, consulta. El &lt;strong&gt;activity_main.xml&lt;/strong&gt; quedarà així:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;EditText&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:inputType&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;textMultiLine&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:gravity&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;top&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;En el programa principal anirem col·locant totes les coses en el &lt;strong&gt;onCreate&lt;/strong&gt; sense muntar cap thread ja que no accedirem a Internet. Però com comentàvem, hem de crear unes classes noves&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="36"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="37"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="6"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="37"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="38">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="39">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="85"></int>
                <string role="key" value="_idevice"></string>
                <reference key="38"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Extends SQLiteOpenHelper&lt;/p&gt;
&lt;p&gt;Ens haurem de crear una &lt;strong&gt;nova classe&lt;/strong&gt; que herete (&lt;strong&gt;extends&lt;/strong&gt;) de la classe &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;. Li podem posar per exemple el nom &lt;strong&gt;SQLiteGestor&lt;/strong&gt;. En aquesta classe haurem d'implementar obligatòriament:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;El constructor. L'ajuda d'Android Studio ens el pot crear i no caldrà que el modifiquem&lt;/li&gt;
&lt;li&gt;El mètode &lt;strong&gt;onCreate&lt;/strong&gt;. Normalment l'utilitzarem per a crear les taules de la Base de Dades, ja que només es crida quan es crea la Base de Dades. Si no posem res estarem obligats a &quot;col·locar&quot; nosaltres el fitxer corresponent a la Base de Dades&lt;/li&gt;
&lt;li&gt;El mètode &lt;strong&gt;onUpdate&lt;/strong&gt;. Nosaltres ens aconformarem amb esborrar les taules i tornar a crear-les. En aplicacions més elaborades es podria guardar la informació en un històric, però per a nosaltres no valdrà la pena.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El millor que podem fer és que ens ajude Android Studio a crear el constructor i els 2 mètodes. Per tant, només amb posar que la nova classe és una extensió de &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt; i deixant-nos ajudar, ens apareixerà el següent &quot;esquelet&quot;.&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import android.content.Context
import android.database.sqlite.SQLiteDatabase
import android.database.sqlite.SQLiteOpenHelper

class SQLiteGestor( context: Context?, name: String?, factory: SQLiteDatabase.CursorFactory?, version: Int ) 
    : SQLiteOpenHelper(context, name, factory, version) {

    override fun onCreate(db: SQLiteDatabase) {

    }

    override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {

    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Com podem comprovar al constructor se li passen 4 paràmetres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Context&lt;/strong&gt;: normalment serà el context de l'aplicació principal.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Nom&lt;/strong&gt;: és el nom de la base de dades. Si no posem la ruta, l'obrirà (o crearà) en el directori
&lt;div class=&quot;codi2&quot;&gt;/data/data/&lt;em&gt;paquet_de_la_aplicacio&lt;/em&gt;/databases&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CursorFactory&lt;/strong&gt;: per a fabricar algun cursor en aquest moment. Normalment el deixarem a &lt;strong&gt;null&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Versió&lt;/strong&gt;: per a detectar si és una nova versió de la Base de Dades (i així aplicar &lt;strong&gt;onUpgrade&lt;/strong&gt;). Normalment el deixarem a &lt;strong&gt;1&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I com veieu, amb aquestos paràmetres crida al constructor de &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;. Per tant el constructor el deixarem exactament com està.&lt;/p&gt;
&lt;p&gt;El més habitual serà construir un objecte des del programa principal d'aquesta manera:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;bdg = SQLiteGestor(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;this&lt;/span&gt;, &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;bd.sqlite&quot;&lt;/span&gt;, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;/span&gt;, &lt;span style=&quot;color: #0000ff;&quot;&gt;1&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Anem a aplicar açò al nostre exemple il·lustratiu, el projecte &lt;strong&gt;ConnexioSQLite &lt;/strong&gt;(al final d'aquesta pregunta posarem el programa principal). En aquesta ocasió, en compte d'intentar copiar el fitxer &lt;strong&gt;Empleats.sqlite&lt;/strong&gt; en el directori&lt;strong&gt; /data/data/com.example.connexiosqlite/databases&lt;/strong&gt;, farem que es genere la taula &lt;strong&gt;EMPLEATS&lt;/strong&gt; quan es cree la primera vegada. Aleshores ens aprofitarem del mètode &lt;strong&gt;onCreate&lt;/strong&gt;. Li arriba un paràmetre que és justament la Base de Dades (&lt;strong&gt;SQLiteDatabase&lt;/strong&gt;). Sobre ella executem sentències que no tornen dades amb el mètode &lt;strong&gt;execSQL(&lt;em&gt;sentencia&lt;/em&gt;)&lt;/strong&gt;, que es veurà més avant. Així ens quedarà el mètode &lt;strong&gt;onCreate()&lt;/strong&gt; de la classe &lt;strong&gt;SQLiteGestor&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;override fun onCreate(db: SQLiteDatabase) {
        val sql = (&quot;CREATE TABLE EMPLEAT(&quot;
                + &quot;num INTEGER CONSTRAINT cp_emp PRIMARY KEY, &quot;
                + &quot;nom TEXT, &quot; + &quot;depart INTEGER, &quot; + &quot;edat INTEGER, &quot;
                + &quot;sou REAL &quot; + &quot;)&quot;)
        db.execSQL(sql)
        db.execSQL(&quot;INSERT INTO EMPLEAT VALUES (1,'Andreu',10,32,1000.0)&quot;)
        db.execSQL(&quot;INSERT INTO EMPLEAT VALUES (2,'Bernat',20,28,1200.0)&quot;)
        db.execSQL(&quot;INSERT INTO EMPLEAT VALUES (3,'Clàudia',10,26,1100.0)&quot;)
        db.execSQL(&quot;INSERT INTO EMPLEAT VALUES (4,'Damià',10,40,1500.0)&quot;)
    }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Ara la utilització des del programa principal serà:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;bdg = SQLiteGestor(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;this&lt;/span&gt;, &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;Empleats.sqlite&quot;&lt;/span&gt;, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;/span&gt;, &lt;span style=&quot;color: #0000ff;&quot;&gt;1&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt;&lt;br /&gt;Però el programa principal l'escriurem després d'haver-ho vist tot.&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="39"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="37"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="10"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="37"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="40">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="41">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="85"></int>
                <string role="key" value="_idevice"></string>
                <reference key="40"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;SQLiteDatabase&lt;/p&gt;
&lt;p&gt;Amb el helper que hem construït heretant de &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;, ja ens podrem definir un objecte de tipus Base de Dades SQLite, que és el que utilitzarem: &lt;strong&gt;SQLiteDatabase&lt;/strong&gt;. Podrem fer-lo de 2 maneres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;bdg.&lt;strong&gt;getReadableDatabase()&lt;/strong&gt; ( o simplement bgd.&lt;strong&gt;readableDatabase &lt;/strong&gt;) obrim la Base de Dades només de lectura.&lt;/li&gt;
&lt;li&gt;bdg.&lt;strong&gt;getWritableDatabase() &lt;/strong&gt;(o simplement bgd.&lt;strong&gt;writableDatabase &lt;/strong&gt;) &lt;strong&gt;&lt;/strong&gt;l'obrim en mode escriptura.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ambdós tornen un objecte &lt;strong&gt;SQLiteDatabase&lt;/strong&gt;. Per exemple:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;bd = bdg.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;writableDatabase&lt;/span&gt;&lt;/pre&gt;
&lt;p&gt;Sobre aquest objecte &lt;strong&gt;SQLiteDatabase&lt;/strong&gt; és on farem les operacions SQL. Distingirem, com en el cas de Java, entre les operacions que no tornen cap valor, sinó que serveixen per a modificar alguna taula (INSERT, DELETE, UPDATE, CREATE TABLE, ...)  i les que sí que tornen un valor, millor dit un conjunt de valors (SELECT).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;execSQL&lt;/strong&gt;: l'utilitzarem per a les que no tornen cap valor&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;query&lt;/strong&gt;: torna un cursor amb les dades. Es construeix posant com a paràmetres la taula, les columnes, condicions, ..., i així anirà construint la sentència SQL&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;rawQuery&lt;/strong&gt;: torna un cursor amb les dades. Com a paràmetre li posarem la sentència SQL i una possible llista de paràmetres (si no en posem el deixem a null)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; Per exemple una sentència de creació de una taula molt senzilla seria:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;bd.execSQL(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;CREATE TABLE T1 (C1 TEXT)&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt; I una d'inserció en la taula anterior:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;bd.execSQL(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;INSERT INTO T1 VALUES('Hola')&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt;D'aquest tipus són les sentències que havíem posat en el &lt;strong&gt;onCreate()&lt;/strong&gt; i &lt;strong&gt;onUpgrade()&lt;/strong&gt; de la classe Helper que ens construïm, per a crear les taules.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;És convenient tancar la Base de Dades quan s'acabe d'utilitzar.&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;bd.close()&lt;/pre&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="41"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="37"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="11"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="37"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="42">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="43">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="85"></int>
                <string role="key" value="_idevice"></string>
                <reference key="42"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Cursor &lt;/p&gt;
&lt;p&gt;El resultat d'una sentència SELECT és un &lt;strong&gt;cursor&lt;/strong&gt;. I més concretament estarà apuntant &lt;strong&gt;abans&lt;/strong&gt; de tota l'estructura de dades tornada, és a dir, abans de la primera fila. Un cursor és pràcticament igual que un &lt;strong&gt;ResultSet&lt;/strong&gt; dels que utilitzàvem en Java, només que els mètodes seran lleugerament diferents.&lt;/p&gt;
&lt;p&gt;Inicialment està apuntant abans de la primera fila. Per a menejar-nos podem utilitzar el mètodes &lt;strong&gt;move&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;moveToFirst&lt;/strong&gt;&lt;strong&gt;()&lt;/strong&gt;: va al primer registre.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;moveToPrevious()&lt;/strong&gt;: va a l'anterior.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;moveToNext()&lt;/strong&gt;: va al següent.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;moveToLast()&lt;/strong&gt;: va a l'últim.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;moveToPosition(int)&lt;/strong&gt;: va a la posició indicada. El primer registre és el 0.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tots ells tornen &lt;strong&gt;true&lt;/strong&gt; si ha pogut anar i &lt;strong&gt;false&lt;/strong&gt; si no ha pogut anar. En el cas de &lt;strong&gt;moveToFirst()&lt;/strong&gt; i &lt;strong&gt;moveToLast&lt;/strong&gt;&lt;strong&gt;()&lt;/strong&gt; només es pot produir &lt;strong&gt;false&lt;/strong&gt; si no tenim res en el cursor.&lt;/p&gt;
&lt;p&gt;Per a accedir a les dades de la fila activa, ho farem igual que en Java, utilitzant els mètodes &lt;strong&gt;getInt&lt;/strong&gt;,&lt;strong&gt; &lt;/strong&gt;&lt;strong&gt;getString&lt;/strong&gt;, &lt;strong&gt;getFloat&lt;/strong&gt;, &lt;strong&gt;getDouble&lt;/strong&gt;, ... i posant com a paràmetre el número de la columna, tenint en compte que&lt;strong&gt; la primera columna és la columna 0&lt;/strong&gt;, no com féiem en Java, que en els ResultSet la primera columna era la&lt;strong&gt; 1&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;A banda d'aquestes també podem agafar més informació de les Meta Dades:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;getCount()&lt;/strong&gt;: torna el número de files del cursor.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getColumnCount&lt;/strong&gt;&lt;strong&gt;()&lt;/strong&gt;: torna el número de columnes en el cursor.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getColumnName(int&lt;/strong&gt;): torna el nom de la columna especificada (la primera és la 0).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getType(int)&lt;/strong&gt;: torna el tipus de la columna especificada&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Un exemple de sentència SELECT i utilització posterior del cursor, recorrent-lo en la seua totalitat seria:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;rs = bd.rawQuery(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;SELECT * FROM T1&quot;&lt;/span&gt;,&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;/span&gt;)&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;while &lt;/span&gt;(rs.moveToNext())&lt;br /&gt;    &lt;span style=&quot;font-style: italic;&quot;&gt;println&lt;/span&gt;(rs.getString(&lt;span style=&quot;color: #0000ff;&quot;&gt;0&lt;/span&gt;))&lt;/pre&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Anem a finalitzar l'exemple &lt;strong&gt;ConnexioSQLite&lt;/strong&gt;. En el programa principal, en el &lt;strong&gt;onCreate&lt;/strong&gt;, ens definirem un objecte de la classe &lt;strong&gt;SQLiteGestor&lt;/strong&gt; que extenia &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;. A partir d'ell ens crearem un objecte &lt;strong&gt;SQLiteDatabase&lt;/strong&gt;, que en aquest cas és suficient amb que siga de lectura. Posteriorment accedirem a tota la taula EMPLEAT amb la sentència &lt;strong&gt; SELECT * FROM EMPLEAT&lt;/strong&gt;, i ja només restarà recórrer el cursor per anar col·locant en el &lt;strong&gt;EditText&lt;/strong&gt;, en aquest cas per a mostrar el nom i el sou dels empleats (camps segon i cinquè, per tant agafem el número 1 i 4).&lt;/p&gt;
&lt;p&gt;Com que utilitzem una altra vegada el &lt;strong&gt;kotlin.android.synthetic&lt;/strong&gt; per a més comoditat en col·locar els elements, si dóna algun problema en la importació de &lt;strong&gt;kotlinx&lt;/strong&gt;, senzillament hem de col·locar en el &lt;strong&gt;build-gradle&lt;/strong&gt; de la &lt;strong&gt;app &lt;/strong&gt;el &lt;strong&gt;kotlin-android-extensions&lt;/strong&gt;, és a dir:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;plugins &lt;span style=&quot;font-weight: bold;&quot;&gt;{&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;    &lt;/span&gt;id &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;'com.android.application'&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;id &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;'kotlin-android'&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;id &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;'kotlin-android-extensions'&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import kotlinx.android.synthetic.main.activity_main.*

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        val bdg = SQLiteGestor(this, &quot;Empleats.sqlite&quot;, null, 1)
        val bd = bdg.readableDatabase

        val rs = bd.rawQuery(&quot;SELECT * FROM EMPLEAT&quot;, null)

        var cont =&quot;&quot;
        while (rs.moveToNext()) {
            cont += rs.getString(1) + &quot; --&amp;gt; &quot; + rs.getDouble(4).toString() + &quot;€\n&quot;
        }
        text.setText(cont)
        rs.close()
        bd.close()
        bdg.close()
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I el resultat seria aquest:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_3_2_1.png&quot; style=&quot;border: 1px solid black;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="3889"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="12_85.80"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="44">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="42"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="Annex_Android_3_2_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmp95QT7f/Annex_Android_3_2_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="0ea14b09b960e50a2641aa1a3ef9014f"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="43"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="43"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="81"></int>
                <string role="key" value="parentNode"></string>
                <reference key="37"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="12"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="37"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="44"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="6"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:2%20-%20Perman%C3%A8ncia%20en%20BD%20Relacionals:2.2%20-%20Connexi%C3%B3%20local"></string>
           <string role="key" value="parent"></string>
           <reference key="29"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="47">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="2.2.1 - Exemple"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="45">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="46">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="1"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="45"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Anem a modificar un exercici fet en el mòdul de &lt;strong&gt;DI&lt;/strong&gt;, el de &lt;strong&gt;CoffeeShops&lt;/strong&gt;, per a guardar les dades en una Base de Dades SQLite. Concretament el que anem a guardar en la Base de Dades són les dades dels cafès i les imatges.&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;&lt;strong&gt;Nota&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Si no teniu aquesta aplicació, us la podeu baixar del Moodle, tant la versió original per a poder aplicar els canvis ací exposats, com la versió amb els canvis ja fets.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;El primer que haurem de fer és dissenyar la Base de Dades, cosa senzilla, ja que només ens plantegem mostrar el nom del cafè, l'adreça, la puntuació si la tinguérem i una imatge. També guardarem un número del local, que el podem fer perfectament autoincrementat. Si pensem en afegir algun camp, ho podem fer a posteriori sense cap problema&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;LOCAL (&lt;span style=&quot;text-decoration: underline;&quot;&gt;num&lt;/span&gt;, nom, adreca, punts, imatge)&lt;/p&gt;
&lt;p&gt;Com dèiem, el primer camp el farem enter autonumèric, el segon i tercer de text, i el quart també enter.&lt;/p&gt;
&lt;p&gt;Per a guardar la imatge, podríem fer referència únicament al seu nom (i en tot cas ruta), i per tant seria també de text. Aquesta és la manera més habitual de guardar les imatges. Però en aquest exemple, per a poder practicar un poc més, intentarem guardar la mateixa imatge en la Base de Dades. En aquest cas el tipus de dades apropiat és BLOB.&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;LOCAL (&lt;span style=&quot;text-decoration: underline;&quot;&gt;num&lt;/span&gt;: integer, nom: text, adreca: text, punts: integer, imatge: Blob)&lt;/p&gt;
&lt;p&gt;No ens plantejarem crear la Base de Dades des de l'aplicació, ja que suposaria accedir als fitxers de les imatges i seria un procés més laboriós que no interessa en aquest moment. Ens ajudarem doncs d'alguna utilitat de SQLite, per exemple el &lt;strong&gt;SQLite Studio&lt;/strong&gt;, que permet introduir camps normals i també fitxers sencers en un Blob incloent imatges des de la versió 3.2. Anomenarem a la Base de Dades &lt;strong&gt;CoffeeShops.sqlite&lt;/strong&gt;. Si no us aclariu a crear la Base de Dades, la podeu demanar al professor.&lt;/p&gt;
&lt;p&gt;Del programa ja fet en l'altre mòdul (DI) no canviarem molta cosa, únicament la procedència de les dades, i l'estrictament necessari:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;En &lt;strong&gt;Tarjeta&lt;/strong&gt;, la propietat &lt;strong&gt;imag&lt;/strong&gt; abans era un &lt;strong&gt;int&lt;/strong&gt; perquè guardàvem la referència de la imatge, però ara guardarem la mateixa imatge, que la portarem des de la Base de Dades. Ens convé un array de bytes (&lt;strong&gt;ByteArray&lt;/strong&gt;), ja que podrem passar fàcilment les dades des de la BD, i damunt és serialitzable. Podríem haver utiltizat un &lt;strong&gt;Drawable&lt;/strong&gt;, però aquest no és serialitzable mentre que l'array de bytes sí, i ens fa falta per a poder passar les dades al segon Activity. Haurem de canviar també el &lt;strong&gt;getImag&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;, lògicament. Estan marcades en roig les coses que han canviat.&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; padding-left: 60px;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;Tarjeta(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;imag&lt;/span&gt;: &lt;span style=&quot;color: #ff0000;&quot;&gt;ByteArray&lt;/span&gt;, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;titulo&lt;/span&gt;: String, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;subtit&lt;/span&gt;: String) &lt;span style=&quot;color: #808080;&quot;&gt;{}&lt;/span&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;En &lt;strong&gt;CardsAdapter&lt;/strong&gt; canvia la manera de plasmar la imatge. Abans era un &lt;strong&gt;int&lt;/strong&gt; que feia referència a un recurs (la imatge guardada en &lt;strong&gt;res.drawable&lt;/strong&gt;). Ara tenim la pròpia imatge, en un &lt;strong&gt;ByteArray&lt;/strong&gt;. Una manera de passar-li'l al &lt;strong&gt;ImageView&lt;/strong&gt; és convertir-la prèviament en un &lt;strong&gt;Bitmap&lt;/strong&gt; (amb el mètode &lt;strong&gt;decodeByteArray&lt;/strong&gt; de &lt;strong&gt;BitmapFactory&lt;/strong&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.LayoutInflater&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.View&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.ViewGroup&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.ImageView&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.RatingBar&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.TextView&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.RecyclerView&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;import &lt;/span&gt;android.graphics.BitmapFactory&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;CardsAdapter(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;: ArrayList&amp;lt;Tarjeta&amp;gt;) : RecyclerView.Adapter&amp;lt;CardsAdapter.TarjViewHolder&amp;gt;() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;inner class &lt;/span&gt;TarjViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;imagen&lt;/span&gt;: ImageView&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;text&lt;/span&gt;: TextView&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;text1&lt;/span&gt;: TextView&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;barstars&lt;/span&gt;: RatingBar&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;puntos&lt;/span&gt;: TextView&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;init &lt;/span&gt;{&lt;br /&gt;&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;imagen &lt;/span&gt;= itemView.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;img1&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;text &lt;/span&gt;= itemView.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;textView&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;text1 &lt;/span&gt;= itemView.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;textView1&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;puntos &lt;/span&gt;= itemView.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;textView2&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;barstars &lt;/span&gt;= itemView.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;ratingBar&lt;/span&gt;)&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;fun &lt;/span&gt;bindCards(t: Tarjeta) {&lt;br /&gt;            &lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;//imagen.setImageResource(t.imag)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;val &lt;/span&gt;img = t.&lt;span style=&quot;font-weight: bold;&quot;&gt;imag&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;val &lt;/span&gt;imgBmp = BitmapFactory.decodeByteArray(img, 0, img.&lt;span style=&quot;font-weight: bold;&quot;&gt;size&lt;/span&gt;)&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;            &lt;span style=&quot;font-weight: bold;&quot;&gt;imagen&lt;/span&gt;.setImageBitmap(imgBmp)&lt;/span&gt;&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;text&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;text &lt;/span&gt;= t.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;titulo&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;            text1&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;text &lt;/span&gt;= t.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;subtit&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;            barstars&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;onRatingBarChangeListener &lt;/span&gt;= RatingBar.OnRatingBarChangeListener &lt;span style=&quot;font-weight: bold;&quot;&gt;{ &lt;/span&gt;ratingBar, rating, fromUser &lt;span style=&quot;font-weight: bold;&quot;&gt;-&amp;gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;puntos&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;text &lt;/span&gt;= rating.toString()&lt;br /&gt;                &lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;        &lt;/span&gt;}&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreateViewHolder(viewGroup: ViewGroup, viewType: Int): TarjViewHolder {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;itemView = LayoutInflater.from(viewGroup.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;context&lt;/span&gt;).inflate(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;item_cards&lt;/span&gt;, viewGroup, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;false&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;return &lt;/span&gt;TarjViewHolder(itemView)&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onBindViewHolder(viewHolder: TarjViewHolder, pos: Int) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;item = &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;[pos]&lt;br /&gt;        viewHolder.bindCards(item)&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;getItemCount(): Int {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;size&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;    &lt;/span&gt;}&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;getItemViewType(position: Int): Int {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;return &lt;/span&gt;position&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;
&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Inicialment copiarem la Base de Dades ja dissenyada al lloc oportú del simulador de dispositiu, que serà &lt;strong&gt;/data/data/&lt;/strong&gt;&lt;strong&gt;&lt;em&gt;nom_del_paquet&lt;/em&gt;/databases/CoffeShop.sqlite. &lt;/strong&gt;Estaria bé copiar el fitxer de la Base de Dades la primera vegada que s'execute el programa, però ho deixarem per a un poc més avant. Per a comprovar que realment agafem les dades de la Base de Dades, incorporarem una nova fila que no estava abans.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;La classe que derivarà de &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;, serà inicialment molt senzilla: no tindrà res. Distint seria si vulguérem copiar el fitxer de la Base de Dades la primera vegada que s'executa, però ara no ens ho plantegem. Per tant inicialment aquesta classe, que anomenarem &lt;strong&gt;SQLiteGestor&lt;/strong&gt; serà així (fins i tot podeu deixar que es genere automàticament amb l'ajuda de Android Studio, quan poseu que hereta de SQLiteOpenHelper):&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.content.Context&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.database.sqlite.SQLiteDatabase&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.database.sqlite.SQLiteOpenHelper&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;SQLiteGestor(context: Context,name: String) : SQLiteOpenHelper(context, name,&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;/span&gt;,&lt;span style=&quot;color: #0000ff;&quot;&gt;1&lt;/span&gt;) {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreate(sqLiteDatabase: SQLiteDatabase) {}&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onUpgrade(sqLiteDatabase: SQLiteDatabase, i: Int, i2: Int) {}&lt;br /&gt;}&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;En el programa que utilitza tot l'anterior, que és &lt;strong&gt;CardsActivity&lt;/strong&gt;, l'únic que canviarà és que no crearem els objectes &lt;strong&gt;Tarjeta&lt;/strong&gt; directament, sinó que agafarem les dades de la Base de Dades. Observeu que agafar la imatge és igual de fàcil que la resta de camps:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.appcompat.app.AppCompatActivity&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.os.Bundle&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.appcompat.widget.Toolbar&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.LinearLayoutManager&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.RecyclerView&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;CardsActivity : AppCompatActivity() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private var &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;: ArrayList&amp;lt;Tarjeta&amp;gt;? = &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;    override fun &lt;/span&gt;onCreate(savedInstanceState: Bundle?) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)&lt;br /&gt;        setContentView(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;activity_cards&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;items &lt;/span&gt;= ArrayList&amp;lt;Tarjeta&amp;gt;()&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        &lt;span style=&quot;font-style: italic;&quot;&gt;/*items!!.add(Tarjeta(R.drawable.images, &quot;Antico Caffè Greco&quot;, &quot;St. Italy, Rome&quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images1, &quot;Coffee Room&quot;,&quot;St. Germany, Berlin &quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images2, &quot;Coffee Ibiza&quot;,&quot;St. Colon, Madrid&quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images3, &quot;Pudding Coffee Shop&quot;, &quot;St. Diagonal, Barcelona&quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images4, &quot;L'Express&quot;, &quot;St. Picadilly Circus, London&quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images5, &quot;Coffee Corner&quot;,&quot;St. Àngel Guimerà, Valencia&quot;))&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        items!!.add(Tarjeta(R.drawable.images6, &quot;Sweet Cup&quot;,&quot;St.Kinkerstraat, Amsterdam&quot;)) */&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;var &lt;/span&gt;bdg: SQLiteGestor? = &lt;span style=&quot;font-weight: bold;&quot;&gt;null&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;        &lt;/span&gt;bdg = SQLiteGestor(&lt;span style=&quot;font-weight: bold;&quot;&gt;this&lt;/span&gt;, &lt;span style=&quot;font-weight: bold;&quot;&gt;&quot;CoffeeShops.sqlite&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        &lt;span style=&quot;font-weight: bold;&quot;&gt;val &lt;/span&gt;bd = &lt;span style=&quot;background-color: #dbffdb;&quot;&gt;bdg&lt;/span&gt;.&lt;span style=&quot;font-style: italic;&quot;&gt;readableDatabase&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;val &lt;/span&gt;rs = bd.rawQuery(&lt;span style=&quot;font-weight: bold;&quot;&gt;&quot;SELECT * FROM LOCAL&quot;&lt;/span&gt;, &lt;span style=&quot;font-weight: bold;&quot;&gt;null&lt;/span&gt;)&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        &lt;span style=&quot;font-weight: bold;&quot;&gt;while &lt;/span&gt;(rs.moveToNext())&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;            &lt;span style=&quot;font-weight: bold;&quot;&gt;items&lt;/span&gt;!!.add(Tarjeta(rs.getBlob(4), rs.getString(1), rs.getString(2)))&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        rs.close()&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        bd.close()&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;        &lt;span style=&quot;background-color: #dbffdb;&quot;&gt;bdg&lt;/span&gt;.close()&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;toolbar = findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;toolbar&lt;/span&gt;) &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;as &lt;/span&gt;Toolbar&lt;br /&gt;        setSupportActionBar(toolbar)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;recView = findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;recView&lt;/span&gt;) &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;as &lt;/span&gt;RecyclerView&lt;br /&gt;        recView.setHasFixedSize(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;true&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;adaptador = CardsAdapter(&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;!!)&lt;br /&gt;&lt;br /&gt;        recView.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;adapter &lt;/span&gt;= adaptador&lt;br /&gt;        recView.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;layoutManager &lt;/span&gt;= LinearLayoutManager(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;this&lt;/span&gt;, LinearLayoutManager.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;VERTICAL&lt;/span&gt;, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;false&lt;/span&gt;)&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Amb açò la nostra aplicació ja funcionarà. Al final de tot es veuria un local nou, amb la seua imatge, introduït només en la Base de Dades, senyal que les dades s'agafen de la Base de Dades&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/AnnexAndroid_2_2_1_1.png&quot; alt=&quot;&quot; width=&quot;336&quot; height=&quot;720&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Però com havia comentat abans, per acabar de deixar-la bé, hauríem de fer possible que la primera vegada es copiara d'alguna manera de Base de Dades, i no haver de copiar-la a mà dins del dispositiu.&lt;/p&gt;
&lt;p&gt;El lloc oportú, òbviament, és en &lt;strong&gt;SQLiteGestor&lt;/strong&gt;, la classe que hereta de &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;. Havíem vist en una altra ocasió que existia el mètode &lt;strong&gt;onCreate&lt;/strong&gt;&lt;strong&gt;()&lt;/strong&gt;. Però en aquest lloc col·locàvem les sentències SQL de creació de taula i d'inserció de dades. És a dir, aniran sentències SQL de quan ja existeix la Base de Dades, perquè s'acaba de crear.&lt;/p&gt;
&lt;p&gt;En el nostre exemple no ens podem plantejar la sentència d'inserció, perquè hem d'inserir una imatge (en SQL !!!). El que més ens convé és copiar la Base de Dades des d'algun lloc, ja que la BD la hem creat des del DBeaver de forma còmoda i ens ha anat bé. Però en el &lt;strong&gt;onCreate()&lt;/strong&gt; només podem fer sentències SQL.&lt;/p&gt;
&lt;p&gt;La solució serà copiar el fitxer de la Base de Dades en el &lt;strong&gt;constructor&lt;/strong&gt; de &lt;strong&gt;SQLiteGestor&lt;/strong&gt;. I copiarem byte a byte, per tant ens convé el mètode &lt;strong&gt;readBytes()&lt;/strong&gt; per a llegir (que llig tots els bytes del fitxer), i el mètode &lt;strong&gt;writeBytes()&lt;/strong&gt; que escriu tots els byte que se li passen&lt;strong&gt;&lt;/strong&gt;. El fitxer de la Base de Dades el posarem dins de &lt;strong&gt;res&lt;/strong&gt;, com altres recursos, però en una subcarpeta anomenada &lt;strong&gt;raw&lt;/strong&gt;. Android ens obliga a que aquest fitxer estiga en minúscules, per tant:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Copiem el fitxer &lt;strong&gt;CoffeeShops.sqlite &lt;/strong&gt; en &lt;strong&gt;res -&amp;gt; raw &lt;/strong&gt;donant-li el nom &lt;strong&gt;coffeeshops.sqlite&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La lògica que utilitzarem en el constructor per a copiar serà:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Si no existeix el subdirectori &lt;strong&gt;databases&lt;/strong&gt;, el crearem.&lt;/li&gt;
&lt;li&gt;Si no existeix el fitxer &lt;strong&gt;CoffeeShops.sqlite&lt;/strong&gt; el copiarem&lt;/li&gt;
&lt;li&gt;Agafem el fitxer original amb &lt;strong&gt;context.getResources().openRawResource(R.raw.coffeeshops)&lt;/strong&gt; (no se li posa l'extensió)&lt;/li&gt;
&lt;li&gt;Per aquesta lògica, si el fitxer ja existeix, no el copiarà. Per tant, si per les proves anteriors havíem copiat el fitxer directament (des del Android Device Monitor), l'haurem d'esborrar abans d'executar-lo la primera vegada.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.content.Context&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.database.sqlite.SQLiteDatabase&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.database.sqlite.SQLiteOpenHelper&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;java.io.File&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;SQLiteGestor( context: Context, name: String) : SQLiteOpenHelper(context, name, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;/span&gt;, &lt;span style=&quot;color: #0000ff;&quot;&gt;1&lt;/span&gt;) {&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;myContext&lt;/span&gt;: Context? = &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;    init &lt;/span&gt;{&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;PATH_BD = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/data/data/&quot; &lt;/span&gt;+ context.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;packageName &lt;/span&gt;+ &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;/databases&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;NOM_BD = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;CoffeeShops.sqlite&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;dir = File(PATH_BD)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;if &lt;/span&gt;(!dir.exists())&lt;br /&gt;            dir.mkdir()&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;f = File(dir, NOM_BD)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;if &lt;/span&gt;(!f.exists()) {&lt;br /&gt;            &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;f_in = context.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;resources&lt;/span&gt;.openRawResource(R.raw.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;coffeeshops&lt;/span&gt;)&lt;br /&gt;            f.&lt;span style=&quot;font-style: italic;&quot;&gt;writeBytes&lt;/span&gt;(f_in.&lt;span style=&quot;font-style: italic;&quot;&gt;readBytes&lt;/span&gt;())&lt;br /&gt;        }&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreate(db: SQLiteDatabase) {}&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {}&lt;br /&gt;&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="3896"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="7_1.64"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="48">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="45"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="AnnexAndroid_2_2_1_1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmp95QT7f/AnnexAndroid_2_2_1_1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="79fc149c40ad61afd06955416a5d83e6"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="46"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="46"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="65"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="47"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="7"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="47"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="48"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="7"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:2%20-%20Perman%C3%A8ncia%20en%20BD%20Relacionals:2.2%20-%20Connexi%C3%B3%20local:2.2.1%20-%20Exemple"></string>
              <string role="key" value="parent"></string>
              <reference key="37"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="51">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="3 - Eina ORM: Biblioteca ROOM"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="49">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="text"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="text"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="50">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="108_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="49"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;En el Tema 5 hem vist una eina ORM molt potent, Hibernate. Però no podem utilitzar-la en Android.&lt;/p&gt;
&lt;p&gt;Hi ha unes quantes ORM que es poden utilitzar en Android, com per exemple GreenDAO o SugarORM. Tanmateix, anem a utilitzar una altra, la&lt;strong&gt; llibreria ROOM&lt;/strong&gt;, que potser no és tan potent com les anteriors, però és la que s'està utilitzant més actualment per a mapejar Bases de Dades de &lt;strong&gt;SQLite&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Ho practicarem tot sobre un projecte nou anomenat &lt;strong&gt;Empleat_ROOM &lt;/strong&gt;cosa que suposarà segurament que  s'utilitze el paquet &lt;strong&gt;com.example.empleat_room&lt;/strong&gt;. Per a fer-lo el més senzill possible, en ell únicament col·loquem un &lt;strong&gt;EditText&lt;/strong&gt; per a mostrar en ell les dades dels empleats. Aquest seria el&lt;strong&gt; activity_main.xml&lt;/strong&gt;:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;RelativeLayout &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;.MainActivity&quot; &lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;EditText&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:inputType&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;textMultiLine&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:gravity&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;top&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;RelativeLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p class=&quot;titolet&quot;&gt;Dependències&lt;/p&gt;
&lt;p&gt;Per a utilitzar ROOM hem d'incorporar en el &lt;strong&gt;build.gradle&lt;/strong&gt; de l'aplicació la següent dependència:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;plugins {
    ...
    id 'kotlin-android-extensions'   // Per a accedir als components del layout
    id 'kotlin-kapt'
}
...

dependencies {
...
  def room_version = &quot;2.2.5&quot;

  implementation &quot;androidx.room:room-runtime:$room_version&quot;
  kapt &quot;androidx.room:room-compiler:$room_version&quot;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;On hem posat punts suspensius per indicar que hem d'afegir aquestes línies, la primera al principi, i les altres dins del bloc de dependencies.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Components de ROOM&lt;/p&gt;
&lt;p&gt;Els 3 component principals de ROOM són:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Entity:&lt;/strong&gt; representa una taula de la Base de Dades, i serà una classe a la qual es convertirà la taula. Utilitzarem l'anotació &lt;strong&gt;@Entity&lt;/strong&gt;, i per a fer correspondre cada propietat amb un camp de la taula, utilitzarem les anotacions&lt;strong&gt; @PrimaryKey&lt;/strong&gt; i &lt;strong&gt;@ColumnInfo&lt;/strong&gt;. També podrem representar les claus externes amb &lt;strong&gt;@ForeignKey&lt;/strong&gt;, però no les utilitzarem en aquestos apunts per a no saturar&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DAO:&lt;/strong&gt; serà una interfície que contindrà els mètodes utilizats per a accedir a la Base de Dades.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RoomDatabase:&lt;/strong&gt; representarà la connexió a la Base de Dades&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Anem a comentar cadascun d'aquestos components, i per a això ens basarem en l'exemple dels Empleats. Utilitzarem la Base de Dades &lt;strong&gt;Empleats.sqlite&lt;/strong&gt;, que teniu en l'aula virtual, on de moment només tenim una taula EMPLEAT amb aquesta estructura:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;EMPLEAT(&lt;u&gt;num&lt;/u&gt;: Integer, nom: Text, depart Integer, edat: Integer, sou: Real)&lt;/p&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="50"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="51"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="18"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="51"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="52">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="text"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="text"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="53">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="109_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="52"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Entity&lt;/p&gt;
&lt;p&gt;Per a cada taula que vulguem mapejar, haurem de crear una classe amb l'anotació &lt;strong&gt;@Entity&lt;/strong&gt;. Com que aquesta classe és per a contenir dades, millor declarar-la com classe de dades &lt;strong&gt;(data&lt;/strong&gt; &lt;strong&gt;class&lt;/strong&gt;). Si la taula tinguera en la Base de Dades un nom diferent al de la classe, ho hauríem d'especificar entre parèntesis amb &lt;strong&gt;tableName&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;El camp que siga clau principal el marcarem amb l'anotació &lt;strong&gt;@PrimaryKey&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Aquelles propietats que tinguen un nom diferent al nom del camp corresponent, els marcarem amb l'anotació &lt;strong&gt;@ColumnInfo&lt;/strong&gt; seguida del nom del camp de la taula entre parèntesis&lt;/li&gt;
&lt;li&gt;També es poden definir claus externes amb &lt;strong&gt;ForeignKey&lt;/strong&gt;, encara que és un poc més complicat&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En el nostre exemple, la classe &lt;strong&gt;Empleat.kt&lt;/strong&gt; ens quedaria així:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;ColumnInfo&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;Entity&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;PrimaryKey&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;@Entity&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;data class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;Empleat &lt;/span&gt;(&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@PrimaryKey &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;num&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Int?&lt;/span&gt;,&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;nom&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;?,&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@ColumnInfo&lt;/span&gt;(&lt;span style=&quot;color: #4a86e8;&quot;&gt;name = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;depart&quot;&lt;/span&gt;) &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;departament&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;?,&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;edat&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;?,&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;sou&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Float&lt;/span&gt;?&lt;br /&gt;)&lt;/pre&gt;
&lt;p&gt;Observeu com:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Al costat de &lt;strong&gt;@Entity&lt;/strong&gt; no ha calgut posar el nom de la taula, perquè la classe i la taula es diran igual&lt;/li&gt;
&lt;li&gt;De les 5 propietats definides, només ha calgut posar l'anotació &lt;strong&gt;@ColumnInfo&lt;/strong&gt; en la tercera per al departament, perquè és l'única en què la propietat no es diu igual que el camp de la taula&lt;/li&gt;
&lt;li&gt;Hem posat ? darrere de totes les propietats fins i tot en la que en la taula és clau principal, ja que no estan definides com a NOT NULL en la taula (tampoc la clau principal, encara que evidentment no pot ser nula)&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="53"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="51"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="19"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="51"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="54">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="text"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="text"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="55">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="108_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="54"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;DAO&lt;/p&gt;
&lt;p&gt;Com ja hem comentat més amunt, el DAO serà una interfície que contindrà tots els mètodes per a accedir a la Base de Dades.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Començarà amb l'anotació &lt;strong&gt;@DAO&lt;/strong&gt;, i serà una interfície (&lt;strong&gt;interface&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Els mètodes d'actualització, que són inserció, esborrat i actualització, començaran per l'anotacio &lt;strong&gt;@insert&lt;/strong&gt;, &lt;strong&gt;@delete&lt;/strong&gt; i &lt;strong&gt;@update &lt;/strong&gt; respectivament, i són molt senzills perquè només hem de definir la funció, com veurem després en l'exemple. Hem de fer constar que posarem aquestos mètodes únicament pera il·lustrar-los, ja que en el nostre exemple no els utilitzarem.&lt;/li&gt;
&lt;li&gt;Els mètodes de consulta comencen amb l'anotació &lt;strong&gt;@Query&lt;/strong&gt; seguida per la sentència SQL. En la definició de la funció haurem de dir el tipus tornat, normalment un &lt;strong&gt;List&lt;/strong&gt; de la classe corresponent a la taula on fem la consulta. La consulta pot ser complicada, i fins i tot utilitzar paràmetres. En aquest exemple inicial, només farem la consulta completa de tota la taula &lt;strong&gt;EMPLEAT&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El DAO del nostre exemple, que anomenarem &lt;strong&gt;EmpleatsDAO&lt;/strong&gt; podria quedar de la següent manera:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.*&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;@Dao&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;interface &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;EmpleatsDAO &lt;/span&gt;{&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@Insert&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;insert&lt;/span&gt;(e: &lt;span style=&quot;color: #000000;&quot;&gt;Empleat&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@Delete&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;delete&lt;/span&gt;(e: &lt;span style=&quot;color: #000000;&quot;&gt;Empleat&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@Update&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;update&lt;/span&gt;(e: &lt;span style=&quot;color: #000000;&quot;&gt;Empleat&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@Query&lt;/span&gt;(&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;SELECT * FROM EMPLEAT&quot;&lt;/span&gt;)&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;getEmpleats&lt;/span&gt;() : &lt;span style=&quot;color: #000000;&quot;&gt;List&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000000;&quot;&gt;Empleat&lt;/span&gt;&amp;gt;&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;On recordem que els mètodes d'inserció, esborrat i modificació estan únicament amb motiu il·lustratiu. Com que no els utilitzarem, perfectament els podríem suprimir. L'únic mètode que utilitzarem serà &lt;strong&gt;getEmpleats()&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="55"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="51"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="20"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="51"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="56">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="text"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="text"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="57">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="109_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="56"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;RoomDatabase&lt;/p&gt;
&lt;p&gt;Representarà la connexió a la Base de Dades i serà una classe abstracta que heretarà de &lt;strong&gt;RoomDatabase&lt;/strong&gt;. En ella:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Utilitzarem l'anotació &lt;strong&gt;@Database&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Com a paràmetre de l'anterior anotació especificarem totes les entitats que volem mapejar (en el nostre exemple només és la classe Empleat). Com pot ser més d'una, s'ha de definir dins d'un Array.&lt;/li&gt;
&lt;li&gt;En ella definirem una funció que tornarà el DAO. També serà una funció abstracta&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;Database&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #000000;&quot;&gt;RoomDatabase&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;@Database&lt;/span&gt;(&lt;span style=&quot;color: #4a86e8;&quot;&gt;entities = &lt;/span&gt;&lt;span style=&quot;color: #00627a; font-style: italic;&quot;&gt;arrayOf&lt;/span&gt;(&lt;span style=&quot;color: #000000;&quot;&gt;Empleat&lt;/span&gt;::&lt;span style=&quot;color: #0033b3;&quot;&gt;class&lt;/span&gt;), &lt;span style=&quot;color: #4a86e8;&quot;&gt;version = &lt;/span&gt;&lt;span style=&quot;color: #1750eb;&quot;&gt;1&lt;/span&gt;)&lt;br /&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;abstract class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;EmpleatsDatabase&lt;/span&gt;:RoomDatabase() {&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;abstract fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;empleatsDao&lt;/span&gt;(): &lt;span style=&quot;color: #000000;&quot;&gt;EmpleatsDAO&lt;br /&gt;&lt;/span&gt;}&lt;/pre&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="57"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="51"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="21"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="51"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="58">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="text"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="text"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="59">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="110_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="58"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Utilització des del programa principal&lt;/p&gt;
&lt;p&gt;La manera de construir la connexió a la RoomDatabase és d'aquesta manera:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;db &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;Room&lt;/span&gt;.databaseBuilder(&lt;br /&gt;    &lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;applicationContext&lt;/span&gt;,&lt;br /&gt;    &lt;span style=&quot;color: #000000;&quot;&gt;EmpleatsDatabase&lt;/span&gt;::&lt;span style=&quot;color: #0033b3;&quot;&gt;class&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;java&lt;/span&gt;, &lt;span style=&quot;color: #067d17;&quot;&gt;&quot;Empleats.sqlite&quot;&lt;br /&gt;&lt;/span&gt;).build()&lt;/pre&gt;
&lt;p&gt;Posteriorment veurem més possibilitats d'aquesta construcció. Per fer-lo de forma correcta, hauríem de tenir en compte que aquesta connexió és &quot;costosa&quot;, i per tant hauríem d'utilitzar la tècnica del Singleton per assegurar-nos que només en creem una instància, encara que la puguem utilitzar més d'una vegada. Per senzillesa no ho farem en aquest exemple.&lt;/p&gt;
&lt;p&gt;El que sí que tindrem en compte ara és que no es poden executar els accessos a la Base de Dades des del thread principal. La millor manera de solucionar açò és per mig de les corutines. Per senzillesa també, en aquest exemple ho farem de manera similar al punt 2, és a dir muntant un thread on es fan els accessos. En ell senzillament iniciem la RoomDatabase, inserim una nova empleada, i llistem tots els empleats, col·locant-los en un String. Des del programa principal, llancem el thread fill, i esperem a que finalitze (&lt;strong&gt;join&lt;/strong&gt;). En aquest moment posem en el EditText la informació.&lt;/p&gt;
&lt;p&gt;A continuació teniu tot el &lt;strong&gt;MainActivity.kt&lt;/strong&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.appcompat.app.&lt;span style=&quot;color: #000000;&quot;&gt;AppCompatActivity&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.os.&lt;span style=&quot;color: #000000;&quot;&gt;Bundle&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #000000;&quot;&gt;Room&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;kotlinx.android.synthetic.main.activity_main.*&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;MainActivity &lt;/span&gt;: AppCompatActivity() {&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;var &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;cont&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String &lt;/span&gt;= &lt;span style=&quot;color: #067d17;&quot;&gt;&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;private var &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;sqlThread&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Thread &lt;/span&gt;= &lt;span style=&quot;color: #0033b3;&quot;&gt;object &lt;/span&gt;: Thread() {&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;run&lt;/span&gt;() {&lt;br /&gt;            &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;db &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;Room&lt;/span&gt;.databaseBuilder(&lt;br /&gt;                    &lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;applicationContext&lt;/span&gt;,&lt;br /&gt;                    &lt;span style=&quot;color: #000000;&quot;&gt;EmpleatsDatabase&lt;/span&gt;::&lt;span style=&quot;color: #0033b3;&quot;&gt;class&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;java&lt;/span&gt;, &lt;span style=&quot;color: #067d17;&quot;&gt;&quot;Empleats.sqlite&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;)&lt;br /&gt;              .createFromAsset(&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;Empleats.sqlite&quot;&lt;/span&gt;)&lt;br /&gt;              .build()&lt;br /&gt;&lt;br /&gt;            &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;e1 &lt;/span&gt;= Empleat(&lt;span style=&quot;color: #1750eb;&quot;&gt;5&lt;/span&gt;,&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;Elena&quot;&lt;/span&gt;,&lt;span style=&quot;color: #1750eb;&quot;&gt;10&lt;/span&gt;,&lt;span style=&quot;color: #1750eb;&quot;&gt;25&lt;/span&gt;, &lt;span style=&quot;color: #1750eb;&quot;&gt;2500.0&lt;/span&gt;.toFloat())&lt;br /&gt;            &lt;span style=&quot;color: #000000;&quot;&gt;db&lt;/span&gt;.empleatsDao().insert(&lt;span style=&quot;color: #000000;&quot;&gt;e1&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;            &lt;span style=&quot;color: #0033b3;&quot;&gt;var &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;emps &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;db&lt;/span&gt;.empleatsDao().getEmpleats()&lt;br /&gt;&lt;br /&gt;            &lt;span style=&quot;color: #0033b3;&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: #000000;&quot;&gt;e &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;in &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;emps&lt;/span&gt;)&lt;br /&gt;                &lt;span style=&quot;color: #871094;&quot;&gt;cont&lt;/span&gt;+=&lt;span style=&quot;color: #000000;&quot;&gt;e&lt;/span&gt;.&lt;span style=&quot;color: #871094;&quot;&gt;nom &lt;/span&gt;+ &lt;span style=&quot;color: #067d17;&quot;&gt;&quot; (&quot; &lt;/span&gt;+ &lt;span style=&quot;color: #000000;&quot;&gt;e&lt;/span&gt;.&lt;span style=&quot;color: #871094;&quot;&gt;sou &lt;/span&gt;+ &lt;span style=&quot;color: #067d17;&quot;&gt;&quot;)&lt;/span&gt;&lt;span style=&quot;color: #0037a6;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;}&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;onCreate&lt;/span&gt;(savedInstanceState: &lt;span style=&quot;color: #000000;&quot;&gt;Bundle&lt;/span&gt;?) {&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)&lt;br /&gt;        setContentView(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;layout&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;activity_main&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #871094;&quot;&gt;sqlThread&lt;/span&gt;.start()&lt;br /&gt;        &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;// i ara esperem a que finalitze el thread fill unint-lo (join)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;sqlThread&lt;/span&gt;.join()&lt;br /&gt;&lt;br /&gt;        text.setText(&lt;span style=&quot;color: #871094;&quot;&gt;cont&lt;/span&gt;)&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;on en la construcció del RoomDatabase hem afegit la línia immediatament abans de construir-lo (.build() )&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;.createFromAsset(&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;Empleats.sqlite&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt;per a no haver de pujar la Base de Dades &lt;strong&gt;Emplats.sqlite &lt;/strong&gt;a mà des del Device File Explorer. Açò el que farà és que si no existeix la Base de Dades perquè és la primera vegada que s'executa, el carregarà des de la zona de &lt;strong&gt;assets&lt;/strong&gt;. Per tant abans d'executar-lo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creeu la zona de assets. Ho podeu fer fàcilment des del menú &lt;strong&gt;File -&amp;gt; New -&amp;gt; Folder -&amp;gt; Assets Folder&lt;/strong&gt;, i quan us pregunte digueu-li que en el &lt;strong&gt;main&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Aneu a la vista &lt;strong&gt;Project&lt;/strong&gt; i arrastreu el fitxer &lt;strong&gt;Empleats.sqlite&lt;/strong&gt; a &lt;strong&gt;Empleat_ROOM -&amp;gt; app -&amp;gt; src -&amp;gt; main -&amp;gt; assets&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Quan l'executem per primera vegada crearà el directori &lt;strong&gt;databases&lt;/strong&gt; i dins d'ell copiarà &lt;strong&gt;Empleats.sqlite&lt;/strong&gt; automàticament.&lt;/p&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="59"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="51"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="22"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="51"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="11"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:3%20-%20Eina%20ORM%3A%20Biblioteca%20ROOM"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="62">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.1 - Implementar relacions 1:N"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="60">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="61">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="108_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="60"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;ROOM és una llibreria senzilla, i fins i tot podríem dir que limitada, respecte a l'altra eina ORM que hem vist, Hibernate.&lt;/p&gt;
&lt;p&gt;La implementació de les claus externes que expressen relacions entre les entitats del Model Entitat-Relació no és automàtica com en cas d'Hibernate. S'ha d'implementar a mà.&lt;/p&gt;
&lt;p&gt;Anem a centrar-nos únicament en les relacions 1:N, per ser les més habituals. Una relació 1:N es traduïa al Model Relacional com una clau externa en l'entitat que participa amb cardinalitat N.&lt;/p&gt;
&lt;p&gt;Anem a aplicar-lo a l'exemple &lt;strong&gt;CoffeeShops&lt;/strong&gt;, que ja vam veure en el punt 2.2.1, però ampliant-lo per a tenir una relació 1:N: afegirem &lt;strong&gt;COMENTARIS&lt;/strong&gt; al distints locals. D'aquesta manera, la Base de Dades ens quedarà (l'anomenarem &lt;strong&gt;CoffeeShops_Com.sqlite&lt;/strong&gt; per a no confondre amb l'altra; la teniu penjada a l'Aula Virtual):&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;LOCAL (&lt;span style=&quot;text-decoration: underline;&quot;&gt;num&lt;/span&gt;: Integer, nom: Text, adreca: Text, punts: Integer, imatge: Blob)&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;COMENTARI (&lt;u&gt;id_com&lt;/u&gt;: Integer, num_local: Integer, comentari: Text)&lt;/p&gt;
&lt;p&gt;on &lt;strong&gt;num_local&lt;/strong&gt; serà la clau externa que apunta a la clau principal de LOCAL.&lt;/p&gt;
&lt;p&gt;Com havíem comentat en el punt anterior, la definició de la clau externa complica un poc la sintaxi. De moment no la definirem. Però hem de tenir clar que la definició de les anotacions ha d'anar d'acord amb la definicio de la Base de Dades. I per tant, &lt;strong&gt;si en la Base de Dades està definida la clau externa, també ho haurà d'estar en les anotacions&lt;/strong&gt;. És per això que en aquest exemple no posarem la clau externa, ni en la Base de Dades ni en les anotacions.&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Al final de tot, de forma il·lustrativa s'explica com es defineix la clau externa amb les anotacions.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Per a poder definir la relació 1:N, és a dir, que un local té molts comentaris, i poder tenir en l'objecte de tipus Local la llista de comentaris, en ROOM ens veiem obligats a definir una nova classe, que arreplega un objecte de la classe que participa amb cardinalitat 1, i una llista d'objectes de la classe que participa amb cardinalitat, amb unes anotacions que definiran la relació. Així en el nostre exemple definirem un objecte de la classe Local i una llista d'objectes de la classe Comentari, i com hem dit, unes anotacions per a definir la relació. A aquesta nova classe l'anomenarem en l'exemple &lt;strong&gt;CoffeeWithComments&lt;/strong&gt;, per a que siga il·lustrativa.&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="61"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="62"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="23"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="62"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="63">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="64">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="109_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="63"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Entitats&lt;/p&gt;
&lt;p&gt;Haurem de definir 3 entitats: la corresponent a &lt;strong&gt;Coffee&lt;/strong&gt;, la de &lt;strong&gt;Comment&lt;/strong&gt;, i com hem dit abans la que marca la relació, &lt;strong&gt;CoffeeWithComments&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;En les dues primeres aprofitarem per adequar els noms dels camps als de les propietats que ja teníem, i substituiran les que ens venen de l'exemple de DI. &lt;strong&gt;Però les modificarem en l'apartat posterior&lt;/strong&gt;. Ara només anem a il·lustrar el procés.&lt;/p&gt;
&lt;p class=&quot;titolet3&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;strong&gt;Coffee (equival a la taula LOCAL)&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;ColumnInfo&lt;/span&gt;&lt;br /&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;Entity&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;PrimaryKey&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;@Entity(tableName=&quot;LOCAL&quot;)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;data class Coffee&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; &lt;/span&gt;(&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@PrimaryKey &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;num&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;?,&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@ColumnInfo(&lt;span style=&quot;color: #4a86e8;&quot;&gt;name = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;nom&quot;&lt;/span&gt;)&lt;/span&gt; &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;title&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;?,&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@ColumnInfo(&lt;span style=&quot;color: #4a86e8;&quot;&gt;name = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;adreca&quot;&lt;/span&gt;)&lt;/span&gt; &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;subtitle&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;?,&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@ColumnInfo(&lt;span style=&quot;color: #4a86e8;&quot;&gt;name = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;punts&quot;&lt;/span&gt;)&lt;/span&gt; &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;points&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;?,&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@ColumnInfo(&lt;span style=&quot;color: #4a86e8;&quot;&gt;name = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;imatge&quot;&lt;/span&gt;)&lt;/span&gt; &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;image&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;ByteArray&lt;/span&gt;?&lt;br /&gt;)&lt;/pre&gt;
&lt;p&gt;Observeu com no ha calgut posar &lt;strong&gt;@ColumnInfo&lt;/strong&gt; en la primera propietat, perquè es diu igual que el nom del camp de la taula.&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;strong&gt;Comment (equival a la taula COMENTARIS)&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;ColumnInfo&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;Entity&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;PrimaryKey&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;@Entity(tableName=&quot;COMENTARIS&quot;)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;data class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;Comment &lt;/span&gt;(&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@PrimaryKey @ColumnInfo&lt;/span&gt;(&lt;span style=&quot;color: #4a86e8;&quot;&gt;name = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;id_com&quot;&lt;/span&gt;) &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;idCom&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;?,&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@ColumnInfo&lt;/span&gt;(&lt;span style=&quot;color: #4a86e8;&quot;&gt;name = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;num_local&quot;&lt;/span&gt;) &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;numCoffee&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;?,&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@ColumnInfo&lt;/span&gt;(&lt;span style=&quot;color: #4a86e8;&quot;&gt;name = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;comentari&quot;&lt;/span&gt;)&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;comm&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;?&lt;br /&gt;)&lt;/pre&gt;
&lt;p&gt;Ara sí que hem definit totes les vegades &lt;strong&gt;@ColumnInfo&lt;/strong&gt; perquè fins i tot en el primer camp estem canviant el nom&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;strong&gt;CoffeeWithComments&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Aquesta és la novetat:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;Embedded&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;Relation&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;java.io.&lt;span style=&quot;color: #000000;&quot;&gt;Serializable&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;data class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;CoffeeWithComments &lt;/span&gt;(&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@Embedded &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;coffee&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Coffee&lt;/span&gt;,&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@Relation&lt;/span&gt;(&lt;br /&gt;        &lt;span style=&quot;color: #4a86e8;&quot;&gt;parentColumn = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;num&quot;&lt;/span&gt;,&lt;br /&gt;        &lt;span style=&quot;color: #4a86e8;&quot;&gt;entityColumn = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;num_local&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;)&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;coms&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;List&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000000;&quot;&gt;Comment&lt;/span&gt;&amp;gt;&lt;br /&gt;): &lt;span style=&quot;color: #000000;&quot;&gt;Serializable&lt;/span&gt;&lt;/pre&gt;
&lt;p&gt;L'hem definida com a &lt;strong&gt;Serializable&lt;/strong&gt; per un motiu que no té res a veure amb la definició. Ja s'explicarà en el seu moment.&lt;/p&gt;
&lt;p&gt;Hem definit:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Un objecte de la classe &lt;strong&gt;Coffee&lt;/strong&gt;. Posem l'anotació &lt;strong&gt;@Embedded&lt;/strong&gt; per a indicar que és un objecte que a la seua vegada té anotacions.&lt;/li&gt;
&lt;li&gt;Amb l'anotació &lt;strong&gt;@Relation&lt;/strong&gt; definim la relació, especificant el nom del camp en la taula principal (LOCAL) amb &lt;strong&gt;parentColumn&lt;/strong&gt; i el de la relacionada (COMENTARI) amb &lt;strong&gt;entityColumn&lt;/strong&gt;. Observeu que hem de posar els noms dels camps de les taules, no les propietats de les classes.&lt;/li&gt;
&lt;li&gt;Per últim un List d'objectes de la classe &lt;strong&gt;Comments&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="64"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="62"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="24"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="62"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="65">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="66">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="110_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="65"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;DAO&lt;/p&gt;
&lt;p&gt;En aquesta classe ens definim els accessos que voldrem fer a la Base de Dades, tant consultes com actualitzacions. Per a que s'entenga bé, posarem dos consultes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Una que contindrà únicament els Locals. A partir d'ells no podem accedir als comentaris&lt;/li&gt;
&lt;li&gt;Una altra que contindrà LocalsAmbComentaris, i per tant podrem accedir als locals i als comentaris&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Observeu que curiosament la consulta és idèntica, però canvia la llista d'elements tornats: en el primer cas és &lt;strong&gt;List&amp;lt;Coffee&amp;gt;&lt;/strong&gt; i en el segon cas és &lt;strong&gt;List&amp;lt;CoffeeWithComments&amp;gt;&lt;/strong&gt;. Ho podem guardar al fitxer &lt;strong&gt;CoffeeShopsDao.kt&lt;/strong&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.Dao&lt;br /&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.Query&lt;br /&gt;&lt;br /&gt;@Dao&lt;br /&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;interface &lt;/span&gt;CoffeeShopsDao {&lt;br /&gt;    @Query(&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;SELECT * FROM LOCAL&quot;&lt;/span&gt;)&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;fun &lt;/span&gt;getCoffeesWithComments(): List&amp;lt;CoffeeWithComments&amp;gt;&lt;br /&gt;&lt;br /&gt;    @Query(&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;SELECT * FROM LOCAL&quot;&lt;/span&gt;)&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;fun &lt;/span&gt;getCoffees(): List&amp;lt;Coffee&amp;gt;&lt;br /&gt;}&lt;/pre&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="66"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="62"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="25"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="62"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="67">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="68">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="111_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="67"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;RoomDatabase&lt;/p&gt;
&lt;p&gt;Només hem d'observar que hem de posar les 2 entitats de les quals agafem informació: &lt;strong&gt;Local &lt;/strong&gt;i &lt;strong&gt; Comentaris&lt;/strong&gt;. Justament per si hi ha més d'una taula de la qual agafar informació entre parèntesis s'especifica un Array. Ho podem guardar en un fitxer anomenat &lt;strong&gt;CoffeeShopsDatabase.kt&lt;/strong&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;Database&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #000000;&quot;&gt;RoomDatabase&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;@Database&lt;/span&gt;(&lt;span style=&quot;color: #4a86e8;&quot;&gt;entities = &lt;/span&gt;&lt;span style=&quot;color: #00627a; font-style: italic;&quot;&gt;arrayOf&lt;/span&gt;(&lt;span style=&quot;color: #000000;&quot;&gt;Coffee&lt;/span&gt;::&lt;span style=&quot;color: #0033b3;&quot;&gt;class&lt;/span&gt;, &lt;span style=&quot;color: #000000;&quot;&gt;Comment&lt;/span&gt;::&lt;span style=&quot;color: #0033b3;&quot;&gt;class&lt;/span&gt;), &lt;span style=&quot;color: #4a86e8;&quot;&gt;version = &lt;/span&gt;&lt;span style=&quot;color: #1750eb;&quot;&gt;1&lt;/span&gt;)&lt;br /&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;abstract class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;CoffeeShopsDatabase &lt;/span&gt;: RoomDatabase() {&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;abstract fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;coffeeshopsDao&lt;/span&gt;(): &lt;span style=&quot;color: #000000;&quot;&gt;CoffeeShopsDao&lt;br /&gt;&lt;/span&gt;}&lt;/pre&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="68"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="62"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="26"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="62"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="69">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="70">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="108_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="69"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value=""></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="70"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="62"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="29"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="62"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="12"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:3%20-%20Eina%20ORM%3A%20Biblioteca%20ROOM:3.1%20-%20Implementar%20relacions%201%3AN"></string>
           <string role="key" value="parent"></string>
           <reference key="51"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="73">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.2 - Exemple complet"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="71">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="72">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="109_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="71"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Una vegada hem vist les classes que ens fan falta per a accedir per mig de ROOM, anem a fer les modificacions oportunes a l'exemple &lt;strong&gt;CoffeeShops_Fragments&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Recordem que aquest exemple mostra en un primer fragment (&lt;strong&gt;FirstFragment&lt;/strong&gt;) una sèrie de cafeteries (amb una imatge, nom, adreça i puntuació). En punxar en una cafeteria, anem un segon fragment (&lt;strong&gt;SecondFragment&lt;/strong&gt;) on es veuen el comentaris que s'han fet a aquesta cafeteria. Haurem de modificar, per tant, aquestos fitxers, així com adaptar &lt;strong&gt;CoffeeAdapter&lt;/strong&gt; i alguna cosa més.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Copieu-vos el projecte &lt;strong&gt;CoffeeShops_Fragments&lt;/strong&gt; en un altre projecte anomenat &lt;strong&gt;CoffeeShops_Fragments_ROOM&lt;/strong&gt;, per a poder conservar l'original.&lt;/li&gt;
&lt;li&gt;Modifiqueu el nom del projecte, nom del paquet, nom de l'aplicació, ... Ho farem amb 2 accions:
&lt;ul&gt;
&lt;li&gt;Des del menú &lt;strong&gt;Edit -&amp;gt; Find -&amp;gt; Repalce in path... &lt;/strong&gt;canvieu &lt;strong&gt;CoffeeShops_Fragments &lt;/strong&gt; per &lt;strong&gt;CoffeeShops_Fragments_ROOM&lt;/strong&gt;. Aneu amb compte vigilant que la diferenciació de majúscules i minúscules estiga activada (ha d'estar en blau). Es diu &lt;strong&gt;Match case&lt;/strong&gt;, i és un simbolet així: &lt;strong&gt;Aa&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Feu el mateix amb per a canviar &lt;strong&gt;coffesShops_fragments&lt;/strong&gt; en &lt;strong&gt;coffesShops_fragments_room&lt;/strong&gt; (en minúscules), cuidant que la diferenciació entre majúscules i minúscules continue activa.&lt;/li&gt;
&lt;li&gt;Sobre &lt;strong&gt;app -&amp;gt; java -&amp;gt; com.example.coffeeshops_fragments&lt;/strong&gt; fer un &lt;strong&gt;Refactor -&amp;gt; Rename&lt;/strong&gt; a &lt;strong&gt;coffeeshops_fragments_room&lt;/strong&gt; i triar després l'opció &lt;strong&gt;Rename package&lt;/strong&gt;. Això hauria d'actualitzar el paquet en totes les classes definides, i també en el AndroidManifest.xml&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Executeu-lo per veure que continua funcionant, ara ja amb el nou nom&lt;/li&gt;
&lt;li&gt;Modifiqueu el &lt;strong&gt;build.gradle&lt;/strong&gt; de l'aplicació per a que continga la llibreria &lt;strong&gt;Room&lt;/strong&gt;, afegint les línies següents i després sincronitzant:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;...
apply plugin: 'kotlin-kapt'
...

dependencies {
...
  def room_version = &quot;2.2.5&quot;

  implementation &quot;androidx.room:room-runtime:$room_version&quot;
  kapt &quot;androidx.room:room-compiler:$room_version&quot;
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Copieu les classes de l'apartat anterior: &lt;strong&gt;Coffee&lt;/strong&gt;, &lt;strong&gt;Comment&lt;/strong&gt;, &lt;strong&gt;CoffeeWithComments&lt;/strong&gt;, &lt;strong&gt;CoffeeShopsDao&lt;/strong&gt; i &lt;strong&gt;CoffeeShopsDatabase&lt;/strong&gt;. Recordeu que &lt;strong&gt;Coffee&lt;/strong&gt; i &lt;strong&gt;Comment&lt;/strong&gt; substituiran a les anteriors&lt;/li&gt;
&lt;li&gt;Ara és el moment de modificar els programes fets en el mòdul de DI, pera a adaptar-lo a l'accés a la Base de Dades a través de Room. Anirem mirant cadascun d'ells&lt;br /&gt;
&lt;ul style=&quot;list-style-type: circle;&quot;&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CoffeeAdapter&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Igual que vam fer en el punt 2.2.1, ara no agafem les imatges del &lt;strong&gt;res&lt;/strong&gt;, sinó que ens arriba la mateixa imatge. També aprofitem per a mostrar la puntuació de la Base de Dades. Posem tota la funció &lt;strong&gt;bindCards&lt;/strong&gt;: &lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;fun &lt;/span&gt;bindCards(t: Coffee, onClick: (View) -&amp;gt; Unit) {&lt;br /&gt;    &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;//image.setImageResource(t.image)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;img = t.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;image&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;if &lt;/span&gt;(img != &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;/span&gt;) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;imgBmp = BitmapFactory.decodeByteArray(img, &lt;span style=&quot;color: #0000ff;&quot;&gt;0&lt;/span&gt;, &lt;span style=&quot;background-color: #dbffdb;&quot;&gt;img&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;size&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;image&lt;/span&gt;.setImageBitmap(imgBmp)&lt;br /&gt;    }&lt;br /&gt;    &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;text&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;text &lt;/span&gt;= t.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;title&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;    text1&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;text &lt;/span&gt;= t.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;subtitle&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;if &lt;/span&gt;(t.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;points&lt;/span&gt;!=&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;barstars&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;rating &lt;/span&gt;= &lt;span style=&quot;background-color: #dbffdb;&quot;&gt;t.points&lt;/span&gt;.toFloat()&lt;br /&gt;    &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;barstars&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;onRatingBarChangeListener &lt;/span&gt;= RatingBar.OnRatingBarChangeListener &lt;span style=&quot;font-weight: bold;&quot;&gt;{ &lt;/span&gt;ratingBar: RatingBar, fl: Float, b: Boolean &lt;span style=&quot;font-weight: bold;&quot;&gt;-&amp;gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;points&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;text &lt;/span&gt;= fl.toString()&lt;br /&gt;        &lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;itemView&lt;/span&gt;.setOnClickListener&lt;span style=&quot;font-weight: bold;&quot;&gt;{ &lt;/span&gt;onClick(&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;itemView&lt;/span&gt;) &lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;br /&gt;&lt;/span&gt;}&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CommentsAdapter&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;No cal modificar res en aquest. Només en tot cas arreglar que la propietat de &lt;strong&gt;Comment&lt;/strong&gt; es diu &lt;strong&gt;comm&lt;/strong&gt;, no &lt;strong&gt;comm1&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;FirstFragment&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;En aquest sí que tenim feina. Per una banda hem d'agafar les dades de la Base de Dades a través de Room. Per una altra banda hem de passar la informació correcta al SecondFragment&lt;br /&gt;Per a la primera qüestió, recordeu que no podem accedir des del Thread principal, per tant ens muntem un altre per a fer tot l'accés a Room&lt;br /&gt;Per a la segona qüestió, voldrem passar al SecondFragment no únicament el nom del cafè, sinó tots els comentaris també. Aleshores passarem un objecte CoffeWithComments, perquè ahí està tot. Per a poder passar-lo en el bundle, ha d'heretar de &lt;strong&gt;Serializable&lt;/strong&gt;.&lt;br /&gt;També aprofitarem per a inicialitzar la puntuació de les cafeteries, ja que tenim guardada en la Base de Daes aquesta puntuació.&lt;br /&gt;Ací teniu tot el FirstFragment&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.os.Bundle&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.LayoutInflater&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.View&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.ViewGroup&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.core.os.bundleOf&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.fragment.app.Fragment&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.navigation.fragment.findNavController&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.LinearLayoutManager&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.RecyclerView&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.room.Room&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;/**&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt; * A simple &lt;/span&gt;&lt;span style=&quot;color: #3d3d3d; font-weight: bold; font-style: italic;&quot;&gt;[Fragment]&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt; subclass as the default destination in the navigation.&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt; */&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;FirstFragment : Fragment() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private var &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;: ArrayList&amp;lt;Coffee&amp;gt; = ArrayList()&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private var &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;itemsWithComments&lt;/span&gt;: ArrayList&amp;lt;CoffeeWithComments&amp;gt; = ArrayList()&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private var &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;roomThread&lt;/span&gt;: Thread = &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;object &lt;/span&gt;: Thread() {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;run() {&lt;br /&gt;            &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;db = Room.databaseBuilder(&lt;br /&gt;                    &lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;context&lt;/span&gt;!!,&lt;br /&gt;                    CoffeeShopsDatabase::&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;java&lt;/span&gt;, &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;CoffeeShops_Com.sqlite&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;            &lt;/span&gt;).createFromAsset(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;CoffeeShops_Com.sqlite&quot;&lt;/span&gt;).build()&lt;br /&gt;&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items &lt;/span&gt;= ArrayList(db.coffeeshopsDao().getCoffees())&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;itemsWithComments &lt;/span&gt;= ArrayList(db.coffeeshopsDao().getCoffeesWithComments())&lt;br /&gt;        }&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreateView(&lt;br /&gt;        inflater: LayoutInflater, container: ViewGroup?,&lt;br /&gt;        savedInstanceState: Bundle?&lt;br /&gt;    ): View? {&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;root = inflater.inflate(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;fragment_first&lt;/span&gt;, container, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;false&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;size&lt;/span&gt;==&lt;span style=&quot;color: #0000ff;&quot;&gt;0&lt;/span&gt;) {  &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;// per a no executar-lo una altra vegada quan tornem del SecondFragment&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;roomThread&lt;/span&gt;.start()&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;roomThread&lt;/span&gt;.join()&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;recView: RecyclerView = root.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;recView&lt;/span&gt;)&lt;br /&gt;        recView.setHasFixedSize(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;true&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;adaptador = CoffeeAdapter(&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;items&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        recView.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;adapter &lt;/span&gt;= adaptador&lt;br /&gt;        recView.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;layoutManager &lt;/span&gt;= LinearLayoutManager(&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;context&lt;/span&gt;, LinearLayoutManager.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;VERTICAL&lt;/span&gt;, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;false&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        adaptador.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;onClick &lt;/span&gt;= &lt;span style=&quot;font-weight: bold;&quot;&gt;{&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;c = &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;itemsWithComments&lt;/span&gt;[recView.getChildAdapterPosition(&lt;span style=&quot;font-weight: bold;&quot;&gt;it&lt;/span&gt;)]&lt;br /&gt;            &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;bundle = &lt;span style=&quot;font-style: italic;&quot;&gt;bundleOf&lt;/span&gt;(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;coffee&quot; &lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;to &lt;/span&gt;c)&lt;br /&gt;            &lt;span style=&quot;font-style: italic;&quot;&gt;findNavController&lt;/span&gt;().navigate(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;action_FirstFragment_to_SecondFragment&lt;/span&gt;, bundle)&lt;br /&gt;        &lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;return &lt;/span&gt;root&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #808080;&quot;&gt;override &lt;/span&gt;&lt;span style=&quot;color: #808080; font-weight: bold;&quot;&gt;fun &lt;/span&gt;onViewCreated(view: View, savedInstanceState: Bundle?) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;super&lt;/span&gt;.onViewCreated(view, savedInstanceState)&lt;br /&gt;&lt;br /&gt;        }&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SecondFragment&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Només haurem d'agafar la informació que ens arriba del bundle, tenint en compte que és un objecte &lt;strong&gt;CoffeeWithComments&lt;/strong&gt;. Ara ja no inicialitzem els comentaris de forma directa sinó que els agafem de l'anterior.&lt;br /&gt;Ací teniu tot el SecondFragment&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.os.Bundle&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.LayoutInflater&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.View&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.ViewGroup&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.Button&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.TextView&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.Toast&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.fragment.app.Fragment&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.navigation.fragment.findNavController&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.GridLayoutManager&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.LinearLayoutManager&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.RecyclerView&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;/**&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt; * A simple &lt;/span&gt;&lt;span style=&quot;color: #3d3d3d; font-weight: bold; font-style: italic;&quot;&gt;[Fragment]&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt; subclass as the second destination in the navigation.&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt; */&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;SecondFragment : Fragment() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private lateinit var &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;Comments&lt;/span&gt;: ArrayList&amp;lt;Comment&amp;gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreateView(&lt;br /&gt;        inflater: LayoutInflater, container: ViewGroup?,&lt;br /&gt;        savedInstanceState: Bundle?&lt;br /&gt;    ): View? {&lt;br /&gt;        &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;// Inflate the layout for this fragment&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;root = inflater.inflate(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;fragment_second&lt;/span&gt;, container, &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;false&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;texto: TextView =  root.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;textview_second&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;coffee = &lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;arguments&lt;/span&gt;?.get(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;coffee&quot;&lt;/span&gt;) &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;as &lt;/span&gt;CoffeeWithComments&lt;br /&gt;        texto.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;text &lt;/span&gt;= coffee.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;coffee&lt;/span&gt;.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;title&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;        Comments&lt;/span&gt;=ArrayList(coffee.&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;coms&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;recView: RecyclerView = root.findViewById(R.id.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;recyclerview_coment&lt;/span&gt;)&lt;br /&gt;        recView.setHasFixedSize(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;true&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;adaptador = CommentsAdapter(&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;Comments&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        recView.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;adapter &lt;/span&gt;= adaptador&lt;br /&gt;        recView.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;layoutManager &lt;/span&gt;= GridLayoutManager(&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;context&lt;/span&gt;, &lt;span style=&quot;color: #0000ff;&quot;&gt;2&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;return &lt;/span&gt;root&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #808080;&quot;&gt;override &lt;/span&gt;&lt;span style=&quot;color: #808080; font-weight: bold;&quot;&gt;fun &lt;/span&gt;onViewCreated(view: View, savedInstanceState: Bundle?) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;super&lt;/span&gt;.onViewCreated(view, savedInstanceState)&lt;br /&gt;&lt;br /&gt;      &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;/*  view.findViewById&amp;lt;Button&amp;gt;(R.id.button_second).setOnClickListener {&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;           findNavController().navigate(R.id.action_SecondFragment_to_FirstFragment)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        }*/&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;    &lt;/span&gt;}&lt;br /&gt;}&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;Creeu-vos la carpeta de &lt;strong&gt;assets&lt;/strong&gt; des del menú: &lt;strong&gt;File -&amp;gt; New -&amp;gt; Folder -&amp;gt; Assets Folder&lt;/strong&gt;, i copieu en ella la Base de Dades &lt;strong&gt;CoffeeShops.sqlite&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="72"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="73"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="28"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="73"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="13"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:3%20-%20Eina%20ORM%3A%20Biblioteca%20ROOM:3.2%20-%20Exemple%20complet"></string>
           <string role="key" value="parent"></string>
           <reference key="51"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="76">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.3 - Implementació amb les claus externes"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="74">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="75">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="108_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="74"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Per senzillesa, havíem deixat de banda la implementació de les claus externes.&lt;/p&gt;
&lt;p&gt;En cas que tinguem definida alguna clau externa, ens canviarà la definició de la classe associada a la taula on està la clau externa.&lt;/p&gt;
&lt;p&gt;Anem a mostrar-ho sobre la mateixa Base de Dades de l'exemple anterior, &lt;strong&gt;CoffeeShop.sqlite&lt;/strong&gt;, que de moment estava així:&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;LOCAL (&lt;span style=&quot;text-decoration: underline;&quot;&gt;num&lt;/span&gt;: Integer, nom: Text, adreca: Text, punts: Integer, imatge: Blob)&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;COMENTARI (&lt;u&gt;id_com&lt;/u&gt;: Integer, num_local: Integer, comentari: Text)&lt;/p&gt;
&lt;p&gt;No teníem definida la clau externa que va de &lt;strong&gt;num_local&lt;/strong&gt; en &lt;strong&gt;COMENTARI&lt;/strong&gt; a &lt;strong&gt;num&lt;/strong&gt; en &lt;strong&gt;LOCAL&lt;/strong&gt;, com mostra aquesta imatge de l'estructura en SQLIte Studio en què no hi ha res en l'apartat de &lt;strong&gt;Foreign Key&lt;/strong&gt; del camp &lt;strong&gt;num_local&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_3_3_1.png&quot; alt=&quot;&quot; width=&quot;764&quot; height=&quot;348&quot; /&gt;&lt;/p&gt;
&lt;p&gt; on es pot comprovar que no tenim res en l'apartat &lt;strong&gt;Foreign Key&lt;/strong&gt; del camp &lt;strong&gt;num_local&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Anem a aprofitar i fer algunes modificacions més, a banda de la clau externa. Anem a declarar alguns camps com a no nuls, per a veure l'efecte sobre les classes associades.&lt;/p&gt;
&lt;p&gt;Us aconselle que si voleu provar els canvis següents, ho feu en una Base de Dades nova, copiada de &lt;strong&gt;CoffeeShops_Com.sqlite&lt;/strong&gt;, amb el nom per exemple de &lt;strong&gt;CoffeeShops_Com_CE.sqlite&lt;/strong&gt;, per a que l'exemple finalitzat en la pregunta 3.2 continue funcionant.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;LOCAL&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;strong&gt;NO NUL&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Declararem els camps &lt;strong&gt;num&lt;/strong&gt; i &lt;strong&gt;nom&lt;/strong&gt; com a &lt;strong&gt;no nuls&lt;/strong&gt;. En el cas del primer, es pot interpretar com una redundància, perquè la clau principal no pot ser nula. Però declarar-la expressament com a no nul ens permetrà definir la classe associada com un camp no nul&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/Annex_Android_3_3_1_5.png&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;765&quot; height=&quot;319&quot; /&gt;&lt;/p&gt;
&lt;p&gt;es pot comprovar com hem declarat aquestos dos camps com a no nuls.&lt;/p&gt;
&lt;p&gt;La declaració de la classe associada que és &lt;strong&gt;Coffee &lt;/strong&gt;quedarà d'aquesta manera:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #808000;&quot;&gt;ColumnInfo&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #808000;&quot;&gt;Entity&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #808000;&quot;&gt;PrimaryKey&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808000;&quot;&gt;@Entity&lt;/span&gt;(tableName=&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;Local&quot;&lt;/span&gt;)&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;data class &lt;/span&gt;Coffee (&lt;br /&gt;    &lt;span style=&quot;color: #808000;&quot;&gt;@PrimaryKey &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;num&lt;/span&gt;: Int,&lt;br /&gt;    &lt;span style=&quot;color: #808000;&quot;&gt;@ColumnInfo&lt;/span&gt;(name = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;nom&quot;&lt;/span&gt;) &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;title&lt;/span&gt;: String,&lt;br /&gt;    &lt;span style=&quot;color: #808000;&quot;&gt;@ColumnInfo&lt;/span&gt;(name = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;adreca&quot;&lt;/span&gt;) &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;subtitle&lt;/span&gt;: String?,&lt;br /&gt;    &lt;span style=&quot;color: #808000;&quot;&gt;@ColumnInfo&lt;/span&gt;(name = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;punts&quot;&lt;/span&gt;) &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;points&lt;/span&gt;: Int?,&lt;br /&gt;    &lt;span style=&quot;color: #808000;&quot;&gt;@ColumnInfo&lt;/span&gt;(name = &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;imatge&quot;&lt;/span&gt;) &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;image&lt;/span&gt;: ByteArray?&lt;br /&gt;)&lt;/pre&gt;
&lt;p&gt;Observeu com no tenim la interrogant als final de les propietats &lt;strong&gt;num &lt;/strong&gt;i &lt;strong&gt;title&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;COMENTARI&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;strong&gt;NO NUL&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Definirem tots els camps com a no nuls, ja que la clau principa no pot ser nula, el número de local tampoc hauria de ser nul (sinó tindríem un comentari que no es refereix a cap local) i el comentari millor que no siga nul (sinó no tenim comentari)&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_3_3_2.png&quot; width=&quot;768&quot; height=&quot;258&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;strong&gt;CLAU EXTERNA&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Per a definir la clau externa, haurem d'especificar la taula i comp on apunta, i el comportament: en aquest cas hem triat ON DELETE CASCADE i ON UPDATE CASCADE, que vol dir que si s'actualitza o s'esborrar la fila de la taula principal (el Local) que s'actualitzen o s'esborren els comentaris associats. En les següents pantalles es veu com s'especifica:&lt;/p&gt;
&lt;table style=&quot;width: 100%;&quot; border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 50%;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_3_3_3.png&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;424&quot; height=&quot;436&quot; /&gt;&lt;/td&gt;
&lt;td style=&quot;width: 50%;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_3_3_4.png&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;400&quot; height=&quot;505&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;I així ja es veu com està definida la clau externa i els camps no nuls:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/Annex_Android_3_3_6.png&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;756&quot; height=&quot;272&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Amb aquestos condicionants hem de modificar les anotacions de la classe &lt;strong&gt;Comment&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Per a reflectir que els 3 camps són no nuls, llevarem la interrogant després del tipus de la propietat&lt;/li&gt;
&lt;li&gt;La clau externa la definim entre parèntesis després de &lt;strong&gt;@Entity&lt;/strong&gt;. Serà dins un array on s'especifiquen les possibles claus externes (nosaltres només en tenim una) i hem de dir l'entitat principal, camp de la taula principal on apuntarà la clau externa (num), camp que és clau externa (num_local) i comportament&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;ColumnInfo&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;Entity&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;ForeignKey&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.room.&lt;span style=&quot;color: #9e880d;&quot;&gt;PrimaryKey&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;@Entity&lt;/span&gt;(&lt;span style=&quot;color: #4a86e8;&quot;&gt;tableName=&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;Comentaris&quot;&lt;/span&gt;,&lt;br /&gt;        &lt;span style=&quot;color: #4a86e8;&quot;&gt;foreignKeys = &lt;/span&gt;&lt;span style=&quot;color: #00627a; font-style: italic;&quot;&gt;arrayOf&lt;/span&gt;(&lt;br /&gt;          ForeignKey(&lt;span style=&quot;color: #4a86e8;&quot;&gt;entity = &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;Coffee&lt;/span&gt;::&lt;span style=&quot;color: #0033b3;&quot;&gt;class&lt;/span&gt;,&lt;br /&gt;            &lt;span style=&quot;color: #4a86e8;&quot;&gt;parentColumns = &lt;/span&gt;&lt;span style=&quot;color: #00627a; font-style: italic;&quot;&gt;arrayOf&lt;/span&gt;(&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;num&quot;&lt;/span&gt;),&lt;br /&gt;            &lt;span style=&quot;color: #4a86e8;&quot;&gt;childColumns = &lt;/span&gt;&lt;span style=&quot;color: #00627a; font-style: italic;&quot;&gt;arrayOf&lt;/span&gt;(&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;num_local&quot;&lt;/span&gt;),&lt;br /&gt;            &lt;span style=&quot;color: #4a86e8;&quot;&gt;onDelete = &lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;ForeignKey&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;CASCADE&lt;/span&gt;,&lt;br /&gt;            &lt;span style=&quot;color: #4a86e8;&quot;&gt;onUpdate = &lt;/span&gt;&lt;span style=&quot;color: #9e880d;&quot;&gt;ForeignKey&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;CASCADE&lt;/span&gt;)))&lt;br /&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;data class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;Comment &lt;/span&gt;(&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@PrimaryKey @ColumnInfo&lt;/span&gt;(&lt;span style=&quot;color: #4a86e8;&quot;&gt;name = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;id_com&quot;&lt;/span&gt;) &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;idCom&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;,&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@ColumnInfo&lt;/span&gt;(&lt;span style=&quot;color: #4a86e8;&quot;&gt;name = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;num_local&quot;&lt;/span&gt;) &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;numCoffee&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;,&lt;br /&gt;    &lt;span style=&quot;color: #9e880d;&quot;&gt;@ColumnInfo&lt;/span&gt;(&lt;span style=&quot;color: #4a86e8;&quot;&gt;name = &lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;comentari&quot;&lt;/span&gt;)&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;comm&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;br /&gt;&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt;Si voleu fer la comprovació que funciona no us oblideu de:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Copiar la Base de Dades &lt;strong&gt;CoffeeShops_Com_CE.sqlite&lt;/strong&gt; a l'apartat de &lt;strong&gt;Assets&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Modificar les línies 26 i 27 de &lt;strong&gt;FirstFragment.kt&lt;/strong&gt;, que és on es defineix la Base de Dades pel nom actual: &lt;strong&gt;CoffeeShops_Com_CE.sqlite&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="3888"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="30_108_2.90"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="77">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="74"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="Annex_Android_3_3_3.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmp95QT7f/Annex_Android_3_3_3.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="f2ce830fc123b481e5bc8d3ed4fa4949"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="75"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="3890"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="30_108_2.91"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="78">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="74"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="Annex_Android_3_3_4.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmp95QT7f/Annex_Android_3_3_4.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="7d2b5b250886b9f590756e6d790451f8"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="75"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="3892"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="30_108_2.92"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="79">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="74"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="Annex_Android_3_3_1_5.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmp95QT7f/Annex_Android_3_3_1_5.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="4513e4c5fd7bafc8073ff7fa83846431"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="75"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="3895"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="30_108_2.93"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="80">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="74"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="Annex_Android_3_3_2.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmp95QT7f/Annex_Android_3_3_2.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="45bec7cc41b8677c5b4e6ae7498e896c"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="75"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="3898"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="30_108_2.94"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="81">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="74"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="Annex_Android_3_3_6.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmp95QT7f/Annex_Android_3_3_6.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="7b96f264c1bef429999778f006cd343d"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="75"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="3901"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="30_108_2.95"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="82">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="74"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="Annex_Android_3_3_1.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmp95QT7f/Annex_Android_3_3_1.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="caeb20aefef68dc4d56a5be86c5893d5"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="75"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                   </list>
                   <string role="key" value="idevice"></string>
                   <reference key="75"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="96"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="76"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="30"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="76"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="77"></reference>
               <reference key="78"></reference>
               <reference key="79"></reference>
               <reference key="80"></reference>
               <reference key="81"></reference>
               <reference key="82"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="14"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:3%20-%20Eina%20ORM%3A%20Biblioteca%20ROOM:3.3%20-%20Implementaci%C3%B3%20amb%20les%20claus%20externes"></string>
           <string role="key" value="parent"></string>
           <reference key="51"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="85">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="4 - Permanència en BD Orientades a Objectes"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="83">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="84">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="83"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p&gt;En el Tema 6, segona part, hem vist una Base de Dades Orientada a Objectes, DB4O, a la qual era extremadament senzill guardar els objectes, per més complicats que siguen. Utilitzàvem la versió incrustada (&lt;em&gt;embedded&lt;/em&gt;) de DB4O, amb la qual era suficient afegir unes llibreries al projecte de Java.&lt;/p&gt;
&lt;p&gt;Afortunadament, en Android serà igual de senzill. Haurem d'anar en compte d'incloure poques llibreries, ja que en els dispositius mòbils la grandària de l'aplicació és un punt crític. Intentarem incloure únicament un jar: &lt;strong&gt;db4o-8.0.276.16149-core-java5.jar&lt;/strong&gt; (1,5 Mb) que com veiem és el cor. Si ens féra falta alguna utilitat no inclosa com podria ser per a fer una recerca, podríem intentar col·locar el jar que ho inclou tot, en compte de l'anterior: &lt;strong&gt;db4o-8.0.276.16149-all-java5.jar&lt;/strong&gt; (2,5 Mb)&lt;/p&gt;
&lt;p&gt;Per a incloure el jar, el més senzill és copiar-lo dins de &lt;strong&gt;app -&amp;gt; libs&lt;/strong&gt; del projecte, i posteriorment apretar emb el botó de la dreta i triar &lt;strong&gt;Add as library&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Ho comprovarem amb un exemple que guardarà dades de la classe &lt;strong&gt;Empleat&lt;/strong&gt; ja utilitzada en el Tema 6, part 2. Recordem que en l'empleat, a banda de guardar dades normals com el nom, el nit, l'edat, ... també guardàvem la foto, un currículum, l'adreça (de tipus &lt;strong&gt;Adreca&lt;/strong&gt;, que constava de carrer, codi postal i població), un llistat de correus electrònics i un llistat de telèfons (de tipus &lt;strong&gt;Telefon&lt;/strong&gt;, que constava d'un booleà que marcava si el telèfon era mòbil o no, i el número de telèfon).&lt;/p&gt;
&lt;p&gt;Ho farem sobre un projecte nou, anomenat per exemple &lt;strong&gt;ConnexioDB4O&lt;/strong&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Construïu un nou projecte anomenat &lt;strong&gt;ConnexioDB4O&lt;/strong&gt; sobre el paquet &lt;strong&gt;com.example.connexiodb4o&lt;/strong&gt; respectivament&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Incorporeu les classes &lt;strong&gt;Empleat&lt;/strong&gt;, &lt;strong&gt;Adreca&lt;/strong&gt; i &lt;strong&gt;Telefon&lt;/strong&gt;, ja creades en el tema 6, part 2. Podeu guardar-les per exemple en un fitxer anomenat &lt;strong&gt;ClassesEmpleat.kt&lt;/strong&gt;. Per a que no donen problemes totes les propietat estan declarades per a que puguen agafar valors nuls&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class Adreca (var carrer: String?, var codipostal: String?, var poblacio: String?)

class Telefon( var mobil : Boolean? , var numero: String?)

class Empleat (
	var nif: String? , var nom: String? , var departament: Int? , var edat: Int? = 0 , var sou: Double? = 0.0 ,
	var foto: Array&amp;lt;Byte&amp;gt;? ,
	var curriculum: Array&amp;lt;Char&amp;gt;? ,
	var adreca: Adreca? ,
	var correus_e: Array&amp;lt;String&amp;gt;? ,
	var telefons : Array&amp;lt;Telefon&amp;gt;?
) {
	constructor(nif: String?) : this(nif,null,null,null,null,null,null,null,null,null) 
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Afegiu la llibreria &lt;strong&gt;db4o-8.0.276.16149-core-java5.jar&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;. La manera més còmoda és copiar-la en &lt;strong&gt;app -&amp;gt; libs&lt;/strong&gt;, i posteriorment apretar emb el botó de la dreta i triar &lt;strong&gt;Add as library&lt;/strong&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Creeu el següent &lt;strong&gt;activity_main.xml&lt;/strong&gt;:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;Com podeu observar, tan sols hi ha un TextView per a poder visualitzar si connectem i observar algunes dades&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Creeu el següent programa principal:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlighted-code language-js&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import Adreca
import Empleat
import Telefon


import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.widget.TextView
import com.db4o.Db4oEmbedded
import java.io.File

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        val text = findViewById(R.id.text) as TextView

        val f = File(&quot;/data/data/com.example.connexiodb4o/databases&quot;)

        if (!f.exists()) {
            f.mkdirs()
            val bd = Db4oEmbedded.openFile(&quot;/data/data/com.example.connexiodb4o/databases/Empleats.db4o&quot;)
            var e1 = Empleat(&quot;11111111a&quot;, &quot;Albert&quot;, 10, 40, 1000.0, null, null, null, null, null)
            //les dades més complicades les introduïm de forma especial
            e1.adreca=Adreca(&quot;C/ Major, 7&quot;, &quot;12001&quot;, &quot;Castelló&quot;)
            val corr = arrayOf(&quot;alu11111111a@ieselcaminas.org&quot;)
            e1.correus_e = corr
            val tels = arrayOf(Telefon(true, &quot;666777888&quot;), Telefon(false, &quot;964112233&quot;))
            e1.telefons = tels
            val e2 = Empleat(&quot;22222222b&quot;, &quot;Berta&quot;, 10, 35, 1700.0, null, null, null, null, null)
            val e3 = Empleat(&quot;33333333c&quot;, &quot;Clàudia&quot;, 20, 37, 1500.0, null, null, null, null, null)
            text.append(&quot;S'ha creat la Base de Dades Orientada a Objectes&quot;)
            bd.store(e1)
            bd.store(e2)
            bd.store(e3)
            bd.close()
        } else {
            val bd1 = Db4oEmbedded.openFile(&quot;/data/data/com.example.connexiodb4o/databases/Empleats.db4o&quot;)
            val llista = bd1.queryByExample&amp;lt;Empleat&amp;gt;(Empleat(null))
            text.append(&quot;S'han trobat &quot; + llista.size + &quot; empleats: \n&quot;)
            for (e in llista) {
                text.append(&quot;Nif: &quot; + e.nif + &quot;. Nom: &quot; + e.nom + &quot;. Departament: &quot; + e.departament + &quot;\n&quot;)
                text.append(&quot;\tLlista de telèfons:\n&quot;)
                if (e.telefons != null) {
                    for (t in e.telefons!!) {
                        text.append(&quot;\t\t&quot; + t.numero)
                        if (t.mobil!!)
                            text.append(&quot;(mòbil)\n&quot;)
                        else
                            text.append(&quot;(fixe)\n&quot;)
                    }
                }
            }
            bd1.close()
        }

    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El programa és molt senzill. Si no existia el directori &lt;strong&gt;databases&lt;/strong&gt; el crea (per evitar problemes) i construeix la Base de Dades. Si ja existia, assumeix que està creada la Base de Dades, i visualitza el seu contingut.&lt;/p&gt;
&lt;p&gt;La primera vegada que s'execute el programa visualitzarà que s'ha creat la Base de Dades. La segona, es visualitzaran algunes dades:&lt;/p&gt;
&lt;table border=&quot;0&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;img src=&quot;resources/Annex_Android_4_1.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;521&quot; height=&quot;848&quot; /&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src=&quot;resources/Annex_Android_4_2.png&quot; style=&quot;border: 1px solid black;&quot; width=&quot;518&quot; height=&quot;847&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="3891"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="13_85.143"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="86">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="83"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="Annex_Android_4_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmp95QT7f/Annex_Android_4_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="bfe5a6eb8aaf811cd896f89dbdd07f18"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="84"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="3900"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="13_85.144"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="87">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="83"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="Annex_Android_4_2.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmp95QT7f/Annex_Android_4_2.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="325a5485b02dad2b0a9d253825f505a4"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="84"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="84"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="145"></int>
             <string role="key" value="parentNode"></string>
             <reference key="85"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="13"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="85"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="86"></reference>
            <reference key="87"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="8"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:4%20-%20Perman%C3%A8ncia%20en%20BD%20Orientades%20a%20Objectes"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="90">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="5 - Permanència en altres BD NoSQL"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="88">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="text"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="text"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="89">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="110_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="88"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Anem a plantejar-nos ara accedir des d'Android a les Base de Dades NoSQL que ens falten:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Redis&lt;/li&gt;
&lt;li&gt;MongoDB&lt;/li&gt;
&lt;li&gt;eXist&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En cap dels casos ens plantejarem instal·lar la Base de Dades corresponent al dispositiu, i per tant sempre ens connectarem al servidor de l'Institut, on tenim instal·lades les 3 Bases de Dades NoSQL&lt;/p&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="89"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="90"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="33"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="90"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="15"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:5%20-%20Perman%C3%A8ncia%20en%20altres%20BD%20NoSQL"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="93">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="5.1 - Redis"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="91">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="92">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="109_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="91"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Guardar dades en un servidor extern &lt;strong&gt;Redis&lt;/strong&gt; no ofereix cap dificultat.&lt;/p&gt;
&lt;p&gt;Evidentment no ens podem plantejar el fet d'instal·lar el servidor en el dispositiu mòbil, per les restriccions d'espai. Per tant la connexió serà externa a un servidor. Però si tenim permisos, amb una contrasenya per a poder autenticar no hi haurà problema.&lt;/p&gt;
&lt;p&gt;Podrem instal·lar el mateix driver que hem utilitzar en Eclipse: &lt;strong&gt;Jedis&lt;/strong&gt;. Només haurem d'incorporar-lo al projecte com una llibreria.&lt;/p&gt;
&lt;p&gt;Tindrem el mateix inconvenient que en ocasions anteriors: com que anem a accedir al servidor extern a través d'Internet, no podrem fer aquest accés des del thread principal. La solució més elegant seria utilitzar corutines, però nosaltres anem a simplificar per a poder posar l'accent sobre el que ens interessa, que és accedir a les dades. Ho muntarem com en altres ocasions de la manera més senzilla: accedint a la Base de Dades des d'un altre thread, i unint al principal quan s'haja accedit.&lt;/p&gt;
&lt;p&gt;Anem a fer el mateix exercici que en Eclipse, el de mostrar totes les claus en un Spinner, i després en seleccionar una clau del Spinner, mostrar el seu contingut, adaptant-lo per als diferents tipus de claus que tenim en Redis.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creeu un nou projecte d'Android, que el podeu anomenar per exemple &lt;strong&gt;Redis_Accedir&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Incorporeu el driver de redis &lt;strong&gt;jedis-3.5.0.jar&lt;/strong&gt;. El millor seria incorporar-lo en la vista de &lt;strong&gt;Project&lt;/strong&gt; en &lt;strong&gt;app -&amp;gt; libs&lt;/strong&gt;, i després apratar damunt amb el botó de la dreta i triar &lt;strong&gt;Add as library&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Afegiu el &lt;strong&gt;id 'kotlin-android-extensions'&lt;/strong&gt; al &lt;strong&gt;build.gradle&lt;/strong&gt; de la &lt;strong&gt;app&lt;/strong&gt;, per a que els components que posem en el layout estiguen directament disponibles des del programa&lt;/li&gt;
&lt;li&gt;Doneu el permís d'accedir a Internet. En el &lt;strong&gt;AndroidManifest.xml&lt;/strong&gt;, afegiu la següent línia, dins de &lt;strong&gt;manifest&lt;/strong&gt; però fora de &lt;strong&gt;application&lt;/strong&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;    &amp;lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Creeu el següent &lt;strong&gt;activity_main.xml&lt;/strong&gt;, on tindrem un Spinner i un TextView&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono', monospace; padding-left: 60px;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;Spinner&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/spinner&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/area&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;382dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;622dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;TextView&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintBottom_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/spinner&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Creeu el següent programa principal:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.appcompat.app.AppCompatActivity&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.os.Bundle&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.View&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.AdapterView&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.ArrayAdapter&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;kotlinx.android.synthetic.main.activity_main.*&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;redis.clients.jedis.Jedis&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;MainActivity : AppCompatActivity() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;internal var &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;claus&lt;/span&gt;: List&amp;lt;String&amp;gt;? = &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;null&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;    val &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;con &lt;/span&gt;= Jedis(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;89.36.214.106&quot;&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;private var &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;sqlThread&lt;/span&gt;: Thread = &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;object &lt;/span&gt;: Thread() {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;run() {&lt;br /&gt;&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;con&lt;/span&gt;.connect()&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;con&lt;/span&gt;.auth(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;ieselcaminas.ad&quot;&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;claus &lt;/span&gt;= &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;con&lt;/span&gt;.keys(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;*&quot;&lt;/span&gt;).&lt;span style=&quot;font-style: italic;&quot;&gt;sorted&lt;/span&gt;()&lt;br /&gt;            &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;//con.close()&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        &lt;/span&gt;}&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreate(savedInstanceState: Bundle?) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)&lt;br /&gt;        setContentView(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;activity_main&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;// Des de la versió 3 d'Android, no es permet obrir una connexió des del thread principal.&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Per tant s'ha de crear un nou.&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;sqlThread&lt;/span&gt;.start()&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;// i ara esperem a que finalitze el thread fill unint-lo (join)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;try &lt;/span&gt;{&lt;br /&gt;            &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;sqlThread&lt;/span&gt;.join()&lt;br /&gt;        } &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;catch &lt;/span&gt;(e: InterruptedException) {&lt;br /&gt;            e.printStackTrace()&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;adapter = ArrayAdapter(&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;this&lt;/span&gt;, android.R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;simple_spinner_item&lt;/span&gt;, &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;claus&lt;/span&gt;!!)&lt;br /&gt;        spinner.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;adapter &lt;/span&gt;= adapter&lt;br /&gt;&lt;br /&gt;        spinner.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;onItemSelectedListener &lt;/span&gt;= &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;object &lt;/span&gt;: AdapterView.OnItemSelectedListener {&lt;br /&gt;            &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onNothingSelected(parent: AdapterView&amp;lt;*&amp;gt;?) {&lt;br /&gt;                &lt;span style=&quot;font-style: italic;&quot;&gt;TODO&lt;/span&gt;(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;Not yet implemented&quot;&lt;/span&gt;)&lt;br /&gt;            }&lt;br /&gt;&lt;br /&gt;            &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onItemSelected(parent: AdapterView&amp;lt;*&amp;gt;?, view: View?, position: Int, id: Long) {&lt;br /&gt;                &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;var &lt;/span&gt;altreThread: Thread = &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;object &lt;/span&gt;: Thread() {&lt;br /&gt;                    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;run() {&lt;br /&gt;                        area.setText(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&quot;&lt;/span&gt;)&lt;br /&gt;                        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;clau = &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;claus&lt;/span&gt;?.get(position)&lt;br /&gt;                        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;tip = &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;con&lt;/span&gt;.type(clau)&lt;br /&gt;                        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;when &lt;/span&gt;(tip){&lt;br /&gt;                            &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;string&quot; &lt;/span&gt;-&amp;gt; area.setText(&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;con&lt;/span&gt;.get(clau))&lt;br /&gt;                            &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;hash&quot; &lt;/span&gt;-&amp;gt; {&lt;br /&gt;                                &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;for &lt;/span&gt;(camp &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;in &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;con&lt;/span&gt;.hkeys(clau))&lt;br /&gt;                                    area.append(camp + &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot; -&amp;gt; &quot; &lt;/span&gt;+ &lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;con&lt;/span&gt;.hget(clau,camp) + &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;)&lt;br /&gt;                            }&lt;br /&gt;                            &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;list&quot; &lt;/span&gt;-&amp;gt; {&lt;br /&gt;                                &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;for &lt;/span&gt;(e &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;in &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;con&lt;/span&gt;.lrange(clau,&lt;span style=&quot;color: #0000ff;&quot;&gt;0&lt;/span&gt;,-&lt;span style=&quot;color: #0000ff;&quot;&gt;1&lt;/span&gt;))&lt;br /&gt;                                    area.append(e + &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;)&lt;br /&gt;                            }&lt;br /&gt;                            &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;set&quot; &lt;/span&gt;-&amp;gt; {&lt;br /&gt;                                &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;for &lt;/span&gt;(e &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;in &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;con&lt;/span&gt;.smembers(clau))&lt;br /&gt;                                    area.append(e + &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;)&lt;br /&gt;                            }&lt;br /&gt;                            &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;zset&quot; &lt;/span&gt;-&amp;gt; {&lt;br /&gt;                                &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;for &lt;/span&gt;(e &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;in &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;con&lt;/span&gt;.zrevrangeWithScores(clau,&lt;span style=&quot;color: #0000ff;&quot;&gt;0&lt;/span&gt;,-&lt;span style=&quot;color: #0000ff;&quot;&gt;1&lt;/span&gt;))&lt;br /&gt;                                    area.append(e.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;element &lt;/span&gt;+ &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot; -&amp;gt; &quot; &lt;/span&gt;+ e.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;score &lt;/span&gt;+ &lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;&lt;/span&gt;)&lt;br /&gt;                            }&lt;br /&gt;                        }&lt;br /&gt;&lt;br /&gt;                    }&lt;br /&gt;                }&lt;br /&gt;                altreThread.start()&lt;br /&gt;                altreThread.join()  &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;//per senzillesa, no tractem l'excepció&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;            &lt;/span&gt;}&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;Observeu com tant en el moment d'agafar totes les claus, com en el moment d'agafar el contingut de la clau triada, hem muntat un thread, per a no fer-lo des del principal.&lt;/p&gt;
&lt;p&gt;Aquest seria el resultat:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/AnnexAndroid_5_1_1.png&quot; alt=&quot;&quot; width=&quot;399&quot; height=&quot;862&quot; /&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="3902"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="32_109_2.16"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="94">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="91"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="AnnexAndroid_5_1_1.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmp95QT7f/AnnexAndroid_5_1_1.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="fb3fe22553765504dfe73d12e3344d1a"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="92"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                   </list>
                   <string role="key" value="idevice"></string>
                   <reference key="92"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="17"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="93"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="32"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="93"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="94"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="16"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:5%20-%20Perman%C3%A8ncia%20en%20altres%20BD%20NoSQL:5.1%20-%20Redis"></string>
           <string role="key" value="parent"></string>
           <reference key="90"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="97">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="5.2 - MongoDB"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="95">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="96">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="112_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="95"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;L'única dificultat que tindrem és que l'últim driver de MongoDB no funciona bé en Android, així que senzillament agafarem un driver anterior adaptat per a que funcione. No és l'oficial, sinó un adaptat per a que no done un error de javax.security.sasl&lt;/p&gt;
&lt;p&gt;Aquest és l'enllaç d'aquest driver:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/matfur92/mongo-java-driver/blob/gh-pages/JARs/mongo-java-driver-3.4.0-SNAPSHOT.jar?raw=true&quot;&gt;https://github.com/matfur92/mongo-java-driver/blob/gh-pages/JARs/mongo-java-driver-3.4.0-SNAPSHOT.jar?raw=true&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Anem a provar-lo sobre un projecte nou.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creeu un nou projecte d'Android, que el podeu anomenar per exemple &lt;strong&gt;MongoDB_Accedir&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Incorporeu el driver de MongoDB comentat més amunt. El millor seria incorporar-lo en la vista de &lt;strong&gt;Project&lt;/strong&gt; en&lt;strong&gt; app -&amp;gt; libs&lt;/strong&gt;, i després apretar damunt amb el botó de la dreta i triar&lt;strong&gt; Add as library&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Doneu el permís d'accedir a Internet. En el &lt;strong&gt;AndroidManifest.xml&lt;/strong&gt;, afegiu la següent línia, dins de &lt;strong&gt;manifest&lt;/strong&gt; però fora de &lt;strong&gt;application&lt;/strong&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;    &amp;lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Afegiu el &lt;strong&gt;id 'kotlin-android-extensions'&lt;/strong&gt; al &lt;strong&gt;build.gradle&lt;/strong&gt; de la &lt;strong&gt;app&lt;/strong&gt;, per a que els components que posem en el layout estiguen directament disponibles des del programa&lt;/li&gt;
&lt;li&gt;Creeu el següent &lt;strong&gt;activity_main.xml&lt;/strong&gt;, on tindrem únicament un TextView per a poder visualitzar el resultat&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;.MainActivity&quot;&amp;gt;

    &amp;lt;TextView
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        android:text=&quot;&quot;
        android:id=&quot;@+id/text&quot;
        /&amp;gt;

&amp;lt;/androidx.constraintlayout.widget.ConstraintLayout&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A continuació copieu el següent codi en el &lt;strong&gt;MainActivity.kt&lt;/strong&gt;, on sezillament ens connectem al MongoDB del servidor de l'Institut, i agafem el títol i preu dels llibres de la col·lecció &lt;strong&gt;libro&lt;/strong&gt; ordenats per preu de forma descendent. Recordeu que no el podem fer en el programa principal, per això muntem un thread.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import com.mongodb.MongoClient
import com.mongodb.MongoClientURI
import kotlinx.android.synthetic.main.activity_main.*
import org.bson.Document
import com.mongodb.DBCursor

class MainActivity : AppCompatActivity() {
    internal var cont: String = &quot;&quot;


    private var sqlThread: Thread = object : Thread() {
        override fun run() {

            val con = MongoClient(MongoClientURI(&quot;mongodb://ad:ieselcaminas@89.36.214.106/?authSource=test&quot;))
            val bd = con.getDatabase(&quot;test&quot;)

            val ordenar = Document()
            ordenar.put(&quot;precio&quot;, -1)

            val llibres = bd.getCollection(&quot;libro&quot;).find().sort(ordenar)

            for (llibre in llibres)
                cont += llibre.get(&quot;titulo&quot;).toString() + &quot; --&amp;gt; &quot; + llibre.get(&quot;precio&quot;) + &quot;\n&quot;

            con.close()

        }
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        // Des de la versió 3 d'Android, no es permet obrir una connexió des del thread principal.
        // Per tant s'ha de crear un nou.
        sqlThread.start()

        // i ara esperem a que finalitze el thread fill unint-lo (join)
        try {
            sqlThread.join()
        } catch (e: InterruptedException) {
            e.printStackTrace()
        }

        text.setText(cont)

    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Aquest seria el resultat:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/Annex_Android_5_2_1.png&quot; alt=&quot;&quot; width=&quot;332&quot; height=&quot;615&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="3897"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="34_112_2.4"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="98">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="95"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="Annex_Android_5_2_1.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmp95QT7f/Annex_Android_5_2_1.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="8e51df744e2c2f254956a299173d7e9c"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="96"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                   </list>
                   <string role="key" value="idevice"></string>
                   <reference key="96"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="5"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="97"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="34"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="97"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="98"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="17"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:5%20-%20Perman%C3%A8ncia%20en%20altres%20BD%20NoSQL:5.2%20-%20MongoDB"></string>
           <string role="key" value="parent"></string>
           <reference key="90"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="101">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="5.3 - eXist-db"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="99">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="100">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="114_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="99"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Anem a provar-lo sobre un projecte nou.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creeu un nou projecte d'Android, que el podeu anomenar per exemple &lt;strong&gt;eXist-db_Accedir&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Incorporeu els drivers de eXist-db (eren 3). El millor seria incorporar-los en la vista de &lt;strong&gt;Project&lt;/strong&gt; en&lt;strong&gt; app -&amp;gt; libs&lt;/strong&gt;, i després apretar damunt amb el botó de la dreta en cada fitxer i triar&lt;strong&gt; Add as library&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Creeu el següent &lt;strong&gt;activity_main.xml&lt;/strong&gt;, on tindrem únicament un TextView per a poder visualitzar els resultats&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;.MainActivity&quot;&amp;gt;

    &amp;lt;TextView
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        android:text=&quot;&quot;
        android:id=&quot;@+id/text&quot;
        /&amp;gt;

&amp;lt;/androidx.constraintlayout.widget.ConstraintLayout&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A continuació copieu el següent codi en el &lt;strong&gt;MainActivity.kt&lt;/strong&gt;, on sezillament ens connectem al MongoDB del servidor de l'Institut, i agafem el títol i preu dels llibres de la col·lecció &lt;strong&gt;libro&lt;/strong&gt; ordenats per preu de forma descendent. Recordeu que no el podem fer en el programa principal, per això muntem un thread.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import com.mongodb.MongoClient
import com.mongodb.MongoClientURI
import kotlinx.android.synthetic.main.activity_main.*
import org.bson.Document
import com.mongodb.DBCursor

class MainActivity : AppCompatActivity() {
    internal var cont: String = &quot;&quot;


    private var sqlThread: Thread = object : Thread() {
        override fun run() {

            val con = MongoClient(MongoClientURI(&quot;mongodb://ad:ieselcaminas@89.36.214.106/?authSource=test&quot;))
            val bd = con.getDatabase(&quot;test&quot;)

            val ordenar = Document()
            ordenar.put(&quot;precio&quot;, -1)

            val llibres = bd.getCollection(&quot;libro&quot;).find()

            for (llibre in llibres)
                cont += llibre.get(&quot;titulo&quot;).toString() + &quot; --&amp;gt; &quot; + llibre.get(&quot;precio&quot;) + &quot;\n&quot;

            con.close()

        }
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        // Des de la versió 3 d'Android, no es permet obrir una connexió des del thread principal.
        // Per tant s'ha de crear un nou.
        sqlThread.start()

        // i ara esperem a que finalitze el thread fill unint-lo (join)
        try {
            sqlThread.join()
        } catch (e: InterruptedException) {
            e.printStackTrace()
        }

        text.setText(cont)

    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Aquest seria el resultat:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="100"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="101"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="36"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="101"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="18"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Annex%3A%20Perman%C3%A8ncia%20en%20ANDROID:5%20-%20Perman%C3%A8ncia%20en%20altres%20BD%20NoSQL:5.3%20-%20eXist-db"></string>
           <string role="key" value="parent"></string>
           <reference key="90"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
     </list>
    </dictionary>
   </instance>
   <unicode role="key" value="1"></unicode>
   <reference key="8"></reference>
   <unicode role="key" value="11"></unicode>
   <reference key="51"></reference>
   <unicode role="key" value="12"></unicode>
   <reference key="62"></reference>
   <unicode role="key" value="13"></unicode>
   <reference key="73"></reference>
   <unicode role="key" value="14"></unicode>
   <reference key="76"></reference>
   <unicode role="key" value="15"></unicode>
   <reference key="90"></reference>
   <unicode role="key" value="16"></unicode>
   <reference key="93"></reference>
   <unicode role="key" value="17"></unicode>
   <reference key="97"></reference>
   <unicode role="key" value="18"></unicode>
   <reference key="101"></reference>
   <unicode role="key" value="19"></unicode>
   <reference key="25"></reference>
   <unicode role="key" value="2"></unicode>
   <reference key="11"></reference>
   <unicode role="key" value="3"></unicode>
   <reference key="21"></reference>
   <unicode role="key" value="4"></unicode>
   <reference key="29"></reference>
   <unicode role="key" value="5"></unicode>
   <reference key="32"></reference>
   <unicode role="key" value="6"></unicode>
   <reference key="37"></reference>
   <unicode role="key" value="7"></unicode>
   <reference key="47"></reference>
   <unicode role="key" value="8"></unicode>
   <reference key="85"></reference>
  </dictionary>
  <string role="key" value="_objectives"></string>
  <unicode value=""></unicode>
  <string role="key" value="_preknowledge"></string>
  <unicode value=""></unicode>
  <string role="key" value="_templateFile"></string>
  <string value=""></string>
  <string role="key" value="backgroundImgTile"></string>
  <bool value="0"></bool>
  <string role="key" value="currentNode"></string>
  <reference key="25"></reference>
  <string role="key" value="dublinCore"></string>
  <instance class="exe.engine.package.DublinCore">
   <dictionary>
    <string role="key" value="contributors"></string>
    <unicode value=""></unicode>
    <string role="key" value="coverage"></string>
    <unicode value=""></unicode>
    <string role="key" value="creator"></string>
    <unicode value=""></unicode>
    <string role="key" value="date"></string>
    <unicode value=""></unicode>
    <string role="key" value="description"></string>
    <unicode value=""></unicode>
    <string role="key" value="format"></string>
    <unicode value=""></unicode>
    <string role="key" value="identifier"></string>
    <unicode value=""></unicode>
    <string role="key" value="language"></string>
    <unicode value="ca"></unicode>
    <string role="key" value="publisher"></string>
    <unicode value=""></unicode>
    <string role="key" value="relation"></string>
    <unicode value=""></unicode>
    <string role="key" value="rights"></string>
    <unicode value=""></unicode>
    <string role="key" value="source"></string>
    <unicode value=""></unicode>
    <string role="key" value="subject"></string>
    <unicode value=""></unicode>
    <string role="key" value="title"></string>
    <unicode value=""></unicode>
    <string role="key" value="type"></string>
    <unicode value=""></unicode>
   </dictionary>
  </instance>
  <string role="key" value="exe.engine.package.Package.persistenceVersion"></string>
  <int value="16"></int>
  <string role="key" value="exportMetadataType"></string>
  <string value="LOMES"></string>
  <string role="key" value="exportSource"></string>
  <bool value="1"></bool>
  <string role="key" value="footer"></string>
  <unicode value=""></unicode>
  <string role="key" value="isChanged"></string>
  <int value="1"></int>
  <string role="key" value="isLoading"></string>
  <bool value="0"></bool>
  <string role="key" value="license"></string>
  <unicode value="creative commons: attribution - non commercial - share alike 2.5"></unicode>
  <string role="key" value="lom"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list></list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg"></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <string value="e5de616e-c863-40dd-a118-368c0dd5b447"></string>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Acc\xc3\xa9s a Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="102">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2014-10-27"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Metadades de data de creaci\xc3\xb3"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="103">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="104">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOMv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="102"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="103"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="104"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOMv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <none></none>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="yes"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="lomEs"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list></list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg"></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <string value="e5de616e-c863-40dd-a118-368c0dd5b447"></string>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Acc\xc3\xa9s a Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="105">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2014-10-27"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Metadades de data de creaci\xc3\xb3"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="106">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="107">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOM-ESv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="105"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="106"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="107"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOM-ESv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <instance class="exe.engine.lom.lomsubs.accessSub">
       <dictionary>
        <string role="key" value="accessType"></string>
        <instance class="exe.engine.lom.lomsubs.accessTypeSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOM-ESv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="uniqueElementName"></string>
          <string value="accessType"></string>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.accessTypeValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="universal"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
        <string role="key" value="description"></string>
        <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list>
           <instance class="exe.engine.lom.lomsubs.LangStringSub">
            <dictionary>
             <string role="key" value="language"></string>
             <string value="ca"></string>
             <string role="key" value="valueOf_"></string>
             <unicode value="Per defecte"></unicode>
            </dictionary>
           </instance>
          </list>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="access"></string>
       </dictionary>
      </instance>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="creative commons: attribution - non commercial - share alike"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <string value="rights"></string>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="mxmlforcemediaonly"></string>
  <bool value="0"></bool>
  <string role="key" value="mxmlheight"></string>
  <string value=""></string>
  <string role="key" value="mxmlprofilelist"></string>
  <string value=""></string>
  <string role="key" value="mxmlwidth"></string>
  <string value=""></string>
  <string role="key" value="release"></string>
  <string value="2.6"></string>
  <string role="key" value="resources"></string>
  <dictionary>
   <string role="key" value="0d2f648885c9977c377371f72281726f"></string>
   <list>
    <reference key="26"></reference>
   </list>
   <string role="key" value="0ea14b09b960e50a2641aa1a3ef9014f"></string>
   <list>
    <reference key="44"></reference>
   </list>
   <string role="key" value="325a5485b02dad2b0a9d253825f505a4"></string>
   <list>
    <reference key="87"></reference>
   </list>
   <string role="key" value="3b19b0502331117b2541f1d2c89874d2"></string>
   <list>
    <reference key="34"></reference>
   </list>
   <string role="key" value="4513e4c5fd7bafc8073ff7fa83846431"></string>
   <list>
    <reference key="79"></reference>
   </list>
   <string role="key" value="45bec7cc41b8677c5b4e6ae7498e896c"></string>
   <list>
    <reference key="80"></reference>
   </list>
   <string role="key" value="79fc149c40ad61afd06955416a5d83e6"></string>
   <list>
    <reference key="48"></reference>
   </list>
   <string role="key" value="7b96f264c1bef429999778f006cd343d"></string>
   <list>
    <reference key="81"></reference>
   </list>
   <string role="key" value="7d2b5b250886b9f590756e6d790451f8"></string>
   <list>
    <reference key="78"></reference>
   </list>
   <string role="key" value="7da466914065110155b0a8ef69cfe497"></string>
   <list>
    <reference key="33"></reference>
   </list>
   <string role="key" value="7f6a1f14a1413f35fe8d24e65397a590"></string>
   <list>
    <reference key="22"></reference>
   </list>
   <string role="key" value="8e51df744e2c2f254956a299173d7e9c"></string>
   <list>
    <reference key="98"></reference>
   </list>
   <string role="key" value="ad06f1f9e2b0f0d08e84e70a4d7a02c3"></string>
   <list>
    <reference key="5"></reference>
   </list>
   <string role="key" value="bfe5a6eb8aaf811cd896f89dbdd07f18"></string>
   <list>
    <reference key="86"></reference>
   </list>
   <string role="key" value="caeb20aefef68dc4d56a5be86c5893d5"></string>
   <list>
    <reference key="82"></reference>
   </list>
   <string role="key" value="ebd1cb8664a0a500a9b668ab81c93036"></string>
   <list>
    <reference key="14"></reference>
   </list>
   <string role="key" value="f2ce830fc123b481e5bc8d3ed4fa4949"></string>
   <list>
    <reference key="77"></reference>
   </list>
   <string role="key" value="fb3fe22553765504dfe73d12e3344d1a"></string>
   <list>
    <reference key="94"></reference>
   </list>
  </dictionary>
  <string role="key" value="root"></string>
  <reference key="4"></reference>
  <string role="key" value="scolinks"></string>
  <bool value="0"></bool>
  <string role="key" value="scowsinglepage"></string>
  <bool value="0"></bool>
  <string role="key" value="scowwebsite"></string>
  <bool value="0"></bool>
  <string role="key" value="style"></string>
  <unicode value="caminas 3.1"></unicode>
  <string role="key" value="tempFile"></string>
  <bool value="0"></bool>
 </dictionary>
</instance>