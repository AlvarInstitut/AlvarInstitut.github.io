<?xml version="1.0" encoding="utf-8"?>

<instance xmlns="http://www.exelearning.org/content/v0.3" reference="2" version="0.3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://www.exelearning.org/content/v0.3 content.xsd" class="exe.engine.package.Package">
 <dictionary>
  <string role="key" value="_title"></string>
  <unicode value="Bases de Dades"></unicode>
  <string role="key" value="idevices"></string>
  <list></list>
  <string role="key" value="_addPagination"></string>
  <bool value="0"></bool>
  <string role="key" value="_addSearchBox"></string>
  <bool value="0"></bool>
  <string role="key" value="_author"></string>
  <unicode value="Àlvar Serrano Calduch"></unicode>
  <string role="key" value="_backgroundImg"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextMode"></string>
  <unicode value="presencial"></unicode>
  <string role="key" value="_contextPlace"></string>
  <unicode value="classroom"></unicode>
  <string role="key" value="_description"></string>
  <unicode value=""></unicode>
  <string role="key" value="_docType"></string>
  <unicode value="XHTML"></unicode>
  <string role="key" value="_exportElp"></string>
  <bool value="0"></bool>
  <string role="key" value="_extraHeadContent"></string>
  <unicode value=""></unicode>
  <string role="key" value="_fieldValidationInfo"></string>
  <dictionary>
   <unicode role="key" value="all"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_title"></unicode>
     <unicode value="pp_lang"></unicode>
     <unicode value="pp_description"></unicode>
     <unicode value="pp_author"></unicode>
     <unicode value="pp_newlicense"></unicode>
    </list>
   </dictionary>
   <unicode role="key" value="procomun"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_learningResourceType"></unicode>
    </list>
    <unicode role="key" value="values_from_list"></unicode>
    <dictionary>
     <unicode role="key" value="pp_learningResourceType"></unicode>
     <list>
      <unicode value="master class"></unicode>
      <unicode value="closed exercise or problem"></unicode>
      <unicode value="real project"></unicode>
      <unicode value="didactic game"></unicode>
      <unicode value="webquest"></unicode>
      <unicode value="open problem"></unicode>
      <unicode value="simulation"></unicode>
      <unicode value="questionnaire"></unicode>
      <unicode value="conceptual map"></unicode>
     </list>
    </dictionary>
   </dictionary>
  </dictionary>
  <string role="key" value="_intendedEndUserRoleGroup"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleTutor"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleType"></string>
  <unicode value="learner"></unicode>
  <string role="key" value="_isChanged"></string>
  <bool value="0"></bool>
  <string role="key" value="_isTemplate"></string>
  <bool value="0"></bool>
  <string role="key" value="_lang"></string>
  <unicode value="ca"></unicode>
  <string role="key" value="_learningResourceType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_levelNames"></string>
  <list>
   <unicode value="Tema"></unicode>
   <unicode value="Secció"></unicode>
   <unicode value="Apartat"></unicode>
  </list>
  <string role="key" value="_name"></string>
  <unicode value="AD_T7_Firebase"></unicode>
  <string role="key" value="_nextIdeviceId"></string>
  <int value="261"></int>
  <string role="key" value="_nextNodeId"></string>
  <int value="81"></int>
  <string role="key" value="_nodeIdDict"></string>
  <dictionary>
   <unicode role="key" value="0"></unicode>
   <instance class="exe.engine.node.Node" reference="4">
    <dictionary>
     <string role="key" value="_title"></string>
     <unicode value="Tema 7: FIREBASE"></unicode>
     <string role="key" value="idevices"></string>
     <list>
      <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="1">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Free Text"></unicode>
        <string role="key" value="_author"></string>
        <unicode value="University of Auckland"></unicode>
        <string role="key" value="_purpose"></string>
        <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
        <string role="key" value="_tip"></string>
        <string value=""></string>
        <string role="key" value="childs"></string>
        <list></list>
        <string role="key" value="content"></string>
        <instance class="exe.engine.field.TextAreaField" reference="3">
         <dictionary>
          <string role="key" value="_id"></string>
          <int value="85"></int>
          <string role="key" value="_idevice"></string>
          <reference key="1"></reference>
          <string role="key" value="_instruc"></string>
          <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
          <string role="key" value="_name"></string>
          <unicode value="Free Text"></unicode>
          <string role="key" value="anchor_names"></string>
          <list></list>
          <string role="key" value="anchors_linked_from_fields"></string>
          <dictionary></dictionary>
          <string role="key" value="buttonCaption"></string>
          <string value=""></string>
          <string role="key" value="content_w_resourcePaths"></string>
          <unicode content="true" value="&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_Portada.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;500&quot; /&gt;&lt;/p&gt;"></unicode>
          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
          <int value="4"></int>
          <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
          <int value="2"></int>
          <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
          <int value="3"></int>
          <string role="key" value="htmlTag"></string>
          <string value="div"></string>
          <string role="key" value="images"></string>
          <instance class="exe.engine.galleryidevice.GalleryImages">
           <dictionary>
            <string role="key" value=".listitems"></string>
            <list>
             <instance class="exe.engine.galleryidevice.GalleryImage">
              <dictionary>
               <string role="key" value="_caption"></string>
               <instance class="exe.engine.field.TextField">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <int value="9295"></int>
                 <string role="key" value="_idevice"></string>
                 <none></none>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="content"></string>
                 <string value=""></string>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                </dictionary>
               </instance>
               <string role="key" value="_id"></string>
               <unicode value="4_85.210"></unicode>
               <string role="key" value="_imageResource"></string>
               <instance class="exe.engine.resource.Resource" reference="5">
                <dictionary>
                 <string role="key" value="_idevice"></string>
                 <reference key="1"></reference>
                 <string role="key" value="_package"></string>
                 <reference key="2"></reference>
                 <string role="key" value="_storageName"></string>
                 <string value="T7_Portada.png"></string>
                 <string role="key" value="_userName"></string>
                 <string value="/tmp/tmpk13NfD/T7_Portada.png"></string>
                 <string role="key" value="checksum"></string>
                 <string value="fbd34b3908b3fa758b38251f687522a8"></string>
                 <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="warningMsg"></string>
                 <string value=""></string>
                </dictionary>
               </instance>
               <string role="key" value="_parent"></string>
               <reference key="3"></reference>
               <string role="key" value="_thumbnailResource"></string>
               <none></none>
               <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
               <int value="3"></int>
               <string role="key" value="makeThumbnail"></string>
               <bool value="0"></bool>
              </dictionary>
             </instance>
            </list>
            <string role="key" value="idevice"></string>
            <reference key="3"></reference>
           </dictionary>
          </instance>
          <string role="key" value="intlinks_to_anchors"></string>
          <dictionary></dictionary>
          <string role="key" value="nextImageId"></string>
          <int value="211"></int>
          <string role="key" value="parentNode"></string>
          <reference key="4"></reference>
         </dictionary>
        </instance>
        <string role="key" value="edit"></string>
        <bool value="0"></bool>
        <string role="key" value="emphasis"></string>
        <int value="0"></int>
        <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
        <int value="7"></int>
        <string role="key" value="icon"></string>
        <string value=""></string>
        <string role="key" value="id"></string>
        <unicode value="4"></unicode>
        <string role="key" value="lastIdevice"></string>
        <bool value="0"></bool>
        <string role="key" value="originalicon"></string>
        <string value=""></string>
        <string role="key" value="parent"></string>
        <none></none>
        <string role="key" value="parentNode"></string>
        <reference key="4"></reference>
        <string role="key" value="systemResources"></string>
        <list></list>
        <string role="key" value="type"></string>
        <none></none>
        <string role="key" value="undo"></string>
        <bool value="1"></bool>
        <string role="key" value="userResources"></string>
        <list>
         <reference key="5"></reference>
        </list>
        <string role="key" value="version"></string>
        <int value="0"></int>
       </dictionary>
      </instance>
     </list>
     <string role="key" value="_id"></string>
     <unicode value="0"></unicode>
     <string role="key" value="_package"></string>
     <reference key="2"></reference>
     <string role="key" value="anchor_fields"></string>
     <list></list>
     <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
     <int value="2"></int>
     <string role="key" value="exportType"></string>
     <string value="website"></string>
     <string role="key" value="last_full_node_path"></string>
     <string value="exe-node:Tema%207%3A%20FIREBASE"></string>
     <string role="key" value="parent"></string>
     <none></none>
     <string role="key" value="top_anchors_linked_from_fields"></string>
     <list></list>
     <string role="key" value="children"></string>
     <list>
      <instance class="exe.engine.node.Node" reference="8">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="1 - Introducció: Firebase"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="6">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="7">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="6"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;Firebase&lt;/strong&gt; és un servei de backend, és a dir del costat del servidor, que ofereix la possibilitat de guardar les dades d'aplicacions web i de dispositius mòbils, amb la particularitat que en temps real es poden actualitzar les dades modificades des d'un dels clients connectats a tots els altres que estiguen connectats.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ofereix una sèrie de serveis, entre els quals podem destacar:&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;&lt;strong&gt;Firebase Auth - Autenticació d'usuaris&lt;/strong&gt;: permet gestionar la validació d'usuaris còmodament. Inclou l'autenticació per mig de Facebook, GitHub, Twitter i Google, i també la validació utilitzant compte de correu, guardant-se la contrasenya en Firebase, amb la qual cosa ens allibera d'haver de guardar-les al nostre dispositiu.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Realtime Database - Base de Dades en Temps Real&lt;/strong&gt;: permet guardar unes dades en el núvol, que estaran sincronitzades en totes les aplicacions (clients) connectats. No és realment una Base de Dades, tan sols un document JSON.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cloud Firestore&lt;/strong&gt;: és una evolució de l'anterior que ja sí que permet guardar col·leccions de documents JSON, i per tant ja es pot considerar una Base de Dades.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Firebase Storage&lt;/strong&gt;: permet guardar arxius per a les nostres aplicacions, com poden ser audios, vídeos, imatges, ...&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En aquest tema ens fixarem sobretot en el segon i tercer servei, els de Bases de Dades. Hem de recordar, que la &lt;strong&gt;Realtime Database &lt;/strong&gt;no és una Base de Dades completa. Tan sols és un document JSON el que podrem guardar, això sí, tan llarg com vulguem. Es tracta per tant d'una Base de Dades NoSQL, o millor dit una mini Base de Dades NoSQL. Això sí, que permet sincronitzar les dades en temps real en tots els dispositius connectats.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En canvi el &lt;strong&gt;Cloud Firestore&lt;/strong&gt; sí que és una Base de Dades completa.&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="7"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="4"></int>
             <string role="key" value="parentNode"></string>
             <reference key="8"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="153"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="8"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="37"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20FIREBASE:1%20-%20Introducci%C3%B3%3A%20Firebase"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="11">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="2 - Creació d'una aplicació"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="9">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="10">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="9"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;La Base de Dades, que hem quedat que poden ser un document únic JSON en el cas de Realtime Database, i tot un conjunt en el cas de Cloud Firestore, està associada a una aplicació. Crearem des de l'entorn de Firebase una nova aplicació, la referència de la qual és la que utilitzarem en l'aplicació web o aplicació mòbil. Així doncs, podem crear-nos unes quantes aplicacions Firebase, i en cadascuna guardarem una Base de Dades. Ens farà falta autenticar-nos amb un compte de Google. Utiilitzarem el compte corporatiu de l'IES El Caminàs, és a dir &lt;strong&gt;xxx@ieselcaminas.org&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;El procés de creació el farem des de l'entorn de firebase: &lt;a href=&quot;http://www.firebase.com&quot;&gt;www.firebase.com&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;El següent vídeo mostra el procés de creació d'una aplicació:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;iframe width=&quot;1024&quot; height=&quot;610&quot; src=&quot;https://slides.com/alvarinstitut/t7_firebase_comencar/embed?style=light&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;webkitallowfullscreen&quot; mozallowfullscreen=&quot;mozallowfullscreen&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En les últimes versions  de Firebase la primera vegada que s'accedeix a la Base de Dades Firebase acabada de crear, pregunta per les &lt;strong&gt;regles&lt;/strong&gt; (&lt;strong&gt;rules&lt;/strong&gt;) d'accés a aquesta. Inicialment triarem l'opció &lt;em&gt;&lt;strong&gt;modo de prueba&lt;/strong&gt;&lt;/em&gt;, en el qual tot el món pot accedir a les dades. Evidentment no es poden deixar aquestes regles de forma definitiva, però per a començar a provar, està bé. De fet, en l'última versió ho deixarà en mode de prova durant un mes. De tota manera, si ho vulguérem allargar, aniríem a la configuració dels &lt;strong&gt;rules&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_1_1.png&quot; alt=&quot;&quot; width=&quot;687&quot; height=&quot;438&quot; /&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list>
                <instance class="exe.engine.galleryidevice.GalleryImage">
                 <dictionary>
                  <string role="key" value="_caption"></string>
                  <instance class="exe.engine.field.TextField">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <int value="9267"></int>
                    <string role="key" value="_idevice"></string>
                    <none></none>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="content"></string>
                    <string value=""></string>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                   </dictionary>
                  </instance>
                  <string role="key" value="_id"></string>
                  <unicode value="156_85.195"></unicode>
                  <string role="key" value="_imageResource"></string>
                  <instance class="exe.engine.resource.Resource" reference="12">
                   <dictionary>
                    <string role="key" value="_idevice"></string>
                    <reference key="9"></reference>
                    <string role="key" value="_package"></string>
                    <reference key="2"></reference>
                    <string role="key" value="_storageName"></string>
                    <string value="T7_2_1_1.png"></string>
                    <string role="key" value="_userName"></string>
                    <string value="/tmp/tmpk13NfD/T7_2_1_1.png"></string>
                    <string role="key" value="checksum"></string>
                    <string value="54b532072cba1f4f7faad6ff4476fa1c"></string>
                    <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="warningMsg"></string>
                    <string value=""></string>
                   </dictionary>
                  </instance>
                  <string role="key" value="_parent"></string>
                  <reference key="10"></reference>
                  <string role="key" value="_thumbnailResource"></string>
                  <none></none>
                  <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                  <int value="3"></int>
                  <string role="key" value="makeThumbnail"></string>
                  <bool value="0"></bool>
                 </dictionary>
                </instance>
               </list>
               <string role="key" value="idevice"></string>
               <reference key="10"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="196"></int>
             <string role="key" value="parentNode"></string>
             <reference key="11"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="156"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="11"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="12"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="38"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20FIREBASE:2%20-%20Creaci%C3%B3%20d%27una%20aplicaci%C3%B3"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="15">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="3 - Realtime Database (RD)"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="13">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="14">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="13"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;div class=&quot;iDevice emphasis0&quot; ondblclick=&quot;submitLink('edit', 177, 0);&quot;&gt;
&lt;div id=&quot;ta177_85&quot; class=&quot;block iDevice_content&quot;&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Encara que la finalitat és utilitzar-lo des del nostre entorn de programació, més concretament Android, sempre ens anirà bé &quot;tocar&quot; les dades directament des d'un entorn propi.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;L'entorn que ens ofereix &lt;strong&gt;Firebase&lt;/strong&gt; serà suficient. Podrem visualitzar les dades que tenim introduïdes en totes les nostres aplicacions, i també editar-les: introduir, modificar i esborrar.&lt;/p&gt;
&lt;p&gt;Recordem que podrem utilitzar 2 versions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Realtime Database&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cloud Firestore&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="14"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="15"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="178"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="15"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="16">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="text"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="text"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="17">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="225_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="16"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Comencem per &lt;strong&gt;Realtime Database&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="17"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="15"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="225"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="15"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="46"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20FIREBASE:3%20-%20Realtime%20Database%20%28RD%29"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="20">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.1 RD: Utilització des de l'entorn de Firebase"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="18">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="19">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="85"></int>
                <string role="key" value="_idevice"></string>
                <reference key="18"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;Farem especial menció al fet que el que guardem és un document JSON. Fins i tot ens el podrem baixar (exportar) o pujar un document nou (importar). Això sí, l'operació d'importació destrueix les dades anteriors, mostra de que només podem guardar un document JSON.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;iframe width=&quot;1024&quot; height=&quot;800&quot; src=&quot;https://slides.com/alvarinstitut/t7_firebase_inserirdades/embed?style=light&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;webkitallowfullscreen&quot; mozallowfullscreen=&quot;mozallowfullscreen&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Aques és el contingut del fitxer &lt;strong&gt;Empleats.json&lt;/strong&gt; que s'introdueix en el vídeo. Està formatat per a una fàcil lectura, però en realitat no importaria que estiguera tot seguit.&lt;/p&gt;
&lt;p class=&quot;codi2&quot;&gt;{&lt;br /&gt;  &quot;empresa&quot;: {&lt;br /&gt;    &quot;empleat&quot;: [&lt;br /&gt;      {&lt;br /&gt;        &quot;num&quot;: 1,&lt;br /&gt;        &quot;nom&quot;: &quot;Andreu&quot;,&lt;br /&gt;        &quot;departament&quot;: 10,&lt;br /&gt;        &quot;edat&quot;: 32,&lt;br /&gt;        &quot;sou&quot;: 1000&lt;br /&gt;      },&lt;br /&gt;      {&lt;br /&gt;        &quot;num&quot;: 2,&lt;br /&gt;        &quot;nom&quot;: &quot;Bernat&quot;,&lt;br /&gt;        &quot;departament&quot;: 20,&lt;br /&gt;        &quot;edat&quot;: 28,&lt;br /&gt;        &quot;sou&quot;: 1200&lt;br /&gt;      },&lt;br /&gt;      {&lt;br /&gt;        &quot;num&quot;: 3,&lt;br /&gt;        &quot;nom&quot;: &quot;Clàudia&quot;,&lt;br /&gt;        &quot;departament&quot;: 10,&lt;br /&gt;        &quot;edat&quot;: 26,&lt;br /&gt;        &quot;sou&quot;: 1100&lt;br /&gt;      },&lt;br /&gt;      {&lt;br /&gt;        &quot;num&quot;: 4,&lt;br /&gt;        &quot;nom&quot;: &quot;Damià&quot;,&lt;br /&gt;        &quot;departament&quot;: 10,&lt;br /&gt;        &quot;edat&quot;: 40,&lt;br /&gt;        &quot;sou&quot;: 1500&lt;br /&gt;      }&lt;br /&gt;    ]&lt;br /&gt;  }&lt;br /&gt;}&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ja heu vist que en importar &lt;strong&gt;Empleats.json &lt;/strong&gt;s'han perdut les altres dades. Poseu una altra vegada la parella clau-valor &lt;strong&gt;a1&lt;/strong&gt; (per exemple amb el valor &lt;strong&gt;Hola&lt;/strong&gt;) ja que per ser molt senzilla l'estructura la utilitzarem en alguns exemples. Així ens queda l'estructura per als posteriors exemples:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_1.png&quot; alt=&quot;&quot; width=&quot;938&quot; height=&quot;472&quot; /&gt;&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="9296"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="154_85.193"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="21">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="18"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T7_2_2_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpk13NfD/T7_2_2_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="d917bb1b0d299fbea5510f5479cdeeb4"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="19"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="19"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="194"></int>
                <string role="key" value="parentNode"></string>
                <reference key="20"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="154"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="20"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="21"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="44"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20FIREBASE:3%20-%20Realtime%20Database%20%28RD%29:3.1%20RD%3A%20Utilitzaci%C3%B3%20des%20de%20l%27entorn%20de%20Firebase"></string>
           <string role="key" value="parent"></string>
           <reference key="15"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="24">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.2 RD: Utilització des de IntelliJ"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="22">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_editionFolder"></string>
              <string value="text/edition/"></string>
              <string role="key" value="_editionResources"></string>
              <list>
               <string value="text.js"></string>
              </list>
              <string role="key" value="_exportFolder"></string>
              <none></none>
              <string role="key" value="_exportResources"></string>
              <list></list>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="23">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="186_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="22"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p style=&quot;text-align: justify;&quot;&gt;El nostre objectiu final d'accedir a Firebase serà des d'Android. Mirarem primer l'accés des de IntelliJ, que és l'entorn que utilitzem en el present mòdul. Passar després a Android serà una cosa senzilla.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per als exemples i exercicis d'aquesta part, ens crearem un projecte anomenat &lt;strong&gt;Tema7&lt;/strong&gt;, amb els paquets &lt;strong&gt;exemples_realtimedatabase&lt;/strong&gt;, &lt;strong&gt;exemples_cloudfirestore&lt;/strong&gt;, &lt;strong&gt;exemples_cloudstorage&lt;/strong&gt; i &lt;strong&gt;exercicis&lt;/strong&gt;.&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="23"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="24"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="183"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="24"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="42"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20FIREBASE:3%20-%20Realtime%20Database%20%28RD%29:3.2%20RD%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ"></string>
           <string role="key" value="parent"></string>
           <reference key="15"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="27">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="3.2.1 RD-IntelliJ: Connexió des de Kotlin"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="25">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="26">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="25"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Drivers necessaris&lt;/p&gt;
&lt;p&gt;L'accés des de IntelliJ a Firebase no és senzill. És més complicat que accedir des d'Android, en contra del que cabria esperar.&lt;/p&gt;
&lt;p&gt;Concretament ens haurem de baixar molts &lt;strong&gt;.jar&lt;/strong&gt;. En canvi en Android ho tindrem tot disponible, ja que els drivers estan incorporats.&lt;/p&gt;
&lt;p&gt;Són tants els drivers que ens construirem una llibreria per a poder incorporar-los després còmodament als nostres projectes. Ens els podem baixar des del següent enllaç: &lt;a href=&quot;https://jar-download.com/artifacts/com.google.firebase&quot;&gt;https://jar-download.com/artifacts/com.google.firebase&lt;/a&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_3_3_3_1.png&quot; alt=&quot;&quot; width=&quot;1159&quot; height=&quot;858&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Una vegada baixat i descomprimit el contingut en una carpeta, construiu-vos una llibreria anomenada &lt;strong&gt;Firebase&lt;/strong&gt; que incorpore tots els &lt;strong&gt;jar&lt;/strong&gt;. El següent vídeo mostra com fer-ho:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;iframe width=&quot;899&quot; height=&quot;556&quot; src=&quot;https://slides.com/alvarinstitut/ad-t7_llibreria_firebase/embed?style=light&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Configuració&lt;/p&gt;
&lt;p&gt;El primer que hem de fer és preparar el nostre projecte per a que puga accedir a l'aplicació que hem creat en Firebase. En l'entron de IntelliJ ens baixarem un fitxer json on estarà la clau per a accedir a la nostra aplicació. Hem d'anar a la configuració del projecte:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_2_1_1.png&quot; alt=&quot;&quot; width=&quot;1351&quot; height=&quot;767&quot; /&gt;&lt;/p&gt;
&lt;p&gt;I dins de la configuració anar a la pestanya &lt;strong&gt;Cuentas de servicio &lt;/strong&gt;(&lt;strong&gt;Service Accounts&lt;/strong&gt;). Ahí veurem uns exemples d'utilització (a nosaltres ens interessa &lt;strong&gt;Java&lt;/strong&gt;), i baix de tot un botó per a &lt;strong&gt;Generar una nova clau privada&lt;/strong&gt;:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_2_1_2.png&quot; alt=&quot;&quot; width=&quot;1346&quot; height=&quot;952&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Ens baixarà un fitxer &lt;strong&gt;json&lt;/strong&gt; que&lt;strong&gt; haurem de guardar&lt;/strong&gt; a l'arrel del projecte. Després, com deia l'exemple, col·loquem el següent per a un accés correcte:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;FileInputStream serviceAccount =
  new FileInputStream(&quot;path/to/serviceAccountKey.json&quot;);

FirebaseOptions options = new FirebaseOptions.Builder()
  .setCredentials(GoogleCredentials.fromStream(serviceAccount))
  .setDatabaseUrl(&quot;https://acces-a-dades-6e5a6.firebaseio.com&quot;)
  .build();

FirebaseApp.initializeApp(options);&lt;/code&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;No us oblideu de substituir el nom del fitxer json&lt;/strong&gt;. També heu de tenir en compte que &lt;strong&gt;la URL de la base de dades serà diferent per a cadascú de nosaltres&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Ho tenim escrit en &lt;strong&gt;Java&lt;/strong&gt;, i per tant haurem de fer la transformació a &lt;strong&gt;Kotlin&lt;/strong&gt;. i quedarà així (ho he particularitzat al meu projecte, però recordeu que heu de canviar el nom del fitxer json i la URL pels vostres):&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	val serviceAccount = FileInputStream(&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;)

	val options = FirebaseOptions.Builder()
		.setCredentials(GoogleCredentials.fromStream(serviceAccount))
		.setDatabaseUrl(&quot;https://acces-a-dades-6e5a6.firebaseio.com&quot;).build()

	FirebaseApp.initializeApp(options)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&quot;ta162_85&quot; class=&quot;block iDevice_content&quot;&gt;
&lt;p class=&quot;titolet&quot;&gt;Referència a la Base de Dades i a les dades concretes a les quals volem accedir&lt;/p&gt;
&lt;p&gt;Ens haurem de crear un objecte &lt;strong&gt;FirebaseDatabase&lt;/strong&gt;, que serà una referència a tota la Base de Dades:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val&lt;/span&gt; database = FirebaseDatabase.&lt;span style=&quot;font-style: italic;&quot;&gt;getInstance&lt;/span&gt;()&lt;/pre&gt;
&lt;p&gt;A partir d'ella podríem fer referència a una parella clau-valor que estiga a l'arrel, com quan havíem creat &lt;strong&gt;a1 &lt;/strong&gt;( però recordeu que ara no existeix):&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;refA1 = database.getReference(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;a1&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt;També podríem fer referència a una parella clau-valor que no estiga en l'arrel de la Base de Dades. Senzillament posaríem la ruta des de l'arrel. Per exemple, per a accedir al nom del primer empleat de l'empresa que tenim guardat, ho faríem així:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;empleat1 = database.getReference(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;empresa/empleat/0/nom&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt;En els casos anteriors hem optat per agafar parelles clau-valor, bé a l'arrel o més cap a dins de l'estructura JSON. Però en definitiva és una parella clau-valor.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;També podem optar per agafar l'estructura JSON i treballar amb ella, com vam fer en el Tema 3, quan vam treballar amb l'estructura JSON.&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;empresa = database.getReference(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;empresa&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt;D'aquesta manera, en la qual agafem tota l'estructura, tindrem dues maneres de treballar posteriorment per a accedir més avall en l'estructura:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Passar-lo a objectes i arrays de JSON, i treballar com vam fer en el Tema 3. Molt còmode, sobretot quan es tracta d'operacions de lectura&lt;/li&gt;
&lt;li&gt;Treballar directament amb mètodes de Firebase que ens permeten accedir bé a tots els fills d'una estructura, bé a un fill en concret&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ho mostrarem en els exemples posteriors.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;div id=&quot;ta163_85&quot; class=&quot;block iDevice_content&quot;&gt;
&lt;div id=&quot;ta164_85&quot; class=&quot;block iDevice_content&quot;&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9281"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="168_85.464"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="28">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="25"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_3_3_3_1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_3_3_3_1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="696223cc43f7a9c2b284e5e26eefad42"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="26"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9290"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="168_85.465"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="29">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="25"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_2_2_2_1_1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_2_2_2_1_1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="254720187b887d1069d79d15a6d73e69"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="26"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9328"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="168_85.466"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="30">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="25"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_2_2_2_1_2.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_2_2_2_1_2.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="1f40c2ee9c34df625f74de39b41cf65b"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="26"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="26"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="467"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="27"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="168"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="27"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="28"></reference>
                  <reference key="29"></reference>
                  <reference key="30"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="52"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:3%20-%20Realtime%20Database%20%28RD%29:3.2%20RD%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ:3.2.1%20RD-IntelliJ%3A%20Connexi%C3%B3%20des%20de%20Kotlin"></string>
              <string role="key" value="parent"></string>
              <reference key="24"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="33">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="3.2.2 RD-IntelliJ: Accés a les dades"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="31">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="32">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="185_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="31"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Guardar dades&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Disposem del mètode &lt;strong&gt;setValue()&lt;/strong&gt; de la referència a la dada a la que volem accedir. Accepta 2 paràmetres:&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;El primer és el valor que volem introduir.&lt;/li&gt;
&lt;li&gt;El segon és un listener per a poder sincronitzar. Ens farà falta sincronitzar únicament en els programes mode text senzills que fem. Quan fem els &lt;strong&gt;gràfics&lt;/strong&gt; no ens farà falta, i posarem &lt;strong&gt;null&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Si per exemple vulguérem guardar en la variable &lt;strong&gt;a1&lt;/strong&gt;, de forma senzilla ho faríem així (ens funcionaria en els gràfics):&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #660e7a;&quot;&gt;refA1&lt;/span&gt;.setValue(&lt;span style=&quot;color: #660e7a;&quot;&gt;&quot;Valor per a a1&quot;&lt;/span&gt;, null);&lt;/pre&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En l'operació de guardar si la parella clau-valor on es va a guardar existia, doncs modificarà el valor. I si no existia, la crearà.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En el cas que vulguem guardar no en l'arrel, sinó més avall en l'estructura JSON, disposem del mètode &lt;strong&gt;child()&lt;/strong&gt;, que ens permet anar a un determinat fill, a l'estil de la segona manera descrita en el subpunt anterior. Per exemple si vulguérem canviar l'edat del primer empleat, l'estructura per a arribar seria:&lt;strong&gt; empresa --&amp;gt; empleat --&amp;gt; 0 --&amp;gt; edat&lt;/strong&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;background-color: #e4e4ff;&quot;&gt;empresa&lt;/span&gt;.child(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;empleat&quot;&lt;/span&gt;).child(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;0&quot;&lt;/span&gt;).child(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;edat&quot;&lt;/span&gt;).setValue(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;33&quot;&lt;/span&gt;, null);&lt;/pre&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Si no existia abans qualsevol dels nodes de l'estructura, el crearà. Fins i tot, si no existira abans de la sentència anterior &lt;strong&gt;empresa&lt;/strong&gt;, doncs crearia &lt;strong&gt;empresa&lt;/strong&gt;, i dins d'ell &lt;strong&gt;empleat&lt;/strong&gt;, i dins d'ell &lt;strong&gt;0&lt;/strong&gt;, i dins d'ell &lt;strong&gt;edat&lt;/strong&gt;, amb el valor 33.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;També podríem guardar tot un objecte, i es convertirà en estructura JSON, però ens ho deixem per a més avant.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Però com havíem dit abans, s'ha de sincronitzar amb Firebase, des del programa Java ens hem d'esperar a aquesta sincronització, si no no ens funcionarà. En el segon paràmetre ens posem un &lt;strong&gt;listener&lt;/strong&gt;. Aquest exemple ja està complet. Guardeu-lo amb el nom &lt;strong&gt;Exemple_7_3_1_FirebaseRD_Guardar.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import java.io.FileInputStream
import com.google.firebase.FirebaseOptions
import com.google.auth.oauth2.GoogleCredentials
import com.google.firebase.FirebaseApp
import com.google.firebase.database.FirebaseDatabase
import java.util.concurrent.CountDownLatch
import com.google.firebase.database.DatabaseReference
import com.google.firebase.database.DatabaseError

fun main() {
	val serviceAccount = FileInputStream(&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;)

	val options = FirebaseOptions.builder()
		.setCredentials(GoogleCredentials.fromStream(serviceAccount))
		.setDatabaseUrl(&quot;https://acces-a-dades-6e5a6.firebaseio.com&quot;).build()

	FirebaseApp.initializeApp(options)

	val empresa = FirebaseDatabase.getInstance().getReference(&quot;empresa&quot;)

	val done = CountDownLatch (1)
	
	empresa.child(&quot;empleat&quot;).child(&quot;0&quot;).child(&quot;edat&quot;).setValue(&quot;33&quot;,
		object : DatabaseReference.CompletionListener {
            override fun onComplete(p0: DatabaseError?, p1: DatabaseReference) {
                done.countDown()
			}
	})
	done.await()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Recordeu que heu de canviar el &lt;strong&gt;nom del fitxer json&lt;/strong&gt; i la &lt;strong&gt;URL&lt;/strong&gt; per les vostres.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I aquest és el resultat d'executar-lo. A la dreta podem veure com s'està modificant la dada que preteníem:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_3_2_1.png&quot; alt=&quot;&quot; width=&quot;1311&quot; height=&quot;673&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Però com comentàvem, en el cas de les aplicacions gràfiques resulta més senzill, ja que no haurem d'esperar expressament a la sincronització, sinó que l'aplicació es queda en marxa, i per tant no hi haurà problema.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ho practicarem en un exemple nou, on arribarem a construir un Xat, i ens servirà per a practicar totes les coses que us volem mostrar en Realtme Database de Firebase.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Aquest és l'esquelet del programa. Guardeu-lo amb el nom &lt;strong&gt;Exemple_7_3_2_FirebaseRD_CrearXat.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import java.awt.EventQueue
import javax.swing.JFrame
import javax.swing.JLabel
import javax.swing.JTextArea
import javax.swing.JButton
import javax.swing.JTextField
import java.awt.BorderLayout
import javax.swing.JPanel
import java.awt.FlowLayout
import java.awt.Color
import javax.swing.JScrollPane
import java.io.FileInputStream

import com.google.firebase.FirebaseOptions
import com.google.auth.oauth2.GoogleCredentials
import com.google.firebase.FirebaseApp
import com.google.firebase.database.*

class CrearXat : JFrame() {

    val etUltimMissatge= JLabel(&quot;Últim missatge: &quot;)
    val ultimMissatge= JLabel()

    val etiqueta = JLabel(&quot;Missatges:&quot;)
    val area = JTextArea()

    val etIntroduccioMissatge = JLabel(&quot;Introdueix missatge:&quot;)
    val enviar = JButton(&quot;Enviar&quot;)
    val missatge = JTextField(15)

    // en iniciar posem un contenidor per als elements anteriors
    init {
        defaultCloseOperation = JFrame.EXIT_ON_CLOSE
        setBounds(100, 100, 450, 300)
        setLayout(BorderLayout())

        // contenidor per als elements
        //Hi haurà títol. Panell de dalt: últim missatge. Panell de baix: per a introduir missatge. Panell central: tot el xat

        val panell1 = JPanel(FlowLayout())
        panell1.add(etUltimMissatge)
        panell1.add(ultimMissatge)
        getContentPane().add(panell1, BorderLayout.NORTH)

        val panell2 = JPanel(BorderLayout())
        panell2.add(etiqueta, BorderLayout.NORTH)
        area.setForeground(Color.blue)
        area.setEnabled(false)
        val scroll = JScrollPane(area)
        panell2.add(scroll, BorderLayout.CENTER)
        getContentPane().add(panell2, BorderLayout.CENTER)

        val panell3 = JPanel(FlowLayout())
        panell3.add(etIntroduccioMissatge)
        panell3.add(missatge)
        panell3.add(enviar)
        getContentPane().add(panell3, BorderLayout.SOUTH)

        setVisible(true)
        enviar.addActionListener{enviar()}

        val serviceAccount = FileInputStream(&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;)

        val options = FirebaseOptions.builder()
            .setCredentials(GoogleCredentials.fromStream(serviceAccount))
            .setDatabaseUrl(&quot;https://acces-a-dades-6e5a6.firebaseio.com&quot;).build()

        FirebaseApp.initializeApp(options)

        // Exemple de listener de lectura única addListenerForSingleValue()
        // Per a posar el títol. Sobre nomXat

        // Exemple de listener de lectura contínua addValueEventListener()
        // Per a posar l'últim missatge registrat. Sobre a1

        // Exemple de listener d'una llista addChildEventListener()
        // Per a posar tota la llista de missatges. Sobre xat

    }

    // Exemple de guardar dades sense haver d'esperar per ser una aplicació gràfica
    // Per a guardar dades. Sobre a1, i despŕes sobre la llista xat
    fun enviar(){

    }

}

fun main(args: Array&amp;lt;String&amp;gt;) {
    EventQueue.invokeLater {
        CrearXat().isVisible = true
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&quot;ta164_85&quot; class=&quot;block iDevice_content&quot;&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Recordeu que heu de canviar el &lt;strong&gt;nom del fitxer json&lt;/strong&gt; i la &lt;strong&gt;URL&lt;/strong&gt; per les vostres. Ho podeu copiar de l'exemple anterior&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Observeu que ja tenim col·locades en l'anterior programa les dades de connexió:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;		val serviceAccount = FileInputStream(&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;)

		val options = FirebaseOptions.Builder()
				.setCredentials(GoogleCredentials.fromStream(serviceAccount))
				.setDatabaseUrl(&quot;https://acces-a-dades-6e5a6.firebaseio.com&quot;).build()

		FirebaseApp.initializeApp(options)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I torne a insistir en què heu de &lt;strong&gt;canviar la referència al fitxer JSON i la URL&lt;/strong&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per a guardar les dades, en aquest exemple de moment guardarem en la clau de Firebase &lt;strong&gt;a1&lt;/strong&gt; en el moment de apretar el botó de baix d'&lt;strong&gt;Enviar&lt;/strong&gt;. No farà falta muntar cap listener per veure si ja hem acabat, ja que el programa continua en marxa.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	// Exemple de guardar dades sense haver d'esperar per ser una aplicació gràfica
	// Per a guardar dades. Sobre a1, i despŕes sobre la llista xat
	fun enviar(){
			val refA1 = FirebaseDatabase.getInstance().getReference(&quot;a1&quot;)
			refA1.setValue(missatge.getText(), null)
	}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Observeu que ara queda molt senzilla la sentència de guardar, i no ha fet falta ficar cap listener en el segon paràmetre, sinó &lt;strong&gt;null&lt;/strong&gt;, per estar en una aplicació gràfica:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&lt;strong&gt;refA1.setValue(missatge.getText(), null)&lt;/strong&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El resultat seria aquest, on es veu la modificació de la dada que volíem:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_2_2_2.png&quot; alt=&quot;&quot; width=&quot;1329&quot; height=&quot;738&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9288"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="180_185_2.183"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="34">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="31"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_3_2_1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_3_2_1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="dc2929eae00c5e91147045fcd25b674b"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="32"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9323"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="180_185_2.184"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="35">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="31"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_2_2_2.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_2_2_2.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="8ec7af30ccfb77e0dd97c5a7b74886fe"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="32"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="32"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="185"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="33"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="180"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="33"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="34"></reference>
                  <reference key="35"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="36">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="37">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="187_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="36"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Recuperar dades&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;La lectura de dades és més complicada que l'escriptura. És en bona part per culpa de la &quot;sincronització&quot; de les dades que obtenim. Per això no existeix un mètode tan senzill com el &lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;strong&gt;getValue()&lt;/strong&gt;&lt;/span&gt;. La lectura s'ha de muntar sempre amb &lt;strong&gt; Listeners&lt;/strong&gt;, que es queden escoltant si hi ha alguna actualització de la dada registrada. Recordeu que és de la dada registrada, no de tota la Base de Dades.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Podem muntar dos tipus de Listeners, però el seu funcionament serà similar&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;Els que només escolten per a llegir les dades al principi, i no esperaran per a posteriors canvis en les dades (i per tant no consumiran tants recursos): &lt;strong&gt;addListenerForSingleValueEvent()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Els que es queden escoltant tota l'estona: &lt;strong&gt;addValueEventListener()&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En ambdos casos obtenim com a paràmetre un &lt;strong&gt;Data&lt;/strong&gt;&lt;strong&gt;Snapshot&lt;/strong&gt; (còpia) de la dada registrada. I d'aquest tipus, &lt;strong&gt;DataSnapshot&lt;/strong&gt;, sí que tenim el mètode &lt;strong&gt;getValue()&lt;/strong&gt; per a accedir a la dada. Ambdós tipus de Listeners tenen un tractament absolutament similar, únicament amb la diferència abans esmentada que el segon està sempre escoltant, i el primer només escolta una vegada al principi.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El mètode &lt;strong&gt;getValue()&lt;/strong&gt; admet un paràmetre que serà la classe del tipus que volem obtenir. Podem posar les següents:&lt;/p&gt;
&lt;ul&gt;
&lt;li style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;String.class&lt;/strong&gt;, i aleshores el que obtenim s'interpretarà com un String&lt;/li&gt;
&lt;li style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;Double.class&lt;/strong&gt;, i s'interpretarà com un número real de doble precisió&lt;/li&gt;
&lt;li style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;Boolean.class&lt;/strong&gt;, i s'interptretaràcom un valor booleà&lt;/li&gt;
&lt;li style=&quot;text-align: justify;&quot;&gt;També es poden posar classes per a obtenir tot un objecte (Map) i per a una llista (List). Fins i tot es podria arribar a posar una classe definida per nosaltres. Però amb els anteriors nosaltres en tindrem prou&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;/p&gt;
&lt;h2 style=&quot;text-align: justify;&quot;&gt;addListenerForSingleValue()&lt;/h2&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En aquest primer exemple anem a agafar una única vegada la dada que ens interessa, i per tant  utilitzarem &lt;strong&gt;addListenerForSingleValueEvent()&lt;/strong&gt;. Ens servirà per a posar el títol de l'aplicació, i ho farem consultant la clau &lt;strong&gt;nomXat &lt;/strong&gt;que haurà d'estar creada prèviament des del mateix entorn de Firebase.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_2_2_2_2_3.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;1328&quot; height=&quot;737&quot; /&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;/pre&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Modificarem el fragment de programa marcat pel comentari, i el que fem és esperar per a llegir només una vegada.&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;		// Exemple de listener de lectura única addListenerForSingleValue()
		// Per a posar el títol. Sobre nomXat
		val nomXat = FirebaseDatabase.getInstance().getReference(&quot;nomXat&quot;)

		nomXat.addListenerForSingleValueEvent(object : ValueEventListener {
			override
			fun onDataChange(dataSnapshot: DataSnapshot) {
				setTitle(dataSnapshot.getValue().toString())
			}

			override
			fun onCancelled(error: DatabaseError) {
			}
		})
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Aquest és el resultat, i quan l'executeu observareu que tarda un poc en mostrar el títol. És perquè ho està llegint de Firebase.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_2_2_2_2_4.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;450&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h2 style=&quot;text-align: justify;&quot;&gt;addValueEventListener()&lt;/h2&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Anem a veure ara un exemple per a l'altre mètode, el &lt;strong&gt;addValueEventListener()&lt;/strong&gt;, que és el que es queda escoltant tota la estona&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Concretarem el que farem és escoltar  tota la estona per si es produeix algun canvi en la clau &lt;strong&gt;a1&lt;/strong&gt;. Si es produeix aquest canvi, modificarà el valor del JLabel &lt;strong&gt;ultimMissatge &lt;/strong&gt;que està dalt.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;També afegirem el missatge al JTextArea, per a que tinga apariència de xat, encara que després ho modificarem per a millorar-ho. Ho hem de col·locar on està marcat pel comentari&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;		// Exemple de listener de lectura contínua addValueEventListener()
		// Per a posar l'últim missatge registrat. Sobre a1
		val ultim = FirebaseDatabase.getInstance().getReference(&quot;a1&quot;)

		ultim.addValueEventListener(object : ValueEventListener {
			override
			fun onDataChange(dataSnapshot: DataSnapshot) {
				ultimMissatge.setText(dataSnapshot.getValue().toString())
				area.append(dataSnapshot.getValue().toString() + &quot;\n&quot;)         // aquesta línia després la llevarem
			}

			override
			fun onCancelled(error: DatabaseError ) {
			}
		})
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;L'execució serà com la de la pantalla de dalt a l'esquerra. Però si es produeix algun canvi (com es mostra en la pantalla de la dreta), aquest canvi es reflectirà automàticament tant en el JLabel de dalt com en el TextArea, tal i com es mostra en la imatge de baix a l'esquerra:&lt;/p&gt;
&lt;table style=&quot;width: 100%;&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_2_2_2_2_6.png&quot; alt=&quot;&quot; width=&quot;450&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_2_2_2_2_8.png&quot; alt=&quot;&quot; width=&quot;450&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td&gt;&lt;img src=&quot;resources/T7_2_2_2_2_7.png&quot; alt=&quot;&quot; width=&quot;1319&quot; height=&quot;733&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En canvi, una vegada està en marxa el programeta del xat, per més que canviem &lt;strong&gt;nomXat&lt;/strong&gt;, que es traslladava al títol de la finestra, aquest títol ja &lt;strong&gt;no canviarà&lt;/strong&gt; perquè recordem que es feia una única lectura&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_2_2_8_5.png&quot; alt=&quot;&quot; width=&quot;1025&quot; height=&quot;800&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Com veieu ha estat molt fàcil construir una espècie de xat. Ara millorarem aquest xat.&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9262"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="185_187_2.543"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="38">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="36"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_2_2_6.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_2_2_6.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="6ba60e73684cf1748f9fee8d509514b1"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="37"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9273"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="185_187_2.544"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="39">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="36"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_2_2_7.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_2_2_7.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="b59fdbc11babc86ebe58a4bdd4e541ea"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="37"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9303"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="185_187_2.545"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="40">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="36"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_2_2_8.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_2_2_8.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="a3215dcc0649adc637e2415d53f1799f"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="37"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9311"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="185_187_2.546"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="41">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="36"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_2_2_8_5.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_2_2_8_5.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="7378c6842569e29c2560c8f0861cab93"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="37"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9317"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="185_187_2.547"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="42">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="36"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_2_2_3.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_2_2_3.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="b5c7f0a5f4ce6b105be633f3211dde64"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="37"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9335"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="185_187_2.548"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="43">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="36"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_2_2_4.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_2_2_4.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="fde357eb0df7ca1c99444373564374f9"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="37"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="37"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="549"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="33"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="185"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="33"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="38"></reference>
                  <reference key="39"></reference>
                  <reference key="40"></reference>
                  <reference key="41"></reference>
                  <reference key="42"></reference>
                  <reference key="43"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="44">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="45">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="187_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="44"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Tractament de llistes&lt;/p&gt;
&lt;p&gt;Per a explicar millor el tractament de llistes, crearem una altra referència a una clau que representarà una llista de missatges. Cada missatge constarà d'un nom i un contingut, i així vuerem també el tractament d'objectes.&lt;/p&gt;
&lt;p&gt;El primer que ens haurem de definir és la referència a aquesta nova clau, que l'anomenarem &lt;strong&gt;xat&lt;/strong&gt; (no està creada encara en la Base de Dades).&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;xat = FirebaseDatabase.getInstance().getReference(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;xat&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt;Anar afegint elements a la llista, ho podem fer a mà, posant nosaltres l'índex, ja que hem vist que la manera de representar en Firebase una llista són fills únicament amb clau, que seria el subíndex.&lt;/p&gt;
&lt;p&gt;Per tant una manera d'afegir el primer missatge del xat, seria amb l'índex 0. Posem aquest codi quan apretem el botó (no hem llevat de moment el fet de guardar en &lt;strong&gt;a1&lt;/strong&gt;, per a que mentre fem les proves es veja tot el xat):&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	// Exemple de guardar dades sense haver d'esperar per ser una aplicació gràfica
	// Per a guardar dades. Sobre a1, i despŕes sobre la llista xat
	fun enviar() {
		val refA1 = FirebaseDatabase.getInstance().getReference(&quot;a1&quot;)
		refA1.setValue(missatge.getText(), null)
		val xat = FirebaseDatabase.getInstance().getReference(&quot;xat&quot;)
		xat.child(&quot;0&quot;).child(&quot;nom&quot;).setValue(&quot;Usuari1&quot;, null)
		xat.child(&quot;0&quot;).child(&quot;contingut&quot;).setValue(missatge.getText(), null)
	}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Quan apretem s'actualitzarà la Base de Dades d'aquesta manera:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_2_2_9.png&quot; alt=&quot;&quot; width=&quot;587&quot; height=&quot;377&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Però aquesta manera d'introduir en la llista acaba per ser molt poc pràctica. Si ara anàrem a introduir un segon missatge (nom i contingut) li hauríem de posar com a índex 1. No és viable.&lt;/p&gt;
&lt;p&gt;Podríem dur 2 polítiques per a gestionar els índex:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Podríem portar un comptador per a saber quin índex toca inserir en cada moment, cosa també molt poc pràctica perquè si l'aplicació està instal·lada en més d'un dispositiu, podria haver col·lisió en el número d'índex.&lt;/li&gt;
&lt;li&gt;Podríem mirar quin és l'últim índex introduït, per a incrementar-lo en una unitat. Però açò suposa llegir de la Base de Dades, i com hem vist abans suposarà muntar un Listener, segurament dels d'un únic ús. Per tant se'ns complic la cosa. Es pot fer, però no és còmode.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per a estalviar-nos aquesta feina, Firebase ens proporciona un métode per a afegir un nou element a una llista, el mètode &lt;strong&gt;push()&lt;/strong&gt;. Introdueix un nou element a la llista, i li posa com a índex un numero generat de manera que no es repetirà mai. L'única preocupació que hem de tenir és guardar aquest índex (amb &lt;strong&gt;getKey()&lt;/strong&gt;), per a poder posar-lo com a clau.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	// Exemple de guardar dades sense haver d'esperar per ser una aplicació gràfica
	// Per a guardar dades. Sobre a1, i despŕes sobre la llista xat
	fun enviar() {
		val refA1 = FirebaseDatabase.getInstance().getReference(&quot;a1&quot;)
		refA1.setValue(missatge.getText(), null)
		val xat = FirebaseDatabase.getInstance().getReference(&quot;xat&quot;)
		val clau = xat.push().getKey()
		xat.child(clau).child(&quot;nom&quot;).setValue(&quot;Usuari1&quot;, null)
		xat.child(clau).child(&quot;contingut&quot;).setValue(missatge.getText(), null)
	}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I el resultat és aquest:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_2_2_10.png&quot; alt=&quot;&quot; width=&quot;552&quot; height=&quot;441&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Com veiem és una cadena molt llarga que no és repetirà mai.&lt;/p&gt;
&lt;p&gt;Anem a fer una tercera inserció d'un missatge, però ara ho completarem més, i solucionarem de pas algun problemeta que podíem haver tingut.&lt;/p&gt;
&lt;p&gt;Crearem una classe anomenada &lt;strong&gt;Missatge&lt;/strong&gt;, que inclourà les propietats &lt;strong&gt;nom&lt;/strong&gt; i &lt;strong&gt;contingut&lt;/strong&gt;. Crearem un objecte &lt;strong&gt;Missatge &lt;/strong&gt;amb uns nous valors, i veurem que el podem guardar perfectament. Per a aquest exemple segurament no valdria la pena l'esforç, però es pot veure la utilitat per a objectes més complexos.&lt;/p&gt;
&lt;p&gt;Primer definim la classe. El millor és que el guardem com una classe nova, és a dir com a &lt;strong&gt;Missatge.kt &lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre class=&quot;  language-java&quot;&gt;&lt;code class=&quot;  language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Missatge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;var nom&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; var contingut&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Per a guardar, col·locaríem aquestes sentències entre les accions del clic del botó, com en les altres ocasions. Observeu com ara ni tan sols ens fa falta guardar en una variable el &lt;strong&gt;getKey()&lt;/strong&gt;, ja que es fa tot només en una operació:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	// Exemple de guardar dades sense haver d'esperar per ser una aplicació gràfica
	// Per a guardar dades. Sobre a1, i despŕes sobre la llista xat
	fun enviar() {
		val refA1 = FirebaseDatabase.getInstance().getReference(&quot;a1&quot;)
		refA1.setValue(missatge.getText(), null)
		val xat = FirebaseDatabase.getInstance().getReference(&quot;xat&quot;)
		val m = Missatge(&quot;Usuari1&quot;, missatge.getText())
		xat.push().setValue(m, null)
	}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El resultat seria el mateix que en l'ocasió anterior:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_2_2_11.png&quot; alt=&quot;&quot; width=&quot;604&quot; height=&quot;525&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Ara només ens falta el tractament de lectura de les llistes.&lt;/p&gt;
&lt;h2&gt;addChildEventListener()&lt;/h2&gt;
&lt;p&gt;Podríem muntar un Listener com en les altres ocasions, però ara disposarem d'uns altres Listeners que se'ns acoplen millor ja que s'activen quan hi ha modificacions en algun element de la llista. En l'exemple només utilitzarem el de creació d'un nou element, però com veurem també podríem utilitzar els moments de supressió o modificació d'elements.&lt;/p&gt;
&lt;p&gt;Es tracta del Listener &lt;strong&gt;ChildEventListener&lt;/strong&gt;, i hem d'utilitzar el mètode &lt;strong&gt;addChildEventListener()&lt;/strong&gt; sobre la llista. Voldrà la implementació dels mètodes: &lt;strong&gt;onChildAdded()&lt;/strong&gt;, &lt;strong&gt;onChildChanged()&lt;/strong&gt;, &lt;strong&gt;onChildRemoved()&lt;/strong&gt; i &lt;strong&gt;onChildMoved()&lt;/strong&gt;, a banda de &lt;strong&gt;onCancelled()&lt;/strong&gt;. Però com comentàvem ara només utilitzarem la de creació d'un nou element, i senzillament el mostrarem en el TextView.&lt;/p&gt;
&lt;p&gt;Al &lt;strong&gt;dataSnapshot&lt;/strong&gt; arriba únicament l'element introduït, modificat o esborrat, no tota la llista. Per tant és molt còmode. També arriba el nom de l'element anterior com a segon paràmetre, per si hem de fer algun tractament. És important fixar-nos en que aquest segon paràmetre l'hem de definir com a &lt;strong&gt;String?&lt;/strong&gt; (amb la interrogant per a contemplar el null). Si no posem la interrogant, no es comportarà bé la primera vegada.&lt;/p&gt;
&lt;p&gt;Açò ens substituirà l'escriptura que féiem abans del TextArea (a mi m'havia quedat en la línia 95, vosaltres la tindreu aproximadament per ahí). Per tant llevem aquesta línia:&lt;/p&gt;
&lt;div style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;code&gt;				area.append(dataSnapshot.getValue().toString() + &quot;\n&quot;);  // aquesta línia després la llevarem&lt;/code&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I posem el següent on queda marcat pel comentari. Així ens quedarà un xat més &quot;professional&quot;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;		// Exemple de listener d'una llista addChildEventListener()
		// Per a posar tota la llista de missatges. Sobre xat
		val xat = FirebaseDatabase.getInstance().getReference(&quot;xat&quot;)

		xat.addChildEventListener(object : ChildEventListener {
				override
				fun onChildAdded(dataSnapshot: DataSnapshot, s: String?) {
					area.append(dataSnapshot.child(&quot;nom&quot;).getValue().toString() + &quot;: &quot;
								+ dataSnapshot.child(&quot;contingut&quot;).getValue().toString() + &quot;\n&quot;
					)
				}

				override
				fun onChildChanged(dataSnapshot: DataSnapshot, s: String?) {
				}

				override
				fun onChildRemoved(dataSnapshot: DataSnapshot) {
				}

				override
				fun onChildMoved(dataSnapshot: DataSnapshot, s: String?) {
				}

				override
				fun onCancelled(databaseError: DatabaseError) {
				}
			}
		)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;code&gt;&lt;br /&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Si executem aquest programa, tenint només en el clic del botó l'addició d'un element a la llista i aquest Listener anterior, veurem que inicialment ens apareixeran tots els elements de la llista. Això és perquè considera que inicialment s'afegeix cadascun dels elements de la llista, i en el mateix ordre en que estan definits. En aquest imatge hem aprofitat per afegir un quart missatge:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_2_2_12.png&quot; alt=&quot;&quot; width=&quot;450&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9297"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="227_187_2.360"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="46">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="44"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_2_2_9.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_2_2_9.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="10467746282449a0178badbd93fc516b"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="45"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9306"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="227_187_2.361"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="47">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="44"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_2_2_11.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_2_2_11.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="5f485b0593f6f27f7c343c69bad76342"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="45"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9307"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="227_187_2.362"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="48">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="44"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_2_2_12.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_2_2_12.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="82b8eda4bc36b0627045a36301512080"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="45"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9332"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="227_187_2.363"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="49">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="44"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_2_2_10.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_2_2_10.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="598ce642a14205b633de94e9ead37352"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="45"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="45"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="364"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="33"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="227"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="33"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="46"></reference>
                  <reference key="47"></reference>
                  <reference key="48"></reference>
                  <reference key="49"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="51"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:3%20-%20Realtime%20Database%20%28RD%29:3.2%20RD%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ:3.2.2%20RD-IntelliJ%3A%20Acc%C3%A9s%20a%20les%20dades"></string>
              <string role="key" value="parent"></string>
              <reference key="24"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="52">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="3.2.3 RD-IntelliJ: Tot l'exemple"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="50">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="51">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="50"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Tot l'exemple&lt;/p&gt;
&lt;p&gt;Anem a posar tot l'exemple que arreplega tot l'anterior.&lt;/p&gt;
&lt;p&gt;Primer la classe &lt;strong&gt;Missatge.java&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class Missatge(var nom: String, var contingut: String)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Ara el programa, que havíem quedat de guardar-lo en el fitxer &lt;strong&gt;Exemple_7_3_2_2_FirebaseRD_CrearXat.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import java.awt.EventQueue
import javax.swing.JFrame
import javax.swing.JLabel
import javax.swing.JTextArea
import javax.swing.JButton
import javax.swing.JTextField
import java.awt.BorderLayout
import javax.swing.JPanel
import java.awt.FlowLayout
import java.awt.Color
import javax.swing.JScrollPane
import java.io.FileInputStream

import com.google.firebase.FirebaseOptions
import com.google.auth.oauth2.GoogleCredentials
import com.google.firebase.FirebaseApp
import com.google.firebase.database.*

class CrearXat : JFrame() {

    val etUltimMissatge= JLabel(&quot;Últim missatge: &quot;)
    val ultimMissatge= JLabel()

    val etiqueta = JLabel(&quot;Missatges:&quot;)
    val area = JTextArea()

    val etIntroduccioMissatge = JLabel(&quot;Introdueix missatge:&quot;)
    val enviar = JButton(&quot;Enviar&quot;)
    val missatge = JTextField(15)

    // en iniciar posem un contenidor per als elements anteriors
    init {
        defaultCloseOperation = JFrame.EXIT_ON_CLOSE
        setBounds(100, 100, 450, 300)
        setLayout(BorderLayout())

        // contenidor per als elements
        //Hi haurà títol. Panell de dalt: últim missatge. Panell de baix: per a introduir missatge. Panell central: tot el xat

        val panell1 = JPanel(FlowLayout())
        panell1.add(etUltimMissatge)
        panell1.add(ultimMissatge)
        getContentPane().add(panell1, BorderLayout.NORTH)

        val panell2 = JPanel(BorderLayout())
        panell2.add(etiqueta, BorderLayout.NORTH)
        area.setForeground(Color.blue)
        area.setEnabled(false)
        val scroll = JScrollPane(area)
        panell2.add(scroll, BorderLayout.CENTER)
        getContentPane().add(panell2, BorderLayout.CENTER)

        val panell3 = JPanel(FlowLayout())
        panell3.add(etIntroduccioMissatge)
        panell3.add(missatge)
        panell3.add(enviar)
        getContentPane().add(panell3, BorderLayout.SOUTH)

        setVisible(true)
        enviar.addActionListener{enviar()}

        val serviceAccount = FileInputStream(&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;)

        val options = FirebaseOptions.builder()
            .setCredentials(GoogleCredentials.fromStream(serviceAccount))
            .setDatabaseUrl(&quot;https://acces-a-dades-6e5a6.firebaseio.com&quot;).build()

        FirebaseApp.initializeApp(options)

        // Exemple de listener de lectura única addListenerForSingleValue()
        // Per a posar el títol. Sobre nomXat
        val nomXat = FirebaseDatabase.getInstance().getReference(&quot;nomXat&quot;)

        nomXat.addListenerForSingleValueEvent(object : ValueEventListener {
            override
            fun onDataChange(dataSnapshot: DataSnapshot) {
                setTitle(dataSnapshot.getValue().toString())
            }

            override
            fun onCancelled(error: DatabaseError) {
            }
        })

        // Exemple de listener de lectura contínua addValueEventListener()
        // Per a posar l'últim missatge registrat. Sobre a1
        val ultim = FirebaseDatabase.getInstance().getReference(&quot;a1&quot;)

        ultim.addValueEventListener(object : ValueEventListener {
            override
            fun onDataChange(dataSnapshot: DataSnapshot) {
                ultimMissatge.setText(dataSnapshot.getValue().toString())
            }

            override
            fun onCancelled(error: DatabaseError ) {
            }
        })

        // Exemple de listener d'una llista addChildEventListener()
        // Per a posar tota la llista de missatges. Sobre xat
        val xat = FirebaseDatabase.getInstance().getReference(&quot;xat&quot;)

        xat.addChildEventListener(object : ChildEventListener {
            override
            fun onChildAdded(dataSnapshot: DataSnapshot, s: String?) {
                area.append(dataSnapshot.child(&quot;nom&quot;).getValue().toString() + &quot;: &quot;
                        + dataSnapshot.child(&quot;contingut&quot;).getValue().toString() + &quot;\n&quot;
                )
            }

            override
            fun onChildChanged(dataSnapshot: DataSnapshot, s: String?) {
            }

            override
            fun onChildRemoved(dataSnapshot: DataSnapshot) {
            }

            override
            fun onChildMoved(dataSnapshot: DataSnapshot, s: String?) {
            }

            override
            fun onCancelled(databaseError: DatabaseError) {
            }
        }
        )
    }

    // Exemple de guardar dades sense haver d'esperar per ser una aplicació gràfica
    // Per a guardar dades. Sobre a1, i despŕes sobre la llista xat
    fun enviar() {
        val refA1 = FirebaseDatabase.getInstance().getReference(&quot;a1&quot;)
        refA1.setValue(missatge.getText(), null)
        val xat = FirebaseDatabase.getInstance().getReference(&quot;xat&quot;)
        val m = Missatge(&quot;Usuari1&quot;, missatge.getText())
        xat.push().setValue(m, null)
    }
}

fun main(args: Array&amp;lt;String&amp;gt;) {
    EventQueue.invokeLater {
        CrearXat().isVisible = true
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;code&gt;&lt;/code&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="51"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="52"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="169"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="52"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="53">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="54">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="260_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="53"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Xat compartit&lt;/p&gt;
&lt;p&gt;Per a fer-lo més divertit, podríem connectar-nos tots a la mateixa Base de Dades de Realtime Database. Tenim un usuari per a poder fer proves.&lt;/p&gt;
&lt;p&gt;Si voleu connectar-vos des de la consola, aquestes són les dades&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Compte de Google: &lt;a href=&quot;mailto:ieselcaminas.ad@gmail.com&quot;&gt;ieselcaminas.ad@gmail.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Contrasenya: ad_ieselcaminas&lt;/li&gt;
&lt;li&gt;Aplicació: xat-ad&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En l'aplicació l'únic que haureu de fer és incorporar el fitxer json on està la configuració i la clau privada de la connexió. El fitxer s'anomena &lt;strong&gt;xat-ad-firebase-adminsdk-my2d0-8c69944b34.json&lt;/strong&gt;, i el teniu com un recurs en l'aula virtual. La URL d'accés a aquesta Base de Dades és: &lt;strong&gt;&lt;a href=&quot;https://xat-ad.firebaseio.com/&quot;&gt;https://xat-ad.firebaseio.com/&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Únicament canviant aquestes 2 coses de la connexió, veureu que estem compartint tots el mateix xat.&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="54"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="52"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="260"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="52"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="53"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:3%20-%20Realtime%20Database%20%28RD%29:3.2%20RD%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ:3.2.3%20RD-IntelliJ%3A%20Tot%20l%27exemple"></string>
              <string role="key" value="parent"></string>
              <reference key="24"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="57">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="3.3 RD: Utilització des d'Android"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="55">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="56">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="85"></int>
                <string role="key" value="_idevice"></string>
                <reference key="55"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;En el mòdul d'Accés a Dades ens estem plantejant sempre accedir a les dades des de Java i/o Kotlin des d'un entorn de programació com IntelliJ per a fer aplicacions d'escriptori. Tanmateix, és en Android on moltes vegades tindrà més aplicació, com és el cas d'accés a Firebase. Per això ho inclourem en aquest tema, en compte de deixar-lo per a un annex.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Podrem comprovar com Android Studio ens fa més còmoda la connexió amb Firebase, ja que té un assistent que ens facilita molt le coses.&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list></list>
                  <string role="key" value="idevice"></string>
                  <reference key="56"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="0"></int>
                <string role="key" value="parentNode"></string>
                <reference key="57"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="175"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="57"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="43"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20FIREBASE:3%20-%20Realtime%20Database%20%28RD%29:3.3%20RD%3A%20Utilitzaci%C3%B3%20des%20d%27Android"></string>
           <string role="key" value="parent"></string>
           <reference key="15"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="60">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="3.3.1 RD-Android: Connexió des d'Android"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="58">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="59">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="58"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;L'accés és extraordinàriament fàcil gràcies als assistents que ens proporciona el propi Android Studio.&lt;/p&gt;
&lt;p&gt;Per a poder provar-lo ens crearem un projecte d'Android anomenat per exemple &lt;strong&gt;Tema7_FirebaseRD&lt;/strong&gt;. Utilitzarem Kotlin, com sempre.&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Al final de tot teniu un vídeo que repassa tots els passos per a poder connectar des de la nostra aplicació d'Android. L'exemple serà molt senzill, pràcticament ambA continuació els repassem i expliquem un a un. Són els que ens marca l'assistent, que haurem d'invocar sobre el nostre projecte ja creat, i que es crida des de  &lt;strong&gt;Tools --&amp;gt; Firebase --&amp;gt; Realtime Database&lt;/strong&gt; :&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Connectar l'aplicació a Firebase&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_3_3_1_1.png&quot; alt=&quot;&quot; width=&quot;1366&quot; height=&quot;720&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;b&gt;&lt;u&gt;NOTA IMPORTANT&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Podria donar-se el cas, depenent de la versió d'Android Studio (i altres coses, com que el projecte tinga errors i/o avisos) que done un error en apretar el botó de Connect to Firebase. I és que sembla que és molt delicat aquest assistent, i si hi ha qualsevol warning o error no deixa continuar:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_3_3_1_1_5.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;828&quot; height=&quot;161&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Per a solucionar-lo, a banda de revisar si tenim algun error o avís, senzillament afegim al final del fitxer &lt;strong&gt;gradle.properties:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;android.suppressUnsupportedCompileSdk=32&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En apretar el botó de&lt;strong&gt; Connect to Firebase&lt;/strong&gt;, si no estàvem connectats amb el compte de Google al Firebase se'ns obrirà finestra d'un navegador per a connectar. Podria donar-se el cas que ens diguera que Android Studio vol accedir a les dades de la Base de Dades. Òbviament ho haurem de permetre:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_3_1_2.png&quot; alt=&quot;&quot; width=&quot;402&quot; height=&quot;725&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Una vegada autenticats en Firebase, des de l'entorn d'Android Studio ens ofereix la possibilitat de crear una aplicació nova (una Base de Dades nova) o utilitzar alguna de les que ja tenim. Utilitzarem la que ens ha servit de prova fins el moment:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_3_1_3.png&quot; alt=&quot;&quot; width=&quot;679&quot; height=&quot;453&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Quan haja connectat substituirà el botó &lt;strong&gt;Connect to Firebase&lt;/strong&gt;, per una etiqueta que dirà &lt;span style=&quot;color: #008000;&quot;&gt;&lt;strong&gt;connected&lt;/strong&gt;&lt;/span&gt;, en verd.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Afegir la Base de Dades a la nostra aplicació&lt;/p&gt;
&lt;p&gt;En aquest segon pas, quan apretem el botó &lt;strong&gt;Add the Realtime Database in your app&lt;/strong&gt;, ens dirà els canvis que farà per a incorporar les coses necessàries per a poder connectar.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_3_3_1_2.png&quot; alt=&quot;&quot; width=&quot;673&quot; height=&quot;425&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Com veieu es tracta d'incorporar les llibreries necessàries de Firebase. En el vídeo del final es mostren imatges amb les dades incorporades.&lt;/p&gt;
&lt;p&gt;Igual que abans, substituirà el botó &lt;strong&gt;Add the Realtime Database in your app&lt;/strong&gt;, per una etiqueta que dirà &lt;span style=&quot;color: #008000;&quot;&gt;&lt;strong&gt;Dependencies set up correctly&lt;/strong&gt;&lt;/span&gt;, en verd. És una bona guia per saber en quin punt estem.&lt;span style=&quot;color: #067d17;&quot;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Permetre l'accés als usuaris, si es precís canviant les regles d'accés a la Base de Dades&lt;/p&gt;
&lt;p&gt;En versions anteriors de Firebase, per defecte les Bases de Dades (aplicacions) de Firebase estaven configurades per a que es connecten únicament usuaris autenticats. Això serà molt convenient en el futur, quan des del mòdul PMDM proveu l'autenticació d'usuaris. Però en l'última versió ens pregunta quan fem el primer accés si volem que es connecten usuaris autenticats, o si permetem que es connecte tot el món.&lt;/p&gt;
&lt;p&gt;Sempre ho podrem modificar, i això es fa des de la Consola de Firebase de la Base de Dades, en la pestanya &lt;strong&gt;Rules&lt;/strong&gt;. En el mòdul d'Accés a Dades permetrem l'accés a tot el món posant les dues propietats a true. Sabreu que ho heu posat de forma correcta quan els dos &lt;em&gt;trues&lt;/em&gt; us apareguen en roig&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_3_3_1_3.png&quot; alt=&quot;&quot; width=&quot;1020&quot; height=&quot;465&quot; /&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Copiar les sentències per a escriure i per a llegir&lt;/p&gt;
&lt;p&gt;Ens diu un exemple de les sentències a copiar per a poder guardar una informació a la Base de Dades i també per a detectar un canvi en la Base de Dades i poder obtenir el nou valor. Encara que tinguem un projecte en Kotlin, les sentències d'exemple seran de Java, però que en copiar-les les traduiria a Kotlin.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_3_1_6.png&quot; alt=&quot;&quot; width=&quot;1270&quot; height=&quot;820&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Marcarà alguns errors però que se solucionen important les classes (&lt;strong&gt;Alt-Enter&lt;/strong&gt;), i algun altre fàcil de corregir&lt;/p&gt;
&lt;p&gt;També marcarà un altre error de que no existeix la variable &lt;strong&gt;TAG&lt;/strong&gt;. La creem al principi i ja està. El programa quedarà així&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.util.Log
import com.google.firebase.database.DataSnapshot
import com.google.firebase.database.DatabaseError
import com.google.firebase.database.ValueEventListener
import com.google.firebase.database.ktx.database
import com.google.firebase.ktx.Firebase

class MainActivity : AppCompatActivity() {
    private val TAG = &quot;MyActivity&quot;
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        // Write a message to the database
        val database = Firebase.database
        val myRef = database.getReference(&quot;message&quot;)

        myRef.setValue(&quot;Hello, World!&quot;)

        // Read from the database
        myRef.addValueEventListener(object: ValueEventListener {

            override fun onDataChange(snapshot: DataSnapshot) {
                // This method is called once with the initial value and again
                // whenever data at this location is updated.
                val value = snapshot.getValue()
                Log.d(TAG, &quot;Value is: &quot; + value)
            }

            override fun onCancelled(error: DatabaseError) {
                Log.w(TAG, &quot;Failed to read value.&quot;, error.toException())
            }

        })
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Quan executem el programa, crearà la clau &lt;strong&gt;message&lt;/strong&gt; amb el valor &lt;strong&gt;Hello, World!&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_3_3_1_1.1.png&quot; alt=&quot;&quot; width=&quot;1920&quot; height=&quot;1080&quot; /&gt;&lt;/p&gt;
&lt;p&gt;I si modifiquem aquesta clau des de la consola, quasi immediatament veurem en els log de Debug com hem arreplegat el valor, gràcies al Listener:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_3_3_1_2.1.png&quot; alt=&quot;&quot; width=&quot;1920&quot; height=&quot;1080&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9261"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="155_85.905"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="61">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="58"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_2_2_3_1_3.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_2_2_3_1_3.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="ffe95e5633fe844b2b39114d9ed77a34"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="59"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9276"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="155_85.906"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="62">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="58"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_2_2_3_1_2.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_2_2_3_1_2.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="41ba16c9f3d5edc61a47e4f385d1b94d"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="59"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9301"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="155_85.907"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="63">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="58"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_2_2_3_1_6.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_2_2_3_1_6.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="486f9fd63aa60df4c1a5232b303eb515"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="59"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9302"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="155_85.908"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="64">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="58"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_3_3_1_2.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_3_3_1_2.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="ab748b73d36235e3f0cdac3b55b68714"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="59"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9319"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="155_85.909"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="65">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="58"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_3_3_1_2.1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_3_3_1_2.1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="1dd692c51a477137a30c276f255c4b23"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="59"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9325"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="155_85.910"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="66">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="58"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_3_3_1_1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_3_3_1_1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="2aa8056910fa4d021560cc1c0dc11aa2"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="59"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9329"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="155_85.911"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="67">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="58"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_3_3_1_3.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_3_3_1_3.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="8483321eb9e602cb4ae3df3c6d256622"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="59"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9336"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="155_85.912"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="68">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="58"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_3_3_1_1.1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_3_3_1_1.1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="09e289b6c53619599e7d4ab8996ae30c"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="59"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9338"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="155_85.913"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="69">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="58"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_3_3_1_1_5.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpkjKE1A.eXe/previews/allyourbase/T7_3_3_1_1_5.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="9cc9b7271b0c0d9f59c7db5a70272c85"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="59"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="59"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="914"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="60"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="155"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="60"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="61"></reference>
                  <reference key="62"></reference>
                  <reference key="63"></reference>
                  <reference key="64"></reference>
                  <reference key="65"></reference>
                  <reference key="66"></reference>
                  <reference key="67"></reference>
                  <reference key="68"></reference>
                  <reference key="69"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="70">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="71">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="185_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="70"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;En el següent vídeo es veu tot el procés des del principi&lt;strong&gt;&lt;/strong&gt;:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;iframe width=&quot;1001&quot; height=&quot;601&quot; src=&quot;https://slides.com/alvarinstitut/t7_firebaserd_android/embed?style=light&quot; scrolling=&quot;no&quot; webkitallowfullscreen=&quot;webkitallowfullscreen&quot; mozallowfullscreen=&quot;mozallowfullscreen&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="71"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="45"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="60"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="179"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="60"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="40"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:3%20-%20Realtime%20Database%20%28RD%29:3.3%20RD%3A%20Utilitzaci%C3%B3%20des%20d%27Android:3.3.1%20RD-Android%3A%20Connexi%C3%B3%20des%20d%27Android"></string>
              <string role="key" value="parent"></string>
              <reference key="57"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="74">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="3.3.2 RD-Android: Accés a les dades"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="72">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="73">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="72"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p&gt;Una vegada vist un exemple, en el qual hem guardat dades i també les hem recuperades i hem vist els canvis en temps real, anem a veure més exemples de com accedir a les dades.&lt;/p&gt;
&lt;p&gt;En l'exemple anterior hem accedit a una parella clau-valor situada en l'arrel de la Base de Dades.&lt;/p&gt;
&lt;p&gt;Anem a veure alguns exemples de com accedir dins de l'estructura JSON guardada en Firebase. Com el que voldrem serà mostrar més informació, incorporarem dos &lt;strong&gt;TextView &lt;/strong&gt;per a mostrar més coses còmodament, i un &lt;strong&gt;EditText&lt;/strong&gt; i un &lt;strong&gt;Button&lt;/strong&gt; per a poder introduir informacions.&lt;/p&gt;
&lt;p&gt;Aquesta serà ara l'estructura del &lt;strong&gt;activity_main.xml&lt;/strong&gt;:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/ultim&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;382dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;39dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_alignParentTop&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_alignParentRight&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/area&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintBottom_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/ultim&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintVertical_bias&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0.261&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;EditText&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;317dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;47dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_alignParentTop&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_centerHorizontal&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintBottom_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintEnd_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/boto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintHorizontal_bias&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0.0&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/ultim&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintVertical_bias&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;Button&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/boto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_below&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_centerHorizontal&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;Enviar&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintBottom_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintHorizontal_bias&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0.993&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;Així les parts que tindrem, i que ens servirà per a mostrar cadascuna de les coses que volem, de forma similar a la de IntelliJ, seran:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;El títol de l'aplicació, que el modificarem amb un &lt;strong&gt;addListenerForSingleValueEvent()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;El TextView de dalt, anomenat &lt;strong&gt;ultim&lt;/strong&gt;, que el modifiquem per mig d'un &lt;strong&gt;addValueEventListener()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;El TextView central que ocupa quasi tota la pantalla, anomenat &lt;strong&gt;area&lt;/strong&gt;, que el modificarem amb la modificació de la llista &lt;strong&gt;addChildEventListener()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;El EditText de baix, anomenat &lt;strong&gt;text&lt;/strong&gt;, i el botó, que servirà per a afegir un nou element del xat&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Aquest és l'esquelet del progama:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle&lt;br /&gt;
import kotlinx.android.synthetic.main.activity_main.*&lt;br /&gt;
import com.google.firebase.database.FirebaseDatabase
import com.google.firebase.database.DatabaseError
import com.google.firebase.database.DataSnapshot
import com.google.firebase.database.ValueEventListener

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        boto.text = &quot;Enviar&quot;
        
        // Referències a la Base de Dades i a les variables a1, nomXat i xat

        // Exemple de guardar dades. Primer sobre a1, i despŕes sobre la llista xat
	
        // Exemple de listener de lectura única addListenerForSingleValueEvent()
        // Per a posar el títol. Sobre nomXat
	
        // Exemple de listener de lectura contínua addValueEventListener()
        // Per a posar l'últim missatge registrat. Sobre a1
	
        // Exemple de listener d'una llista addChildEventListener()
        // Per a posar tota la llista de missatges. Sobre xat

    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Recordeu que per a que ens reconega tots els elements del layout, al principi del &lt;strong&gt;build.gradle&lt;/strong&gt; de l'aplicació heu d'afegir la següent línia :&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;id &lt;span style=&quot;color: #067d17;&quot;&gt;'kotlin-android-extensions'&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="73"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="74"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="161"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="74"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="75">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="76">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="75"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Referència a la Base de Dades i a les dades concretes a les quals volem accedir&lt;/p&gt;
&lt;p&gt;Podem fer referència de forma individual a cadascuna de les &quot;variables&quot; guardades, és a dir a cadascuna de les parelles clau-valor:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Referències a la Base de Dades i a les variables a1, nomXat i xat
        val database = FirebaseDatabase.getInstance()
        val refA1 = database.getReference(&quot;a1&quot;)
        val nomXat = database.getReference(&quot;nomXat&quot;)
        val xat = database.getReference(&quot;xat&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="76"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="74"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="162"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="74"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="77">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="78">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="77"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Guardar dades&lt;/p&gt;
&lt;p&gt;L'operació de guardar és més senzilla que la de recuperar. Disposem del mètode &lt;strong&gt;setValue()&lt;/strong&gt; de la referència a la dada a la que volem accedir. Si la parella clau-valor on es va a guardar ja existia, doncs modificarà el valor. I si no existia, la crearà.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;En el nostre exemple guardarem en el moment d'apretar el botó. Inicialment ho farem sobre &lt;strong&gt;a1&lt;/strong&gt;, encara que quan vegem les llistes ho canviarem&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Exemple de guardar dades. Primes sobre a1, i despŕes sobre la llista xat
        boto.setOnClickListener {
            refA1.setValue(text.text.toString())
            text.setText(&quot;&quot;)
        }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="78"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="74"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="163"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="74"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="79">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="80">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="79"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Recuperar dades&lt;/p&gt;
&lt;p&gt;Recordem que podem muntar dos tipus de Listeners, però el seu funcionament serà similar&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Els que escolten només una vegada al principi: &lt;strong&gt;addListenerForSingleValueEvent()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Els que es queden escoltant tota l'estona: &lt;strong&gt;addValueEventListener()&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En ambdós casos obtenim com a paràmetre un &lt;strong&gt;Data&lt;/strong&gt;&lt;strong&gt;Snapshot&lt;/strong&gt; (còpia) de la dada registrada. I d'aquest tipus, &lt;strong&gt;DataSnapshot&lt;/strong&gt;, sí que tenim el mètode &lt;strong&gt;getValue()&lt;/strong&gt; per a accedir a la dada. Ambdós tipus de Listeners tenen un tractament absolutament similar, únicament amb la diferència abans esmentada que el primer està sempre escoltant, i el segon només escolta una vegada al principi.&lt;/p&gt;
&lt;p&gt;El mètode &lt;strong&gt;getValue()&lt;/strong&gt; admet un paràmetre que serà la classe del tipus que volem obtenir. Podem posar les següents:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;String.class&lt;/strong&gt;, i aleshores el que obtenim s'interpretarà com un String&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Double.class&lt;/strong&gt;, i s'interpretarà com un número real de doble precisió&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Boolean.class&lt;/strong&gt;, i s'interptretarà com un valor booleà.&lt;/li&gt;
&lt;li&gt;També es poden posar classes per a obtenir tot un objecte (Map) i per a una llista (List). Fins i tot es podria arribar a posar una classe definida per nosaltres. Però amb els anteriors nosaltres en tindrem prou&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mirem la manera d'utilitzar una i altra. Ho apliquem a dues referències diferents, per a que pugueu comprovar que una sempre té efecte, mentre que l'altra només té efecte la primera vegada, i si després es modifiquen les dades, l'aplicació no s'enterarà.&lt;/p&gt;
&lt;h2&gt;addListenerForSingleValueEvent()&lt;/h2&gt;
&lt;p&gt;En aquest primer exemple anem a agafar una única vegada la dada que ens interessa, i per tant  utilitzarem &lt;strong&gt;addListenerForSingleValueEvent()&lt;/strong&gt;. Ens servirà per a posar el títol de l'aplicació, i ho farem consultant la clau &lt;strong&gt;nomXat&lt;/strong&gt;, que la tindrem creada des de la pregunta 3.2.2 de la part de &lt;strong&gt;IntelliJ&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Exemple de listener de lectura única addListenerForSingleValue()
        // Per a posar el títol. Sobre nomXat
        nomXat.addListenerForSingleValueEvent(object : ValueEventListener {
            override fun onDataChange(dataSnapshot: DataSnapshot) {
                val value = dataSnapshot.getValue(String::class.java)
                setTitle(value)
            }

            override fun onCancelled(error: DatabaseError) {
            }
        })
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;addValueEventListener()&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;És la que sempre està escoltant. Per tant qualsevol modificació en la Base de Dades es veurà reflectit, és a dir, canviarà el contingut del&lt;strong&gt; TextView ultim&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;		// Exemple de listener de lectura contínua addValueEventListener()
		// Per a posar l'últim missatge registrat. Sobre a1
        refA1.addValueEventListener(object : ValueEventListener {
            override fun onDataChange(dataSnapshot: DataSnapshot) {
                val value = dataSnapshot.getValue(String::class.java)
                ultim.setText(value)
            }

            override fun onCancelled(error: DatabaseError) {
            }
        })
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="80"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="74"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="164"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="74"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="81">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="82">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="81"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Tractament de llistes&lt;/p&gt;
&lt;p&gt;Ja vam veure en la pregunta 3.2.2 de la part de &lt;strong&gt;IntelliJ&lt;/strong&gt; que la manera més pràtica d'inserir elements en una llista, per a no haver de dur un manteniment dels índex, era amb el mètode &lt;strong&gt;push()&lt;/strong&gt;, i que per a no tenir efectes no desitjats era millor posar tot l'element d'una vegada. Així, si hem de posar el nom de l'usuari que farà l'entrada del xat i el contingut del missatge, millor crear un objecte que ho continga tot, i col·locar en la llista aquest objecte.&lt;/p&gt;
&lt;p&gt;Crearem per tant una classe anomenada &lt;strong&gt;Missatge&lt;/strong&gt;, que inclourà les propietats &lt;strong&gt;nom&lt;/strong&gt; i &lt;strong&gt;contingut&lt;/strong&gt;. Crearem un objecte &lt;strong&gt;Missatge &lt;/strong&gt;amb uns nous valors, i veurem que el podem guardar perfectament.&lt;/p&gt;
&lt;p&gt;Primer definim la classe. El millor és que el guardem com una classe nova, és a dir com a &lt;strong&gt;Missatge.kt&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class Missatge(val nom: String, val contingut: String)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Per a &lt;strong&gt;guardar&lt;/strong&gt;, col·locaríem aquestes sentències entre les accions del OnClik del botó, substituint les sentències que modificaven &lt;strong&gt;a1&lt;/strong&gt;, perquè ara afegirem a la llista &lt;strong&gt;xat&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Exemple de guardar dades. Primer sobre a1, i despŕes sobre la llista xat
        boto.setOnClickListener {
            refA1.setValue(text.text.toString())
            xat.push().setValue(Missatge(&quot;Usuari1&quot;,text.text.toString()))
            text.setText(&quot;&quot;)
        }	
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Ara només ens falta el tractament de &lt;strong&gt;lectura&lt;/strong&gt; de les llistes.&lt;/p&gt;
&lt;p&gt;Utilitzarem el Listener &lt;strong&gt;ChildEventListener&lt;/strong&gt;, i hem d'utilitzar el mètode &lt;strong&gt;addChildEventListener()&lt;/strong&gt; sobre la llista. Voldrà la implementació dels mètodes: &lt;strong&gt;onChildAdded()&lt;/strong&gt;, &lt;strong&gt;onChildChanged()&lt;/strong&gt;, &lt;strong&gt;onChildRemoved()&lt;/strong&gt; i &lt;strong&gt;onChildMoved()&lt;/strong&gt;, però nosaltres només utilitzarem &lt;strong&gt;onChildAdded()&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Al &lt;strong&gt;dataSnapshot&lt;/strong&gt; arriba únicament l'element introduït, modificat o esborrat, no tota la llista. Per tant és molt còmode. També arriba una referència a l'element anterior com a segon paràmetre, per si hem de fer algun tractament, cosa que en aquest exemple no ens fa falta:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Exemple de listener d'una llista addChildEventListener()
        // Per a posar tota la llista de missatges. Sobre xat
        xat.addChildEventListener(object : ChildEventListener {
            override fun onChildAdded(dataSnapshot: DataSnapshot, s: String?) {
                area.append(
                    dataSnapshot.child(&quot;nom&quot;).getValue(String::class.java) + &quot;: &quot; + dataSnapshot.child(&quot;contingut&quot;).getValue(String::class.java) + &quot;\n&quot;                    );
            }
            override fun onChildChanged(dataSnapshot: DataSnapshot, s: String?) {
            }
            override fun onChildRemoved(dataSnapshot: DataSnapshot) {
            }
            override fun onChildMoved(dataSnapshot: DataSnapshot, s: String?) {
            }
            override fun onCancelled(databaseError: DatabaseError) {
            }
        })
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Aquest seria el resultat:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_2_2_3_2_5.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;403&quot; height=&quot;720&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9266"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="165_85.298"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="83">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="81"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_2_2_3_2_5.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_2_2_3_2_5.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="c04f479c174630e409fb181e5a8915f5"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="82"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="82"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="299"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="74"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="165"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="74"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="83"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="41"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:3%20-%20Realtime%20Database%20%28RD%29:3.3%20RD%3A%20Utilitzaci%C3%B3%20des%20d%27Android:3.3.2%20RD-Android%3A%20Acc%C3%A9s%20a%20les%20dades"></string>
              <string role="key" value="parent"></string>
              <reference key="57"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="86">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="3.3.3 RD-Android: Tot l'exemple"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="84">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="85">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="207_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="84"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Tot l'exemple&lt;/p&gt;
&lt;p&gt;Anem a posar tot l'exemple que arreplega tot l'anterior. &lt;/p&gt;
&lt;p&gt;La classe &lt;strong&gt;Missatge&lt;/strong&gt; :&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre class=&quot;  language-java&quot;&gt;&lt;code class=&quot;  language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Missatge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;val nom&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val contingut&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I el programa seria aquest:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import com.google.firebase.database.*
import kotlinx.android.synthetic.main.activity_main.*

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        boto.text = &quot;Enviar&quot;

        // Referències a la Base de Dades i a les variables a1, nomXat i xat
        val database = FirebaseDatabase.getInstance()
        val refA1 = database.getReference(&quot;a1&quot;)
        val nomXat = database.getReference(&quot;nomXat&quot;)
        val xat = database.getReference(&quot;xat&quot;)

        // Exemple de guardar dades. Primer sobre a1, i despŕes sobre la llista xat
        boto.setOnClickListener {
            refA1.setValue(text.text.toString())
            xat.push().setValue(Missatge(&quot;Usuari1&quot;, text.text.toString()))
            text.setText(&quot;&quot;)
        }
        // Exemple de listener de lectura única addListenerForSingleValue()
        // Per a posar el títol. Sobre nomXat
        nomXat.addListenerForSingleValueEvent(object : ValueEventListener {
            override fun onDataChange(dataSnapshot: DataSnapshot) {
                val value = dataSnapshot.getValue(String::class.java)
                setTitle(value)
            }

            override fun onCancelled(error: DatabaseError) {
            }
        })

        // Exemple de listener de lectura contínua addValueEventListener()
        // Per a posar l'últim missatge registrat. Sobre a1
        refA1.addValueEventListener(object : ValueEventListener {
            override fun onDataChange(dataSnapshot: DataSnapshot) {
                val value = dataSnapshot.getValue(String::class.java)
                ultim.setText(value)
            }

            override fun onCancelled(error: DatabaseError) {
            }
        })

        // Exemple de listener d'una llista addChildEventListener()
        // Per a posar tota la llista de missatges. Sobre xat
        xat.addChildEventListener(object : ChildEventListener {
            override fun onChildAdded(dataSnapshot: DataSnapshot, s: String?) {
                area.append(
                    dataSnapshot.child(&quot;nom&quot;).getValue(String::class.java) + &quot;: &quot; + dataSnapshot.child(&quot;contingut&quot;).getValue(String::class.java) + &quot;\n&quot;                    );
            }
            override fun onChildChanged(dataSnapshot: DataSnapshot, s: String?) {
            }
            override fun onChildRemoved(dataSnapshot: DataSnapshot) {
            }
            override fun onChildMoved(dataSnapshot: DataSnapshot, s: String?) {
            }
            override fun onCancelled(databaseError: DatabaseError) {
            }
        })

    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="85"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="86"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="200"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="86"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="87">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="88">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="208_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="87"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;I el resultat seria aquest:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_3_3_1.png&quot; alt=&quot;&quot; width=&quot;403&quot; height=&quot;720&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9268"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="201_208_2.74"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="89">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="87"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_3_3_1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_3_3_1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="8401631852e99b3dae9bc2e4ea3011fb"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="88"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="88"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="75"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="86"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="201"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="86"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="89"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="58"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:3%20-%20Realtime%20Database%20%28RD%29:3.3%20RD%3A%20Utilitzaci%C3%B3%20des%20d%27Android:3.3.3%20RD-Android%3A%20Tot%20l%27exemple"></string>
              <string role="key" value="parent"></string>
              <reference key="57"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="92">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="4 - Cloud Firestore (CF)"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="90">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Free Text"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="childs"></string>
           <list></list>
           <string role="key" value="content"></string>
           <instance class="exe.engine.field.TextAreaField" reference="91">
            <dictionary>
             <string role="key" value="_id"></string>
             <int value="85"></int>
             <string role="key" value="_idevice"></string>
             <reference key="90"></reference>
             <string role="key" value="_instruc"></string>
             <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
             <string role="key" value="_name"></string>
             <unicode value="Free Text"></unicode>
             <string role="key" value="anchor_names"></string>
             <list></list>
             <string role="key" value="anchors_linked_from_fields"></string>
             <dictionary></dictionary>
             <string role="key" value="buttonCaption"></string>
             <string value=""></string>
             <string role="key" value="content_w_resourcePaths"></string>
             <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;Cloud Firestore&lt;/strong&gt; és l'evolució de Realtime Database, on podrem guardar més d'un document. Els documents aniran organitzats en col·leccions. Ja podem parlar d'una vertadera Base de Dades documental.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Google recomana la utilització de Cloud Firestore en compte de Realtime Database. Potser fins i tot en un futur deixen de proveir aquesta última. Però no seria cap problema perquè tot el que podem guardar en Realtime Database ho podrem guardar en Cloud Firestore, sense que se'ns complique l'organització de les dades. I l'accés és igual de fàcil.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;De vegades Firebase l'anomena &lt;strong&gt;Firestore Database&lt;/strong&gt; o &lt;strong&gt;Cloud Firestore&lt;/strong&gt;&lt;/p&gt;"></unicode>
             <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
             <int value="4"></int>
             <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
             <int value="2"></int>
             <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
             <int value="3"></int>
             <string role="key" value="htmlTag"></string>
             <string value="div"></string>
             <string role="key" value="images"></string>
             <instance class="exe.engine.galleryidevice.GalleryImages">
              <dictionary>
               <string role="key" value=".listitems"></string>
               <list></list>
               <string role="key" value="idevice"></string>
               <reference key="91"></reference>
              </dictionary>
             </instance>
             <string role="key" value="intlinks_to_anchors"></string>
             <dictionary></dictionary>
             <string role="key" value="nextImageId"></string>
             <int value="0"></int>
             <string role="key" value="parentNode"></string>
             <reference key="92"></reference>
            </dictionary>
           </instance>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
           <int value="7"></int>
           <string role="key" value="icon"></string>
           <string value=""></string>
           <string role="key" value="id"></string>
           <unicode value="206"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parent"></string>
           <none></none>
           <string role="key" value="parentNode"></string>
           <reference key="92"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="type"></string>
           <none></none>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="55"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20FIREBASE:4%20-%20Cloud%20Firestore%20%28CF%29"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="95">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="4.1 CF: Utilització des de l'entorn de Firebase"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="93">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="94">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="85"></int>
                <string role="key" value="_idevice"></string>
                <reference key="93"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p style=&quot;text-align: justify;&quot;&gt;Amb el &lt;strong&gt;Cloud Firestore&lt;/strong&gt; ja podrem guardar més d'un document, i aniran agrupats en &lt;strong&gt;col·leccions&lt;/strong&gt; de documents. En el següent vídeo anem a insistir en aquest aspecte dels documents, ja que és el més novedós.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Hem de fer la consideració de que encara que treballem sobre la mateixa Base de Dades de Firebase, &lt;strong&gt;des de Cloud Firestore no podrem accedir a les dades de Realtime Database, i a l'inrevés&lt;/strong&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;iframe width=&quot;1200&quot; height=&quot;800&quot; src=&quot;https://slides.com/alvarinstitut/t7_cloud_firestore/embed?style=light&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;webkitallowfullscreen&quot; mozallowfullscreen=&quot;mozallowfullscreen&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;p&gt;Aquesta és l'estructura de dades que ens hem guardat en l'exemple:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_2_3_1_1.png&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;1238&quot; height=&quot;1026&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Observeu també que dins d'un document d'una col·lecció es pot començar una col·lecció i dins d'ella crear documents, etc. De manera que ho podem fer recursiu, i s'enriqueixen molt les possibilitats de disseny de la nostra Base de Dades. Anem a aprofundir en aquesta possibilitat de les subcol·leccions per a redissenyar les dades del nostre exemple del xat.&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="9289"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="207_85.151"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="96">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="93"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T7_2_3_1_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpk13NfD/T7_2_3_1_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="9f7bdb3c1aafb6159180d36abe2045a6"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="94"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="94"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="152"></int>
                <string role="key" value="parentNode"></string>
                <reference key="95"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="207"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="95"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="96"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="97">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_editionFolder"></string>
              <string value="text/edition/"></string>
              <string role="key" value="_editionResources"></string>
              <list>
               <string value="text.js"></string>
              </list>
              <string role="key" value="_exportFolder"></string>
              <none></none>
              <string role="key" value="_exportResources"></string>
              <list></list>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="98">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="208_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="97"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value=""></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="98"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="95"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="194"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="95"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="99">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_editionFolder"></string>
              <string value="text/edition/"></string>
              <string role="key" value="_editionResources"></string>
              <list>
               <string value="text.js"></string>
              </list>
              <string role="key" value="_exportFolder"></string>
              <none></none>
              <string role="key" value="_exportResources"></string>
              <list></list>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="100">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="209_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="99"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Subcol·leccions&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Com es veia en l'última imatge, es poden crear subcol·leccions en un document, i aquestes col·leccions contenir a la seua vegada tots els documents que calga.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Aleshores ens redissenyarem el xat construït en la part de &lt;strong&gt;Realtime Database&lt;/strong&gt;. En aquell moment vam posar tots els missatges del xat en un llista. Ens anava molt bé, perquè després posàvem un listener sobre la clau del xat que detectava tots els elements nous: el &lt;strong&gt;addChildEventListener()&lt;/strong&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Tanmateix en el &lt;strong&gt;Cloud Firestore&lt;/strong&gt; no tindrem el listener anterior. El que sí que disposarem és d'un listener que detecte els nous documents sobre una col·lecció. Aleshores anem a muntar cada missatge del xat com un nou document, que de moment només tindrà nom d'usuari i contingut de missatge.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;iframe width=&quot;1000&quot; height=&quot;673&quot; src=&quot;https://slides.com/alvarinstitut/t7_cloud_firestore_subcoleccions/embed?style=light&quot; scrolling=&quot;no&quot; webkitallowfullscreen=&quot;webkitallowfullscreen&quot; mozallowfullscreen=&quot;mozallowfullscreen&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per tant, després de l'anterior tenim una col·lecció anomenada &lt;strong&gt;Xats&lt;/strong&gt;, dins de la qual hi ha un document anomenat &lt;strong&gt;XatProva&lt;/strong&gt;, dins del qual hi ha un camp anomenat &lt;strong&gt;nomXat &lt;/strong&gt;i una col·lecció anomenada &lt;strong&gt;missatges&lt;/strong&gt;, dins del qual hi ha dos documents, un d'ells amb nom &lt;strong&gt;0&lt;/strong&gt; i un altre amb nom generat per Cloud Firestore&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_1_2.png&quot; alt=&quot;&quot; width=&quot;1000&quot; height=&quot;720&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="9305"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="195_209_2.84"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="101">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="99"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_4_1_2.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpk13NfD/T7_4_1_2.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="4075c5061a186d1fbc1b679d770a73bb"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="100"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                   </list>
                   <string role="key" value="idevice"></string>
                   <reference key="100"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="85"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="95"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="195"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="95"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="101"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="56"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20FIREBASE:4%20-%20Cloud%20Firestore%20%28CF%29:4.1%20CF%3A%20Utilitzaci%C3%B3%20des%20de%20l%27entorn%20de%20Firebase"></string>
           <string role="key" value="parent"></string>
           <reference key="92"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="104">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="4.2 CF: Utilització des de IntelliJ"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="102">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Free Text"></unicode>
              <string role="key" value="_author"></string>
              <unicode value="University of Auckland"></unicode>
              <string role="key" value="_purpose"></string>
              <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="childs"></string>
              <list></list>
              <string role="key" value="content"></string>
              <instance class="exe.engine.field.TextAreaField" reference="103">
               <dictionary>
                <string role="key" value="_id"></string>
                <int value="85"></int>
                <string role="key" value="_idevice"></string>
                <reference key="102"></reference>
                <string role="key" value="_instruc"></string>
                <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                <string role="key" value="_name"></string>
                <unicode value="Free Text"></unicode>
                <string role="key" value="anchor_names"></string>
                <list></list>
                <string role="key" value="anchors_linked_from_fields"></string>
                <dictionary></dictionary>
                <string role="key" value="buttonCaption"></string>
                <string value=""></string>
                <string role="key" value="content_w_resourcePaths"></string>
                <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Exemple&lt;/p&gt;
&lt;p&gt;Practicarem tot el que ve a continuació sobre un programa gràfic.&lt;/p&gt;
&lt;p&gt;Aquest és el seu esquelet. Guardeu-lo en un fitxer anomenat &lt;strong&gt;Exemple_7_4_1_FirebaseCF_CrearXatCloud&lt;/strong&gt;&lt;strong&gt;.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import java.awt.EventQueue
import javax.swing.JFrame
import javax.swing.JLabel
import javax.swing.JTextArea
import javax.swing.JButton
import javax.swing.JTextField
import javax.swing.JPanel
import java.awt.BorderLayout
import java.awt.FlowLayout
import java.awt.GridLayout
import java.awt.Color
import javax.swing.JScrollPane
import java.io.FileInputStream

import com.google.api.core.ApiFuture
import com.google.auth.oauth2.GoogleCredentials
import com.google.cloud.firestore.DocumentChange
import com.google.cloud.firestore.DocumentReference
import com.google.cloud.firestore.DocumentSnapshot
import com.google.cloud.firestore.EventListener
import com.google.cloud.firestore.Firestore
import com.google.cloud.firestore.FirestoreException
import com.google.firebase.FirebaseApp
import com.google.firebase.FirebaseOptions
import com.google.firebase.cloud.FirestoreClient

class CrearXat : JFrame() {

	val etUsuari = JLabel(&quot;Nom Usuari:&quot;)
	val usuari = JTextField(25)

	val etUltimMissatge = JLabel(&quot;Últim missatge: &quot;)
	val ultimMissatge = JLabel()

	val etiqueta = JLabel(&quot;Missatges:&quot;)
	val area = JTextArea()

	val etIntroduccioMissatge = JLabel(&quot;Introdueix missatge:&quot;)
	val enviar = JButton(&quot;Enviar&quot;)
	val missatge = JTextField(15)

	// en iniciar posem un contenidor per als elements anteriors
	init {
		defaultCloseOperation = JFrame.EXIT_ON_CLOSE
		setBounds(100, 100, 450, 300)
		setLayout(BorderLayout())
		// contenidor per als elements
		//Hi haurà títol. Panell de dalt: últim missatge. Panell de baix: per a introduir missatge. Panell central: tot el xat

		val panell11 = JPanel(FlowLayout())
		panell11.add(etUsuari)
		panell11.add(usuari)
		val panell12 = JPanel(FlowLayout())
		panell12.add(etUltimMissatge)
		panell12.add(ultimMissatge)
		val panell1 = JPanel(GridLayout(2, 1))
		panell1.add(panell11)
		panell1.add(panell12)
		getContentPane().add(panell1, BorderLayout.NORTH)

		val panell2 = JPanel(BorderLayout())
		panell2.add(etiqueta, BorderLayout.NORTH)
		area.setForeground(Color.blue)
		area.setEditable(false)
		val scroll = JScrollPane(area)
		panell2.add(scroll, BorderLayout.CENTER)
		getContentPane().add(panell2, BorderLayout.CENTER)

		val panell3 = JPanel(FlowLayout())
		panell3.add(etIntroduccioMissatge)
		panell3.add(missatge)
		panell3.add(enviar)
		getContentPane().add(panell3, BorderLayout.SOUTH)

		setVisible(true)
		enviar.addActionListener { enviar() }

		val serviceAccount = FileInputStream(&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;)

		val options = FirebaseOptions.builder()
			.setCredentials(GoogleCredentials.fromStream(serviceAccount))
			.build()

		FirebaseApp.initializeApp(options)

		// Exemple de lectura única: senzillament sobre un ApiFuture i sobre ell get()
		// Per a posar el títol. Sobre /Xats/XatProva/nomXat

		// Exemple de listener de lectura contínua addSnapshotListener()
		// Per a posar l'últim missatge registrat. Sobre /Xats/XatProva/ultimUsuari i /Xats/XatProva/ultimMissatge DocumentSnapshot FirestoreException

		// Exemple de listener de lectura contínua addSnapshotListener() sobre una col·lecció
		// Per a posar tota la llista de missatges. Sobre /Xats/XatProva/missatges

	}

	// Exemple de guardar dades en Cloud Firestore
	// Per a guardar dades. Sobre /Xats/XatProva i després sobre /Xats/Xat1
	fun enviar() {
		
	}
}

fun main(args: Array&amp;lt;String&amp;gt;) {
	EventQueue.invokeLater {
		CrearXat().isVisible = true
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I aquest és el seu aspecte:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_2_1.png&quot; alt=&quot;&quot; width=&quot;450&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;"></unicode>
                <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                <int value="4"></int>
                <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                <int value="2"></int>
                <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                <int value="3"></int>
                <string role="key" value="htmlTag"></string>
                <string value="div"></string>
                <string role="key" value="images"></string>
                <instance class="exe.engine.galleryidevice.GalleryImages">
                 <dictionary>
                  <string role="key" value=".listitems"></string>
                  <list>
                   <instance class="exe.engine.galleryidevice.GalleryImage">
                    <dictionary>
                     <string role="key" value="_caption"></string>
                     <instance class="exe.engine.field.TextField">
                      <dictionary>
                       <string role="key" value="_id"></string>
                       <int value="9310"></int>
                       <string role="key" value="_idevice"></string>
                       <none></none>
                       <string role="key" value="_instruc"></string>
                       <string value=""></string>
                       <string role="key" value="_name"></string>
                       <string value=""></string>
                       <string role="key" value="content"></string>
                       <string value=""></string>
                       <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                       <int value="4"></int>
                      </dictionary>
                     </instance>
                     <string role="key" value="_id"></string>
                     <unicode value="208_85.45"></unicode>
                     <string role="key" value="_imageResource"></string>
                     <instance class="exe.engine.resource.Resource" reference="105">
                      <dictionary>
                       <string role="key" value="_idevice"></string>
                       <reference key="102"></reference>
                       <string role="key" value="_package"></string>
                       <reference key="2"></reference>
                       <string role="key" value="_storageName"></string>
                       <string value="T7_4_2_1.png"></string>
                       <string role="key" value="_userName"></string>
                       <string value="/tmp/tmpk13NfD/T7_4_2_1.png"></string>
                       <string role="key" value="checksum"></string>
                       <string value="6fd3f62818eaa9d17f1f46ce206bfabe"></string>
                       <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                       <int value="2"></int>
                       <string role="key" value="warningMsg"></string>
                       <string value=""></string>
                      </dictionary>
                     </instance>
                     <string role="key" value="_parent"></string>
                     <reference key="103"></reference>
                     <string role="key" value="_thumbnailResource"></string>
                     <none></none>
                     <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                     <int value="3"></int>
                     <string role="key" value="makeThumbnail"></string>
                     <bool value="0"></bool>
                    </dictionary>
                   </instance>
                  </list>
                  <string role="key" value="idevice"></string>
                  <reference key="103"></reference>
                 </dictionary>
                </instance>
                <string role="key" value="intlinks_to_anchors"></string>
                <dictionary></dictionary>
                <string role="key" value="nextImageId"></string>
                <int value="46"></int>
                <string role="key" value="parentNode"></string>
                <reference key="104"></reference>
               </dictionary>
              </instance>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
              <int value="7"></int>
              <string role="key" value="icon"></string>
              <string value=""></string>
              <string role="key" value="id"></string>
              <unicode value="208"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parent"></string>
              <none></none>
              <string role="key" value="parentNode"></string>
              <reference key="104"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="type"></string>
              <none></none>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="105"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="57"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20FIREBASE:4%20-%20Cloud%20Firestore%20%28CF%29:4.2%20CF%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ"></string>
           <string role="key" value="parent"></string>
           <reference key="92"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="108">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="4.2.1 CF-IntelliJ: Connexió des de Kotlin"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="106">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="107">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="106"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Drivers necessaris&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Els drivers necessaris són els mateixos que vam baixar-nos per al cas de &lt;strong&gt;Realtime Database&lt;/strong&gt;. Millor dit, estan inclosos en la llibreria que ens vam muntar, per tant aquesta feina la vam fer en el punt &lt;strong&gt;3.2.1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="107"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="108"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="202"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="108"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="109">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="110">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="109"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Configuració&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ara serà lleugerament més que en el cas de &lt;strong&gt;Realtime Database &lt;/strong&gt;vist en el punt &lt;strong&gt;3.2.1&lt;/strong&gt;., ja que no caldrà especificar la URL de la Base de Dades, amb la referència al fitxer json serà suficient.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Recordeu que ens vam baixar un fitxer &lt;strong&gt;json&lt;/strong&gt; amb la clau privada que vam guardar a l'arrel del projecte (i del qual és molt convenient guardar còpia). Després, com deia l'exemple, col·loquem el següent per a un accés correcte, on no posem el &lt;strong&gt;.setDatebaseURL()&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;		val serviceAccount = FileInputStream(&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;)

		val options = FirebaseOptions.Builder()
			.setCredentials(GoogleCredentials.fromStream(serviceAccount))
			.build()

		FirebaseApp.initializeApp(options)
&lt;/code&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;No us oblideu de substituir el nom del fitxer json&lt;/strong&gt;.&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="110"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="108"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="203"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="108"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="111">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="112">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="111"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Referència a la Base de Dades i a les dades concretes a les quals volem accedir&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ara la referència a la Base de Dades de &lt;strong&gt;Cloud Firestore&lt;/strong&gt; canviarà:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val database = FirestoreClient.getFirestore()&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Com que la informació està organitzada en col·leccions i dins d'ella en documents, podrem accedir primer a les col·leccions i dins d'elles a documents. A continuació teniu la referència pas a pas:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val col = database.collection(&quot;Xats&quot;)
val docXatProva = col.document(&quot;XatProva&quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Encara que evidentment ho podíem haver fet en una única línia:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val docXatProva = database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;No ens plantejarem posar referències a elements de dins d'un document, sinó que de moment accedirem a tot el conjunt del document.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Recordeu que &lt;strong&gt;Realtime Database&lt;/strong&gt;, com era un únic document JSON, allà anava tot i obligatòriament havíem de poder tenir una referència a un únic element. Com en &lt;strong&gt;Cloud Firestore&lt;/strong&gt; ho podem organitzar en col·leccions i documents, cadascun d'ells el podem dissenyar millor i que continga únicament les dades estrictes. Aleshores ens anirà bé accedir a tot el document.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list></list>
                     <string role="key" value="idevice"></string>
                     <reference key="112"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="0"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="108"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="204"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="108"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="59"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:4%20-%20Cloud%20Firestore%20%28CF%29:4.2%20CF%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ:4.2.1%20CF-IntelliJ%3A%20Connexi%C3%B3%20des%20de%20Kotlin"></string>
              <string role="key" value="parent"></string>
              <reference key="104"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="115">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="4.2.2 CF-IntelliJ: Accés a les dades"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="113">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="114">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="113"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Guardar dades&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Com acabem de comentar, accedim a tot un document dins d'una col·lecció.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per a guardar dades, ens podem plantejar 3 operacions d'escriptura sobre el document:&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;Sobreescriure'l tot: ho farem amb el mètode &lt;strong&gt;set()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Esborrar-lo tot: amb el mètode &lt;strong&gt;delete()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Modificar-lo: amb el mètode &lt;strong&gt;update()&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Excepte per esborrar, per a les altres operacions ens fa falta saber l'estructura del document. Per això tant mètode &lt;strong&gt;set()&lt;/strong&gt; com el mètode &lt;strong&gt;update()&lt;/strong&gt; accepten com a paràmetre no una única dada, sinó una estructura que puga arribar a reflectir el document. Acceptaran com a paràmetre un &lt;strong&gt;Map&amp;lt;String, Object&amp;gt;&lt;/strong&gt;, on podrem col·locar les claus i els valors de tots els membres del document. Cada valor pot ser dels tipus que vam practicar en el punt anterior: string, number, boolean, array, map, ...&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;La manera de col·locar un element en una estructura &lt;strong&gt;Map&amp;lt;&amp;gt;&lt;/strong&gt; és amb el mètode &lt;strong&gt;put()&lt;/strong&gt;, que acceptarà dos paràmetres: la clau i el valor.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En el següent exemple. quan s'apreta el botó d'enviar (baix a la dreta) es guardarà el contingut del quadre de text &lt;strong&gt;usuari&lt;/strong&gt; que està dalt i el de &lt;strong&gt;missatge&lt;/strong&gt; que està baix. Però observeu que estem utilitzant el mètode &lt;strong&gt;set()&lt;/strong&gt; i per tant matxacaríem el que ja teníem construït (el nom del xat i potser també la subcol·lecció de missatges). &lt;strong&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;Per tant US ACONSELLE QUE NO EXECUTEU EL QUE VE A CONTINUACIÓ&lt;/span&gt;&lt;br /&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	// Exemple de guardar dades en Cloud Firestore
	// Per a guardar dades. Sobre /Xats/XatProva i després sobre /Xats/Xat1
	fun enviar() {
		val database = FirestoreClient.getFirestore()
		val docXatProva = database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)

		val dades = HashMap&amp;lt;String, Any&amp;gt;()
		dades.put(&quot;ultimUsuari&quot;, usuari.getText())
		dades.put(&quot;ultimMissatge&quot;, missatge.getText())

		docXatProva.set(dades)
	}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Aquest seria el resultat, creant-se el document amb les 2 clau-valor, i havent matxacat el que hi havia, que era el nom del xat. Afortunadament no s'ha carregat la col·lecció missatges, però no ens podem fiar&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_2_2_0.png&quot; alt=&quot;&quot; width=&quot;1039&quot; height=&quot;634&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En realitat els mètodes &lt;strong&gt;set()&lt;/strong&gt;, &lt;strong&gt;delete()&lt;/strong&gt; i &lt;strong&gt;update()&lt;/strong&gt; tornen un valor, que és un &lt;strong&gt;ApiFuture&amp;lt;WriteResult&amp;gt;&lt;/strong&gt;, que permet averiguar com ha anat l'actualització de les dades. D'aquest &lt;strong&gt;ApiFuture&amp;lt;&amp;gt; &lt;/strong&gt; podem obtenir el moment en què s'ha confirmat l'actualització, i es podria aprofitar per a tractar-lo per si dóna algun error.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ampliem l'exemple anterior en què utilitzàvem el &lt;strong&gt;set()&lt;/strong&gt; per a comprovar el que comentem, senzillament mostrant el moment en què s'ha actualitzat, i poder comprovar que és un &lt;strong&gt;ApiFuture&amp;lt;WriteResult&amp;gt;&lt;/strong&gt; . &lt;strong&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;US ACONSELLE QUE NO EXECUTEU EL QUE VE A CONTINUACIÓ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	// Exemple de guardar dades en Cloud Firestore
	// Per a guardar dades. Sobre /Xats/XatProva i després sobre /Xats/Xat1
	fun enviar() {
		val database = FirestoreClient.getFirestore()
		val docXatProva = database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)

		val dades = HashMap&amp;lt;String, Any&amp;gt;()
		dades.put(&quot;ultimUsuari&quot;, usuari.getText())
		dades.put(&quot;ultimMissatge&quot;, missatge.getText())

		val result = docXatProva.set(dades)
		println(&quot;Data d'actualització: &quot; + result.get().getUpdateTime())
	}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Si veiem la consola d'eixida d'&lt;strong&gt;IntelliJ&lt;/strong&gt; veurem després dels warnings de sempre, al final en negre com ha imprés el moment de la confirmació.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_2_2_1.png&quot; alt=&quot;&quot; width=&quot;690&quot; height=&quot;95&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En els exemples anterior, en cas d'haver-se executat hauran matxacat el document &lt;strong&gt;XatProva &lt;/strong&gt; i això era per haver utilitzat el mètode &lt;strong&gt;set() &lt;/strong&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Anem a canviar-lo pel mètode &lt;strong&gt;update()&lt;/strong&gt;, en què senzillament afegirà (i si és necessari matxacarà) les dades que proporcionem, però mantindrà les altres. &lt;strong&gt;AQUEST EXEMPLE SÍ QUE EL PODEU FER&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	// Exemple de guardar dades en Cloud Firestore
	// Per a guardar dades. Sobre /Xats/XatProva i després sobre /Xats/Xat1
	fun enviar() {
		val database = FirestoreClient.getFirestore()
		val docXatProva = database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)

		val dades = HashMap&amp;lt;String, Any&amp;gt;()
		dades.put(&quot;ultimUsuari&quot;, usuari.getText())
		dades.put(&quot;ultimMissatge&quot;, missatge.getText())

		docXatProva.update(dades)
	}&lt;/code&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;conservarem tant el camp &lt;strong&gt;nomXat&lt;/strong&gt; com la col·lecció &lt;strong&gt;missatges&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;pre class=&quot;&quot; translate=&quot;no&quot; dir=&quot;ltr&quot; is-upgraded=&quot;&quot;&gt;&lt;span class=&quot;typ&quot;&gt;&lt;/span&gt;&lt;span class=&quot;pun&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/pre&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9293"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="205_85.178"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="116">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="113"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_4_2_2_1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_4_2_2_1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="3649c90d7af1b6e6752dcedd80441142"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="114"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9330"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="205_85.179"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="117">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="113"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_4_2_2_0.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_4_2_2_0.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="bb6688e567e5656b442a59ef9d24427c"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="114"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="114"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="180"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="115"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="205"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="115"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="116"></reference>
                  <reference key="117"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.freetextidevice.FreeTextIdevice" reference="118">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value="Free Text"></unicode>
                 <string role="key" value="_author"></string>
                 <unicode value="University of Auckland"></unicode>
                 <string role="key" value="_purpose"></string>
                 <unicode value="The majority of a learning resource will be 
establishing context, delivering instructions and providing general information.
This provides the framework within which the learning activities are built and 
delivered."></unicode>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="childs"></string>
                 <list></list>
                 <string role="key" value="content"></string>
                 <instance class="exe.engine.field.TextAreaField" reference="119">
                  <dictionary>
                   <string role="key" value="_id"></string>
                   <int value="85"></int>
                   <string role="key" value="_idevice"></string>
                   <reference key="118"></reference>
                   <string role="key" value="_instruc"></string>
                   <unicode value="Use this field to enter text. This 
iDevice has no emphasis applied although limited formatting can be applied to 
text through the text editing buttons associated with the field."></unicode>
                   <string role="key" value="_name"></string>
                   <unicode value="Free Text"></unicode>
                   <string role="key" value="anchor_names"></string>
                   <list></list>
                   <string role="key" value="anchors_linked_from_fields"></string>
                   <dictionary></dictionary>
                   <string role="key" value="buttonCaption"></string>
                   <string value=""></string>
                   <string role="key" value="content_w_resourcePaths"></string>
                   <unicode content="true" value="&lt;p class=&quot;titolet&quot;&gt;Recuperar dades&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Com en el cas del Realtime Database, ens plantegem dos casos:&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;Una única lectura&lt;/li&gt;
&lt;li&gt;Un listener que es quede escoltant per si hi ha canvis&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Com comprovarem, queda més senzilla la lectura única en el cas de Cloud Firestore.&lt;/p&gt;
&lt;h2 style=&quot;text-align: justify;&quot;&gt;Lectura única&lt;/h2&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per a fer una lectura única utilitzarem el mètode &lt;strong&gt;get()&lt;/strong&gt; sobre una referència al document que volem llegir. El resultat ens ve en un &lt;strong&gt;ApiFuture&amp;lt;DocumentSnapshot&amp;gt;&lt;/strong&gt;, que com es veu és una còpia de les dades en una interface &lt;strong&gt;ApiFutute&lt;/strong&gt;, indicant que la tindrem disponible en un futur. Sobre aquesta farem &lt;strong&gt;get()&lt;/strong&gt; per a obtenir aquesta còpia (serà un objecte). I sobre ella podrem fer:&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;&lt;strong&gt;getData()&lt;/strong&gt; per a obtenir tot el document en un &lt;strong&gt;Map&amp;lt;String,Object&amp;gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getId()&lt;/strong&gt; per a obtenir el nom del document&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;get(&lt;em&gt;nomClau&lt;/em&gt;) &lt;/strong&gt;per a obtenir directament el valor d'una clau del document&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getString(&lt;em&gt;nomClau&lt;/em&gt;) &lt;/strong&gt;per a obtenir el valor de la clau en forma de string&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getDouble(&lt;em&gt;nomClau&lt;/em&gt;) &lt;/strong&gt;per a obtenir el valor de la clau en forma de double&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getDate(&lt;em&gt;nomClau&lt;/em&gt;)&lt;/strong&gt; per a obtenir el valor de la clau en forma de date&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;L'exemple d'única lectura el farem per a posar el títol de l'aplicació, com en l'exemple del Realtime Database. Prèviament, des de la consola de Firebase ja havíem creat la parella clau-valor: &lt;strong&gt;nomXat: Xat Cloud&lt;/strong&gt; &lt;strong&gt;Firestore&lt;/strong&gt;, dins del document &lt;strong&gt;XatProva&lt;/strong&gt;. Si pels exemples anteriors (els que havia marcat en roig que no us aconsellava fer) heu perdut aquesta parella, és el moment de crear-la de nou:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_3_2_2_1.1.png&quot; alt=&quot;&quot; width=&quot;1282&quot; height=&quot;454&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ara sí que haurem d'anar amb compte en el moment de guardar les dades. Si utilitzem el mètode &lt;strong&gt;set()&lt;/strong&gt; matxacarem el document anterior (amb el nom del xat). Per tant, a partir d'ara ens convindrà utilitzar el mètode &lt;strong&gt;update()&lt;/strong&gt;. Ho tornarem a especificar en el moment de fer aquesta escriptura.&lt;/p&gt;
&lt;p&gt;I aquestes seran les sentències per a posar el títol de l'aplicació:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;		// Exemple de lectura única: senzillament sobre un ApiFuture i sobre ell get()
		// Per a posar el títol. Sobre /Xats/XatProva/nomXat
		val database = FirestoreClient.getFirestore()
		val docRef = database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)
		val future = docRef.get()
		val nomXat = future.get().getString(&quot;nomXat&quot;)
		this.setTitle(nomXat)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I ací tenim el resultat, on es veu el títol agafat de Cloud Firestore:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_3_2_2_2.png&quot; alt=&quot;&quot; width=&quot;450&quot; height=&quot;400&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;Listener que es queda escoltant: addSnapshotListener()&lt;/h2&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;De forma paral·lela al Realtime Database, si volem rebre una notificació de quan hi haja un canvi en el document que ens interessa, sobre una referència a aquest document ens muntarem un listener, en aquest cas amb el mètode &lt;strong&gt;addSnapshotListener()&lt;/strong&gt;. Al mètode &lt;strong&gt;onEvent()&lt;/strong&gt; que s'ha de sobreescriure arribarà un paràmetre de tipus &lt;strong&gt;DocumentSnapshot&lt;/strong&gt;, que serà una còpia del document. Com en el cas anterior podrem fer sobre ell un &lt;strong&gt;getData()&lt;/strong&gt; per a obtenir tot el document, &lt;strong&gt;getString(&lt;em&gt;nomClau&lt;/em&gt;) &lt;/strong&gt;per a obtenir el valor de la clau com un string, etc.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En el nostre exemple, de moment l'utilitzem tant per a posar l'últim missatge com per a anar omplint l'àrea central amb el xat. Però com havíem comentat abans, hem de cuidar de no matxacar tot el document per a no perdre el títol del xat. Per tant, l'acció que farem en apretar el botó per a enviar el missatge no serà &lt;strong&gt;set()&lt;/strong&gt; sinó &lt;strong&gt;update(). &lt;/strong&gt;Per si de cas havíeu fet els exemples que us havia aconsellat que no féreu, ací teniu una altra vegada el codi correcte:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	// Exemple de guardar dades en Cloud Firestore
	// Per a guardar dades. Sobre /Xats/XatProva i després sobre /Xats/Xat1
	fun enviar() {
		val database = FirestoreClient.getFirestore()
		val docXatProva = database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)

		val dades = HashMap&amp;lt;String, Any&amp;gt;()
		dades.put(&quot;ultimUsuari&quot;, usuari.getText())
		dades.put(&quot;ultimMissatge&quot;, missatge.getText())

		docXatProva.update(dades)
	}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I ara sí el &lt;strong&gt;addSnapshotListener()&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;		// Exemple de listener de lectura contínua addSnapshotListener()
		// Per a posar l'últim missatge registrat. Sobre /Xats/XatProva/ultimUsuari i /Xats/XatProva/ultimMissatge DocumentSnapshot FirestoreException
		docRef.addSnapshotListener { snapshot, e -&amp;gt;
			if (e != null) {
				System.err.println(&quot;Listen failed: &quot; + e)
				return@addSnapshotListener
			}

			if (snapshot != null &amp;amp;&amp;amp; snapshot.exists()) {
				ultimMissatge.setText(snapshot.getString(&quot;ultimMissatge&quot;))
				area.append(snapshot.getString(&quot;ultimUsuari&quot;) + &quot;: &quot; + snapshot.getString(&quot;ultimMissatge&quot;) + &quot;\n&quot;)
			} else {
				println(&quot;Current data: null&quot;)
			}
		}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En aquest exemple tenim el tractament de possibles errors, com que no s'accedeix al document, o aquest és nul.&lt;/p&gt;
&lt;p&gt;Observeu com la primera lectura també la fa, del que hi haja guardat en un principi. En la imatge es mostra el moment d'afegir un segon missatge:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_3_2_2_3.1.png&quot; alt=&quot;&quot; width=&quot;1279&quot; height=&quot;664&quot; /&gt;&lt;/p&gt;"></unicode>
                   <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                   <int value="4"></int>
                   <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                   <int value="2"></int>
                   <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="htmlTag"></string>
                   <string value="div"></string>
                   <string role="key" value="images"></string>
                   <instance class="exe.engine.galleryidevice.GalleryImages">
                    <dictionary>
                     <string role="key" value=".listitems"></string>
                     <list>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9283"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="192_85.248"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="120">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="118"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_2_3_2_2_1.1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_2_3_2_2_1.1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="ec38636b843f72e6d9fc89278da368fc"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="119"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9309"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="192_85.249"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="121">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="118"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_2_3_2_2_3.1.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_2_3_2_2_3.1.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="65ee0fa59875bfa7c17311ea4edaef4c"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="119"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                      <instance class="exe.engine.galleryidevice.GalleryImage">
                       <dictionary>
                        <string role="key" value="_caption"></string>
                        <instance class="exe.engine.field.TextField">
                         <dictionary>
                          <string role="key" value="_id"></string>
                          <int value="9333"></int>
                          <string role="key" value="_idevice"></string>
                          <none></none>
                          <string role="key" value="_instruc"></string>
                          <string value=""></string>
                          <string role="key" value="_name"></string>
                          <string value=""></string>
                          <string role="key" value="content"></string>
                          <string value=""></string>
                          <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                          <int value="4"></int>
                         </dictionary>
                        </instance>
                        <string role="key" value="_id"></string>
                        <unicode value="192_85.250"></unicode>
                        <string role="key" value="_imageResource"></string>
                        <instance class="exe.engine.resource.Resource" reference="122">
                         <dictionary>
                          <string role="key" value="_idevice"></string>
                          <reference key="118"></reference>
                          <string role="key" value="_package"></string>
                          <reference key="2"></reference>
                          <string role="key" value="_storageName"></string>
                          <string value="T7_2_3_2_2_2.png"></string>
                          <string role="key" value="_userName"></string>
                          <string value="/tmp/tmpk13NfD/T7_2_3_2_2_2.png"></string>
                          <string role="key" value="checksum"></string>
                          <string value="e7330f3da2f07b47e2dc2287d19ced41"></string>
                          <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                          <int value="2"></int>
                          <string role="key" value="warningMsg"></string>
                          <string value=""></string>
                         </dictionary>
                        </instance>
                        <string role="key" value="_parent"></string>
                        <reference key="119"></reference>
                        <string role="key" value="_thumbnailResource"></string>
                        <none></none>
                        <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                        <int value="3"></int>
                        <string role="key" value="makeThumbnail"></string>
                        <bool value="0"></bool>
                       </dictionary>
                      </instance>
                     </list>
                     <string role="key" value="idevice"></string>
                     <reference key="119"></reference>
                    </dictionary>
                   </instance>
                   <string role="key" value="intlinks_to_anchors"></string>
                   <dictionary></dictionary>
                   <string role="key" value="nextImageId"></string>
                   <int value="251"></int>
                   <string role="key" value="parentNode"></string>
                   <reference key="115"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.freetextidevice.FreeTextIdevice.persistenceVersion"></string>
                 <int value="7"></int>
                 <string role="key" value="icon"></string>
                 <string value=""></string>
                 <string role="key" value="id"></string>
                 <unicode value="192"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parent"></string>
                 <none></none>
                 <string role="key" value="parentNode"></string>
                 <reference key="115"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="type"></string>
                 <none></none>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="120"></reference>
                  <reference key="121"></reference>
                  <reference key="122"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="123">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="124">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="207_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="123"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Guardar documents&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ja havíem comentat en la pregunta 4.1 que per l'estructura de les dades a la qual ens convida &lt;strong&gt;Cloud Firestore&lt;/strong&gt;, en compte de guardar els missatges (i l'usuari) en una llista, ho faríem en documents dins d'una subcol·lecció.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per tant ens és necessària l'operació d'afegir un document a una col·lecció. Això en un principi ho aconseguiríem amb el mètode &lt;strong&gt;set()&lt;/strong&gt; sobre un document nou de la col·lecció:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;database.collection(&quot;nomCol&quot;).document(&quot;nomDoc&quot;).set(dades)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;però això ens obligaria a posar un nom a cada document. Ja havíem vist que Cloud Firestore era capaç de generar un nom de document que no es puga repetir. Des de Kotlin s'aconsegueix amb el mètode &lt;strong&gt;add()&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;database.collection(&quot;nomCol&quot;).add(dades)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;però que en el nostre cas, per ser una subcol·lecció és un poc més llarg&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).add(dades)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;L'estructura de les dades la podem fer amb un &lt;strong&gt;Map&amp;lt;String,Object&amp;gt;&lt;/strong&gt;, i posar-li en el nostre cas l'usuari i el missatge. D'aquesta manera ens quedaria ara el procediment en &lt;strong&gt;apretar el botó d'enviar el missatge&lt;/strong&gt;, on a banda del que teníem abans per a modificar &lt;strong&gt;ultimMissatge&lt;/strong&gt; i &lt;strong&gt;ultimUsuari&lt;/strong&gt;, ara afegirem el document nou.&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	// Exemple de guardar dades en Cloud Firestore
	// Per a guardar dades. Sobre /Xats/XatProva i després sobre /Xats/Xat1
	fun enviar() {
		val database = FirestoreClient.getFirestore()
		val docXatProva = database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)

		val dades = HashMap&amp;lt;String, Any&amp;gt;()
		dades.put(&quot;ultimUsuari&quot;, usuari.getText())
		dades.put(&quot;ultimMissatge&quot;, missatge.getText())

		docXatProva.update(dades)

		val dades2 = HashMap&amp;lt;String, Any&amp;gt;()
		dades2.put(&quot;nom&quot;, usuari.getText())
		dades2.put(&quot;contingut&quot;, missatge.getText())

		database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).add(dades2)
	}&lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I aquest és el resultat&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_2_2_4.png&quot; alt=&quot;&quot; width=&quot;1365&quot; height=&quot;711&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per cert, un detall que haurem de tenir en compte més avant: com que el número de document és aleoatori, no té per què ser l'últim. Ho haurem de tenir en compte quan vulguem traure els missatges per ordre cronològic.&lt;/p&gt;
&lt;p&gt;Però sí que podem veure com el contingut del nou document és el que volíem:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_2_2_5.png&quot; alt=&quot;&quot; width=&quot;1366&quot; height=&quot;720&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9275"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="193_207_2.160"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="125">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="123"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_2_2_4.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_2_2_4.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="e4ffc730ec73aaa9d37c2e8e25604ac8"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="124"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9315"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="193_207_2.161"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="126">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="123"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_2_2_5.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_2_2_5.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="3a372a16a29b53ba43f62eab38d1568a"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="124"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="124"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="162"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="115"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="193"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="115"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="125"></reference>
                  <reference key="126"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="127">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="128">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="207_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="127"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Recuperar documents modificats&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ja només ens queda detectar els canvis en els documents de la col·lecció, per a afegir a l'àrea central els documents afegits. També és un &lt;strong&gt;addSnapshotListener()&lt;/strong&gt;, però ara l'apliquem a una col·lecció (no a un document). El resultat és que d'una forma molt còmoda podrem detectar els documents afegits, els modificats i fins i tot els esborrats.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En el nostre exemple només ens interessa el cas de &lt;strong&gt;document afegit&lt;/strong&gt;, que serà un nou missatge en el xat, i el que farem serà afegir a &lt;strong&gt;area&lt;/strong&gt; (el JTextArea on visualitzem tota a conversa). Per tant ens &lt;strong&gt;sobrarà&lt;/strong&gt; la línia &lt;strong&gt;area.append(...) &lt;/strong&gt;que estarà al voltant de la línia 106, en la qual afegíem a &lt;strong&gt;area&lt;/strong&gt; depenent del canvi en &lt;strong&gt;ultimMissatge&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ací tenim el fragment de programa que ens ho permetrà. Hem deixat els casos de &lt;strong&gt;document modificat&lt;/strong&gt; i &lt;strong&gt;document esborrat&lt;/strong&gt; per a una millor documentació, encara que en el nostre exemple no ho utilitzem.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;		// Exemple de listener de lectura contínua addSnapshotListener() sobre una col·lecció
		// Per a posar tota la llista de missatges. Sobre /Xats/XatProva/missatges
		database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).addSnapshotListener { snapshots, e -&amp;gt;
			if (e != null) {
				System.err.println(&quot;Listen failed: &quot; + e)
				return@addSnapshotListener
			}

			for (dc in snapshots!!.getDocumentChanges()) {
				when (dc.getType()) {
					DocumentChange.Type.ADDED -&amp;gt;
						area.append(dc.getDocument().getString(&quot;nom&quot;) + &quot;: &quot; + dc.getDocument().getString(&quot;contingut&quot;) + &quot;\n&quot;)

					DocumentChange.Type.MODIFIED -&amp;gt;
						println(&quot;Missatge modificat: &quot; + dc.getDocument().getData());

					DocumentChange.Type.REMOVED -&amp;gt;
						println(&quot;Missatge esborrat: &quot; + dc.getDocument().getData());
				}
			}
		}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;&lt;querysnapshot&gt;&lt;/querysnapshot&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I en aquesta imatge es veu com en un principi es veuen els 3 documents que ja existien (2 creats en la pregunta 4.1, i 1 immediatament abans). També s'afegeix un altre missatge per veure que es visualitza perfectament&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_2_2_6.png&quot; alt=&quot;&quot; width=&quot;450&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;És de destacar que ara la còpia de les dades, el snapshot, és en realitat un &lt;strong&gt;QuerySnapshot&lt;/strong&gt;. I és que nosaltres no hem fet cap consulta sobre els documents de la col·lecció, però és possible fer-la. Per exemple es podria seleccionar per mig d'una query tots els documents en què l'usuari és un determinat. Aleshores detectaríem els documents afegits, modificats o esborrats d'aquest usuari. Ho faríem en el moment de declarar el &lt;strong&gt;addSnapshotListener()&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).whereEqualTo(&quot;usuari&quot;,&quot;Usuari2&quot;).addSnapshotListener {&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;O també podríem ordenar els documents per algun camp. &lt;strong&gt;Açò en realitat és necessari per a poder ordenar els missatges, ja que el nom del document auto-generat per Cloud Firestore no és consecutiu, sinó aleatori&lt;/strong&gt;, i per tant com ja hem vist un document nou pot tenir un nom anterior a alguns dels existents. Ho arreglarem fàcilment posant un camp més amb la data i ordenant per aquest camp amb &lt;strong&gt;orderBy()&lt;/strong&gt; (que aniria en el lloc del &lt;strong&gt;whereEqualTo()&lt;/strong&gt; de la sentència anterior).&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9316"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="196_207_2.79"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="129">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="127"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_2_2_6.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_2_2_6.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="e794df92ac38d6feb9640d51eb785658"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="128"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="128"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="80"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="115"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="196"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="115"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="129"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="60"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:4%20-%20Cloud%20Firestore%20%28CF%29:4.2%20CF%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ:4.2.2%20CF-IntelliJ%3A%20Acc%C3%A9s%20a%20les%20dades"></string>
              <string role="key" value="parent"></string>
              <reference key="104"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="132">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="4.2.3 CF-IntelliJ: Tot l'exemple"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="130">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="131">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="228_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="130"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Aquest és el programa, que recordeu que li havíem posat el nom de &lt;strong&gt;Exemple_7_4_2_FirebaseCF_CrearXatCloud.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import java.awt.EventQueue
import javax.swing.JFrame
import javax.swing.JLabel
import javax.swing.JTextArea
import javax.swing.JButton
import javax.swing.JTextField
import javax.swing.JPanel
import java.awt.BorderLayout
import java.awt.FlowLayout
import java.awt.GridLayout
import java.awt.Color
import javax.swing.JScrollPane
import java.io.FileInputStream

import com.google.api.core.ApiFuture
import com.google.auth.oauth2.GoogleCredentials
import com.google.cloud.firestore.DocumentChange
import com.google.cloud.firestore.DocumentReference
import com.google.cloud.firestore.DocumentSnapshot
import com.google.cloud.firestore.EventListener
import com.google.cloud.firestore.Firestore
import com.google.cloud.firestore.FirestoreException
import com.google.firebase.FirebaseApp
import com.google.firebase.FirebaseOptions
import com.google.firebase.cloud.FirestoreClient

class CrearXatCloud : JFrame() {

	val etUsuari = JLabel(&quot;Nom Usuari:&quot;)
	val usuari = JTextField(25)

	val etUltimMissatge = JLabel(&quot;Últim missatge: &quot;)
	val ultimMissatge = JLabel()

	val etiqueta = JLabel(&quot;Missatges:&quot;)
	val area = JTextArea()

	val etIntroduccioMissatge = JLabel(&quot;Introdueix missatge:&quot;)
	val enviar = JButton(&quot;Enviar&quot;)
	val missatge = JTextField(15)

	// en iniciar posem un contenidor per als elements anteriors
	init {
		defaultCloseOperation = JFrame.EXIT_ON_CLOSE
		setBounds(100, 100, 450, 300)
		setLayout(BorderLayout())
		// contenidor per als elements
		//Hi haurà títol. Panell de dalt: últim missatge. Panell de baix: per a introduir missatge. Panell central: tot el xat

		val panell11 = JPanel(FlowLayout())
		panell11.add(etUsuari)
		panell11.add(usuari)
		val panell12 = JPanel(FlowLayout())
		panell12.add(etUltimMissatge)
		panell12.add(ultimMissatge)
		val panell1 = JPanel(GridLayout(2, 1))
		panell1.add(panell11)
		panell1.add(panell12)
		getContentPane().add(panell1, BorderLayout.NORTH)

		val panell2 = JPanel(BorderLayout())
		panell2.add(etiqueta, BorderLayout.NORTH)
		area.setForeground(Color.blue)
		area.setEditable(false)
		val scroll = JScrollPane(area)
		panell2.add(scroll, BorderLayout.CENTER)
		getContentPane().add(panell2, BorderLayout.CENTER)

		val panell3 = JPanel(FlowLayout())
		panell3.add(etIntroduccioMissatge)
		panell3.add(missatge)
		panell3.add(enviar)
		getContentPane().add(panell3, BorderLayout.SOUTH)

		setVisible(true)
		enviar.addActionListener { enviar() }

		val serviceAccount = FileInputStream(&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;)

		val options = FirebaseOptions.Builder()
			.setCredentials(GoogleCredentials.fromStream(serviceAccount))
			.build()

		FirebaseApp.initializeApp(options)

		// Exemple de lectura única: senzillament sobre un ApiFuture i sobre ell get()
		// Per a posar el títol. Sobre /Xats/XatProva/nomXat
		val database = FirestoreClient.getFirestore()
		val docRef = database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)
		val future = docRef.get()
		val nomXat = future.get().getString(&quot;nomXat&quot;)
		this.setTitle(nomXat)

		// Exemple de listener de lectura contínua addSnapshotListener()
		// Per a posar l'últim missatge registrat. Sobre /Xats/XatProva/ultimUsuari i /Xats/XatProva/ultimMissatge DocumentSnapshot FirestoreException
		docRef.addSnapshotListener { snapshot, e -&amp;gt;
			if (e != null) {
				System.err.println(&quot;Listen failed: &quot; + e)
				return@addSnapshotListener
			}

			if (snapshot != null &amp;amp;&amp;amp; snapshot.exists()) {
				ultimMissatge.setText(snapshot.getString(&quot;ultimMissatge&quot;))
				//area.append(snapshot.getString(&quot;ultimUsuari&quot;) + &quot;: &quot; + snapshot.getString(&quot;ultimMissatge&quot;) + &quot;\n&quot;)
			} else {
				println(&quot;Current data: null&quot;)
			}
		}
		
		// Exemple de listener de lectura contínua addSnapshotListener() sobre una col·lecció
		// Per a posar tota la llista de missatges. Sobre /Xats/XatProva/missatges
		database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).addSnapshotListener { snapshots, e -&amp;gt;
			if (e != null) {
				System.err.println(&quot;Listen failed: &quot; + e)
				return@addSnapshotListener
			}

			for (dc in snapshots!!.getDocumentChanges()) {
				when (dc.getType()) {
					DocumentChange.Type.ADDED -&amp;gt;
						area.append(dc.getDocument().getString(&quot;nom&quot;) + &quot;: &quot; + dc.getDocument().getString(&quot;contingut&quot;) + &quot;\n&quot;)

					DocumentChange.Type.MODIFIED -&amp;gt;
						println(&quot;Missatge modificat: &quot; + dc.getDocument().getData());

					DocumentChange.Type.REMOVED -&amp;gt;
						println(&quot;Missatge esborrat: &quot; + dc.getDocument().getData());
				}
			}
		}
	}


	// Exemple de guardar dades en Cloud Firestore
	// Per a guardar dades. Sobre /Xats/XatProva i després sobre /Xats/Xat1
	fun enviar() {
		val database = FirestoreClient.getFirestore()
		val docXatProva = database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)

		val dades = HashMap&amp;lt;String, Any&amp;gt;()
		dades.put(&quot;ultimUsuari&quot;, usuari.getText())
		dades.put(&quot;ultimMissatge&quot;, missatge.getText())

		docXatProva.update(dades)

		val dades2 = HashMap&amp;lt;String, Any&amp;gt;()
		dades2.put(&quot;nom&quot;, usuari.getText())
		dades2.put(&quot;contingut&quot;, missatge.getText())

		database.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).add(dades2)
	}
}

fun main(args: Array&amp;lt;String&amp;gt;) {
	EventQueue.invokeLater {
		CrearXatCloud().isVisible = true
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="131"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="132"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="228"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="132"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="71"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:4%20-%20Cloud%20Firestore%20%28CF%29:4.2%20CF%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ:4.2.3%20CF-IntelliJ%3A%20Tot%20l%27exemple"></string>
              <string role="key" value="parent"></string>
              <reference key="104"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="135">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="4.2.4 CF-IntelliJ: Exemple ampliat"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="133">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="134">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="209_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="133"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p style=&quot;text-align: justify;&quot;&gt;Anem a ampliar l'exemple anterior, fent algunes modificacions i millores:&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;Tindrem la classe &lt;strong&gt;Missatge&lt;/strong&gt; amb les propietat &lt;strong&gt;nom&lt;/strong&gt; i &lt;strong&gt;contingut&lt;/strong&gt; (expressament diferents dels noms utilitzats en l'exemple anterior per poder comprovar que aquestes modificacions funcionen i milloren l'exemple). Posarem també la &lt;strong&gt;data&lt;/strong&gt; (com un &lt;strong&gt;timestamp&lt;/strong&gt; de Firebase que es correspon amb un &lt;strong&gt;Date&lt;/strong&gt; de Java i Kotlin) per a poder ordenar els missatges cronològicament&lt;/li&gt;
&lt;li&gt;Llevem les coses que no s'utilitzen estrictament en aquest exemple&lt;/li&gt;
&lt;li&gt;No definirem la referència a la Base de Dades en cada utilització. Únicament una vegada al principi, després de la connexió.&lt;/li&gt;
&lt;li&gt;Posem un &lt;strong&gt;JComboBox&lt;/strong&gt; per a poder triar entre més d'un xat. Per a no modificar les coses ja fetes, posarem la creació dels listeners en un mètode anomenat &lt;strong&gt;inicialitzar()&lt;/strong&gt;, ja que ara els listeners dependran del xat triat. I haurem d'anar amb compte també de parar els listeners, ja creats. És a dir, si primer triem un xat, tindrem els listeners que apunten a ell. Si després triem un altre xat i creem els listeners una altra vegada per a que apunten al lloc correcte, els tindrem per duplicat. Hauríem de parar els primers listeners&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Aquesta és la classe &lt;strong&gt;Missatge&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class Missatge(var nom: String, var data: Date, var contingut: String)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Aquest és el programa. Per comoditat hem posat la classe &lt;strong&gt;Missatge &lt;/strong&gt;dins. Si l'heu definida en un fitxer independent, haureu d'esborrar la definició en aquest programa. Guardeu-lo amb el nom &lt;strong&gt;Exemple_7_4_2&lt;/strong&gt;&lt;strong&gt;_FirebaseCF_XatCloud_Millorat.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import java.awt.EventQueue
import javax.swing.JFrame
import javax.swing.JLabel
import javax.swing.JTextArea
import javax.swing.JButton
import javax.swing.JTextField
import javax.swing.JPanel
import javax.swing.JComboBox
import java.awt.BorderLayout
import java.awt.FlowLayout
import java.awt.GridLayout
import java.awt.Color
import javax.swing.JScrollPane
import java.io.FileInputStream

import com.google.api.core.ApiFuture
import com.google.auth.oauth2.GoogleCredentials
import com.google.cloud.firestore.DocumentChange
import com.google.cloud.firestore.DocumentReference
import com.google.cloud.firestore.DocumentSnapshot
import com.google.cloud.firestore.EventListener
import com.google.cloud.firestore.Firestore
import com.google.cloud.firestore.FirestoreException
import com.google.firebase.FirebaseApp
import com.google.firebase.FirebaseOptions
import com.google.firebase.cloud.FirestoreClient
import com.google.cloud.firestore.ListenerRegistration
import java.text.SimpleDateFormat
import java.util.Date

class Missatge(var nom: String, var data: Date, var contingut: String)

class XatCloudMillorat : JFrame() {

	val etComboXats = JLabel(&quot;Llista de tots els xats disponibles:&quot;)
	val comboXats = JComboBox&amp;lt;String&amp;gt;()

	val etUsuari = JLabel(&quot;Nom Usuari:&quot;)
	val usuari = JTextField(25)

	val etUltimMissatge = JLabel(&quot;Últim missatge: &quot;)
	val ultimMissatge = JLabel()

	val etiqueta = JLabel(&quot;Missatges:&quot;)
	val area = JTextArea()

	val etIntroduccioMissatge = JLabel(&quot;Introdueix missatge:&quot;)
	val enviar = JButton(&quot;Enviar&quot;)
	val missatge = JTextField(15)

	var database: Firestore? = null
	var docRef: DocumentReference? = null

	var listenerUltimMissatge: ListenerRegistration? = null
	var listenerMissatges: ListenerRegistration? = null

	// en iniciar posem un contenidor per als elements anteriors
	init {
		defaultCloseOperation = JFrame.EXIT_ON_CLOSE
		setBounds(100, 100, 550, 400)
		setLayout(BorderLayout())
		// contenidor per als elements
		//Hi haurà títol. Panell de dalt: últim missatge. Panell de baix: per a introduir missatge. Panell central: tot el xat

		val panell10 = JPanel(FlowLayout())
		panell10.add(etComboXats)
		panell10.add(comboXats)
		val panell11 = JPanel(FlowLayout())
		panell11.add(etUsuari)
		panell11.add(usuari)
		val panell12 = JPanel(FlowLayout())
		panell12.add(etUltimMissatge)
		panell12.add(ultimMissatge)
		val panell1 = JPanel(GridLayout(3, 1))
		panell1.add(panell10)
		panell1.add(panell11)
		panell1.add(panell12)
		getContentPane().add(panell1, BorderLayout.NORTH)

		val panell2 = JPanel(BorderLayout())
		panell2.add(etiqueta, BorderLayout.NORTH)
		area.setForeground(Color.blue)
		area.setEditable(false)
		val scroll = JScrollPane(area)
		panell2.add(scroll, BorderLayout.CENTER)
		getContentPane().add(panell2, BorderLayout.CENTER)

		val panell3 = JPanel(FlowLayout())
		panell3.add(etIntroduccioMissatge)
		panell3.add(missatge)
		panell3.add(enviar)
		getContentPane().add(panell3, BorderLayout.SOUTH)

		setVisible(true)
		comboXats.addActionListener() { inicialitzarXat() }
		enviar.addActionListener { enviar() }

		val serviceAccount = FileInputStream(&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;)

		val options = FirebaseOptions.Builder()
			.setCredentials(GoogleCredentials.fromStream(serviceAccount))
			.build()

		FirebaseApp.initializeApp(options)

		database = FirestoreClient.getFirestore()


		// Exemple de llegir tots els documents d'una col·lecció
		// Per a triar el xat
		val documents = database?.collection(&quot;Xats&quot;)?.get()?.get()?.getDocuments()
		for (document in documents!!) {
			comboXats.addItem(document.getId())
		}
		comboXats.setSelectedIndex(0)

	}

	fun inicialitzarXat() {
		docRef = database?.collection(&quot;Xats&quot;)?.document(comboXats.getSelectedItem().toString())
		area.setText(&quot;&quot;)

		// Exemple de lectura única: senzillament sobre un ApiFuture i sobre ell get()
		// Per a posar el títol. Sobre /Xats/XatProva/nomXat
		val future = docRef?.get()
		val nomXat = future?.get()?.getString(&quot;nomXat&quot;)
		this.setTitle(nomXat)

		// Exemple de listener de lectura contínua addSnapshotListener()
		// Per a posar l'últim missatge registrat. Sobre /Xats/XatProva/ultimUsuari i /Xats/XatProva/ultimMissatge
		// Si estava en marxa, el parem abans de tornar-lo a llançar
		if (listenerUltimMissatge != null)
			listenerUltimMissatge!!.remove()

		listenerUltimMissatge = docRef?.addSnapshotListener { snapshot, e -&amp;gt;
			ultimMissatge.setText(snapshot?.getString(&quot;ultimMissatge&quot;))
		}

		// Exemple de listener de lectura contínua addSnapshotListener() sobre una col·lecció
		// Per a posar tota la llista de missatges. Sobre /Xats/XatProva/missatges
		// Si estava en marxa, el parem abans de tornar-lo a llançar
		if (listenerMissatges != null)
			listenerMissatges!!.remove()

		listenerMissatges = docRef?.collection(&quot;missatges&quot;)?.orderBy(&quot;data&quot;)?.addSnapshotListener { snapshots, e -&amp;gt;
			for (dc in snapshots!!.getDocumentChanges()) {
				val dData = dc.getDocument().getDate(&quot;data&quot;)
				val d = SimpleDateFormat(&quot;dd-MM-yyyy HH:mm&quot;).format(dData)
				area.append(
					dc.getDocument().getString(&quot;nom&quot;) + &quot; (&quot; + d + &quot;): &quot; + dc.getDocument().getString(&quot;contingut&quot;) + &quot;\n&quot;
				)
			}
		}
	}


	// Exemple de guardar dades en Cloud Firestore
	// Per a guardar dades. Sobre /Xats/XatProva i després sobre /Xats/Xat1
	fun enviar() {
		val database = FirestoreClient.getFirestore()
		val docXat = database.collection(&quot;Xats&quot;).document(comboXats.getSelectedItem().toString())

		val dades = HashMap&amp;lt;String, Any&amp;gt;()
		dades.put(&quot;ultimUsuari&quot;, usuari.getText())
		dades.put(&quot;ultimMissatge&quot;, missatge.getText())

		docXat.update(dades)

		val dades2 = HashMap&amp;lt;String, Any&amp;gt;()
		dades2.put(&quot;nom&quot;, usuari.getText())
		dades2.put(&quot;contingut&quot;, missatge.getText())

		val m = Missatge(usuari.getText(), Date(), missatge.getText())
		docXat.collection(&quot;missatges&quot;).add(m)
	}

}

fun main(args: Array&amp;lt;String&amp;gt;) {
	EventQueue.invokeLater {
		XatCloudMillorat().isVisible = true
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt; &lt;/code&gt;&lt;/p&gt;
&lt;p&gt;I aquest és un exemple d'utilització. Es pot veure el JComboBox per a triar els diferents xats&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_2_4_1.png&quot; alt=&quot;&quot; width=&quot;550&quot; height=&quot;400&quot; /&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9279"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="198_209_2.77"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="136">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="133"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_2_4_1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_2_4_1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="75362ed79f315f0a5c51efb13cec576f"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="134"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="134"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="78"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="135"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="198"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="135"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="136"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="61"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:4%20-%20Cloud%20Firestore%20%28CF%29:4.2%20CF%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ:4.2.4%20CF-IntelliJ%3A%20Exemple%20ampliat"></string>
              <string role="key" value="parent"></string>
              <reference key="104"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="139">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="4.3 CF: Utilització des d'Android"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="137">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_editionFolder"></string>
              <string value="text/edition/"></string>
              <string role="key" value="_editionResources"></string>
              <list>
               <string value="text.js"></string>
              </list>
              <string role="key" value="_exportFolder"></string>
              <none></none>
              <string role="key" value="_exportResources"></string>
              <list></list>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="138">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="207_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="137"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;De forma absolutament paral·lela a com quan vam veure el Realtime Database per a Android, ara toca el torn d'accedir al &lt;strong&gt;Cloud Firestore &lt;/strong&gt;de Firebase des d'Android. Com veurem, per a fer la connexió ens deixarem ajudar també per l'assistent.&lt;/p&gt;
&lt;p&gt;El projecte s'anomenarà  &lt;strong&gt;Tema7_FirebaseCF&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Nota important&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Per a accedir a &lt;strong&gt;Cloud Firestore&lt;/strong&gt; i que no ens falle el programa, haurem de posar en el &lt;strong&gt;build.gradle&lt;/strong&gt; de l'&lt;strong&gt;aplicació&lt;/strong&gt;, dins de &lt;strong&gt;android&lt;/strong&gt; i dins de &lt;strong&gt;defaultConfig&lt;/strong&gt; el següent:&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;&lt;span style=&quot;color: #067d17;&quot;&gt; &lt;strong&gt;multiDexEnabled true&lt;/strong&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;p&gt;Si no ho fem així ens pot donar el següent error:&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;strong&gt;Cannot fit requested classes in a single dex file (# methods: 80444 &amp;gt; 65536)&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;span style=&quot;color: #000000;&quot;&gt;I com sempre, per a que reconega els elements que tenim en els layout, haurem de posar al principi:&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;id &lt;span style=&quot;color: #067d17;&quot;&gt;'kotlin-android-extensions'&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;El activity_main.xml serà:&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;!--?&lt;/span--&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;!--?&lt;/span--&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;!--?&lt;/span--&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;!--?&lt;/span--&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono'; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&lt;!--?&lt;/span--&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;Spinner&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/comboXats&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;EditText&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/usuari&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/comboXats&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:background&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;#dddddd&quot;&lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/ultim&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintHorizontal_bias&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0.0&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/usuari&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:background&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;#aaaaaa&quot;&lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;EditText&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;317dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;44dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:ems&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;10&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintBottom_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:background&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;#dddddd&quot;&lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;Button&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/boto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;44dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;Button&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintBottom_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/area&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintBottom_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/text&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/ultim&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;Els components que hem col·locat són:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Un &lt;strong&gt;EditText&lt;/strong&gt; per al nom d'&lt;strong&gt;usuari&lt;/strong&gt; (amb fons gris claret)&lt;strong&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Un &lt;strong&gt;TextView&lt;/strong&gt;, anomenat &lt;strong&gt;ultim&lt;/strong&gt;, per a visualitzar l'últim missatge, que es coordinarà amb &lt;strong&gt;/Xats/XatProva/ultimMissatge &lt;/strong&gt;(amb fons gris més fosc)&lt;/li&gt;
&lt;li&gt;Un &lt;strong&gt;EditText&lt;/strong&gt; anomenat &lt;strong&gt;text&lt;/strong&gt;, on posarem els missatges que volem enviar (amb fons gris claret, baix de tot)&lt;/li&gt;
&lt;li&gt;Un &lt;strong&gt;Button&lt;/strong&gt;, anomenat &lt;strong&gt;boto&lt;/strong&gt;, que quan l'apretem és quan s'enviarà el missatge.&lt;/li&gt;
&lt;li&gt;Un &lt;strong&gt;TextView&lt;/strong&gt;, anomenat &lt;strong&gt;area&lt;/strong&gt;, on anirà tot el xat (amb fons blanc)&lt;/li&gt;
&lt;li&gt;Un &lt;strong&gt;Spinner&lt;/strong&gt;, per a poder seleccionar el xat entre uns quants xats (dalt de tot)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="138"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="139"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="199"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="139"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="140">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_editionFolder"></string>
              <string value="text/edition/"></string>
              <string role="key" value="_editionResources"></string>
              <list>
               <string value="text.js"></string>
              </list>
              <string role="key" value="_exportFolder"></string>
              <none></none>
              <string role="key" value="_exportResources"></string>
              <list></list>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="141">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="222_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="140"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;I aquest seria l' &quot;esquelet&quot; del programa:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.widget.*
import java.text.SimpleDateFormat
import java.util.*

import kotlinx.android.synthetic.main.activity_main.*

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {

        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        boto.text = &quot;Enviar&quot;
        val pantPrincipal = this

        // Referències a la Base de Dades i als documents

        // Exemple de llegir tots els documents d'una col·lecció
        // Per a triar el xat

        // Exemple de lectura única: AddOnSuccessListener()
        // Per a posar el títol. Sobre /Xats/XatProva/nomXat

        // Exemple de listener de lectura contínua addSnapshotListener() sobre un document
        // Per a posar l'últim missatge registrat. Sobre /Xats/XatProva/ultimMissatge

        // Exemple de listener de lectura contínua addSnapshotListener() sobre una col·lecció
        // Per a posar tota la llista de missatges. Sobre /Xats/XatProva/missatges

        // Per a guardar dades
        // Primer sobre /Xats/XatProva/ultimUsuari i /Xats/XatProva/ultimMissatge
        // Després també com a documents en la col·lecció /Xats/XatProva/missatges
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="141"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="139"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="222"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="139"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="62"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20FIREBASE:4%20-%20Cloud%20Firestore%20%28CF%29:4.3%20CF%3A%20Utilitzaci%C3%B3%20des%20d%27Android"></string>
           <string role="key" value="parent"></string>
           <reference key="92"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="144">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="4.3.1 CF-Android: Connexió"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="142">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="143">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="209_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="142"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;L'accés és extraordinàriament fàcil gràcies als assistents que ens proporciona el propi Android Studio.&lt;/p&gt;
&lt;p&gt;Anem a veure els passos per a poder connectar des de la nostra aplicació d'Android, i els explicarem un a un. Són els que ens marca l'assistent, que haurem d'invocar sobre el nostre projecte ja creat, i que es crida des de  &lt;strong&gt;Tools --&amp;gt; Firebase --&amp;gt; Cloud Firestore&lt;/strong&gt;. En l'última versió d'Android Studio ens permet trir el codi d'exemple directament en KOTLIN, i així ens estalviem la traducció de Java a Kotlin&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_3_1_1.png&quot; alt=&quot;&quot; width=&quot;1461&quot; height=&quot;807&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Connectar l'aplicació a Firebase Cloud Firestore&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_3_1_2.png&quot; alt=&quot;&quot; width=&quot;1461&quot; height=&quot;807&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;b&gt;&lt;u&gt;NOTA IMPORTANT&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Podria donar-se el cas, depenent de la versió d'Android Studio (i altres coses, com que el projecte tinga errors i/o avisos) que done un error en apretar el botó de Connect to Firebase. I és que sembla que és molt delicat aquest assistent, i si hi ha qualsevol warning o error no deixa continuar:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_3_3_1_1_5.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;828&quot; height=&quot;161&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Per a solucionar-lo, a banda de revisar si tenim algun error o avís, senzillament afegim al final del fitxer &lt;strong&gt;gradle.properties:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;android.suppressUnsupportedCompileSdk=32&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En apretar el botó de&lt;strong&gt; Connect to Firebase&lt;/strong&gt;, si no estàvem connectats amb el compte de Google al Firebase se'ns obrirà finestra d'un navegador per a connectar. Podria donar-se el cas que ens diguera que Android Studio vol accedir a les dades de la Base de Dades. Òbviament ho haurem de permetre:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_3_1_2.png&quot; alt=&quot;&quot; width=&quot;402&quot; height=&quot;725&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Una vegada autenticats en Firebase, des de l'entorn d'Android Studio ens ofereix la possibilitat de crear una aplicació nova (una Base de Dades nova) o utilitzar alguna de les que ja tenim. Utilitzarem la que ens ha servit de prova fins el moment:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_3_1_3.png&quot; alt=&quot;&quot; width=&quot;1406&quot; height=&quot;807&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Quan haja connectat substituirà el botó &lt;strong&gt;Connect to Firebase&lt;/strong&gt;, per una etiqueta que dirà &lt;strong&gt;connected&lt;/strong&gt;, en verd.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Afegir la Base de Dades a la nostra aplicació&lt;/p&gt;
&lt;p&gt;En aquest segon pas, quan apretem el botó &lt;strong&gt;Add the Cloud Firestore SDK to your app&lt;/strong&gt;, ens dirà els canvis que farà per a incorporar les coses necessàries per a poder connectar.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_3_1_4.png&quot; alt=&quot;&quot; width=&quot;738&quot; height=&quot;438&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Com veieu es tracta d'incorporar les llibreries necessàries de Firebase.&lt;/p&gt;
&lt;p&gt;Igual que abans, substituirà el botó &lt;strong&gt;Add the Cloud Firestore SDK in your app&lt;/strong&gt;, per una etiqueta que dirà &lt;strong&gt;Dependencies set up correctly&lt;/strong&gt;, en verd. És una bona guia per saber en quin punt estem.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Permetre l'accés als usuaris, si es precís canviant les regles d'accés a la Base de Dades&lt;/p&gt;
&lt;p&gt;Com que Runtime Database i Cloud Firestore, encara que sembla que estan compartint la Base de Dades, en realitat no es pot accedir d'una a l'altra, igual ens passarà amb les &lt;strong&gt;regles d'accés&lt;/strong&gt; (&lt;strong&gt;Rules&lt;/strong&gt;). Segurament ho tindrem bé, perquè ja ho havíem controlat en la part d'&lt;strong&gt;IntelliJ&lt;/strong&gt;, però encara així és convenient pegar-li una miradeta. Recordeu que és des de la&lt;strong&gt; consola de Firebase&lt;/strong&gt;, entrant al &lt;strong&gt;Cloud Firestore&lt;/strong&gt;, i anant a la pestanya &lt;strong&gt;Rules&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_3_1_5.png&quot; alt=&quot;&quot; width=&quot;1199&quot; height=&quot;652&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Observeu que en aquest exemple he posat que es pot connectar qualsevol fins al 30-12-2020. Inicialment dóna un mes, però si no voleu tenir problemes, ho podeu allargar canviant la data.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Inicialitzar Cloud Firestore&lt;/p&gt;
&lt;p&gt;És només una sentència per a inicialitzar la referència a la BD de Cloud Firestore, i és de tipus FirebaseFirestore.&lt;/p&gt;
&lt;p&gt;Després de copiar-la, només ens faltarà importar &lt;strong&gt;Firebase&lt;/strong&gt; i després &lt;strong&gt;firestore&lt;/strong&gt; amb &lt;strong&gt;Alt-Intro&lt;/strong&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_3_1_6.png&quot; alt=&quot;&quot; width=&quot;1461&quot; height=&quot;807&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ara ja podríem executar el programa per veure si de moment van bé les coses.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En el moment de fer aquestos apunts salta el següent error:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_3_1_7.png&quot; alt=&quot;&quot; width=&quot;886&quot; height=&quot;84&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;que com es veu és molt fàcil d'arreglar: senzillament és pujar el &lt;strong&gt;minSdkVersion&lt;/strong&gt; de 16 a 19 en el &lt;strong&gt;build.gradle&lt;/strong&gt; de la app&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Copiar les sentències per a escriure i per a llegir (millor dit per a detectar els canvis en temps real)&lt;/p&gt;
&lt;p&gt;Ens diu un exemple de les sentències a copiar per a poder poder fer referència a la Base de Dades, per a guardar una informació a la Base de Dades i també per a detectar un canvi en la Base de Dades i poder obtenir el nou valor. No les posarem en aquest exemple, ja que suposaria una estructura de dades completament diferent a la que volem, i que no ens interessa. Ho veurem tot en el proper punt.&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9269"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="209_209_2.512"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="145">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="142"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_3_1_5.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_3_1_5.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="acddc2c286dd8a2e1099190bd4e660bf"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="143"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9271"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="209_209_2.513"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="146">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="142"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_3_1_2.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_3_1_2.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="ec86611e9e88768a8858af4c40a3445d"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="143"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9277"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="209_209_2.514"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="147">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="142"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_3_1_2.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_3_1_2.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="41ba16c9f3d5edc61a47e4f385d1b94d"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="143"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9285"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="209_209_2.515"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="148">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="142"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_3_1_1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_3_1_1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="9bf07688a3aab074326b8eb3b70d3f36"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="143"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9299"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="209_209_2.516"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="149">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="142"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_3_1_3.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_3_1_3.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="b1eb5c3b14537f196c94db4794b4e839"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="143"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9314"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="209_209_2.517"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="150">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="142"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_3_1_7.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_3_1_7.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="492ce3321b7defe01f033ed76ffb2563"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="143"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9331"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="209_209_2.518"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="151">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="142"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_3_1_4.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_3_1_4.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="a302beabc0607e70d9eb08213ecec36b"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="143"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9337"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="209_209_2.519"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="152">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="142"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_3_1_6.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_3_1_6.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="e4349273c75c62d1e737915388e9bbf6"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="143"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="143"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="520"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="144"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="209"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="144"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="145"></reference>
                  <reference key="146"></reference>
                  <reference key="147"></reference>
                  <reference key="148"></reference>
                  <reference key="149"></reference>
                  <reference key="150"></reference>
                  <reference key="151"></reference>
                  <reference key="152"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="63"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:4%20-%20Cloud%20Firestore%20%28CF%29:4.3%20CF%3A%20Utilitzaci%C3%B3%20des%20d%27Android:4.3.1%20CF-Android%3A%20Connexi%C3%B3"></string>
              <string role="key" value="parent"></string>
              <reference key="139"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="155">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="4.3.2 CF-Android: Accés a les dades"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="153">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="154">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="220_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="153"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Referència a la Base de Dades i a les dades concretes a les quals volem accedir&lt;/p&gt;
&lt;p&gt;La referència a la Base de Dades l'havíem completada en el punt anterior, però la tornem a posar ací per més comoditat.&lt;/p&gt;
&lt;p&gt;Podrem fer referència a cada &lt;strong&gt;col·lecció&lt;/strong&gt; i/o a cada &lt;strong&gt;document&lt;/strong&gt; de cada col·lecció&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Referències a la Base de Dades i als documents
        val db = Firebase.firestore
        val docRef = db.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="154"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="155"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="213"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="155"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="156">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="157">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="221_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="156"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Guardar dades&lt;/p&gt;
&lt;p&gt;Per a guardar dades, ens podem plantejar 3 operacions d'escriptura sobre el document:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Sobreescriure'l tot: ho farem amb el mètode &lt;strong&gt;set()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Esborrar-lo tot: amb el mètode &lt;strong&gt;delete()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Modificar-lo: amb el mètode &lt;strong&gt;update()&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Excepte per esborrar, per a les altres operacions ens fa falta saber l'estructura del document. Per això tant mètode &lt;strong&gt;set()&lt;/strong&gt; com el mètode &lt;strong&gt;update()&lt;/strong&gt; accepten com a paràmetre no una única dada, sinó una estructura que puga arribar a reflectir el document. Acceptaran com a paràmetre un &lt;strong&gt;Map&amp;lt;String, Object&amp;gt;&lt;/strong&gt;, on podrem col·locar les claus i els valors de tots els membres del document. Cada valor pot ser dels tipus que vam practicar en el punt anterior: string, number, boolean, array, map, ...&lt;/p&gt;
&lt;p&gt;La manera de col·locar un element en una estructura &lt;strong&gt;Map&amp;lt;&amp;gt;&lt;/strong&gt; és amb el mètode &lt;strong&gt;put()&lt;/strong&gt;, que acceptarà dos paràmetres: la clau i el valor.&lt;/p&gt;
&lt;p&gt;En el nostre exemple guardarem en el moment d'apretar el botó. Inicialment ho farem sobre &lt;strong&gt;/Xats/XatProva/ultimUsuari &lt;/strong&gt; i &lt;strong&gt;/Xats/XatProva/ultimMissatge&lt;/strong&gt;, encara que després ho canviarem. I com vam comentar en l'apartat d'&lt;strong&gt;IntelliJ&lt;/strong&gt;, ens convé el mètode &lt;strong&gt;update&lt;/strong&gt;, per a no esborrar la resta del document (per exemple el camp &lt;strong&gt;nomXat&lt;/strong&gt;)&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Per a guardar dades
        // Primer sobre /Xats/XatProva/ultimUsuari i /Xats/XatProva/ultimMissatge
        // Després també com a documents en la col·lecció /Xats/XatProva/missatges
        boto.setOnClickListener {
            val dades = HashMap&amp;lt;String, Any&amp;gt;()
            dades[&quot;ultimUsuari&quot;] = usuari.text.toString()
            dades[&quot;ultimMissatge&quot;] = text.text.toString()
            docRef.update(dades)

            text.setText(&quot;&quot;)
        }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="157"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="155"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="214"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="155"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="158">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="159">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="222_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="158"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Recuperar dades&lt;/p&gt;
&lt;p&gt;També ens plantejarem els dos casos que ja ens vam plantejar en Realtime Database:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Una única lectura&lt;/li&gt;
&lt;li&gt;Un listener que es quede escoltant per si hi ha canvis&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h2&gt;Listener de lectura única: addOnSuccessListener()&lt;/h2&gt;
&lt;p&gt;Ara des de Android, per a fer la lectura única també ens plantejarem un listener, que quedarà més sòlid i així poder actuar quan estiguem segurs que la dada ha arribat.&lt;/p&gt;
&lt;p&gt;En realitat tenim més d'un listener per a comprovar com ha anat una lectura:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;addOnSuccessListener() &lt;/strong&gt;s'activarà quan la tasca de lectura finalitza de forma exitosa&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;addOnFailureListener() &lt;/strong&gt;s'activarà quan la tasca de lectura NO ha finalitzat bé&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;addOnCompleteListener()&lt;/strong&gt; s'activarà quan la tasca de lectura ha finalitzat, de forma exitosa o no. El més normal serà comprovar dins d'ell si ha anat bé&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per simplificar, en aquest moment només tractarem el primer dels 3, ja que ens assegura que la lectura ha anat bé. Quan això haja passat, ens arribarà al paràmetre (de tipus &lt;strong&gt;DocumentSnapshot&lt;/strong&gt;) una còpia de les dades i sobre ell podrem utilitzar:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;getData()&lt;/strong&gt; per a obtenir tot el document en un &lt;strong&gt;Map&amp;lt;String,Object&amp;gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getId()&lt;/strong&gt; per a obtenir el nom del document&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;get(&lt;em&gt;nomClau&lt;/em&gt;) &lt;/strong&gt;per a obtenir directament el valor d'una clau del document&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getString(&lt;em&gt;nomClau&lt;/em&gt;) &lt;/strong&gt;per a obtenir el valor de la clau en forma de string&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getDouble(&lt;em&gt;nomClau&lt;/em&gt;) &lt;/strong&gt;per a obtenir el valor de la clau en forma de double&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;L'exemple d'única lectura el farem per a posar el títol de l'aplicació, com en l'exemple del Realtime Database.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Exemple de lectura única: AddOnSuccessListener()
        // Per a posar el títol. Sobre /Xats/XatProva/nomXat
        docRef.get().addOnSuccessListener { documentSnapshot -&amp;gt;
            setTitle(documentSnapshot.getString(&quot;nomXat&quot;))
        }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;/p&gt;
&lt;h2&gt;Listener que es queda escoltant: addSnapshotListener()&lt;/h2&gt;
&lt;p&gt;De forma paral·lela al Realtime Database, si volem rebre una notificació de quan hi haja un canvi en el document que ens interessa, sobre una referència a aquest document ens muntarem un listener, en aquest cas amb el mètode &lt;strong&gt;addSnapshotListener()&lt;/strong&gt;. Al mètode &lt;strong&gt;onEvent()&lt;/strong&gt; que s'ha de sobreescriure arribarà un paràmetre de tipus &lt;strong&gt;DocumentSnapshot&lt;/strong&gt;, que serà una còpia del document. Com en el cas anterior podrem fer sobre ell un &lt;strong&gt;getData()&lt;/strong&gt; per a obtenir tot el document, &lt;strong&gt;getString(&lt;em&gt;nomClau&lt;/em&gt;) &lt;/strong&gt;per a obtenir el valor de la clau com un string, etc.&lt;/p&gt;
&lt;p&gt;En el nostre exemple, de moment l'utilitzem tant per a posar l'últim missatge com per a anar omplit l'àrea central amb el xat.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Exemple de listener de lectura contínua addSnapshotListener() sobre un document
        // Per a posar l'últim missatge registrat. Sobre /Xats/XatProva/ultimMissatge
         docRef.addSnapshotListener { documentSnapshot, e -&amp;gt;
             ultim.text = documentSnapshot!!.getString(&quot;ultimMissatge&quot;)
             area.append(&lt;documentsnapshot&gt;documentSnapshot!!.getString(&quot;ultimUsuari&quot;) + &quot;: &quot; + &lt;/documentsnapshot&gt;documentSnapshot!!.getString(&quot;ultimMissatge&quot;) + &quot;\n&quot;)
         }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El més desitjable seria tractar els errors, cosa que no hem fet en aquest moment per simplicitat.&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="159"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="155"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="215"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="155"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="160">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="161">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="223_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="160"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Guardar documents&lt;/p&gt;
&lt;p&gt;Ja sabem que l'estructura és de col·leccions i documents, i que dins d'un document puc guardar col·leccions, en les quals hi haurà documents, ... amb una estructura que pot ser recursiva, convida a organitzar d'aquesta manera la informació: en compte d'utilitzar llistes (que també es pot però no són tan pràctiques), millor organitzar-ho en forma de subcol·leccions i documents. Anem a repetir el ja fet en el moment d'&lt;strong&gt;IntelliJ&lt;/strong&gt;, acoplant-lo a Android.&lt;/p&gt;
&lt;p&gt;Per tant ens és necessària l'operació d'afegir un document a una col·lecció. Això en un principi ho aconseguiríem amb el mètode &lt;strong&gt;set()&lt;/strong&gt; sobre un document nou de la col·lecció:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;database.collection(&quot;nomCol&quot;).document(&quot;nomDoc&quot;).set(dades)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;però això ens obligaria a posar un nom a cada document. Ja havíem vist que Cloud Firestore era capaç de generar un nom de document que no es puga repetir. Des de Java s'aconsegueix amb el mètode &lt;strong&gt;add()&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;db.collection(&quot;nomCol&quot;).add(dades)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;però que en el nostre cas, per ser una subcol·lecció és un poc més llarg&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;db.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).add(dades)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;L'estructura de les dades la podem fer amb un &lt;strong&gt;Map&amp;lt;string,Any&amp;gt;&lt;/strong&gt;, i posar-li en el nostre cas l'usuari i el missatge. D'aquesta manera ens quedaria ara el procediment en apretar el botó d'enviar el missatge, on a banda del que teníem abans per a modificar &lt;strong&gt;ultimMissatge&lt;/strong&gt; i &lt;strong&gt;ultimUsuari&lt;/strong&gt;, ara afegirem el document nou. Ens haurem de definir la classe &lt;strong&gt;Missatge&lt;/strong&gt;, que de moment només té les propietats &lt;strong&gt;nom&lt;/strong&gt; i &lt;strong&gt;contingut&lt;/strong&gt;:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;Missatge&lt;/span&gt;(&lt;span style=&quot;color: #0033b3;&quot;&gt;var &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;nom&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;, &lt;span style=&quot;color: #0033b3;&quot;&gt;var &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;contingut&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt;I el codi quan apretem el botó de moment quedarà així:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Per a guardar dades
        // Primer sobre /Xats/XatProva/ultimUsuari i /Xats/XatProva/ultimMissatge
        // Després també com a documents en la col·lecció /Xats/XatProva/missatges
        boto.setOnClickListener {
            val dades = HashMap&amp;lt;String, Any&amp;gt;()
            dades[&quot;ultimUsuari&quot;] = usuari.text.toString()
            dades[&quot;ultimMissatge&quot;] = text.text.toString()
            docRef.update(dades)

            val m = Missatge(usuari.text.toString(), text.text.toString())
            db.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).add(m)
            text.setText(&quot;&quot;)
        }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="161"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="2"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="155"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="216"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="155"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="162">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="163">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="224_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="162"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Recuperar documents modificats&lt;/p&gt;
&lt;p&gt;Ja només ens queda detectar els canvis en els documents de la col·lecció, per a afegir a l'àrea central els documents afegits. També és un &lt;strong&gt;addSnapshotListener()&lt;/strong&gt;, però ara l'apliquem a una col·lecció (no a un document). El resultat és que d'una forma molt còmoda podrem detectar els documents afegits, els modificats i fins i tot els esborrats.&lt;/p&gt;
&lt;p&gt;Ací tenim el fragment de programa que ens ho permetrà. En aquest exemple només hem deixat el cas de &lt;strong&gt;document afegit&lt;/strong&gt;, i no hem posat els casos de &lt;strong&gt;document modificat&lt;/strong&gt; i &lt;strong&gt;document esborrat&lt;/strong&gt;, ja que en aquest exemple no ho utilitzem. Haurem d'importar si &lt;strong&gt;DocumentChange&lt;/strong&gt; no el teníem importat encara.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Exemple de listener de lectura contínua addSnapshotListener() sobre una col·lecció
        // Per a posar tota la llista de missatges. Sobre /Xats/XatProva/missatges
        db.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).addSnapshotListener { snapshots, e -&amp;gt;
                for (dc in snapshots!!.documentChanges) {
                    when (dc.type) {
                        DocumentChange.Type.ADDED -&amp;gt; {
                            area.append( dc.document.getString(&quot;nom&quot;) + &quot;: &quot; + dc.document.getString(&quot;contingut&quot;) + &quot;\n&quot;)
                        }
                    }
                }
         }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I recordeu que ara hem d'eliminar o comentar l'altre moment que què actualitzàvem &lt;strong&gt;area&lt;/strong&gt; amb el contingut de &lt;strong&gt;ultimUsuari &lt;/strong&gt;i &lt;strong&gt;ultimMissatge&lt;/strong&gt; (jo el tenia en la línia 42)&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;//area.append(documentSnapshot!!.getString(&quot;ultimUsuari&quot;) + &quot;: &quot; + documentSnapshot!!.getString(&quot;ultimMissatge&quot;) + &quot;\n&quot;)&lt;br /&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;És de destacar que ara la còpia de les dades, el snapshot, és en realitat un &lt;strong&gt;QuerySnapshot&lt;/strong&gt;. I és que nosaltres no hem fet cap consulta sobre els documents de la col·lecció, però és possible fer-la. Per exemple es podria seleccionar per mig d'una query tots els documents en què l'usuari és un determinat. Aleshores detectaríem els documents afegits, modificats o esborrats d'aquest usuari. Ho faríem en el moment de declarar el &lt;strong&gt;addSnapshotListener()&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;db.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).whereEqualTo(&quot;nom&quot;, &quot;Usuari3&quot;).addSnapshotListener&lt;querysnapshot&gt; {
&lt;/querysnapshot&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;O també podríem ordenar els documents per algun camp. Açò en realitat seria necessari per a poder ordenar els missatges, ja que el nom del document auto-generat per Cloud Firestore no és consecutiu, sinó aleatori, i per tant perfectament un document nou tinga un nom anterior a alguns dels existents. Ho arreglaríem fàcilment posant un camp més amb la data i ordenant per aquest camp amb &lt;strong&gt;orderBy()&lt;/strong&gt; (que aniria en el lloc del &lt;strong&gt;whereEqualTo()&lt;/strong&gt; de la sentència anterior). Ho farem en l'exemple complet de la següent pregunta.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Un altre exemple. Anem a fer una lectura única de tots els documents de la col·lecció principal &lt;strong&gt;Xats&lt;/strong&gt;. Fins el moment hem treballat sempre sobre el document &lt;strong&gt;XatProva&lt;/strong&gt;, però ho anem a generalitzar per a accedir a més d'un xat.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;De moment ens conformarem amb fer una lectura única de tots els documents del xat per a mostrar-los en un Spinner. Posteriorment, en l'exemple complet de la següent pregunta intentarem triar un xat o un altre per a que ens mostre els missatge de l'un o de l'altre.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per a fer aquesta lectura única, ara utilitzarem un &lt;strong&gt;addOnCompletedListener()&lt;/strong&gt; en compte del &lt;strong&gt;addOnSuccessLitener()&lt;/strong&gt; de l'altra ocasió, i així veurem un poc la diferència de plantejament.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Exemple de llegir tots els documents d'una col·lecció
        // Per a triar el xat
        db.collection(&quot;Xats&quot;).get().addOnCompleteListener { task -&amp;gt;
            if (task.isSuccessful) {
                val opcions = ArrayList&amp;lt;String&amp;gt;&lt;string&gt;()
                for (document in task.result!!) {
                    opcions.add(document.id)
                }
                val adaptador = ArrayAdapter(pantPrincipal, android.R.layout.simple_spinner_item, opcions)
                adaptador.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
                comboXats.adapter = adaptador
            } else {
            }
        }
&lt;/string&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Observeu que ara mirem si s'ha completat satisfactòriament la tasca amb &lt;strong&gt;task.isSuccessful()&lt;/strong&gt;. Per simplicitat ara no fem res si no ha tingut èxit la lectura. Únicament tractem quan sí que ha tingut èxit, que aprofitem per a omplir el &lt;strong&gt;Spinner&lt;/strong&gt; &lt;strong&gt;comboXats&lt;/strong&gt; a partir d'un &lt;strong&gt;ArrayAdapter&lt;/strong&gt;.&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;
&lt;p&gt;En aquesta imatge es veu el resultat, on s'intenta explicar cadascuna de les coses:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_4_3_2_1(mod).png&quot; alt=&quot;&quot; width=&quot;740&quot; height=&quot;740&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;De moment el Spinner no fa res quan seleccionem una opció.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ho intentarem en l'exemple complet de la següent pregunta.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;De moment el codi ha quedat així:&lt;span style=&quot;color: #0033b3;&quot;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.widget.*
import com.google.firebase.firestore.DocumentChange
import com.google.firebase.firestore.ktx.firestore
import com.google.firebase.ktx.Firebase
import java.text.SimpleDateFormat
import java.util.*

import kotlinx.android.synthetic.main.activity_main.*

class Missatge(var nom: String, var contingut: String)

class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {

        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        boto.text = &quot;Enviar&quot;
        val pantPrincipal = this

        // Referències a la Base de Dades i als documents
        val db = Firebase.firestore
        val docRef = db.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)

        // Exemple de llegir tots els documents d'una col·lecció
        // Per a triar el xat
        db.collection(&quot;Xats&quot;).get().addOnCompleteListener { task -&amp;gt;
            if (task.isSuccessful) {
                val opcions = ArrayList&amp;lt;String&amp;gt;()
                for (document in task.result!!) {
                    opcions.add(document.id)
                }
                val adaptador = ArrayAdapter(pantPrincipal, android.R.layout.simple_spinner_item, opcions)
                adaptador.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
                comboXats.adapter = adaptador
            } else {
            }
        }

        // Exemple de lectura única: AddOnSuccessListener()
        // Per a posar el títol. Sobre /Xats/XatProva/nomXat
        docRef.get().addOnSuccessListener { documentSnapshot -&amp;gt;
            setTitle(documentSnapshot.getString(&quot;nomXat&quot;))
        }

        // Exemple de listener de lectura contínua addSnapshotListener() sobre un document
        // Per a posar l'últim missatge registrat. Sobre /Xats/XatProva/ultimMissatge
        docRef.addSnapshotListener { documentSnapshot, e -&amp;gt;
            ultim.text = documentSnapshot!!.getString(&quot;ultimMissatge&quot;)
            //area.append(documentSnapshot!!.getString(&quot;ultimUsuari&quot;) + &quot;: &quot; + documentSnapshot!!.getString(&quot;ultimMissatge&quot;) + &quot;\n&quot;)
        }

        // Exemple de listener de lectura contínua addSnapshotListener() sobre una col·lecció
        // Per a posar tota la llista de missatges. Sobre /Xats/XatProva/missatges
        db.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).addSnapshotListener { snapshots, e -&amp;gt;
            for (dc in snapshots!!.documentChanges) {
                when (dc.type) {
                    DocumentChange.Type.ADDED -&amp;gt; {
                        area.append( dc.document.getString(&quot;nom&quot;) + &quot;: &quot; + dc.document.getString(&quot;contingut&quot;) + &quot;\n&quot;)
                    }
                }
            }
        }
        // Per a guardar dades
        // Primer sobre /Xats/XatProva/ultimUsuari i /Xats/XatProva/ultimMissatge
        // Després també com a documents en la col·lecció /Xats/XatProva/missatges
        boto.setOnClickListener {
            val dades = HashMap&amp;lt;String, Any&amp;gt;()
            dades[&quot;ultimUsuari&quot;] = usuari.text.toString()
            dades[&quot;ultimMissatge&quot;] = text.text.toString()
            docRef.update(dades)

            val m = Missatge(usuari.text.toString(), text.text.toString())
            db.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;).collection(&quot;missatges&quot;).add(m)
            text.setText(&quot;&quot;)
        }

    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9286"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="217_224_2.70"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="164">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="162"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_4_3_2_1(mod).png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_4_3_2_1(mod).png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="74be1dfddf0f8e7ff459b27a1db08264"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="163"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="163"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="71"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="155"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="217"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="155"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="164"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="65"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:4%20-%20Cloud%20Firestore%20%28CF%29:4.3%20CF%3A%20Utilitzaci%C3%B3%20des%20d%27Android:4.3.2%20CF-Android%3A%20Acc%C3%A9s%20a%20les%20dades"></string>
              <string role="key" value="parent"></string>
              <reference key="139"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="167">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="4.3.3 CF-Android: Tot l'exemple"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="165">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="166">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="218_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="165"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value=""></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="166"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="167"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="218"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="167"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="168">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="169">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="219_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="168"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Anem a posar tot l'exemple del xat complet, això sí, amb algunes modificacions i millores:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tindrem la classe &lt;strong&gt;Missatge&lt;/strong&gt; amb les propietat &lt;strong&gt;nom&lt;/strong&gt; i &lt;strong&gt;contingut&lt;/strong&gt;. Posarem també la &lt;strong&gt;data&lt;/strong&gt; (com un &lt;strong&gt;Date&lt;/strong&gt;, aprofitant que també tenim aquest tipus en Cloud Firestore) per a poder ordenar els missatges cronològicament&lt;/li&gt;
&lt;li&gt;Llevem les coses que no s'utilitzen estrictament en aquest exemple&lt;/li&gt;
&lt;li&gt;El &lt;strong&gt;Spinner&lt;/strong&gt; anomenat &lt;strong&gt;comboXats &lt;/strong&gt;ara ja funcionarà. Per a no modificar les coses ja fetes, posarem la creació dels listeners en un mètode anomenat &lt;strong&gt;inicialitzar() &lt;/strong&gt;que per a tocar el menys possible estarà dins del listener de detectar els canvis en el Spinner, ja que ara els altres listeners dependran del xat triat. I haurem d'anar amb compte també de parar els listeners, ja creats. És a dir, si primer triem un xat, tindrem els listeners que apunten a ell. Si després triem un altre xat i creem els listeners una altra vegada per a que apunten al lloc correcte, els tindrem per duplicat. Hauríem de parar els primers listeners&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="169"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="167"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="219"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="167"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="170">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="171">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="220_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="170"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Classe Missatge&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;Missatge&lt;/span&gt;(&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;nom&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;, &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;data&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Date&lt;/span&gt;, &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;contingut&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;)&lt;/pre&gt;
&lt;p&gt;&lt;br /&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;I el programa (hem incorporat la classe &lt;strong&gt;Missatge&lt;/strong&gt; per més comoditat):&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.widget.*
import com.google.firebase.firestore.DocumentChange
import com.google.firebase.firestore.ListenerRegistration
import com.google.firebase.firestore.core.View
import com.google.firebase.firestore.ktx.firestore
import com.google.firebase.ktx.Firebase
import java.text.SimpleDateFormat
import java.util.*

import kotlinx.android.synthetic.main.activity_main.*

class Missatge(val nom: String, val data: Date, val contingut: String)

class MainActivity : AppCompatActivity() {

    var listenerUltimMissatge: ListenerRegistration? = null
    var listenerMissatges: ListenerRegistration? = null


    override fun onCreate(savedInstanceState: Bundle?) {

        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        boto.text = &quot;Enviar&quot;
        val pantPrincipal = this

        // Referències a la Base de Dades i als documents
        val db = Firebase.firestore
        var docRef = db.collection(&quot;Xats&quot;).document(&quot;XatProva&quot;)

        // Exemple de llegir tots els documents d'una col·lecció
        // Per a triar el xat
        db.collection(&quot;Xats&quot;).get().addOnCompleteListener { task -&amp;gt;
            if (task.isSuccessful) {
                val opcions = ArrayList&amp;lt;String&amp;gt;()
                for (document in task.result!!) {
                    opcions.add(document.id)
                }
                val adaptador = ArrayAdapter(pantPrincipal, android.R.layout.simple_spinner_item, opcions)
                adaptador.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
                comboXats.adapter = adaptador
            }
        }

        comboXats.onItemSelectedListener = object:AdapterView.OnItemSelectedListener {
            override fun onItemSelected(parent: AdapterView&amp;lt;*&amp;gt;?, view: android.view.View?, position: Int, id: Long) {

                // TODO Auto-generated method stub
                docRef = db.collection(&quot;Xats&quot;).document(comboXats.selectedItem.toString())
                area.text = &quot;&quot;
                inicialitzar()
            }

            private fun inicialitzar() {

                // Exemple de lectura única: AddOnSuccessListener()
                // Per a posar el títol. Sobre /Xats/XatProva/nomXat
                docRef.get().addOnSuccessListener { documentSnapshot -&amp;gt;
                    setTitle(documentSnapshot.getString(&quot;nomXat&quot;))
                }

                // Exemple de listener de lectura contínua addSnapshotListener() sobre un document
                // Per a posar l'últim missatge registrat. Sobre /Xats/XatProva/ultimMissatge
                // Si estava en marxa, el parem abans de tornar-lo a llançar
                if (listenerUltimMissatge != null)
                    listenerUltimMissatge!!.remove()

                listenerUltimMissatge = docRef.addSnapshotListener { documentSnapshot, e -&amp;gt;
                    ultim.text = documentSnapshot!!.getString(&quot;ultimMissatge&quot;)
                }

                // Exemple de listener de lectura contínua addSnapshotListener() sobre una col·lecció
                // Per a posar tota la llista de missatges. Sobre /Xats/XatProva/missatges
                // Si estava en marxa, el parem abans de tornar-lo a llançar
                if (listenerMissatges != null)
                    listenerMissatges!!.remove()

                listenerMissatges = docRef.collection(&quot;missatges&quot;).orderBy(&quot;data&quot;).addSnapshotListener { snapshots, e -&amp;gt;
                    for (dc in snapshots!!.documentChanges) {
                        when (dc.type) {
                            DocumentChange.Type.ADDED -&amp;gt; {
                                val sdf = SimpleDateFormat(&quot;dd-MM-yyyy HH:mm&quot;)
                                val dataFormatejada = sdf.format(dc.document.getDate(&quot;data&quot;))
                                area.append(dc.document.getString(&quot;nom&quot;) + &quot; (&quot; + dataFormatejada + &quot;): &quot; + dc.document.getString(&quot;contingut&quot;) + &quot;\n&quot;)
                            }
                        }
                    }
                }
                // Per a guardar dades
                // Primer sobre /Xats/XatProva/ultimUsuari i /Xats/XatProva/ultimMissatge
                // Després també com a documents en la col·lecció /Xats/XatProva/missatges
                boto.setOnClickListener {
                    val dades = HashMap&amp;lt;String, Any&amp;gt;()
                    dades[&quot;ultimUsuari&quot;] = usuari.text.toString()
                    dades[&quot;ultimMissatge&quot;] = text.text.toString()
                    docRef.update(dades)

                    val m = Missatge(usuari.text.toString(), Date(), text.text.toString())
                    docRef.collection(&quot;missatges&quot;).add(m)

                    text.setText(&quot;&quot;)
                }
            }


            override fun onNothingSelected(parent:AdapterView&amp;lt;*&amp;gt;) {
                // TODO Auto-generated method stub

            }
        }
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;code&gt;&lt;string&gt;&lt;/string&gt;&lt;/code&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="171"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="167"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="220"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="167"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="172">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_editionFolder"></string>
                 <string value="text/edition/"></string>
                 <string role="key" value="_editionResources"></string>
                 <list>
                  <string value="text.js"></string>
                 </list>
                 <string role="key" value="_exportFolder"></string>
                 <none></none>
                 <string role="key" value="_exportResources"></string>
                 <list></list>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="173">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="221_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="172"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;No apareixeran el missatges sense data.&lt;/p&gt;
&lt;p&gt;I el resultat és el de la imatge, en la qual es veu el contingut del xat &lt;strong&gt;Xat1&lt;/strong&gt;, amb uns quant misstges ja&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_3_3_3_1.1.png&quot; alt=&quot;&quot; width=&quot;403&quot; height=&quot;720&quot; /&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9322"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="221_221_2.67"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="174">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="172"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_3_3_3_1.1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_3_3_3_1.1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="0c67825f4282d219b2ae9db4650bebb3"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="173"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="173"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="68"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="167"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="221"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="167"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="174"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="66"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:4%20-%20Cloud%20Firestore%20%28CF%29:4.3%20CF%3A%20Utilitzaci%C3%B3%20des%20d%27Android:4.3.3%20CF-Android%3A%20Tot%20l%27exemple"></string>
              <string role="key" value="parent"></string>
              <reference key="139"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="177">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="5 - Cloud Storage"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="175">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_editionFolder"></string>
           <string value="text/edition/"></string>
           <string role="key" value="_editionResources"></string>
           <list>
            <string value="text.js"></string>
           </list>
           <string role="key" value="_exportFolder"></string>
           <none></none>
           <string role="key" value="_exportResources"></string>
           <list></list>
           <string role="key" value="_iDeviceDir"></string>
           <string value="text"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="text"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="176">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="223_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="175"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p style=&quot;text-align: justify;&quot;&gt;Cloud Storage ens permet guardar fitxers còmodament: fotos, vídeos, audios, ...&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Combinat amb Reltime Database o Cloud Firestore ens permet guardar les nostres dedes de forma eficient, ja que podem guardar en les primeres les referències als fitxers que pugem al Storage.&lt;/p&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="176"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="177"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="223"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="177"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="67"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="180">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="5.1 CS: Utilització des de l'entorn"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="178">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_editionFolder"></string>
              <string value="text/edition/"></string>
              <string role="key" value="_editionResources"></string>
              <list>
               <string value="text.js"></string>
              </list>
              <string role="key" value="_exportFolder"></string>
              <none></none>
              <string role="key" value="_exportResources"></string>
              <list></list>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="179">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="224_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="178"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p style=&quot;text-align: justify;&quot;&gt;L'entorn que ens ofereix Firebase per a gestionar Cloud Storage és molt senzill i no té cap secret, ja que ens permetrà pujar els fitxers, organitzant-los en subdirectoris, i també esborrar-los. En principi no necessitem més.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_1_1.png&quot; alt=&quot;&quot; width=&quot;1095&quot; height=&quot;453&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Si punxem en un fitxer podrem veure les seues característiques, i si el seleccionem podrem esborrar-lo o obrir-lo en una altra finestra.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_1_2.png&quot; alt=&quot;&quot; width=&quot;1084&quot; height=&quot;579&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Aquest entorn, de tan senzill, fins i tot es queda un poc curt, ja que no ens permetrà canviar el nom d'un fitxer, o moure'l a una carpeta, ...&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Si vulguérem fer algun canvi d'aquestos, canviar el nom o canviar de carpeta, ho hauríem de fer des d'un altre lloc, un altre navegador del Google Cloud Storage (&lt;a href=&quot;https://console.cloud.google.com/storage/browser&quot;&gt;https://console.cloud.google.com/storage/browser&lt;/a&gt;):&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_1_3.png&quot; alt=&quot;&quot; width=&quot;1153&quot; height=&quot;545&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;on es pot observar com en els 3 puntets de la dreta d'un fitxer ens apareixen moltes opcions com copiar, menejar, renomenar, ...&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Però nosaltres en principi tindrem prou amb la primera consola. Anem alerta de col·locar les coses al lloc, i si no estan, esborrem i col·loquem al lloc correcte.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ja que estem en la consola, controlem els permisos (&lt;strong&gt;Rules&lt;/strong&gt;) en la pestanya corresponent de la consola:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_1_4.png&quot; alt=&quot;&quot; width=&quot;1100&quot; height=&quot;509&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;En aquesta imatge s'aprecia que no hi haurà permís per a llegir ni escriure fora de la consola. Com que el que volem és accedir des de les aplicacions d'Eclipse i d'Android, substituirem el permís per aquest:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;allow read, write: if request.time &amp;lt; timestamp.date(2022, 6, 30);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_1_1.1.png&quot; alt=&quot;&quot; width=&quot;1259&quot; height=&quot;661&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;amb una data en la qual no ens pillem els dits.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Observeu com tant en la consola senzilla com en la del browser de GoogleCloud, ens posa una adreça, que en el meu cas és: &lt;strong&gt;gs://acces-a-dades-6e5a6.appspot.com&lt;/strong&gt;. Es tracta de l'adreça del &lt;strong&gt;bucket&lt;/strong&gt; (poal, contenidor) on estan col·locats els fitxers. Podem crear més &lt;strong&gt;buckets&lt;/strong&gt;, però no ho complicarem. Haurem de tenir clara la referència a aquest bucket per defecte.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="9274"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="224_224_2.136"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="181">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="178"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_5_1_3.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpk13NfD/T7_5_1_3.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="15863e674049840afe2f61781810ba8b"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="179"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="9291"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="224_224_2.137"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="182">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="178"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_5_1_4.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpk13NfD/T7_5_1_4.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="0f538c678af7f6575c126d26b9f6e913"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="179"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="9304"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="224_224_2.138"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="183">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="178"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_5_1_2.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpk13NfD/T7_5_1_2.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="2a5fab9bd436af5f5453fa33cb791b33"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="179"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="9308"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="224_224_2.139"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="184">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="178"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_5_1_1.1.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpk13NfD/T7_5_1_1.1.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="0ebfa26756a28d4ee45ae03fc25be3e9"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="179"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="9313"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="224_224_2.140"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="185">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="178"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="2"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="T7_5_1_1.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="/tmp/tmpk13NfD/T7_5_1_1.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="7db701104d55557aa637536c754fe6d8"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="179"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                   </list>
                   <string role="key" value="idevice"></string>
                   <reference key="179"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="141"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="180"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="224"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="180"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="181"></reference>
               <reference key="182"></reference>
               <reference key="183"></reference>
               <reference key="184"></reference>
               <reference key="185"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="68"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage:5.1%20CS%3A%20Utilitzaci%C3%B3%20des%20de%20l%27entorn"></string>
           <string role="key" value="parent"></string>
           <reference key="177"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="188">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="5.2 CS: Utilització des de IntelliJ"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="186">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="187">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="230_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="186"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value=""></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="187"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="188"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="229"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="188"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="189">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="190">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="232_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="189"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Exemple&lt;/p&gt;
&lt;p&gt;Practicarem tot el que ve a continuació sobre un programa gràfic. Serà molt més senzill que en els casos anteriors, ja que de moment només volem un lloc on tenir el nom de la imatge que volem baixar, i un lloc on visualitzar la imatge&lt;/p&gt;
&lt;p&gt;Aquest és el seu esquelet. Guardeu-lo en un fitxer anomenat &lt;strong&gt;Exemple_7_5_1_FirebaseCS_AgafarImatge&lt;/strong&gt;&lt;strong&gt;.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import javax.swing.JFrame
import java.awt.EventQueue
import javax.swing.JTextField
import javax.swing.JButton
import javax.swing.JLabel
import java.awt.BorderLayout
import javax.swing.JPanel
import java.awt.FlowLayout
import java.io.FileInputStream
import com.google.firebase.FirebaseOptions
import com.google.auth.oauth2.GoogleCredentials
import com.google.firebase.FirebaseApp
import com.google.cloud.storage.Bucket
import com.google.firebase.cloud.StorageClient
import java.nio.file.Paths
import java.awt.image.BufferedImage
import javax.imageio.ImageIO
import java.io.IOException
import java.nio.ByteBuffer
import java.io.ByteArrayInputStream
import javax.swing.ImageIcon
import java.io.File

class AgafarImatge_1 : JFrame() {
	val nomIm = JTextField(25)
	val boto = JButton(&quot;Agafar&quot;)

	val foto = JLabel()
	var bucket: Bucket? = null

	init {
		defaultCloseOperation = JFrame.EXIT_ON_CLOSE
		setBounds(100, 100, 900, 600)
		setLayout(BorderLayout())

		val panell1 = JPanel(FlowLayout())
		panell1.add(nomIm)
		panell1.add(boto)
		getContentPane().add(panell1, BorderLayout.NORTH)

		getContentPane().add(foto, BorderLayout.CENTER)

		boto.addActionListener { agafar() }


	}

	fun agafar() {
		// Instruccions per agafar la imatge
 
	}

}

fun main(args: Array&amp;lt;String&amp;gt;) {
	EventQueue.invokeLater {
		AgafarImatge_1().isVisible = true
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="190"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="188"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="231"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="188"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="69"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage:5.2%20CS%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ"></string>
           <string role="key" value="parent"></string>
           <reference key="177"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="193">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.2.1 CS-IntelliJ: Connexió"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="191">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="192">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="231_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="191"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value=""></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="192"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="193"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="230"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="193"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="194">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="195">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="233_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="194"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Drivers necessaris&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Els drivers necessaris són els mateixos que vam baixar-nos per al cas de &lt;strong&gt;Realtime Database&lt;/strong&gt;. Millor dit, estan inclosos en la llibreria que ens vam muntar, per tant aquesta feina la vam fer en el punt &lt;strong&gt;3.2.1&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="195"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="193"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="232"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="193"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="196">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="197">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="234_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="196"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Configuració&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Tampoc caldrà fer referència a la URL de l'aplicació Firebase, perquè quan especifiquem el bucket, li posarem l'adreça i amb això és suficient.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Recordeu que ens vam baixar un fitxer &lt;strong&gt;json&lt;/strong&gt; amb la clau privada que vam guardar a l'arrel del projecte (i del qual és molt convenient guardar còpia).&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	val serviceAccount = FileInputStream(&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;)

	val options = FirebaseOptions.Builder()
		.setCredentials(GoogleCredentials.fromStream(serviceAccount))
		.build()

	FirebaseApp.initializeApp(options)&lt;/code&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;No us oblideu de substituir el nom del fitxer json&lt;/strong&gt;.&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="197"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="193"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="233"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="193"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="198">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="199">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="235_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="198"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Referència al bucket de Cloud Storage&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Aquesta serà la diferència més gran amb el que farem en Android. Ací haurem de fer una referència explícita al &lt;strong&gt;bucket&lt;/strong&gt; que vam comentar en el punt anterior, mentre que en Android ens el podrem saltar, ja que la referència estarà implícitament. Ho farem a través de &lt;strong&gt;StorageClient&lt;/strong&gt;, mentre que en Android serà un altra classe.:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre class=&quot;  language-java&quot;&gt;&lt;code class=&quot;  language-java&quot;&gt;bucket = StorageClient.getInstance().bucket(&quot;acces-a-dades-6e5a6.appspot.com&quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Nota&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Podrém haver-ho definit diferent, especificant el bucket en el moment de definir les opcions. Aleshores, en el moment de crear el bucket no caldria passar-li el paràmetre.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	val serviceAccount = FileInputStream(&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;)

	val options = FirebaseOptions.Builder()
		.setCredentials(GoogleCredentials.fromStream(serviceAccount))
		.setStorageBucket(&quot;acces-a-dades-6e5a6.appspot.com&quot;)
		.build()

	FirebaseApp.initializeApp(options)
    
	bucket StorageClient.getInstance().bucket()&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="199"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="193"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="234"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="193"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="73"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage:5.2%20CS%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ:5.2.1%20CS-IntelliJ%3A%20Connexi%C3%B3"></string>
              <string role="key" value="parent"></string>
              <reference key="188"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="202">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.2.2 CS-IntelliJ: Accés a les dades"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="200">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="201">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="236_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="200"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p style=&quot;text-align: justify;&quot;&gt;Farem accés als fitxers de Cloud Storage per a llegir-los, per a baixar-los. Mencionarem el fet de guardar fitxers, però no l'utilitzarem tant.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Ho farem per mig del mètode &lt;strong&gt;get()&lt;/strong&gt; del &lt;strong&gt;bucket&lt;/strong&gt;, al qual li passarem el nom del fitxer que volem llegir, i ens tornarà un &lt;strong&gt;blob&lt;/strong&gt; (de cloud storage) amb el seu contingut.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val blob = bucket?.get(nomIm.getText())&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Aquest &lt;strong&gt;blob&lt;/strong&gt; podrem agafar-lo de dues maneres:&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;Baixant-lo a un fitxer temporal&lt;/li&gt;
&lt;li&gt;Agafant-lo directament en memòria&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;De la primera manera ho faríem així, baixem el fitxer a un fitxer auxiliar, i des d'alli el carreguem&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;		// Primera manera de llegir, amb un fitxer auxiliar
		val destFilePath = Paths.get(&quot;auxiliar.jpg&quot;)
		blob?.downloadTo(destFilePath)
		val image = ImageIO.read(destFilePath.toFile())
		foto.setIcon(ImageIcon(image))
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;De la segona manera ens muntem un reader (de Cloud Storage) per poder carregar-ho en memòria a un ByteBuffer&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;		//Segona manera de llegir: muntant un reader per a carregar a un ByteBuffer
		val im = ByteBuffer.allocate(1024 * 1024)
		blob?.reader()?.read(im)
		val image = ImageIO.read(ByteArrayInputStream(im.array()))
		foto.setIcon(ImageIcon(image))
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Qualsevol de les dues maneres ens hauria de funcionar bé, col·locant juntament amb la definició del blob en la funció que s'executa en apretar el botó, &lt;strong&gt;agafar()&lt;/strong&gt;. I aquest seria el resultat:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_2_2_1.png&quot; alt=&quot;&quot; width=&quot;900&quot; height=&quot;600&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Altres mètodes del &lt;strong&gt;bucket&lt;/strong&gt; que ens poden interessar són:&lt;/p&gt;
&lt;ul&gt;
&lt;li style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;get()&lt;/strong&gt;: agafa un fitxer, passant-li el nom i tornant un &lt;strong&gt;blob&lt;/strong&gt;. És el que hem utiitzat.&lt;/li&gt;
&lt;li style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;create()&lt;/strong&gt;: serveix per a pujar un fitxer al bucket; se li passen 2 paràmetres, el nom que tindrà el fitxer en el Clousd Storage, i el contingut, que se li pot passar en forma de ByteArray o de InputStream&lt;/li&gt;
&lt;li style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;list()&lt;/strong&gt;: torna un conjunt de blobs en forma de &lt;strong&gt;Page&amp;lt;Blob&amp;gt;&lt;/strong&gt;. De cada element blob podrem baixar-nos el contingut a un fitxer auxiliar, a un ByteBuffer, agafar el seu nom, ...&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9280"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="235_236_2.26"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="203">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="200"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_2_2_1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_2_2_1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="d2708d8b9e6dc272ba15246fcef92a82"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="201"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="201"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="27"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="202"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="235"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="202"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="203"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="74"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage:5.2%20CS%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ:5.2.2%20CS-IntelliJ%3A%20Acc%C3%A9s%20a%20les%20dades"></string>
              <string role="key" value="parent"></string>
              <reference key="188"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="206">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.2.3 CS-IntelliJ: Tot l'exemple"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="204">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="205">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="237_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="204"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Anem a ajuntar tot l'exemple que visualitza una imatge guardada en Cloud Storage, modificant-lo un poc: ens guardarem els noms de les imatges en un &lt;strong&gt;JComboBox&lt;/strong&gt;. I per a visualitzarla imatge, en compte d'un &lt;strong&gt;JLabel &lt;/strong&gt;utilitzarem un &lt;strong&gt;JButton&lt;/strong&gt;, així la imatge quedara centrada tan horitzontal com verticalment.&lt;/p&gt;
&lt;p&gt;El guardarem amb un altre nom, en el fitxer Kotlin &lt;strong&gt;Exemple_7_5_2_FirebaseCS_AgafarImatge&lt;/strong&gt;&lt;strong&gt;.kt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import javax.swing.JFrame
import java.awt.EventQueue
import javax.swing.JComboBox
import javax.swing.JLabel
import java.awt.BorderLayout
import javax.swing.JPanel
import java.awt.FlowLayout
import java.io.FileInputStream
import com.google.firebase.FirebaseOptions
import com.google.auth.oauth2.GoogleCredentials
import com.google.firebase.FirebaseApp
import com.google.cloud.storage.Bucket
import com.google.firebase.cloud.StorageClient
import java.nio.file.Paths
import java.awt.image.BufferedImage
import javax.imageio.ImageIO
import java.io.IOException
import java.nio.ByteBuffer
import java.io.ByteArrayInputStream
import javax.swing.ImageIcon
import java.io.File
import javax.swing.JButton

class AgafarImatge_2 : JFrame() {
	val nomIm = JComboBox&amp;lt;String&amp;gt;()

	val foto = JButton()
	var bucket: Bucket? = null

	init {
		defaultCloseOperation = JFrame.EXIT_ON_CLOSE
		setBounds(100, 100, 900, 600)
		setLayout(BorderLayout())

		val panell1 = JPanel(FlowLayout())
		panell1.add(nomIm)
		getContentPane().add(panell1, BorderLayout.NORTH)

		getContentPane().add(foto, BorderLayout.CENTER)

		val serviceAccount = FileInputStream(
			&quot;acces-a-dades-6e5a6-firebase-adminsdk-ei7uc-fcf7da56aa.json&quot;
		)

		val options = FirebaseOptions.Builder()
			.setCredentials(GoogleCredentials.fromStream(serviceAccount))
			.setStorageBucket(&quot;acces-a-dades-6e5a6.appspot.com&quot;)
			.build()

		FirebaseApp.initializeApp(options)

		bucket = StorageClient.getInstance().bucket()

		val blobs = bucket?.list()
		for (b in blobs!!.iterateAll())
			nomIm.addItem(b.getName())

		nomIm.addActionListener { agafar() }

	}

	fun agafar() {
		// Instruccions per agafar la imatge
		val blob = bucket?.get(nomIm.getSelectedItem().toString())

/*
		// Primera manera de llegir, amb un fitxer auxiliar
		val destFilePath = Paths.get(&quot;auxiliar.jpg&quot;)
		blob?.downloadTo(destFilePath)
		val image = ImageIO.read(destFilePath.toFile())
		foto.setIcon(ImageIcon(image))
*/
		//Segona manera de llegir: muntant un reader per a carregar a un ByteBuffer
		val im = ByteBuffer.allocate(1024 * 1024)
		blob?.reader()?.read(im)
		val image = ImageIO.read(ByteArrayInputStream(im.array()))
		foto.setIcon(ImageIcon(image))

	}

}

fun main(args: Array&amp;lt;String&amp;gt;) {
	EventQueue.invokeLater {
		AgafarImatge_2().isVisible = true
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I aquest seria el resultat:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_2_3_1.png&quot; alt=&quot;&quot; width=&quot;900&quot; height=&quot;600&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9327"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="236_237_2.26"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="207">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="204"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_2_3_1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_2_3_1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="8b187885c19eef552c4556ab60e5d21f"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="205"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="205"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="27"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="206"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="236"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="206"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="207"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="75"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage:5.2%20CS%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ:5.2.3%20CS-IntelliJ%3A%20Tot%20l%27exemple"></string>
              <string role="key" value="parent"></string>
              <reference key="188"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="210">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.2.4 CS-IntelliJ: Exemple ampliat, combinant amb Cloud Firestore"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="208">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="209">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="248_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="208"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Anem a fer un altre exemple, que serà el de CoffeeShops_Fragments, ja fet en el mòdul DI, i retocat en l'Annex d'Android, al qual vam incorporar una Base de Dades SQLite amb les dades (inclosa la imatge del cafè), i a la qual accedíem a través de la llibreria ROOM.&lt;/p&gt;
&lt;p&gt;Des d'&lt;strong&gt;IntelliJ&lt;/strong&gt; només ens plantegem accedir a Cloud Firestore i Cloud Storage per a agafar:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;De Cloud Firestore els documents de la col·lecció on està entre altres coses el nom de la imatge&lt;/li&gt;
&lt;li&gt;Amb aquest nom d'imatge anirem a Cloud Storage per a agafar-la&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;D'aquesta manera ens queda una pantalla molt senzilla, pràcticament com en l'exemple anterior, és a dir amb un &lt;strong&gt;JComboBox&lt;/strong&gt; amb el nom de les imatges, que ara agafarem de Cloud Firestore, i un &lt;strong&gt;JButton &lt;/strong&gt; per a mostrar la imatge.&lt;/p&gt;
&lt;p&gt;Li posarem ara el nom de &lt;strong&gt;Exemple_7_5_3_FirebaseCF-CS_CoffeeShops&lt;/strong&gt;&lt;strong&gt;.kt&lt;/strong&gt;. El codi està simplificat al màxim, llevant tractament d'errors i opcions. Observeu que estem connectant a l'usuari comú que tenim per a fer proves, &lt;strong&gt;ieselcaminas.ad@gmail.com&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import javax.swing.JFrame
import java.awt.EventQueue
import javax.swing.JComboBox
import javax.swing.JLabel
import java.awt.BorderLayout
import javax.swing.JPanel
import java.awt.FlowLayout
import java.io.FileInputStream
import com.google.firebase.FirebaseOptions
import com.google.auth.oauth2.GoogleCredentials
import com.google.firebase.FirebaseApp
import com.google.cloud.storage.Bucket
import com.google.firebase.cloud.StorageClient
import java.nio.file.Paths
import java.awt.image.BufferedImage
import javax.imageio.ImageIO
import java.io.IOException
import java.nio.ByteBuffer
import java.io.ByteArrayInputStream
import javax.swing.ImageIcon
import java.io.File
import javax.swing.JButton
import com.google.firebase.cloud.FirestoreClient
import com.google.cloud.firestore.DocumentChange
import com.google.cloud.firestore.Firestore

class CoffeeShops : JFrame() {
    val nomCafe = JComboBox&amp;lt;String&amp;gt;()
    val foto = JButton()

    var bucket: Bucket? = null
    var database: Firestore? = null

    init {
        defaultCloseOperation = JFrame.EXIT_ON_CLOSE
        setBounds(100, 100, 900, 600)
        setLayout(BorderLayout())

        val panell1 = JPanel(FlowLayout())
        panell1.add(nomCafe)
        getContentPane().add(panell1, BorderLayout.NORTH)

        getContentPane().add(foto, BorderLayout.CENTER)

        val serviceAccount = FileInputStream(&quot;xat-ad-firebase-adminsdk-my2d0-8c69944b34.json&quot;)

        val options = FirebaseOptions.builder()
            .setCredentials(GoogleCredentials.fromStream(serviceAccount))
            .build()

        FirebaseApp.initializeApp(options)

        database = FirestoreClient.getFirestore()
        bucket = StorageClient.getInstance().bucket(&quot;xat-ad.appspot.com&quot;)

        // Exemple de listener de lectura contínua addSnapshotListener() sobre una col·lecció
        // Per a posar tota la llista de missatges. Sobre /Xats/XatProva/missatges

        database?.collection(&quot;CoffeeShops&quot;)?.orderBy(&quot;nom&quot;)?.addSnapshotListener { snapshots, e -&amp;gt;
            for (dc in snapshots!!.getDocumentChanges()) {
                nomCafe.addItem(dc.getDocument().getString(&quot;nom&quot;))
            }
        }

        nomCafe.addActionListener { agafar() }

    }

    fun agafar() {
        //Primer agafem el nom de la imatge mirant el document que té el nom com el triat
        //Després agafem la imatge amb eixe nom
        database?.collection(&quot;CoffeeShops&quot;)?.whereEqualTo(&quot;nom&quot;, nomCafe.getSelectedItem())!!
            .addSnapshotListener { snapshots, e -&amp;gt;

                for (dc in snapshots!!.getDocumentChanges()) {
                    val blob = bucket?.get(&quot;CoffeeShops/&quot; + dc.getDocument().getString(&quot;imatge&quot;))

                    //Segona manera de llegir: muntant un reader per a carregar a un ByteBuffer
                    val im = ByteBuffer.allocate(1024 * 1024)
                    blob?.reader()?.read(im)
                    val image = ImageIO.read(ByteArrayInputStream(im.array()))
                    foto.setIcon(ImageIcon(image))
                }
            }
    }

}

fun main(args: Array&amp;lt;String&amp;gt;) {
    EventQueue.invokeLater {
        CoffeeShops().isVisible = true
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="209"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="210"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="248"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="210"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="76"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage:5.2%20CS%3A%20Utilitzaci%C3%B3%20des%20de%20IntelliJ:5.2.4%20CS-IntelliJ%3A%20Exemple%20ampliat%2C%20combinant%20amb%20Cloud%20Firestore"></string>
              <string role="key" value="parent"></string>
              <reference key="188"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="213">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="5.3 CS: Utilització des d'Android"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="211">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="text"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="text"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="212">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="239_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="211"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Ens basarem en un exemple similar al d'&lt;strong&gt;IntelliJ&lt;/strong&gt;. Primer només amb:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Un EditText per a introduir el nom de la imatge (&lt;strong&gt;nom&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Un botó per a fer l'acció en prémer-lo (&lt;strong&gt;boto&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Un ImageView per a visualitzarl a imatge (&lt;strong&gt;imatge&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Així, farem l'aplicació anomenada &lt;strong&gt;Tema7_FirebaseCS&lt;/strong&gt;, i en ella posarem aquest &lt;strong&gt;activity_main.xml&lt;/strong&gt;:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;EditText&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/nom&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;300dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;50dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;penyagolosa.jpg&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;Button&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/boto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;Button&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintHorizontal_bias&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0.755&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/nom&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;ImageView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/imatge&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/nom&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:srcCompat&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@tools:sample/backgrounds/scenic&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="212"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="213"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="238"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="213"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="72"></unicode>
           <string role="key" value="_package"></string>
           <reference key="2"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage:5.3%20CS%3A%20Utilitzaci%C3%B3%20des%20d%27Android"></string>
           <string role="key" value="parent"></string>
           <reference key="177"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list>
            <instance class="exe.engine.node.Node" reference="216">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.3.1 CS-Android: Connexió"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="214">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="215">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="238_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="214"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;L'accés és extraordinàriament fàcil gràcies als assistents que ens proporciona el propi Android Studio.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Al final de tot teniu un vídeo que repassa tots els passos per a poder connectar des de la nostra aplicació d'Android. A continuació els repassem i expliquem un a un. Són els que ens marca l'assistent, que haurem d'invocar sobre el nostre projecte ja creat, i que es crida des de  &lt;strong&gt;Tools --&amp;gt; Firebase --&amp;gt; Cloud Storage for Firebase&lt;br /&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_3_1_1.png&quot; alt=&quot;&quot; width=&quot;1151&quot; height=&quot;676&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Connectar l'aplicació a Firebase Cloud Firestore&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_3_1_2.png&quot; alt=&quot;&quot; width=&quot;1151&quot; height=&quot;676&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;nota_blau&quot;&gt;
&lt;p&gt;&lt;b&gt;&lt;u&gt;NOTA IMPORTANT&lt;/u&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Podria donar-se el cas, depenent de la versió d'Android Studio (i altres coses, com que el projecte tinga errors i/o avisos) que done un error en apretar el botó de Connect to Firebase. I és que sembla que és molt delicat aquest assistent, i si hi ha qualsevol warning o error no deixa continuar:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_3_3_1_1_5.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;828&quot; height=&quot;161&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Per a solucionar-lo, a banda de revisar si tenim algun error o avís, senzillament afegim al final del fitxer &lt;strong&gt;gradle.properties:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;android.suppressUnsupportedCompileSdk=32&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En apretar el botó de&lt;strong&gt; Connect to Firebase&lt;/strong&gt;, si no estàvem connectats amb el compte de Google al Firebase se'ns obrirà finestra d'un navegador per a connectar. Podria donar-se el cas que ens diguera que Android Studio vol accedir a les dades de la Base de Dades. Òbviament ho haurem de permetre:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_2_3_1_2.png&quot; alt=&quot;&quot; width=&quot;402&quot; height=&quot;725&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Una vegada autenticats en Firebase, des de l'entorn d'Android Studio ens ofereix la possibilitat de crear una aplicació nova (una Base de Dades nova) o utilitzar alguna de les que ja tenim. Utilitzarem la que ens ha servit de prova fins el moment:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_3_1_3.png&quot; alt=&quot;&quot; width=&quot;1355&quot; height=&quot;509&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Quan haja connectat substituirà el botó &lt;strong&gt;Connect to Firebase&lt;/strong&gt;, per una etiqueta que dirà &lt;strong&gt;connected&lt;/strong&gt;, en verd.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Afegir els drivers a la nostra aplicació&lt;/p&gt;
&lt;p&gt;En aquest segon pas, quan apretem el botó &lt;strong&gt;Add the Cloud Storage SDK to your app&lt;/strong&gt;, ens dirà els canvis que farà per a incorporar les coses necessàries per a poder connectar.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_3_1_3.1.png&quot; alt=&quot;&quot; width=&quot;720&quot; height=&quot;438&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Com veieu es tracta d'incorporar les llibreries necessàries de Firebase.&lt;/p&gt;
&lt;p&gt;Igual que abans, substituirà el botó &lt;strong&gt;Add the Cloud Storage SDK to your app&lt;/strong&gt;, per una etiqueta que dirà &lt;strong&gt;Dependencies set up correctly&lt;/strong&gt;, en verd. És una bona guia per saber en quin punt estem.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Permetre l'accés als usuaris, si es precís canviant les regles d'accés a la Base de Dades&lt;/p&gt;
&lt;p&gt;Encara que ja havíem arreglat les regles per a permetre l'accés durant un temps determinat, és convenient pegar-li una miradeta. Recordeu que és des de la&lt;strong&gt; consola de Firebase&lt;/strong&gt;, entrant al &lt;strong&gt;Storage&lt;/strong&gt;, i anant a la pestanya &lt;strong&gt;Rules&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_2_3_3_1_4.png&quot; alt=&quot;&quot; width=&quot;1071&quot; height=&quot;539&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Observeu que en aquest exemple he posat que es pot connectar qualsevol fins al 30-12-2020. Inicialment dóna un mes, però si no voleu tenir problemes, ho podeu allargar canviant la data.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Inicialitzar Storage&lt;/p&gt;
&lt;p&gt;És només una sentència per a inicialitzar la referència a Cloud Storage, i és de tipus &lt;strong&gt;StorageReference&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Encara que tinguem un projecte en Kotlin, la sentència d'exemple estarà en Java, però que en copiar-la la traduirà a Kotlin,i en definitiva quedarà així:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;mStorageRef &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;FirebaseStorage&lt;/span&gt;.getInstance().reference&lt;/pre&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Copiar les sentències per a baixar la imatge&lt;/p&gt;
&lt;p&gt;També ens dóna dos exemples, de pujar i de baixar una imatge. Nosaltres anem a aplicar en el nostre exemple la baixada d'imatges.&lt;/p&gt;
&lt;p&gt;Ho veurem tot en el proper punt&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9264"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="237_238_2.157"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="217">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="214"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_3_1_3.1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_3_1_3.1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="446673bd6bcc254751de89ab2faf0327"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="215"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9278"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="237_238_2.158"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="218">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="214"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_2_3_1_2.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_2_3_1_2.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="41ba16c9f3d5edc61a47e4f385d1b94d"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="215"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9282"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="237_238_2.159"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="219">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="214"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_3_1_3.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_3_1_3.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="4455cf39ec0d16eec4a2a0efc63f01b4"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="215"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9287"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="237_238_2.160"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="220">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="214"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_2_3_3_1_4.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_2_3_3_1_4.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="1ecab1bdd95ec807ed61231834fb9132"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="215"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9298"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="237_238_2.161"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="221">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="214"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_3_1_2.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_3_1_2.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="f899e8277697c0703297d30408ad8b53"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="215"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9320"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="237_238_2.162"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="222">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="214"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_3_1_1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_3_1_1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="3c2064a177c6b6c27d111ef436898237"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="215"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="215"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="163"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="216"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="237"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="216"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="217"></reference>
                  <reference key="218"></reference>
                  <reference key="219"></reference>
                  <reference key="220"></reference>
                  <reference key="221"></reference>
                  <reference key="222"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="77"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage:5.3%20CS%3A%20Utilitzaci%C3%B3%20des%20d%27Android:5.3.1%20CS-Android%3A%20Connexi%C3%B3"></string>
              <string role="key" value="parent"></string>
              <reference key="213"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="225">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.3.2 CS-Android: Accés als fitxers"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="223">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="224">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="240_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="223"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value=""></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="224"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="225"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="239"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="225"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="226">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="227">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="243_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="226"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Referència als fitxers&lt;/p&gt;
&lt;p&gt;La referència al nostre bucket l'havíem completada en el punt anterior, però la tornem a posar ací per més comoditat.&lt;/p&gt;
&lt;p&gt;Per a fer referència als fitxers, podem fer-ho com a fills de l'anterior, o directament a partir de FirebaseStorage:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;&lt;/span&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;mStorageRef &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;FirebaseStorage&lt;/span&gt;.getInstance().reference&lt;br /&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;imgRef1 &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;mStorageRef&lt;/span&gt;.child(&lt;em&gt;nom_del_fitxer_1&lt;/em&gt;)&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;imgRef2 &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;FirebaseStorage&lt;/span&gt;.getInstance().reference.child(&lt;em&gt;nom_del_fitxer_2&lt;/em&gt;)&lt;/pre&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="227"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="225"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="242"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="225"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="228">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="229">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="244_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="228"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Baixar un fitxer&lt;/p&gt;
&lt;p&gt;En Android, per les llibreries que estem utilitzant, serà un poc més llarg que en Eclipse, però amb més &quot;solidesa&quot;.&lt;/p&gt;
&lt;p&gt;Sobre la referència del fitxer utilitzarem dos possibles mètodes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;getFile()&lt;/strong&gt;, passant-li com a paràmetre un fitxer temporal on es guardarà el fitxer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getBytes()&lt;/strong&gt;, pasant-li com a paràmetre la grandària màxima del buffer per a guardar el fitxer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;També tenim la possibilitat de baixar-nos únicament la URL del fitxer, per si no volem baixar-nos el fitxer:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;downloadUrl&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En qualsevol dels tres casos, haurem de muntar un &lt;strong&gt;addOnSuccessListener()&lt;/strong&gt;, que es quedarà escoltant fins que el contingut del fitxer (o la seua URL) estiga disponible. Amb aquesta lectura asíncrona previndrem errades per la tardança en obtenir el resultat.&lt;/p&gt;
&lt;p&gt;Així ens quedarà en el nostre exemple, que s'ha d'executar en apretar el botó. Primer veiem com seria en el cas d'utilitzar un fitxer temporal:&lt;span style=&quot;font-weight: bold;&quot;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Amb getFile()
        boto.setOnClickListener {
            val imgRef = mStorageRef.child(nom.text.toString())
            val localFile = File.createTempFile(&quot;images&quot;, &quot;jpg&quot;)
            imgRef.getFile(localFile)
                    .addOnSuccessListener(OnSuccessListener&amp;lt;FileDownloadTask.TaskSnapshot?&amp;gt; {
                        // Successfully downloaded data to local file
                        val bm = BitmapFactory.decodeFile(localFile.getAbsolutePath())
                        imatge.setImageBitmap(bm)
                    }).addOnFailureListener(OnFailureListener {
                        // Handle failed download
                        // ...
                    })
        }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I així queda en el cas d'obtenir el fitxer per mig de &lt;strong&gt;getBytes()&lt;/strong&gt;. S'obtenen en un ByteArray, i en aquest exemple el passem a Bitmap per a carregar la imatge en el ImageView:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;        // Amb getBytes()
        boto.setOnClickListener {
            val imgRef = mStorageRef.child(nom.text.toString())
            imgRef.getBytes(500000)
                    .addOnSuccessListener(OnSuccessListener&amp;lt;ByteArray?&amp;gt; {
                        // Successfully downloaded data to local file
                        val bm = BitmapFactory.decodeByteArray(it, 0, it!!.size)
                        imatge.setImageBitmap(bm)
                    }).addOnFailureListener(OnFailureListener {
                        // Handle failed download
                        // ...
                    })
        }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;&lt;br /&gt;&lt;br /&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="229"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="225"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="243"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="225"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="230">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="231">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="244_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="230"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Pujar un fitxer&lt;/p&gt;
&lt;p&gt;No ens ho plantegem en aquest exemple, però com abans tindrem més d'un mètode, ara concretament 3:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;putFile()&lt;/strong&gt;, per a guardar un fitxer local (com podrien ser fotos del mòbil)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;putBytes()&lt;/strong&gt;, si les dades les tenim per exemple en un raw&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;putStream()&lt;/strong&gt;, per a introduir des d'un InputStream&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="231"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="225"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="244"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="225"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="232">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="233">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="245_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="232"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Obtenir la llista de fitxers&lt;/p&gt;
&lt;p&gt;Per a obtenir la llista de fitxers del bucket on estem apuntant podem utilitzar &lt;strong&gt;listAll() &lt;/strong&gt;i sobre ell muntar un &lt;strong&gt;addOnSuccessListener()&lt;/strong&gt;&lt;strong&gt;addOnSuccessListener()&lt;/strong&gt;, que ens assegurarà que quan entrem és perquè s'ha aconseguit la llista i per tant està disponible. Ho farem sobre la referència del &lt;strong&gt;bucket&lt;/strong&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;mStorageRef &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;FirebaseStorage&lt;/span&gt;.getInstance().getReference()&lt;br /&gt;&lt;span style=&quot;color: #000000;&quot;&gt;mStorageRef&lt;/span&gt;.listAll().addOnSuccessListener &lt;span style=&quot;font-weight: bold;&quot;&gt;{&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;    ...&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;br /&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="233"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="225"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="245"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="225"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="78"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage:5.3%20CS%3A%20Utilitzaci%C3%B3%20des%20d%27Android:5.3.2%20CS-Android%3A%20Acc%C3%A9s%20als%20fitxers"></string>
              <string role="key" value="parent"></string>
              <reference key="213"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="236">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.3.3 CS-Android: Tot l'exemple"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="234">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="235">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="247_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="234"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Igual que en el cas d'&lt;strong&gt;IntelliJ&lt;/strong&gt;, anem a ajuntar tot l'exemple que visualitza una imatge guardada en Cloud Storage, modificant-lo un poc: ens guardarem els noms de les imatges en un &lt;strong&gt;Spinner&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Podeu fer-lo sobre el mateix projecte, per a no haver de fer el procés de connexió una altra vegada. Però si preferiu fer-lo sobre un altre projecte li podríeu posar el nom de &lt;strong&gt;Tema7_Firebase_CS_2&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Substituirem el EditText i el Button per un &lt;strong&gt;Spinner&lt;/strong&gt;. El activity_main.xml ens quedarà:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;Spinner&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/nom&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;50dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;ImageView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/imatge&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/nom&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:srcCompat&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@tools:sample/backgrounds/scenic&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;Primer agafem la llista de noms de fitxers i la posem al Spinner.&lt;/p&gt;
&lt;p&gt;Després en el Listener del Spinner agafem el contingut del fitxer. Estan posades les dues maneres, amb &lt;strong&gt;getFile()&lt;/strong&gt; i amb &lt;strong&gt;getBytes()&lt;/strong&gt;, una d'elles comentada&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.graphics.&lt;span style=&quot;color: #000000;&quot;&gt;BitmapFactory&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.os.&lt;span style=&quot;color: #000000;&quot;&gt;Bundle&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.view.&lt;span style=&quot;color: #000000;&quot;&gt;View&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.widget.&lt;span style=&quot;color: #000000;&quot;&gt;AdapterView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.widget.&lt;span style=&quot;color: #000000;&quot;&gt;ArrayAdapter&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.appcompat.app.&lt;span style=&quot;color: #000000;&quot;&gt;AppCompatActivity&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;com.google.android.gms.tasks.&lt;span style=&quot;color: #000000;&quot;&gt;OnFailureListener&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;com.google.android.gms.tasks.&lt;span style=&quot;color: #000000;&quot;&gt;OnSuccessListener&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;com.google.firebase.storage.&lt;span style=&quot;color: #000000;&quot;&gt;FileDownloadTask&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;com.google.firebase.storage.&lt;span style=&quot;color: #000000;&quot;&gt;FirebaseStorage&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;kotlinx.android.synthetic.main.activity_main.*&lt;br /&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;java.io.&lt;span style=&quot;color: #000000;&quot;&gt;File&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;MainActivity &lt;/span&gt;: AppCompatActivity() {&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;onCreate&lt;/span&gt;(savedInstanceState: &lt;span style=&quot;color: #000000;&quot;&gt;Bundle&lt;/span&gt;?) {&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)&lt;br /&gt;        setContentView(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;layout&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;activity_main&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;mStorageRef &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;FirebaseStorage&lt;/span&gt;.getInstance().getReference()&lt;br /&gt;        &lt;span style=&quot;color: #000000;&quot;&gt;mStorageRef&lt;/span&gt;.listAll().addOnSuccessListener &lt;span style=&quot;font-weight: bold;&quot;&gt;{&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;opcions &lt;/span&gt;= ArrayList&amp;lt;&lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;&amp;gt;()&lt;br /&gt;            &lt;span style=&quot;color: #0033b3;&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: #000000;&quot;&gt;f &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;in &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;it&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;items&lt;/span&gt;) {&lt;br /&gt;                &lt;span style=&quot;color: #000000;&quot;&gt;opcions&lt;/span&gt;.add(&lt;span style=&quot;color: #000000;&quot;&gt;f&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;name&lt;/span&gt;)&lt;br /&gt;            }&lt;br /&gt;            &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;adaptador &lt;/span&gt;= ArrayAdapter(&lt;span style=&quot;color: #0033b3;&quot;&gt;this&lt;/span&gt;, android.&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;layout&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;simple_spinner_item&lt;/span&gt;, &lt;span style=&quot;color: #000000;&quot;&gt;opcions&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #000000;&quot;&gt;adaptador&lt;/span&gt;.setDropDownViewResource(android.&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;layout&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;simple_spinner_dropdown_item&lt;/span&gt;)&lt;br /&gt;            nom.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;adapter &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;adaptador&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;// Amb getFile()&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;        &lt;/span&gt;nom.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;onItemSelectedListener &lt;/span&gt;= &lt;span style=&quot;color: #0033b3;&quot;&gt;object&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;AdapterView&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;OnItemSelectedListener &lt;/span&gt;{&lt;br /&gt;            &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;onItemSelected&lt;/span&gt;(arg0:&lt;span style=&quot;color: #000000;&quot;&gt;AdapterView&lt;/span&gt;&amp;lt;*&amp;gt;, arg1: &lt;span style=&quot;color: #000000;&quot;&gt;View&lt;/span&gt;, arg2:&lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;, arg3:&lt;span style=&quot;color: #000000;&quot;&gt;Long&lt;/span&gt;) {&lt;br /&gt;                &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;imgRef &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;mStorageRef&lt;/span&gt;.child(nom.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;selectedItem&lt;/span&gt;.toString())&lt;br /&gt;                &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;localFile &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;File&lt;/span&gt;.createTempFile(&lt;span style=&quot;color: #067d17;&quot;&gt;&quot;images&quot;&lt;/span&gt;, &lt;span style=&quot;color: #067d17;&quot;&gt;&quot;jpg&quot;&lt;/span&gt;)&lt;br /&gt;                &lt;span style=&quot;color: #000000;&quot;&gt;imgRef&lt;/span&gt;.getFile(&lt;span style=&quot;color: #000000;&quot;&gt;localFile&lt;/span&gt;)&lt;br /&gt;                        .addOnSuccessListener(&lt;span style=&quot;color: #00627a; font-style: italic;&quot;&gt;OnSuccessListener&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000000;&quot;&gt;FileDownloadTask&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;TaskSnapshot&lt;/span&gt;?&amp;gt; &lt;span style=&quot;font-weight: bold;&quot;&gt;{&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;// Successfully downloaded data to local file&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;bm &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;BitmapFactory&lt;/span&gt;.decodeFile(&lt;span style=&quot;color: #000000;&quot;&gt;localFile&lt;/span&gt;.getAbsolutePath())&lt;br /&gt;                            imatge.setImageBitmap(&lt;span style=&quot;color: #000000;&quot;&gt;bm&lt;/span&gt;)&lt;br /&gt;                        &lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;/span&gt;).addOnFailureListener(&lt;span style=&quot;color: #00627a; font-style: italic;&quot;&gt;OnFailureListener &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;{&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;// Handle failed download&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                            // ...&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                        &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;/span&gt;)&lt;br /&gt;            }&lt;br /&gt;            &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;onNothingSelected&lt;/span&gt;(arg0:&lt;span style=&quot;color: #000000;&quot;&gt;AdapterView&lt;/span&gt;&amp;lt;*&amp;gt;) {&lt;br /&gt;                &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #008dde; font-style: italic;&quot;&gt;TODO Auto-generated method stub&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008dde; font-style: italic;&quot;&gt;            &lt;/span&gt;}&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;// Amb getBytes()&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;/*&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;        nom.onItemSelectedListener = object: AdapterView.OnItemSelectedListener {&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;            override fun onItemSelected(arg0:AdapterView&amp;lt;*&amp;gt;, arg1: View, arg2:Int, arg3:Long) {&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                val imgRef = mStorageRef.child(nom.selectedItem.toString())&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                val localFile = File.createTempFile(&quot;images&quot;, &quot;jpg&quot;)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;            imgRef.getBytes(500000)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                .addOnSuccessListener(OnSuccessListener&amp;lt;ByteArray?&amp;gt; {&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                    // Successfully downloaded data to local file&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                    val bm = BitmapFactory.decodeByteArray(it, 0, it!!.size)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                    imatge.setImageBitmap(bm)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                }).addOnFailureListener(OnFailureListener {&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                    // Handle failed download&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                    // ...&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                })&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;            }&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;            override fun onNothingSelected(arg0:AdapterView&amp;lt;*&amp;gt;) {&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;                // &lt;/span&gt;&lt;span style=&quot;color: #008dde; font-style: italic;&quot;&gt;TODO Auto-generated method stub&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;            }&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;        }&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;*/&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;    &lt;/span&gt;}&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;I aquest és el resultat:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_3_3_1.png&quot; alt=&quot;&quot; width=&quot;315&quot; height=&quot;583&quot; /&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9272"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="247_247_2.23"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="237">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="234"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_3_3_1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_3_3_1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="a9ec68854ca13fd3cf8c39876860a823"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="235"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="235"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="24"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="236"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="247"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="236"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="237"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="79"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage:5.3%20CS%3A%20Utilitzaci%C3%B3%20des%20d%27Android:5.3.3%20CS-Android%3A%20Tot%20l%27exemple"></string>
              <string role="key" value="parent"></string>
              <reference key="213"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
            <instance class="exe.engine.node.Node" reference="240">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="5.3.4 CS-Android: Exemple ampliat, combinant amb Cloud Firestore"></unicode>
              <string role="key" value="idevices"></string>
              <list>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="238">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="239">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="249_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="238"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p style=&quot;text-align: justify;&quot;&gt;Anem a fer ara un exemple complet, d'una cosa que serà molt més real que fins ara: combinar &lt;strong&gt;Cloud Firestore&lt;/strong&gt; amb &lt;strong&gt;Cloud Storage&lt;/strong&gt;:&lt;/p&gt;
&lt;ul style=&quot;text-align: justify;&quot;&gt;
&lt;li&gt;En Cloud Storage ens guardem les dades grans, com poden ser imatges, audios, vídeos, ...&lt;/li&gt;
&lt;li&gt;En Cloud Firestore ens guardem totes les altres dades, i inclourem el nom de l'arxiu que hem guardat en Cloud Firestore&lt;/li&gt;
&lt;/ul&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Per tant hem de combinar els accessos a les dues parts de Firebase, i haurem de comptar sobretot amb que les dades, tant en un com en l'altre, s'agafen de forma asíncrona, i per tant hem de cuidar de no utilitzar unes dades que potser encara no estan disponibles.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;El més correcte seria utilitzar &lt;strong&gt;corrutines&lt;/strong&gt;, que juguen amb aquesta forma paral·lela d'executar les coses.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Però per senzillesa començarem sense les corrutines, i senzillament haurem d'estar segurs de que les dades estan ja disponibles quan les utilitzem.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Partirem del mateix exemple utilitzat en l'Annex d'Android, &lt;strong&gt;CoffeeShops_Fragment&lt;/strong&gt;, i ara adequarem les dades a l'estructura de Firebase CloudFirestore, recordant que les imatges dels cafès estaran guardades en Cloud Storage. Aquesta és l'estructura de les dades:&lt;/p&gt;
&lt;table style=&quot;width: 100%;&quot; border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 50%;&quot;&gt;&lt;img src=&quot;resources/T7_5_3_4_1.png&quot; alt=&quot;&quot; width=&quot;651&quot; height=&quot;407&quot; /&gt;&lt;/td&gt;
&lt;td style=&quot;width: 50%;&quot;&gt;&lt;img src=&quot;resources/T7_5_3_4_2.png&quot; alt=&quot;&quot; width=&quot;714&quot; height=&quot;404&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Com veiem tenim una col·lecció anomenada &lt;strong&gt;CoffeeShops&lt;/strong&gt; amb un document per cada cafè.&lt;/p&gt;
&lt;p&gt;Dins del document del cafè tenim &lt;strong&gt;nom&lt;/strong&gt;, &lt;strong&gt;adreca&lt;/strong&gt;, &lt;strong&gt;punts&lt;/strong&gt; i també el nom de la imatge guardada Cloud Storage. També tenim una col·lecció dins del document anomenada &lt;strong&gt;comentaris&lt;/strong&gt;, i en cada document d'aquesta col·lecció de moment només tenim una parella clau-valor: &lt;strong&gt;comentari&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;En la següent imatge es veuen els fitxers guardats en Cloud Storage. Per a que estiga un poc més organitzat, les hem deixades en la carpeta &lt;strong&gt;CoffeeShops &lt;/strong&gt;: &lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_5_3_4_1.1.png&quot; alt=&quot;&quot; width=&quot;1319&quot; height=&quot;650&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Com hem dit partirem de l'exemple ja fet &lt;strong&gt;CoffeeShops_Fragments&lt;/strong&gt;, no de &lt;strong&gt;CoffeeShops_Fragments_ROOM&lt;/strong&gt;, perquè això ens obligaria a llevar moltes coses. Fins i tot per a que no es quede el nom anterior, potser siga convenient &lt;strong&gt;començar de zero amb un projecte nou&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Si és així:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creeu un nou projecte anomenat &lt;strong&gt;CoffeeShops_Fragments_FIREBASE&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Connecteu amb Cloud Firestore i Cloud Storage, utilitzant els assistents. Connectar l'aplicació només us farà falta en la primera ocasió, però incorporar llibreries, serà en cadascun dels casos.&lt;/li&gt;
&lt;li&gt;Incorporeu la línia següent en el &lt;strong&gt;build.gradle&lt;/strong&gt; de l'apliació, dins de &lt;strong&gt;android &lt;/strong&gt; i dins de &lt;strong&gt;defaultConfig&lt;/strong&gt;, per a que Cloud Firestore no done error:&lt;strong&gt;&lt;br /&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;multiDexEnabled &lt;span style=&quot;color: #0033b3;&quot;&gt;true&lt;/span&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;També incorporarem en el &lt;strong&gt;build.gradle&lt;/strong&gt; de l'aplicació les llibreries que ens permeten la navegació entre fragments. Han d'anar en la zona de &lt;strong&gt;dependencies&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;implementation &lt;span style=&quot;color: #067d17;&quot;&gt;'androidx.navigation:navigation-fragment-ktx:2.3.1'&lt;br /&gt;&lt;/span&gt;implementation &lt;span style=&quot;color: #067d17;&quot;&gt;'androidx.navigation:navigation-ui-ktx:2.3.1'&lt;br /&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Copieu el següent contingut al fitxer &lt;strong&gt;strings.xml&lt;/strong&gt;, que està dins de &lt;strong&gt;res -&amp;gt; values&lt;/strong&gt;. En ell s'estan definint cadenes que s'utilitzaran en diferents mòduls&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;resources&lt;/span&gt;&amp;gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;string &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;app_name&quot;&lt;/span&gt;&amp;gt;CoffeeShops_Fragments_FIREBASE&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;string &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;action_settings&quot;&lt;/span&gt;&amp;gt;Settings&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;br /&gt;    &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;&amp;lt;!-- Strings used for fragments for navigation --&amp;gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;    &lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;string &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;first_fragment_label&quot;&lt;/span&gt;&amp;gt;First Fragment&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;string &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;second_fragment_label&quot;&lt;/span&gt;&amp;gt;Second Fragment&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;string &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;next&quot;&lt;/span&gt;&amp;gt;Next&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;string &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;previous&quot;&lt;/span&gt;&amp;gt;Previous&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;string &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;reserve&quot;&lt;/span&gt;&amp;gt;Reserve&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;string &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;hello_first_fragment&quot;&lt;/span&gt;&amp;gt;Hello first fragment&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;string &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;hello_second_fragment&quot;&lt;/span&gt;&amp;gt;Hello second fragment. Arg: %1$s&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;resources&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;També ens farà falta el fitxer del menú &lt;strong&gt;menu_main.xml&lt;/strong&gt;, que ha d'estar en &lt;strong&gt;res -&amp;gt; menu&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;menu &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;item&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/action_settings&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:orderInCategory&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;100&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:title&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@string/action_settings&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:showAsAction&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;never&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;menu&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;I per últim copieu el següent contingut al fitxer &lt;strong&gt;themes.xml&lt;/strong&gt;, que està en &lt;strong&gt;res -&amp;gt; values -&amp;gt; themes&lt;/strong&gt;, i on es defineixen uns estils utilitzats:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;resources &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;    &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;&amp;lt;!-- Base application theme. --&amp;gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;    &lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;style &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;Theme.CoffeeShops_Fragments_FIREBASE&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;parent&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;        &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;&amp;lt;!-- Primary brand color. --&amp;gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;        &lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;item &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;colorPrimary&quot;&lt;/span&gt;&amp;gt;@color/purple_500&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;item &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;colorPrimaryVariant&quot;&lt;/span&gt;&amp;gt;@color/purple_700&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;item &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;colorOnPrimary&quot;&lt;/span&gt;&amp;gt;@color/white&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;br /&gt;        &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;&amp;lt;!-- Secondary brand color. --&amp;gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;        &lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;item &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;colorSecondary&quot;&lt;/span&gt;&amp;gt;@color/teal_200&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;item &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;colorSecondaryVariant&quot;&lt;/span&gt;&amp;gt;@color/teal_700&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;item &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;colorOnSecondary&quot;&lt;/span&gt;&amp;gt;@color/black&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;br /&gt;        &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;&amp;lt;!-- Status bar color. --&amp;gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;        &lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;item &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;android:statusBarColor&quot; &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:targetApi&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;l&quot;&lt;/span&gt;&amp;gt;?attr/colorPrimaryVariant&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;br /&gt;        &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;&amp;lt;!-- Customize your theme here. --&amp;gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;    &lt;/span&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;style&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;style &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;Theme.CoffeeShops_Fragments_FIREBASE.NoActionBar&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;item &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;windowActionBar&quot;&lt;/span&gt;&amp;gt;false&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;item &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;windowNoTitle&quot;&lt;/span&gt;&amp;gt;true&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;br /&gt;    &amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;style&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;style &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;Theme.CoffeeShops_Fragments_FIREBASE.AppBarOverlay&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;parent&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;ThemeOverlay.AppCompat.Dark.ActionBar&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;style &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;Theme.CoffeeShops_Fragments_FIREBASE.PopupOverlay&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;parent&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;ThemeOverlay.AppCompat.Light&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;resources&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9270"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="249_249_2.69"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="241">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="238"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_3_4_1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_3_4_1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="863c6b0f2b04408cfb91e55fd23c2c72"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="239"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9312"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="249_249_2.70"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="242">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="238"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_3_4_1.1.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_3_4_1.1.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="320fa53d7f6016b3cb5aece0feced026"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="239"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9326"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="249_249_2.71"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="243">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="238"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_3_4_2.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_3_4_2.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="726ef58e28b42490a5363c1ae01c1ce6"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="239"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="239"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="72"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="240"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="249"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="240"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="241"></reference>
                  <reference key="242"></reference>
                  <reference key="243"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="244">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="245">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="250_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="244"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Classe Coffee&lt;/p&gt;
&lt;p&gt;Per l'estructura de les dades, en què tenim guardat nom, adreça, punts i imatge (no ens fa falta per exemple el número de cafè ja que no ens fa falta una clau principal, com era el cas de Bases de Dades a travès de Room), i en concordància amb els components definits en l'aplicació anterior de &lt;strong&gt;CoffeeShops_Fragments&lt;/strong&gt;, podem definir la classe &lt;strong&gt;Coffee&lt;/strong&gt; d'aquesta manera:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;java.io.&lt;span style=&quot;color: #000000;&quot;&gt;Serializable&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;data class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;Coffee &lt;/span&gt;(&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;title&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;?, &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;subtitle&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;?,&lt;br /&gt;                   &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;points&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;?, &lt;span style=&quot;color: #0033b3;&quot;&gt;var &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;image&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;ByteArray&lt;/span&gt;? ): &lt;span style=&quot;color: #000000;&quot;&gt;Serializable&lt;/span&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;La raó de definir totes les propietats com a &lt;strong&gt;val&lt;/strong&gt; excepte la imatge que serà &lt;strong&gt;var&lt;/strong&gt; és perquè la imatge la modificarem amb posterioritat&lt;/li&gt;
&lt;li&gt;Ho definim com a Serializable per a poder passar tot l'objecte del primer fragment al segon, així si s'ha de visualitzar una altra vegada la imatge, ja la tenim disponible. Si només s'ha de visualitzar el nom del cafè, a banda dels seus comentaris, no faria falta passar tot l'objecte, només el nom.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El &lt;strong&gt;layout&lt;/strong&gt; associat serà &lt;strong&gt;item_coffee.xml&lt;/strong&gt;, amb aquest aspecte:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.cardview.widget.CardView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;card_view&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/card1&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginBottom&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;16dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginRight&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;16dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginLeft&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;16dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;450dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;card_view&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:cardCornerRadius&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;8dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;card_view&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:cardElevation&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;8dp&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;LinearLayout&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginTop&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;200dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginLeft&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;16dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:orientation&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;vertical&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;                &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/textView&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginTop&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;16dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:textSize&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;25sp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:textStyle&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;bold&quot;&lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;                &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;FrameLayout&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginTop&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;8dp&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;                        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;RatingBar&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/ratingBar&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:max&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;5&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:numStars&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;5&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:scaleX&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0.5&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:scaleY&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0.5&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:transformPivotX&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:transformPivotY&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0dp&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;                        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/textView2&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginLeft&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;130dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;                &amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;FrameLayout&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;                &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/textView1&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginTop&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;16dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:textSize&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;18sp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginBottom&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;16dp&quot;&lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;                &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;View&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/divider&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginRight&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;16dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:background&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;?android:attr/listDivider&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;                &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;Button&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/BtnReserve&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@string/reserve&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:textSize&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;18sp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginTop&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;16dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;style&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;?android:attr/buttonBarButtonStyle&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;        &amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;LinearLayout&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;ImageView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/img1&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;200dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:scaleType&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;centerCrop&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.cardview.widget.CardView&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;El seu adapter, &lt;strong&gt;CoffeeAdapter&lt;/strong&gt;, quedaria així:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.graphics.&lt;span style=&quot;color: #000000;&quot;&gt;BitmapFactory&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.view.&lt;span style=&quot;color: #000000;&quot;&gt;LayoutInflater&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.view.&lt;span style=&quot;color: #000000;&quot;&gt;View&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.view.&lt;span style=&quot;color: #000000;&quot;&gt;ViewGroup&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.widget.&lt;span style=&quot;color: #000000;&quot;&gt;ImageView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.widget.&lt;span style=&quot;color: #000000;&quot;&gt;RatingBar&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.widget.&lt;span style=&quot;color: #000000;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.&lt;span style=&quot;color: #000000;&quot;&gt;RecyclerView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;CoffeeAdapter&lt;/span&gt;(&lt;span style=&quot;color: #0033b3;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;items&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;ArrayList&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000000;&quot;&gt;Coffee&lt;/span&gt;&amp;gt;) : &lt;span style=&quot;color: #000000;&quot;&gt;RecyclerView&lt;/span&gt;.Adapter&amp;lt;&lt;span style=&quot;color: #000000;&quot;&gt;CoffeeAdapter&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;CoffeeViewHolder&lt;/span&gt;&amp;gt;() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;lateinit var &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;onClick&lt;/span&gt;: (&lt;span style=&quot;color: #000000;&quot;&gt;View&lt;/span&gt;) -&amp;gt; &lt;span style=&quot;color: #000000;&quot;&gt;Unit&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;CoffeeViewHolder&lt;/span&gt;(itemView: &lt;span style=&quot;color: #000000;&quot;&gt;View&lt;/span&gt;) : &lt;span style=&quot;color: #000000;&quot;&gt;RecyclerView&lt;/span&gt;.ViewHolder(itemView) {&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;image&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;ImageView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;text&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;text1&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;barstars&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;RatingBar&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;points&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;init &lt;/span&gt;{&lt;br /&gt;&lt;br /&gt;            &lt;span style=&quot;color: #871094;&quot;&gt;image &lt;/span&gt;= itemView.findViewById(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;id&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;img1&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #871094;&quot;&gt;text &lt;/span&gt;= itemView.findViewById(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;id&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;textView&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #871094;&quot;&gt;text1 &lt;/span&gt;= itemView.findViewById(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;id&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;textView1&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #871094;&quot;&gt;points &lt;/span&gt;= itemView.findViewById(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;id&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;textView2&lt;/span&gt;)&lt;br /&gt;            &lt;span style=&quot;color: #871094;&quot;&gt;barstars &lt;/span&gt;= itemView.findViewById(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;id&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;ratingBar&lt;/span&gt;)&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;bindCards&lt;/span&gt;(t: &lt;span style=&quot;color: #000000;&quot;&gt;Coffee&lt;/span&gt;, onClick: (&lt;span style=&quot;color: #000000;&quot;&gt;View&lt;/span&gt;) -&amp;gt; &lt;span style=&quot;color: #000000;&quot;&gt;Unit&lt;/span&gt;) {&lt;br /&gt;            &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;//image.setImageResource(t.image)&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;img &lt;/span&gt;= t.&lt;span style=&quot;color: #871094;&quot;&gt;image&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: #000000;&quot;&gt;img &lt;/span&gt;!= &lt;span style=&quot;color: #0033b3;&quot;&gt;null&lt;/span&gt;) {&lt;br /&gt;                &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;imgBmp &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;BitmapFactory&lt;/span&gt;.decodeByteArray(&lt;span style=&quot;color: #000000;&quot;&gt;img&lt;/span&gt;, &lt;span style=&quot;color: #1750eb;&quot;&gt;0&lt;/span&gt;, &lt;span style=&quot;color: #000000;&quot;&gt;img&lt;/span&gt;.&lt;span style=&quot;color: #871094;&quot;&gt;size&lt;/span&gt;)&lt;br /&gt;                &lt;span style=&quot;color: #871094;&quot;&gt;image&lt;/span&gt;.setImageBitmap(&lt;span style=&quot;color: #000000;&quot;&gt;imgBmp&lt;/span&gt;)&lt;br /&gt;            }&lt;br /&gt;            &lt;span style=&quot;color: #871094;&quot;&gt;text&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;text &lt;/span&gt;= t.&lt;span style=&quot;color: #871094;&quot;&gt;title&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;            text1&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;text &lt;/span&gt;= t.&lt;span style=&quot;color: #871094;&quot;&gt;subtitle&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;if &lt;/span&gt;(t.&lt;span style=&quot;color: #871094;&quot;&gt;points&lt;/span&gt;!=&lt;span style=&quot;color: #0033b3;&quot;&gt;null&lt;/span&gt;) {&lt;br /&gt;                &lt;span style=&quot;color: #871094;&quot;&gt;barstars&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;rating &lt;/span&gt;= &lt;span style=&quot;background-color: #dbffdb;&quot;&gt;t.points&lt;/span&gt;.toFloat()&lt;br /&gt;                &lt;span style=&quot;color: #871094;&quot;&gt;points&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;text&lt;/span&gt;=&lt;span style=&quot;background-color: #dbffdb;&quot;&gt;t.points&lt;/span&gt;.toString()&lt;br /&gt;            }&lt;br /&gt;            &lt;span style=&quot;color: #871094;&quot;&gt;barstars&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;onRatingBarChangeListener &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;RatingBar&lt;/span&gt;.OnRatingBarChangeListener &lt;span style=&quot;font-weight: bold;&quot;&gt;{ &lt;/span&gt;ratingBar: &lt;span style=&quot;color: #000000;&quot;&gt;RatingBar&lt;/span&gt;, fl: &lt;span style=&quot;color: #000000;&quot;&gt;Float&lt;/span&gt;, b: &lt;span style=&quot;color: #000000;&quot;&gt;Boolean &lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;-&amp;gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;points&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;text &lt;/span&gt;= fl.toString()&lt;br /&gt;                &lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;itemView&lt;/span&gt;.setOnClickListener&lt;span style=&quot;font-weight: bold;&quot;&gt;{ &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;onClick&lt;/span&gt;(&lt;span style=&quot;color: #871094;&quot;&gt;itemView&lt;/span&gt;) &lt;span style=&quot;font-weight: bold;&quot;&gt;}&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;        &lt;/span&gt;}&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;onCreateViewHolder&lt;/span&gt;(viewGroup: &lt;span style=&quot;color: #000000;&quot;&gt;ViewGroup&lt;/span&gt;, viewType: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;): &lt;span style=&quot;color: #000000;&quot;&gt;CoffeeViewHolder &lt;/span&gt;{&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;itemView &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;LayoutInflater&lt;/span&gt;.from(viewGroup.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;context&lt;/span&gt;).inflate(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;layout&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;item_coffee&lt;/span&gt;, viewGroup, &lt;span style=&quot;color: #0033b3;&quot;&gt;false&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;return &lt;/span&gt;CoffeeViewHolder(&lt;br /&gt;            &lt;span style=&quot;color: #000000;&quot;&gt;itemView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;        &lt;/span&gt;)&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;onBindViewHolder&lt;/span&gt;(viewHolder: &lt;span style=&quot;color: #000000;&quot;&gt;CoffeeViewHolder&lt;/span&gt;, pos: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;) {&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;item &lt;/span&gt;= &lt;span style=&quot;color: #871094;&quot;&gt;items&lt;/span&gt;[pos]&lt;br /&gt;        viewHolder.bindCards(&lt;span style=&quot;color: #000000;&quot;&gt;item&lt;/span&gt;, &lt;span style=&quot;color: #871094;&quot;&gt;onClick&lt;/span&gt;)&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;getItemCount&lt;/span&gt;(): &lt;span style=&quot;color: #000000;&quot;&gt;Int &lt;/span&gt;{&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;items&lt;/span&gt;.&lt;span style=&quot;color: #871094;&quot;&gt;size&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;    &lt;/span&gt;}&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;getItemViewType&lt;/span&gt;(position: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;): &lt;span style=&quot;color: #000000;&quot;&gt;Int &lt;/span&gt;{&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;return &lt;/span&gt;position&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="245"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="240"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="250"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="240"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="246">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="247">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="251_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="246"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Classe Comment&lt;/p&gt;
&lt;p&gt;El comentari de moment el tenim molt senzill. Segurament estaria bé gaurdar més coses, com la data del comentari i l'autor (a banda de valoracions al comentari). Seria tan senzill com fer aquesta classe més completa.&lt;/p&gt;
&lt;p&gt;Però de moment només guardem el propi comentari, per tant la classe &lt;strong&gt;Comment&lt;/strong&gt; queda així de senzilla:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;data class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;Comment &lt;/span&gt;(&lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;comm&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;String&lt;/span&gt;?)&lt;/pre&gt;
&lt;p&gt;El &lt;strong&gt;layout&lt;/strong&gt; associat serà &lt;strong&gt;item_comment.xml&lt;/strong&gt;, amb aquest aspecte:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.cardview.widget.CardView &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;100dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:cardElevation&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;6dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:cardCornerRadius&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;8dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_margin&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;6dp&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;LinearLayout&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:orientation&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;vertical&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/cita&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_margin&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;5dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;TextView&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;LinearLayout&lt;/span&gt;&amp;gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.cardview.widget.CardView&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;I el seu adapter, &lt;strong&gt;CommentsAdapter&lt;/strong&gt;, així:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.view.&lt;span style=&quot;color: #000000;&quot;&gt;LayoutInflater&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.view.&lt;span style=&quot;color: #000000;&quot;&gt;View&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.view.&lt;span style=&quot;color: #000000;&quot;&gt;ViewGroup&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.widget.&lt;span style=&quot;color: #000000;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.recyclerview.widget.&lt;span style=&quot;color: #000000;&quot;&gt;RecyclerView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;CommentsAdapter&lt;/span&gt;(&lt;span style=&quot;color: #0033b3;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;items&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;ArrayList&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000000;&quot;&gt;Comment&lt;/span&gt;&amp;gt;) : &lt;span style=&quot;color: #000000;&quot;&gt;RecyclerView&lt;/span&gt;.Adapter&amp;lt;&lt;span style=&quot;color: #000000;&quot;&gt;CommentsAdapter&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;CoffeeViewHolder&lt;/span&gt;&amp;gt;() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;CoffeeViewHolder&lt;/span&gt;(itemView: &lt;span style=&quot;color: #000000;&quot;&gt;View&lt;/span&gt;) : &lt;span style=&quot;color: #000000;&quot;&gt;RecyclerView&lt;/span&gt;.ViewHolder(itemView) {&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;private val &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;texto&lt;/span&gt;: &lt;span style=&quot;color: #000000;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;init &lt;/span&gt;{&lt;br /&gt;            &lt;span style=&quot;color: #871094;&quot;&gt;texto &lt;/span&gt;= itemView.findViewById(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;id&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;cita&lt;/span&gt;)&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;bindComment&lt;/span&gt;(c: &lt;span style=&quot;color: #000000;&quot;&gt;Comment&lt;/span&gt;) {&lt;br /&gt;            &lt;span style=&quot;color: #871094;&quot;&gt;texto&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;text &lt;/span&gt;= c.&lt;span style=&quot;color: #871094;&quot;&gt;comm&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;        &lt;/span&gt;}&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;onCreateViewHolder&lt;/span&gt;(viewGroup: &lt;span style=&quot;color: #000000;&quot;&gt;ViewGroup&lt;/span&gt;, viewType: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;): &lt;span style=&quot;color: #000000;&quot;&gt;CoffeeViewHolder &lt;/span&gt;{&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;itemView &lt;/span&gt;= &lt;span style=&quot;color: #000000;&quot;&gt;LayoutInflater&lt;/span&gt;.from(viewGroup.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;context&lt;/span&gt;).inflate(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;layout&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;item_comment&lt;/span&gt;, viewGroup, &lt;span style=&quot;color: #0033b3;&quot;&gt;false&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;return &lt;/span&gt;CoffeeViewHolder(&lt;br /&gt;            &lt;span style=&quot;color: #000000;&quot;&gt;itemView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;        &lt;/span&gt;)&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;onBindViewHolder&lt;/span&gt;(viewHolder: &lt;span style=&quot;color: #000000;&quot;&gt;CoffeeViewHolder&lt;/span&gt;, pos: &lt;span style=&quot;color: #000000;&quot;&gt;Int&lt;/span&gt;) {&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;val &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;item &lt;/span&gt;= &lt;span style=&quot;color: #871094;&quot;&gt;items&lt;/span&gt;[pos]&lt;br /&gt;        viewHolder.bindComment(&lt;span style=&quot;color: #000000;&quot;&gt;item&lt;/span&gt;)&lt;br /&gt;    }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;getItemCount&lt;/span&gt;(): &lt;span style=&quot;color: #000000;&quot;&gt;Int &lt;/span&gt;{&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;items&lt;/span&gt;.&lt;span style=&quot;color: #871094;&quot;&gt;size&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;    &lt;/span&gt;}&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="247"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="240"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="251"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="240"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="248">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="249">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="252_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="248"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;FirstFragment&lt;/p&gt;
&lt;p&gt;En aquesta aplicació de fragments, ballàvem entre 2 fragments. En el primer veiem les dades dels cafès: nom, adreça, puntuació i imatge. Els comentaris els deixàvem per al segon fragment.&lt;/p&gt;
&lt;p&gt;El seu layout és &lt;strong&gt;fragment_first.xml&lt;/strong&gt;, i té aquest aspecte:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;.FirstFragment&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.recyclerview.widget.RecyclerView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/recView&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginTop&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;5dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;I el programa corresponent al primer fragment, &lt;strong&gt;FirstFragment&lt;/strong&gt;, és on tenim més feina:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ens connectem a &lt;strong&gt;CloudFirestore&lt;/strong&gt; per a agafar tots els documents de la col·lecció &lt;strong&gt;CoffeeShops&lt;/strong&gt; per mig d'un &lt;strong&gt;addSnapshotListener&lt;/strong&gt;, que buscarà tots els documents de la col·lecció (línia 39)&lt;/li&gt;
&lt;li&gt;Construïm l'objecte &lt;strong&gt;Coffee&lt;/strong&gt;, però sense haver agafat encara la imatge (per això havíem definit la propietat com a var), perquè com haurem de buscar-la a Cloud Storage, en el moment de construir l'objecte no la tindríem. Per tant de moment no tenim res en la propietat &lt;strong&gt;image&lt;/strong&gt; de l'objecte (línies 47 a 50)&lt;/li&gt;
&lt;li&gt;L'objecte &lt;strong&gt;Coffee&lt;/strong&gt; l'afegim a l'ArrayList&amp;lt;Coffee&amp;gt; anomenat &lt;strong&gt;items &lt;/strong&gt;(línia 47)&lt;/li&gt;
&lt;li&gt;En un altre ArrayList&amp;lt;String&amp;gt; anomenat &lt;strong&gt;itemsDocs &lt;/strong&gt;ens guardarem el nom del document. Això és per fer més senzilla la recerca del document amb posterioritat (quan busquem els seus comentaris) (línia 51)&lt;/li&gt;
&lt;li&gt;Llancem la recerca de la imatge en Cloud Storage (línia 58). Observeu que en el moment d'agafar la referència, en el nom de la imatge hem incorporat la carpeta &lt;strong&gt;CoffeeShops&lt;/strong&gt; (línia 56)&lt;/li&gt;
&lt;li&gt;Quan estiga disponible l'assignarem al &lt;strong&gt;item&lt;/strong&gt; corresponent (línia 61)&lt;/li&gt;
&lt;li&gt;Ens hem d'assegurar que quan anem a crear l'adaptador CoffeeAdaptor, tots els items estiguen creats. Per això en muntem un &lt;strong&gt;addOnSuccessListener&lt;/strong&gt; també sobre la col·lecció. Firebase ens assegura que s'activarà &lt;strong&gt;després &lt;/strong&gt;del &lt;strong&gt;addOnSnapshotListener&lt;/strong&gt;, per tant és una bona manera d'assegurar-nos que ja estan creats tots els items (faltarà per omplir les imatges, però els items amb els objectes Coffee ja estaran creats) (línia 72 i següents)&lt;/li&gt;
&lt;li&gt;En el &lt;strong&gt;onClick&lt;/strong&gt; de l'adaptador, cridarem al segon fragment, passant 2 paràmetres per mig del &lt;strong&gt;bundle&lt;/strong&gt; (línia 83):
&lt;ul&gt;
&lt;li&gt;L'objecte &lt;strong&gt;Coffee&lt;/strong&gt; del qual volem els comentaris. Podríem passar només el nom del cafè, però d'aquesta manera si per exemple es vol visualitzar la imatge, es pot fer. És per a poder passar tot l'objecte &lt;strong&gt;Coffee&lt;/strong&gt; que declarem la classe com a &lt;strong&gt;Serializable&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Passem també el nom del document corresponent a aquest cafè, per a poder llegir la seua col·lecció de comentaris més fàcilment (línia 81)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlighted-code language-java line-numbers&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package com.example.coffeeshops_fragments_firebase

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.core.os.bundleOf
import androidx.fragment.app.Fragment
import androidx.navigation.fragment.findNavController
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.google.android.gms.tasks.OnFailureListener
import com.google.android.gms.tasks.OnSuccessListener
import com.google.firebase.firestore.DocumentChange
import com.google.firebase.firestore.FirebaseFirestore
import com.google.firebase.storage.FirebaseStorage
import com.google.firebase.storage.StorageReference

/**
 * A simple [Fragment] subclass as the default destination in the navigation.
 */
class FirstFragment : Fragment() {

    private var items: ArrayList&amp;lt;Coffee&amp;gt; = ArrayList()
    private var itemsDocs: ArrayList&amp;lt;String&amp;gt; = ArrayList()

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {

        val root = inflater.inflate(R.layout.fragment_first, container, false)
        val db: FirebaseFirestore = FirebaseFirestore.getInstance()

        if (items.size==0) {  // per a no executar-lo una altra vegada quan tornem del SecondFragment
            val storageRef: StorageReference;
            storageRef = FirebaseStorage.getInstance().getReference();

            db.collection(&quot;CoffeeShops&quot;).addSnapshotListener { snapshots, e -&amp;gt;
                for (dc in snapshots!!.documentChanges) {
                    when (dc.type) {
                        DocumentChange.Type.ADDED -&amp;gt; {
                            var p = 0
                            if (dc.document.getString(&quot;punts&quot;)!=&quot;&quot;)
                                p = dc.document.get(&quot;punts&quot;).toString().toInt()

                            items!!.add(Coffee(dc.document.getString(&quot;nom&quot;).toString(),
                                dc.document.getString(&quot;adreca&quot;).toString(),
                                p, null
                            ))
                            itemsDocs.add(dc.document.id)
                            val item = items[items.size-1]
                            val nomImatge = dc.document.getString(&quot;imatge&quot;)

                            if (nomImatge != null) {
                                val imatgeRef = storageRef.child(&quot;CoffeeShops/&quot; + nomImatge)
                                val ONE_MEGABYTE = (1024 * 1024).toLong()
                                imatgeRef.getBytes(ONE_MEGABYTE)
                                        .addOnSuccessListener(OnSuccessListener&amp;lt;ByteArray&amp;gt; {
                                            // Data for &quot;images/island.jpg&quot; is returns, use this as needed
                                            item.image=it
                                        }).addOnFailureListener(OnFailureListener {
                                            // Handle any errors
                                        })
                            }
                        }
                    }
                }
            }
        }

        db.collection(&quot;CoffeeShops&quot;).get().addOnSuccessListener {
            val recView: RecyclerView = root.findViewById(R.id.recView)
            recView.setHasFixedSize(true)
            val adaptador = CoffeeAdapter(items)
            recView.adapter = adaptador
            recView.layoutManager = LinearLayoutManager(context, LinearLayoutManager.VERTICAL, false)

            adaptador.onClick = {
                val c = items[recView.getChildAdapterPosition(it)]
                val d = itemsDocs[recView.getChildAdapterPosition(it)]
                val bundle = bundleOf(&quot;coffee&quot; to c,&quot;doc&quot; to d)
                findNavController().navigate(R.id.action_FirstFragment_to_SecondFragment, bundle)
            }
        }
        return root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;De moment marcarà un error en la línia 83, perquè no està definida la navegació (la incorporarem al final)&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="249"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="240"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="252"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="240"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="250">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="251">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="253_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="250"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value=""></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="251"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="240"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="253"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="240"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="252">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="253">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="254_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="252"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Second Fragment&lt;/p&gt;
&lt;p&gt;L'utilitzem per a visualitzar els comentaris del cafè seleccionat (sobre qui es fa un click).&lt;/p&gt;
&lt;p&gt;El layout associat és &lt;strong&gt;fragment_second.xml&lt;/strong&gt;, i té aquest aspecte:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;.SecondFragment&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/textview_second&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginTop&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;56dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:gravity&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;center&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;Segundo Fragment&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:textSize&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;20sp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:textStyle&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;bold&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.recyclerview.widget.RecyclerView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/recyclerview_coment&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginStart&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;16dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_marginEnd&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;16dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintBottom_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintHorizontal_bias&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0.0&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/textview_second&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintVertical_bias&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0.158&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;A aquest fragment, &lt;strong&gt;SecondFragment&lt;/strong&gt;, recordem que li passem 2 paràmetres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;L'objecte &lt;strong&gt;Coffee&lt;/strong&gt; del qual volem els comentaris.&lt;strong&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;El nom del document corresponent a aquest cafè&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El funcionament és el següent:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Agafem els paràmetres passats en &lt;strong&gt;coffee&lt;/strong&gt; i &lt;strong&gt;nameDoc&lt;/strong&gt; (línies 30 i 31)&lt;/li&gt;
&lt;li&gt;Sobre la col·lecció &lt;strong&gt;comentaris&lt;/strong&gt; del document (per això ha estat còmode passar-li el nom del document) muntem un &lt;strong&gt;addSnapshotListener&lt;/strong&gt;, per a obtindre tots els documents de la col·lecció (línia 33)&lt;/li&gt;
&lt;li&gt;És de ressaltar que com tal i com ho fem, no podem assegurar l'ordre en què vindran aquestos documents, i per tant quin serà l'ordre dels comentaris. El més lògic seria ordenar-los cronològicament. Per a això podríem afegir al document del comentari un camp amb la data-hora. Aleshores afegiríem a aquesta sentència de la línia 33 una clàusula d'ordenació; &lt;strong&gt;orderBy(&quot;date&quot;)&lt;/strong&gt;, si s'anomenara &lt;strong&gt;date&lt;/strong&gt; aquest camp amb la data&lt;/li&gt;
&lt;li&gt;Anem afegint els comentaris a un &lt;strong&gt;ArrayList&amp;lt;Comment&amp;gt;&lt;/strong&gt; anomenat &lt;strong&gt;Comments&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;En el moment de crear l'adaptador dels comentaris hem d'estar segurs que ja tenim disponibles tots els comentaris en &lt;strong&gt;Comments&lt;/strong&gt;. Amb aquesta finalitat muntem un &lt;strong&gt;addOnSuccessListener &lt;/strong&gt;també sobre la col·lecció &lt;strong&gt;c&lt;/strong&gt;&lt;strong&gt;omentaris&lt;/strong&gt;. Firebase ens assegura que aquest es produirà després del &lt;strong&gt;addSnapshotListener&lt;/strong&gt; i per tant ja tindrem l'ArrayList ple (línia 45)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I aquest és el &lt;strong&gt;SecondFragment&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java line-numbers&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package com.example.coffeeshops_fragments_firebase

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.TextView
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.google.firebase.firestore.DocumentChange
import com.google.firebase.firestore.FirebaseFirestore

/**
 * A simple [Fragment] subclass as the second destination in the navigation.
 */
class SecondFragment : Fragment() {

    private var Comments = arrayListOf&amp;lt;Comment&amp;gt;()

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        // Inflate the layout for this fragment
        val db: FirebaseFirestore = FirebaseFirestore.getInstance()

        val root = inflater.inflate(R.layout.fragment_second, container, false)
        val texto: TextView =  root.findViewById(R.id.textview_second)
        val coffee = arguments?.get(&quot;coffee&quot;) as Coffee
        val nameDoc = arguments?.get(&quot;doc&quot;) as String
        texto.text = coffee.title
        db.collection(&quot;CoffeeShops&quot;).document(nameDoc).collection(&quot;comentaris&quot;).addSnapshotListener { snapshots, e -&amp;gt;
            for (dc in snapshots!!.documentChanges) {
                when (dc.type) {
                    DocumentChange.Type.ADDED -&amp;gt; {
                        Comments.add(Comment(dc.document.getString(&quot;comentari&quot;)))
                    }
                }
            }
        }

        val recView: RecyclerView = root.findViewById(R.id.recyclerview_coment)
        recView.setHasFixedSize(true)
        db.collection(&quot;CoffeeShops&quot;).document(nameDoc).collection(&quot;comentari&quot;).
                get().addOnSuccessListener {
            val adaptador = CommentsAdapter(Comments)

            recView.adapter = adaptador
            recView.layoutManager = GridLayoutManager(context, 2)

        }
        val adaptador = CommentsAdapter(Comments)

        recView.adapter = adaptador
        recView.layoutManager = GridLayoutManager(context, 2)

        return root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

      /*  view.findViewById&amp;lt;Button&amp;gt;(R.id.button_second).setOnClickListener {
           findNavController().navigate(R.id.action_SecondFragment_to_FirstFragment)
        }*/
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="253"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="240"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="254"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="240"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="254">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="255">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="255_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="254"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value=""></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="255"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="240"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="255"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="240"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="256">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="257">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="256_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="256"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value=""></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list></list>
                      <string role="key" value="idevice"></string>
                      <reference key="257"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="0"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="240"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="256"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="240"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list></list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="258">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="259">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="257_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="258"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p class=&quot;titolet&quot;&gt;Main Activity i navegació&lt;/p&gt;
&lt;p&gt;El MainActivity no ofereix cap dificultat:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.os.&lt;span style=&quot;color: #000000;&quot;&gt;Bundle&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;androidx.appcompat.app.&lt;span style=&quot;color: #000000;&quot;&gt;AppCompatActivity&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.view.&lt;span style=&quot;color: #000000;&quot;&gt;Menu&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;import &lt;/span&gt;android.view.&lt;span style=&quot;color: #000000;&quot;&gt;MenuItem&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;class &lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;MainActivity &lt;/span&gt;: AppCompatActivity() {&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;onCreate&lt;/span&gt;(savedInstanceState: &lt;span style=&quot;color: #000000;&quot;&gt;Bundle&lt;/span&gt;?) {&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)&lt;br /&gt;        setContentView(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;layout&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;activity_main&lt;/span&gt;)&lt;br /&gt;        }&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;onCreateOptionsMenu&lt;/span&gt;(menu: &lt;span style=&quot;color: #000000;&quot;&gt;Menu&lt;/span&gt;): &lt;span style=&quot;color: #000000;&quot;&gt;Boolean &lt;/span&gt;{&lt;br /&gt;        &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;// Inflate the menu; this adds items to the action bar if it is present.&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;menuInflater&lt;/span&gt;.inflate(&lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;menu&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;menu_main&lt;/span&gt;, menu)&lt;br /&gt;        &lt;span style=&quot;color: #0033b3;&quot;&gt;return true&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;    &lt;/span&gt;}&lt;br /&gt;&lt;br /&gt;    &lt;span style=&quot;color: #0033b3;&quot;&gt;override fun &lt;/span&gt;&lt;span style=&quot;color: #00627a;&quot;&gt;onOptionsItemSelected&lt;/span&gt;(item: &lt;span style=&quot;color: #000000;&quot;&gt;MenuItem&lt;/span&gt;): &lt;span style=&quot;color: #000000;&quot;&gt;Boolean &lt;/span&gt;{&lt;br /&gt;        &lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;// Handle action bar item clicks here. The action bar will&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;        // automatically handle clicks on the Home/Up button, so long&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;        // as you specify a parent activity in AndroidManifest.xml.&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c; font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;return when &lt;/span&gt;(item.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;itemId&lt;/span&gt;) {&lt;br /&gt;            &lt;span style=&quot;color: #000000;&quot;&gt;R&lt;/span&gt;.&lt;span style=&quot;color: #000000;&quot;&gt;id&lt;/span&gt;.&lt;span style=&quot;color: #871094; font-style: italic;&quot;&gt;action_settings &lt;/span&gt;-&amp;gt; &lt;span style=&quot;color: #0033b3;&quot;&gt;true&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;            else &lt;/span&gt;-&amp;gt; &lt;span style=&quot;color: #0033b3;&quot;&gt;super&lt;/span&gt;.onOptionsItemSelected(item)&lt;br /&gt;        }&lt;br /&gt;    }&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;Maracrà uns errors, perquè redefinirem &lt;strong&gt;activity_main.xml&lt;/strong&gt; amb alguns elements que falten&lt;/p&gt;
&lt;p&gt;I en el seu layout, &lt;strong&gt;activity_main.xml&lt;/strong&gt;, només hem d'observar que en ell inclourem un altre layout en la penúltima línia, el &lt;strong&gt;content_main&lt;/strong&gt;:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.coordinatorlayout.widget.CoordinatorLayout &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;com.google.android.material.appbar.AppBarLayout&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:theme&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@style/Theme.CoffeeShops_Fragments_FIREBASE.AppBarOverlay&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.appcompat.widget.Toolbar&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/toolbar&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;?attr/actionBarSize&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:background&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;?attr/colorPrimary&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:popupTheme&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@style/Theme.CoffeeShops_Fragments_FIREBASE.PopupOverlay&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;com.google.android.material.appbar.AppBarLayout&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;include &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;layout&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@layout/content_main&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.coordinatorlayout.widget.CoordinatorLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;Marcarà error en la penúltima fila, perquè ens falta definir el &lt;strong&gt;content_main.xml&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;En el mencionat &lt;strong&gt;content_main.xml &lt;/strong&gt;només assenyalem que utilitzarem el &lt;strong&gt;navigation/nav_graph&lt;/strong&gt;&lt;strong&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_behavior&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@string/appbar_scrolling_view_behavior&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;fragment&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/nav_host_fragment&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;androidx.navigation.fragment.NavHostFragment&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:defaultNavHost&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintBottom_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintLeft_toLeftOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintRight_toRightOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:navGraph&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@navigation/nav_graph&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;I és en el &lt;strong&gt;nav_graph.xml&lt;/strong&gt; on es dissenya la manera de navegar. S'ha de crear sobre &lt;strong&gt;res -&amp;gt; New -&amp;gt; Android Resource File&lt;/strong&gt;, amb el nom especificat (no cal posar .xml) i cuidant que siga en recurs de tipus &lt;strong&gt;Navigation&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/T7_5_3_4_4.png&quot; alt=&quot;&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;824&quot; height=&quot;496&quot; /&gt;&lt;/p&gt;
&lt;p&gt;I aquest ha de ser el seu contingut&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;navigation &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/nav_graph&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:startDestination&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@id/FirstFragment&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;fragment&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/FirstFragment&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;com.example.coffeeshops_fragments_firebase.FirstFragment&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:label&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@string/first_fragment_label&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@layout/fragment_first&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;action&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/action_FirstFragment_to_SecondFragment&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:destination&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@id/SecondFragment&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;    &amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;fragment&lt;/span&gt;&amp;gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;fragment&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/SecondFragment&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:name&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;com.example.coffeeshops_fragments_firebase.SecondFragment&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:label&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@string/second_fragment_label&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@layout/fragment_second&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;        &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;action&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/action_SecondFragment_to_FirstFragment&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:destination&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@id/FirstFragment&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;    &amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;fragment&lt;/span&gt;&amp;gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;navigation&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;En el moment de crear aquest fitxer, haurien de desaparèixer tots els errors&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9324"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="257_257_2.19"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="260">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="258"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_3_4_4.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_3_4_4.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="e3788e5e46d1abf7217baec17507f36c"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="259"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="259"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="20"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="240"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="257"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="240"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="260"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
               <instance class="exe.engine.jsidevice.JsIdevice" reference="261">
                <dictionary>
                 <string role="key" value="_title"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="_attributes"></string>
                 <list>
                  <tuple>
                   <string value="title"></string>
                   <list>
                    <string value="Title"></string>
                    <int value="0"></int>
                    <int value="0"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="category"></string>
                   <list>
                    <string value="Category"></string>
                    <int value="0"></int>
                    <int value="1"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="css-class"></string>
                   <list>
                    <string value="CSS class"></string>
                    <int value="0"></int>
                    <int value="2"></int>
                   </list>
                  </tuple>
                  <tuple>
                   <string value="icon"></string>
                   <list>
                    <string value="Icon"></string>
                    <int value="0"></int>
                    <int value="3"></int>
                   </list>
                  </tuple>
                 </list>
                 <string role="key" value="_author"></string>
                 <string value=""></string>
                 <string role="key" value="_iDeviceDir"></string>
                 <string value="text"></string>
                 <string role="key" value="_purpose"></string>
                 <string value=""></string>
                 <string role="key" value="_tip"></string>
                 <string value=""></string>
                 <string role="key" value="_valid"></string>
                 <bool value="1"></bool>
                 <string role="key" value="class_"></string>
                 <unicode value="text"></unicode>
                 <string role="key" value="edit"></string>
                 <bool value="0"></bool>
                 <string role="key" value="emphasis"></string>
                 <int value="0"></int>
                 <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
                 <int value="1"></int>
                 <string role="key" value="fields"></string>
                 <list>
                  <instance class="exe.engine.field.TextAreaField" reference="262">
                   <dictionary>
                    <string role="key" value="_id"></string>
                    <unicode value="258_2"></unicode>
                    <string role="key" value="_idevice"></string>
                    <reference key="261"></reference>
                    <string role="key" value="_instruc"></string>
                    <string value=""></string>
                    <string role="key" value="_name"></string>
                    <string value=""></string>
                    <string role="key" value="anchor_names"></string>
                    <list></list>
                    <string role="key" value="anchors_linked_from_fields"></string>
                    <dictionary></dictionary>
                    <string role="key" value="content_w_resourcePaths"></string>
                    <unicode content="true" value="&lt;div class=&quot;exe-text&quot;&gt;&lt;p&gt;Si tot ha anat bé, es veurà com en executar, ràpidament apareixen les caixes de cada cafeteria, però potser encara no aparega la imatge. A poc a poc aniran apareixent. I si s'apreta a alguna cafeteria,anirem a veure els comentaris en el segon fragment&lt;/p&gt;
&lt;table style=&quot;width: 100%; height: 10px;&quot; border=&quot;0&quot;&gt;
&lt;tbody&gt;
&lt;tr style=&quot;height: 10px;&quot;&gt;
&lt;td style=&quot;width: 50%; height: 10px; text-align: right;&quot;&gt;&lt;img src=&quot;resources/T7_5_3_4_5.png&quot; alt=&quot;&quot; width=&quot;315&quot; height=&quot;583&quot; /&gt;&lt;/td&gt;
&lt;td style=&quot;width: 50%; height: 10px;&quot;&gt;&lt;img src=&quot;resources/T7_5_3_4_6.png&quot; alt=&quot;&quot; width=&quot;315&quot; height=&quot;583&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;&lt;/div&gt;"></unicode>
                    <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                    <int value="4"></int>
                    <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                    <int value="2"></int>
                    <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                    <int value="3"></int>
                    <string role="key" value="htmlTag"></string>
                    <string value="div"></string>
                    <string role="key" value="images"></string>
                    <instance class="exe.engine.galleryidevice.GalleryImages">
                     <dictionary>
                      <string role="key" value=".listitems"></string>
                      <list>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9263"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="258_258_2.36"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="263">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="261"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_3_4_5.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_3_4_5.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="fefeddf8a5189b661f4870871041cfcb"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="262"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                       <instance class="exe.engine.galleryidevice.GalleryImage">
                        <dictionary>
                         <string role="key" value="_caption"></string>
                         <instance class="exe.engine.field.TextField">
                          <dictionary>
                           <string role="key" value="_id"></string>
                           <int value="9284"></int>
                           <string role="key" value="_idevice"></string>
                           <none></none>
                           <string role="key" value="_instruc"></string>
                           <string value=""></string>
                           <string role="key" value="_name"></string>
                           <string value=""></string>
                           <string role="key" value="content"></string>
                           <string value=""></string>
                           <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                           <int value="4"></int>
                          </dictionary>
                         </instance>
                         <string role="key" value="_id"></string>
                         <unicode value="258_258_2.37"></unicode>
                         <string role="key" value="_imageResource"></string>
                         <instance class="exe.engine.resource.Resource" reference="264">
                          <dictionary>
                           <string role="key" value="_idevice"></string>
                           <reference key="261"></reference>
                           <string role="key" value="_package"></string>
                           <reference key="2"></reference>
                           <string role="key" value="_storageName"></string>
                           <string value="T7_5_3_4_6.png"></string>
                           <string role="key" value="_userName"></string>
                           <string value="/tmp/tmpk13NfD/T7_5_3_4_6.png"></string>
                           <string role="key" value="checksum"></string>
                           <string value="12804700b41f9f365fc02020471bad8c"></string>
                           <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                           <int value="2"></int>
                           <string role="key" value="warningMsg"></string>
                           <string value=""></string>
                          </dictionary>
                         </instance>
                         <string role="key" value="_parent"></string>
                         <reference key="262"></reference>
                         <string role="key" value="_thumbnailResource"></string>
                         <none></none>
                         <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                         <int value="3"></int>
                         <string role="key" value="makeThumbnail"></string>
                         <bool value="0"></bool>
                        </dictionary>
                       </instance>
                      </list>
                      <string role="key" value="idevice"></string>
                      <reference key="262"></reference>
                     </dictionary>
                    </instance>
                    <string role="key" value="intlinks_to_anchors"></string>
                    <dictionary></dictionary>
                    <string role="key" value="nextImageId"></string>
                    <int value="38"></int>
                    <string role="key" value="parentNode"></string>
                    <reference key="240"></reference>
                   </dictionary>
                  </instance>
                 </list>
                 <string role="key" value="icon"></string>
                 <unicode value=""></unicode>
                 <string role="key" value="id"></string>
                 <unicode value="258"></unicode>
                 <string role="key" value="ideviceCategory"></string>
                 <unicode value="Text and Tasks"></unicode>
                 <string role="key" value="lastIdevice"></string>
                 <bool value="0"></bool>
                 <string role="key" value="nextFieldId"></string>
                 <int value="3"></int>
                 <string role="key" value="originalicon"></string>
                 <string value=""></string>
                 <string role="key" value="parentNode"></string>
                 <reference key="240"></reference>
                 <string role="key" value="systemResources"></string>
                 <list></list>
                 <string role="key" value="undo"></string>
                 <bool value="1"></bool>
                 <string role="key" value="userResources"></string>
                 <list>
                  <reference key="263"></reference>
                  <reference key="264"></reference>
                 </list>
                 <string role="key" value="version"></string>
                 <int value="0"></int>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="_id"></string>
              <unicode value="80"></unicode>
              <string role="key" value="_package"></string>
              <reference key="2"></reference>
              <string role="key" value="anchor_fields"></string>
              <list></list>
              <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exportType"></string>
              <string value="website"></string>
              <string role="key" value="last_full_node_path"></string>
              <string value="exe-node:Tema%207%3A%20FIREBASE:5%20-%20Cloud%20Storage:5.3%20CS%3A%20Utilitzaci%C3%B3%20des%20d%27Android:5.3.4%20CS-Android%3A%20Exemple%20ampliat%2C%20combinant%20amb%20Cloud%20Firestore"></string>
              <string role="key" value="parent"></string>
              <reference key="213"></reference>
              <string role="key" value="top_anchors_linked_from_fields"></string>
              <list></list>
              <string role="key" value="children"></string>
              <list></list>
             </dictionary>
            </instance>
           </list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="267">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="Exercicis"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="265">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 7.1 (Realtime Database)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="266">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="152_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="265"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Farem una aplicació per a agafar unes dades corresponents a unes estadístiques guardades en &lt;strong&gt;Realtime Database &lt;/strong&gt; de &lt;strong&gt;Firebase&lt;/strong&gt;, concretament en la següent aplicació:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Compte de Google: &lt;strong&gt;ieselcaminas.ad@gmail.com &lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Contrasenya: &lt;strong&gt;ad_ieselcaminas&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Aplicació: &lt;strong&gt;xat-ad&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La informació a la qual volem accedir està en el array &lt;strong&gt;EstadisticaVariacioPoblacional&lt;/strong&gt; amb les províncies, i en cada província tenim el nom (&lt;strong&gt;nombre&lt;/strong&gt;) i en un array anomenat &lt;strong&gt;data&lt;/strong&gt; tenim diferents anys amb el número d'any i el valor de la variació de la població:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_Ex1_1.png&quot; alt=&quot;&quot; width=&quot;749&quot; height=&quot;444&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PODEU FER L'APLICACIÓ EN INTELLIJ O EN ANDROID&lt;/strong&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Aplicació en IntelliJ&lt;/p&gt;
&lt;p&gt;Podeu utilitzar el &quot;esquelet&quot; que hi ha a continuació. En ell tenim:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Un JCombobox per a triar la província&lt;/li&gt;
&lt;li&gt;Un JTextArea, per a mostrar les dades de la província triada&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Haureu d'incorporar el fitxer json on està la configuració i la clau privada de la connexió. El fitxer s'anomena &lt;strong&gt;xat-ad-firebase-adminsdk-my2d0-8c69944b34.json&lt;/strong&gt;, i el teniu com un recurs en l'aula virtual. La URL d'accés a aquesta Base de Dades és: &lt;strong&gt;https://xat-ad.firebaseio.com/&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;L'aplicació ha de agafar les províncies (observeu que estan en una llista) i guardar-les en un JComboBox, per a poder trair-les. Quan es trie una província, s'haurà de mostrar en el JTextArea la informació corresponent a la província, agafant tots els anys de l'array &lt;strong&gt;Data&lt;/strong&gt; (observeu que també és una llista) i mostrar l'any i el valor de la variació poblacional (respectivament &lt;strong&gt;NombrePeriodo&lt;/strong&gt; i &lt;strong&gt;Valor&lt;/strong&gt;)&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7Ex1_2.png&quot; alt=&quot;&quot; width=&quot;450&quot; height=&quot;450&quot; /&gt;&lt;/p&gt;
&lt;p&gt;A continuació teniu l'esquelet del programa que podeu utilitzar, que el podeu guardar en el fitxer Kotlin &lt;strong&gt;T7Ex1_EstadisticaRD.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot; style=&quot;font-weight: bold;&quot;&gt;
&lt;div&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import javax.swing.JFrame
import javax.swing.JLabel
import javax.swing.JComboBox
import javax.swing.JTextArea
import java.awt.BorderLayout
import javax.swing.JPanel
import java.awt.FlowLayout
import java.awt.Color
import javax.swing.JScrollPane
import java.io.FileInputStream
import com.google.firebase.FirebaseOptions
import com.google.auth.oauth2.GoogleCredentials
import com.google.firebase.FirebaseApp
import com.google.firebase.database.FirebaseDatabase
import com.google.firebase.database.DataSnapshot
import com.google.firebase.database.DatabaseError
import com.google.firebase.database.ChildEventListener
import java.awt.EventQueue


class EstadisticaRD : JFrame() {

	val etProv = JLabel(&quot;Provincia: &quot;)
	val provincia = JComboBox&amp;lt;String&amp;gt;()

	val etiqueta = JLabel(&quot;Missatges:&quot;)
	val area = JTextArea()


	// en iniciar posem un contenidor per als elements anteriors
	init {
		defaultCloseOperation = JFrame.EXIT_ON_CLOSE
		setBounds(100, 100, 450, 450)
		setLayout(BorderLayout())
		// contenidor per als elements
		//Hi haurà títol. Panell de dalt: últim missatge. Panell de baix: per a introduir missatge. Panell central: tot el xat

		val panell1 = JPanel(FlowLayout())
		panell1.add(etProv)
		panell1.add(provincia)
		getContentPane().add(panell1, BorderLayout.NORTH)

		val panell2 = JPanel(BorderLayout())
		panell2.add(etiqueta, BorderLayout.NORTH)
		area.setForeground(Color.blue)
		area.setEditable(false)
		val scroll = JScrollPane(area)
		panell2.add(scroll, BorderLayout.CENTER)
		getContentPane().add(panell2, BorderLayout.CENTER)

		setVisible(true)

		val serviceAccount = FileInputStream(&quot;xat-ad-firebase-adminsdk-my2d0-8c69944b34.json&quot;)

		val options = FirebaseOptions.Builder()
			.setCredentials(GoogleCredentials.fromStream(serviceAccount))
			.setDatabaseUrl(&quot;https://xat-ad.firebaseio.com&quot;).build()

		FirebaseApp.initializeApp(options)

		// Posar tota la llista de províncies al JComboBox anomenat provincia


		provincia.addActionListener() {
			// Posar la informació de tots els anys en el JTextArea anomenat area

			
		}
	}
}

fun main(args: Array&amp;lt;String&amp;gt;) {
	EventQueue.invokeLater {
		EstadisticaRD().isVisible = true
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Aplicació en Android&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creeu-vos una nova aplicació d'Android anomenada &lt;strong&gt;T7Ex1_EstadisticaRD&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Incorporeu en ella:
&lt;ul&gt;
&lt;li&gt;Un &lt;strong&gt;Spinner&lt;/strong&gt; per a triar la província&lt;/li&gt;
&lt;li&gt;Un &lt;strong&gt;TextView&lt;/strong&gt;, per a mostrar les estadístiques de la província&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Connecteu a la Base de Dades Firebase abans esmentada&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;L'aplicació ha de agafar les províncies (observeu que estan en una llista) i guardar-les en el Spinner, per a poder trair-les. Quan es trie una província, s'haurà de mostrar en el TextView la informació corresponent a la província, agafant tots els anys de l'array &lt;strong&gt;Data&lt;/strong&gt; (observeu que també és una llista) i mostrar l'any i el valor de la variació poblacional (respectivament &lt;strong&gt;NombrePeriodo&lt;/strong&gt; i &lt;strong&gt;Valor&lt;/strong&gt;)&lt;/p&gt;
&lt;p&gt;A continuació teniu un exemple de activity_main.xml que us podria servir:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;Spinner&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/combo&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/area&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:scrollbars&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;vertical&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintBottom_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintHorizontal_bias&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/combo&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintVertical_bias&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0.0&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;I a continuació l'esquelet del programa per si el voleu utilitzar ja que estan les recomacions-indicacions:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.appcompat.app.AppCompatActivity&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.os.Bundle&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.util.Log&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.View&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.AdapterView&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.ArrayAdapter&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.core.view.size&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;com.google.firebase.database.*&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;kotlinx.android.synthetic.main.activity_main.*&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;MainActivity : AppCompatActivity() {&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreate(savedInstanceState: Bundle?) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)&lt;br /&gt;        setContentView(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;activity_main&lt;/span&gt;)&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;pantPrincipal = &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;this  &lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;// per a utilitzar-lo en el ArrayAdapter del Spinner&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Inicialització de la referència i altres variables&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Lectura de totes les províncies per a posar-les després al Spinner&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Es recomana llegir els fills de la llista, per tant addChildEventListener&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Inicialització del Spinner, amb un ArrayAdapter passant-li un ArrayList amb les províncies&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // es recomana fer-ho dins d'un addListenerForSingleValueEvent sobre la mateixa referència&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // per assegurar-nos que l'ArrayList ja té les províncies&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Instruccions per a posar en el TextView les dades de la provincia seleccionada&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Dins del onItemSelectedListener del Spinner també es recomana llegir els fills de la llista,&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // per tant una altra vegada addChildEventListener&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;    &lt;/span&gt;}&lt;br /&gt;}&lt;/pre&gt;
&lt;p&gt;Com posa en les indicacions, podem tenir la complicació de que quan construïm el Spinner, encara no estiguen les dades llegides. Ho podem solventar afegint un altre listener, el &lt;strong&gt;addListenerForSingleValueEvent&lt;/strong&gt;, que segur que s'executarà després del &lt;strong&gt;addChildEventListener&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="9265"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="152_152_2.141"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="268">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="265"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_Ex1_1.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpk13NfD/T7_Ex1_1.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="41c0ab7a39fe53ac408ac417bd9733cf"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="266"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="9300"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="152_152_2.142"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="269">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="265"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7Ex1_2.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpk13NfD/T7Ex1_2.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="643e4c68e7886ff2d81076099a307deb"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="266"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="266"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="143"></int>
              <string role="key" value="parentNode"></string>
              <reference key="267"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="152"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="267"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="268"></reference>
            <reference key="269"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="270">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 7.2 (Cloud Firestore)"></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="pbl-tools"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="pbl"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="271">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="229_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="270"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;pbl-task-description&quot;&gt;&lt;p&gt;Farem un exercici paregut a l'anterior, però ara les dades estaran guardades en &lt;strong&gt;Cloud Firestore.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Es tractaran d'unes estadístiques lleugerament diferents de les anteriors, i sobretot, organitzades de forma diferent, més a l'estil de Cloud Firestore.&lt;/p&gt;
&lt;p&gt;Les dades de connexió són les mateixes que en l'exercici anterior:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Compte de Google: &lt;strong&gt;ieselcaminas.ad@gmail.com &lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Contrasenya: &lt;strong&gt;ad_ieselcaminas&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Aplicació: &lt;strong&gt;xat-ad&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Però ara ens connectem a Cloud Firestore, i tindrem totes les dades en la col·lecció &lt;strong&gt;Estadistica&lt;/strong&gt;. Tindrem un document per cada província i any, amb la població de dones i homes. Per tant, com que hi ha 52 províncies i 10 anys d'estadístiques, tindrem un total de 520 documents.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7Ex2_1.png&quot; alt=&quot;&quot; width=&quot;1259&quot; height=&quot;693&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Com es veu en la imatge, en cada document es guarda: la província, l'any, el número de dones i el número d'homes.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PODEU FER L'APLICACIÓ EN INTELLIJ O EN ANDROID&lt;/strong&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Aplicació en IntelliJ&lt;/p&gt;
&lt;p&gt;Podeu utilitzar el &quot;esquelet&quot; que hi ha a continuació. En ell tenim:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Un JCombobox per a triar la província&lt;/li&gt;
&lt;li&gt;Un JTextArea, per a mostrar les dades de la província triada&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Haureu d'incorporar el fitxer json on està la configuració i la clau privada de la connexió. El fitxer s'anomena &lt;strong&gt;xat-ad-firebase-adminsdk-my2d0-8c69944b34.json&lt;/strong&gt;, i el teniu com un recurs en l'aula virtual. &lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;L'aplicació ha de agafar les províncies per a guardar-les en un JComboBox i poder triar-les, &lt;strong&gt;però tenint en compte que eixiran repetides&lt;/strong&gt; (concretament 10 vegades cada província). Podeu afegir-les a un&lt;strong&gt; Mutable Set&lt;/strong&gt; per a evitar que estiguen repetides, ja que un set es defineix com un conjunt no ordenat de valors que no es poden repetir. Així, si afegim un valor que ja estava, senzillament no el repetirà. Després només haureu d'ordenar aquest set.&lt;/li&gt;
&lt;li&gt;Quan es trie una província, s'haurà de mostrar en el JTextArea la informació corresponent a la província, agafant tots els documents d'aquesta província, i millor ordenar-los per l'any. S'haurà de mostrar aquest any, i el número de dones i d'homes (respectivament &lt;strong&gt;any&lt;/strong&gt; , &lt;strong&gt;Dones &lt;/strong&gt;i &lt;strong&gt;Homes&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Aquest seria l'aspecte:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7Ex2_2.png&quot; alt=&quot;&quot; width=&quot;450&quot; height=&quot;400&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;I aquest seria l'esquelet, que podeu guardar amb el nom &lt;strong&gt;T7Ex2_EstadisticaCF.kt&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import javax.swing.JFrame
import javax.swing.JLabel
import javax.swing.JComboBox
import javax.swing.JTextArea
import java.awt.BorderLayout
import java.awt.FlowLayout
import javax.swing.JPanel
import java.awt.Color
import javax.swing.JScrollPane
import java.io.FileInputStream
import com.google.firebase.FirebaseOptions
import com.google.auth.oauth2.GoogleCredentials
import com.google.firebase.FirebaseApp
import com.google.firebase.cloud.FirestoreClient
import java.awt.EventQueue

class EstadisticaCF : JFrame() {

	val etCombo = JLabel(&quot;Llista de províncies:&quot;)
	val comboProv = JComboBox&amp;lt;String&amp;gt;()

	val etiqueta = JLabel(&quot;Estadístiques:&quot;)
	val area = JTextArea()

	// en iniciar posem un contenidor per als elements anteriors
	init {
		defaultCloseOperation = JFrame.EXIT_ON_CLOSE
		setBounds(100, 100, 450, 400)
		setLayout(BorderLayout())
		// contenidor per als elements

		val panell1 = JPanel(FlowLayout())
		panell1.add(etCombo)
		panell1.add(comboProv)
		getContentPane().add(panell1, BorderLayout.NORTH)

		val panell2 = JPanel(BorderLayout())
		panell2.add(etiqueta, BorderLayout.NORTH)
		area.setForeground(Color.blue)
		area.setEditable(false)
		val scroll = JScrollPane(area)
		panell2.add(scroll, BorderLayout.CENTER)
		getContentPane().add(panell2, BorderLayout.CENTER)

		setVisible(true)

		val serviceAccount = FileInputStream(&quot;xat-ad-firebase-adminsdk-my2d0-8c69944b34.json&quot;)

		val options = FirebaseOptions.Builder()
			.setCredentials(GoogleCredentials.fromStream(serviceAccount))
			.build()

		FirebaseApp.initializeApp(options)

		val db = FirestoreClient.getFirestore()

		// Instruccions per a omplir el JComboBox amb les províncies

				
		// Instruccions per agafar la informació de tots els anys de la província triada
		comboProv.addActionListener() {&lt;br /&gt;

	}
}

fun main(args: Array&amp;lt;String&amp;gt;) {
	EventQueue.invokeLater {
		EstadisticaCF().isVisible = true
	}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;titolet&quot;&gt;Aplicació en Android&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creeu-vos una nova aplicació d'Android anomenada &lt;strong&gt;T7Ex2_EstadisticaCF&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Incorporeu en ella:
&lt;ul&gt;
&lt;li&gt;Un &lt;strong&gt;Spinner&lt;/strong&gt; per a triar la província&lt;/li&gt;
&lt;li&gt;Un &lt;strong&gt;TextView&lt;/strong&gt;, per a mostrar les estadístiques de la província&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Connecteu a la Base de Dades Firebase abans esmentada&lt;/li&gt;
&lt;li&gt;Incorporeu la següent  línia en el &lt;strong&gt;build-gradle&lt;/strong&gt; de l'aplicació, per a que no us done error:&lt;br /&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono', monospace; padding-left: 30px;&quot;&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;&lt;strong&gt;multiDexEnabled true&lt;/strong&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;L'aplicació ha de:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Primer ha d'agafar les províncies per a guardar-les en el Spinner i poder triar-les, &lt;strong&gt;però tenint en compte que eixiran repetides&lt;/strong&gt; (concretament 10 vegades cada província). Podeu afegir-les a un &lt;strong&gt;set&lt;/strong&gt; per a evitar que estiguen repetides, ja que un set es defineix com un conjunt no ordenat de valors que no es poden repetir. Així, si afegim un valor que ja estava, senzillament no el repetirà. Després només haureu d'ordenar aquest set.&lt;/li&gt;
&lt;li&gt;Quan es trie una província, s'haurà de mostrar en el TextView la informació corresponent a la província, agafant tots els documents d'aquesta província, i millor ordenar-los per l'any. S'haurà de mostrar aquest any, i el número de dones i d'homes (respectivament &lt;strong&gt;any&lt;/strong&gt; , &lt;strong&gt;Dones &lt;/strong&gt;i &lt;strong&gt;Homes&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A continuació teniu un exemple de activity_main.xml que us podria servir:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:context&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;Spinner&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/combo&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;    &amp;lt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/area&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0dp&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:scrollbars&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;vertical&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintBottom_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintHorizontal_bias&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;1.0&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;@+id/combo&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #660e7a; font-weight: bold;&quot;&gt;app&lt;/span&gt;&lt;span style=&quot;color: #0000ff; font-weight: bold;&quot;&gt;:layout_constraintVertical_bias&lt;/span&gt;&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;=&quot;0.0&quot; &lt;/span&gt;/&amp;gt;&lt;br /&gt;&lt;br /&gt;&amp;lt;/&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;p&gt;I aquest seria l'esquelet del programa principal amb els suggeriments:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #000000; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.os.Bundle&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.view.View&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.AdapterView&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;android.widget.ArrayAdapter&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;androidx.appcompat.app.AppCompatActivity&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;com.google.firebase.firestore.FirebaseFirestore&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;import &lt;/span&gt;kotlinx.android.synthetic.main.activity_main.*&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;class &lt;/span&gt;MainActivity : AppCompatActivity() {&lt;br /&gt;    &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;override fun &lt;/span&gt;onCreate(savedInstanceState: Bundle?) {&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)&lt;br /&gt;        setContentView(R.layout.&lt;span style=&quot;color: #660e7a; font-style: italic;&quot;&gt;activity_main&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;pantPrincipal = &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;this  &lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;// per a utilitzar-lo en el ArrayAdapter del spinner&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Inicialització de la referència i altres variables&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;db = FirebaseFirestore.getInstance()&lt;br /&gt;        &lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;val &lt;/span&gt;colRef = db.collection(&lt;span style=&quot;color: #008000; font-weight: bold;&quot;&gt;&quot;Estadistica&quot;&lt;/span&gt;)&lt;br /&gt;&lt;br /&gt;        &lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;// Lectura de totes les províncies per a posar-les després al Spinner&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // S'hauran de llegir tots els documents de la col·lecció, per tant addSnapshotListener&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // sobre la col·lecció&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Inicialització del Spinner, amb un ArrayAdapter passant-li un HashSet ordenat amb les províncies&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // es recomana fer-ho dins d'un addOnSuccessListener sobre la mateixa col·lecció&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // per assegurar-nos que el HashSet ja té les províncies&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Instruccions per a posar en el TextView les dades de la provincia seleccionada&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // Dins del onItemSelectedListener del Spinner també s'hauran de llegir els documents de la col·lecció&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;        // que són de la província triada, per tant una altra vegada addSnapshotListener&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080; font-style: italic;&quot;&gt;    &lt;/span&gt;}&lt;br /&gt;}&lt;/pre&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="9294"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="240_229_2.67"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="272">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="270"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7Ex2_1.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpk13NfD/T7Ex2_1.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="39e36bdc3fac8d21c74d03b10bcb5675"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="271"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="9334"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="240_229_2.68"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="273">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="270"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7Ex2_2.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpk13NfD/T7Ex2_2.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="6a17f016c8bb0ed8ac807229ef2dda9a"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="271"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="271"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="69"></int>
              <string role="key" value="parentNode"></string>
              <reference key="267"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="240"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="267"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="272"></reference>
            <reference key="273"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="274">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 7.3 (Cloud Firestore - Cloud Storage) (voluntari)"></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="pbl-tools"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="pbl"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="275">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="259_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="274"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;pbl-task-description&quot;&gt;&lt;p&gt;Aquest exercici serà per a combinar guardar dades en Cloud Firestore amb fitxers guardats en Cloud Storage.&lt;/p&gt;
&lt;p&gt;En compte de guardar imatges, ara guardarem &lt;strong&gt;audios&lt;/strong&gt;. No podrem reproduir tots els tipus d'audio, però tots els audios que estiguen guardats es podran reproduir.&lt;/p&gt;
&lt;p&gt;Les dades de connexió són les mateixes que en exercicis anteriors:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Compte de Google: &lt;strong&gt;ieselcaminas.ad@gmail.com &lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Contrasenya: &lt;strong&gt;ad_ieselcaminas&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Aplicació: &lt;strong&gt;xat-ad&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;L'estructura de dades és molt semblant a l'exemple en què guardàvem imatges&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;En Cloud Firestore guardem en una col·lecció anomenada &lt;strong&gt;Audios&lt;/strong&gt; una sèrie de documents, i en cadascun tindrem el nom de l'audio i el nom del fitxer&lt;/li&gt;
&lt;li&gt;En Cloud Storage guardem els fitxer d'audio&lt;/li&gt;
&lt;/ul&gt;
&lt;table style=&quot;width: 100%;&quot; border=&quot;1&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 50%;&quot;&gt;&lt;img src=&quot;resources/T7_Ex4_1.png&quot; alt=&quot;&quot; width=&quot;549&quot; height=&quot;343&quot; /&gt;&lt;/td&gt;
&lt;td style=&quot;width: 50%;&quot;&gt;&lt;img src=&quot;resources/T7_Ex4_2.png&quot; alt=&quot;&quot; width=&quot;585&quot; height=&quot;319&quot; /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Podeu fer l'exercici tant en IntelliJ com en Android. En Android utilitzarem el component &lt;strong&gt;MediaPlayer&lt;/strong&gt;. Aquest controlador també està disponible utilitzant les llibreries de &lt;strong&gt;JavaFX&lt;/strong&gt;, però açò suposaria haver d'instal·lar plugins a IntelliJ, i no valdrà la pena. Utilitzarem un altre component que ja ve instal·lat, encara que limitat, ja que no en permetrà reproduir els fitxers .&lt;strong&gt;mp3&lt;/strong&gt;, però sí els formats més senzills com &lt;strong&gt;.wav&lt;/strong&gt; i &lt;strong&gt;.au&lt;/strong&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Aplicació en IntelliJ&lt;/p&gt;
&lt;p&gt;El component que utilitzarem és &lt;strong&gt;AudioSystem&lt;/strong&gt;, situada en &lt;strong&gt;javax.sound.sampled&lt;/strong&gt;. Només l'hem d'inicialitzar un &lt;strong&gt;clip&lt;/strong&gt; a partir de AudioSystem, i per una altra banda un AudioInputStream. Posteriorment obrirem el clip amb el AudioInputStream. Després només faltarà posar en marxa l'audio i parar-lo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Per a inicialitzar &lt;strong&gt;val audioInputStream = AudioSystem.getAudioInputStream(&lt;em&gt;InputStream&lt;/em&gt;)&lt;/strong&gt;  i &lt;strong&gt;val clip = AudioSystem.getClip()&lt;/strong&gt;&lt;b&gt;. &lt;/b&gt;Haurem d'aconseguir l'InputStream bé a través del ByteBuffer o del fitxer temporal del nostre fitxer una vegada el tinguem baixat&lt;/li&gt;
&lt;li&gt;Després obrirem el clip amb: &lt;strong&gt;clip.open(audioInputStream)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Per a posar en marxa (play) &lt;strong&gt;clip.start()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Per a parar (stop) &lt;strong&gt;clip.stop()&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En definitiva, quedarà així:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;...
    val clip = AudioSystem.getClip()
...
            val audioInputStream = AudioSystem.getAudioInputStream(inputStream)

            clip.close()   // ha d'estar tancat abans de tornar a obrir-lo
            clip.open(audioInputStream)
...
            clip.stat()
...
            clip.stop()
...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Us heu de muntar un &lt;strong&gt;JComboBox&lt;/strong&gt; per a visualitzar la llista de audios, un botó per a posar en marxa l'audio seleccionat i un botó per a parar-lo&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;resources/T7_Ex4_3.png&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;150&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Recordeu que amb el controlador utilitzat &lt;strong&gt;no&lt;/strong&gt; es poden reproduir els fitxers &lt;strong&gt;mp3&lt;/strong&gt;.&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Aplicació en Android&lt;/p&gt;
&lt;p&gt;El component que utilitzarem és &lt;strong&gt;MediaPlayer&lt;/strong&gt;. Només l'hem d'inicialitzar i després  posar en marxa l'audio i parar-lo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Per a inicialitzar&lt;strong&gt; val clip: MediaPlayer? = MediaPlayer.create(&lt;em&gt;context&lt;/em&gt;,&lt;em&gt; fitxer de so&lt;/em&gt;)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Per a posar en marxa (play) &lt;strong&gt;clip.start()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Per a parar (stop) &lt;strong&gt;clip.stop()&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Si volem tornar a posar en marxa un audio que havíem parat el so, millor situar-lo a principi amb &lt;strong&gt;clip.seek(0)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Us heu de muntar un &lt;strong&gt;Spinner&lt;/strong&gt; per a visualitzar la llista de audios, un botó per a posar en marxa l'audio seleccionat i un botó per a parar-lo.&lt;/p&gt;
&lt;p&gt;Potser en aquest cas &lt;strong&gt;no&lt;/strong&gt; es puguen reproduir els fitxers &lt;strong&gt;.au&lt;/strong&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;/p&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="9292"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="259_259_2.51"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="276">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="274"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_Ex4_1.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpk13NfD/T7_Ex4_1.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="4ab3030483b0c324b93bce3fdb0f797e"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="275"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="9318"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="259_259_2.52"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="277">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="274"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_Ex4_2.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpk13NfD/T7_Ex4_2.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="1ce1fdc99565eaa4616da57bc8c84586"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="275"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="9321"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="259_259_2.53"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="278">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="274"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="2"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="T7_Ex4_3.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="/tmp/tmpk13NfD/T7_Ex4_3.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="28d303cca8caf68be8f3eac68ba03090"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="275"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="275"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="54"></int>
              <string role="key" value="parentNode"></string>
              <reference key="267"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="259"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="267"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="276"></reference>
            <reference key="277"></reference>
            <reference key="278"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.genericidevice.GenericIdevice" reference="279">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Exercici 7.4 (Realtime Database) (voluntari)"></unicode>
           <string role="key" value="_author"></string>
           <unicode value="University of Auckland"></unicode>
           <string role="key" value="_purpose"></string>
           <unicode value="An activity can be defined as a task or set of tasks a learner must
complete. Provide a clear statement of the task and consider any conditions
that may help or hinder the learner in the performance of the task."></unicode>
           <string role="key" value="_tip"></string>
           <unicode value=""></unicode>
           <string role="key" value="class_"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.genericidevice.GenericIdevice.persistenceVersion"></string>
           <int value="11"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="280">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="166_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="279"></reference>
              <string role="key" value="_instruc"></string>
              <unicode value="Describe the tasks the learners should complete."></unicode>
              <string role="key" value="_name"></string>
              <unicode value="Activity"></unicode>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;p&gt;Farem una aplicació en &lt;strong&gt;IntelliJ&lt;/strong&gt; i/o &lt;strong&gt;Android&lt;/strong&gt; per a fer partides del Mastermind compartides. El joc consisteix a endevinar un número de 4 xifres no repetides. Quan es fa una tirada, l'aplicació contestarà quants xifres hi ha encertades i en el lloc corresponent, i quantes xifres encertades però fora del lloc.&lt;/p&gt;
&lt;p&gt;Per exemple: Suposem que el número a endevinar és el 7481. A mida que anem fent tirades hem d'anar endevinant quin és el número:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1234 &lt;span style=&quot;color: #ff0000;&quot;&gt;0 2&lt;/span&gt; (que indica que no hi ha cap xifra al seu lloc, i que hi ha 2 encertades fora del lloc)&lt;/li&gt;
&lt;li&gt;5678 &lt;span style=&quot;color: #ff0000;&quot;&gt;0 2&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;1256 &lt;span style=&quot;color: #ff0000;&quot;&gt;0 1&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;3487 &lt;span style=&quot;color: #ff0000;&quot;&gt;2 1&lt;br /&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;7482 &lt;span style=&quot;color: #ff0000;&quot;&gt;3 0&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;7481 &lt;span style=&quot;color: #ff0000;&quot;&gt;4 0&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Els usuaris connectats a l'aplicació (amb un nom d'usuari, millor si és breu, per exemple 3 caràcters, a l'estil de J01, J02, ...) han de poder fer jugades, i l'aplicació ha de mostrar primer el nom del jugador, la tirada i el resultat.&lt;/p&gt;
&lt;p&gt;Per més simplicitat, només es guardarà una partida, però quan finalitze s'ha de poder començar una altra (esborrant les tirades de la partida anterior). Les dades que guardarem de la partida són:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mastermind&lt;/strong&gt; (serà la clau on ho guardarem tot)&lt;strong&gt; &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Número secret a endevinar: &lt;strong&gt;numSecret&lt;/strong&gt; (string)&lt;/li&gt;
&lt;li&gt;Partida en marxa o bé ja finalitzada: &lt;strong&gt;finalitzada&lt;/strong&gt; (boolean)&lt;/li&gt;
&lt;li&gt;Llista de tirades: &lt;strong&gt;tirades&lt;/strong&gt;. De cadascuna:
&lt;ul&gt;
&lt;li&gt;Jugador que l'ha feta: &lt;strong&gt;nom&lt;/strong&gt; (string)&lt;/li&gt;
&lt;li&gt;Jugada feta: &lt;strong&gt;tirada&lt;/strong&gt; (string)&lt;/li&gt;
&lt;li&gt;Encertades col·locades: &lt;strong&gt;colocades&lt;/strong&gt; (integer)&lt;/li&gt;
&lt;li&gt;Encertades no col·locades: &lt;strong&gt;desordenades&lt;/strong&gt; (integer)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tindrem els mateixos elements que en l'exemple del xat:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Una etiqueta per a indicar nom de jugador&lt;/li&gt;
&lt;li&gt;Un JTextField o EditText per a introduir el nom del jugador. Aquestes dues coses han d'anar dalt de tot, en la mateixa línia.&lt;/li&gt;
&lt;li&gt;Un JTextArea o TextView, per a anar mostrant les tirades de la partida&lt;/li&gt;
&lt;li&gt;Un altre JTextField o EditText per a introduir la nova tirada.&lt;/li&gt;
&lt;li&gt;Un botó d'Enviar. Aquestes dues coses han d'anar baix de tot, en la mateixa línia.&lt;/li&gt;
&lt;li&gt;Per últim també tindrem un botó que inicialment està ocult per a començar una nova partida. Quan es visualitza tapa el JTextField o EditText de la nova tirada i el botó d'enviar, amb la qual cosa no es poden fer més intents&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Inicialment s'ha de comprovar si la partida està en marxa. Si no ho està (o si no hi ha cap partida perquè és la primera vegada que s'executa):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;S'ha de generar un nou número secret i guardar-lo&lt;/li&gt;
&lt;li&gt;S'ha de marcar com a partida no finalitzada&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Si ja està en marxa, senzillament s'ha d'agafar el número secret i s'han de visualitzar les tirades existents, i esperar per si es fa una tirada.&lt;/p&gt;
&lt;p&gt;Quan es fa una tirada:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;S'ha de guardar el jugador, la tirada, el número de encertades col·locades i el número d'encertades no col·locades.&lt;/li&gt;
&lt;li&gt;Si s'ha encertat el número, s'ha de marcar com a finalitzada la partida, i s'ha de visualitzar el botó per a generar una nova partida&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Les dades de connexió són les mateixes que l'exercici anterior:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Compte de Google: &lt;strong&gt;ieselcaminas.ad@gmail.com &lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Contrasenya: &lt;strong&gt;ad_ieselcaminas&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Aplicació: &lt;strong&gt;xat-ad&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Us passe els mètodes &lt;strong&gt;genera()&lt;/strong&gt;, que genera un número aleatori de 4 xifres no repetides, i &lt;strong&gt;comprova(String,String)&lt;/strong&gt; que torna les xifres encertades col·locades i encertades no col·locades:&lt;span style=&quot;color: #000080; font-weight: bold;&quot;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;	fun genera(): String {
		val i0 = (Math.random() * 10).toInt()
		var i1 = (Math.random() * 10).toInt()
		while (i1 == i0)
			i1 = (Math.random() * 10).toInt()
		var i2 = (Math.random() * 10).toInt()
		while (i2 == i0 || i2 == i1)
			i2 = (Math.random() * 10).toInt()
		var i3 = (Math.random() * 10).toInt()
		while (i3 == i0 || i3 == i1 || i3 == i2)
			i3 = (Math.random() * 10).toInt()
		return (i0.toString() + i1.toString() + i2.toString() + i3.toString())
	}

	fun comprova(num: String, sec: String): IntArray {
		var pos = 0
		var nopos = 0
		for (i in 0..3)
			for (j in 0..3)
				if (num[i] == sec[j])
					if (i == j) pos++
					else nopos++
		return intArrayOf(pos, nopos)
	}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;titolet&quot;&gt;Aplicació en IntelliJ&lt;/p&gt;
&lt;p&gt;L'aplicació s'ha de guardar en el fitxer &lt;strong&gt;T7Ex4_Mastermind_RD.kt&lt;/strong&gt;, i aquest seria l'esquelet:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;package exercicis

import com.google.auth.oauth2.GoogleCredentials
import com.google.firebase.FirebaseApp
import com.google.firebase.FirebaseOptions
import com.google.firebase.database.*
import java.awt.*
import java.io.FileInputStream
import javax.swing.*

class Tirada(var nom: String, var tirada: String, var colocades: Int, var desordenades: Int)

class T7Ex4_Mastermind_RD : JFrame() {

    val etJugador = JLabel(&quot;Nom Jugador: &quot;)
    val jugador = JTextField(15)

    val etiqueta = JLabel(&quot;Tirades:&quot;)
    val area = JTextArea()

    val etIntroduccioTirada = JLabel(&quot;Introdueix tirada:&quot;)
    val enviar = JButton(&quot;Enviar&quot;)
    val tirada = JTextField(15)

    val botoPartidaNova = JButton(&quot;PARTIDA NOVA&quot;)

    var numSecret = &quot;&quot;

    // en iniciar posem un contenidor per als elements anteriors
    init {
        defaultCloseOperation = JFrame.EXIT_ON_CLOSE
        setBounds(100, 100, 450, 300)
        setLayout(BorderLayout())

        // contenidor per als elements
        //Hi haurà títol. Panell de dalt: últim missatge. Panell de baix: per a introduir missatge. Panell central: tot el xat

        val panell1 = JPanel(FlowLayout())
        panell1.add(etJugador)
        panell1.add(jugador)
        getContentPane().add(panell1, BorderLayout.NORTH)

        val panell2 = JPanel(BorderLayout())
        panell2.add(etiqueta, BorderLayout.NORTH)
        area.setForeground(Color.BLUE)
        area.isEditable=false
        val scroll = JScrollPane(area)
        panell2.add(scroll, BorderLayout.CENTER)
        getContentPane().add(panell2, BorderLayout.CENTER)

        val panell3 = JPanel(FlowLayout())
        panell3.add(etIntroduccioTirada)
        panell3.add(tirada)
        panell3.add(enviar)
        getContentPane().add(panell3, BorderLayout.SOUTH)
        botoPartidaNova.isVisible=false
        panell3.add(botoPartidaNova)

        setVisible(true)
        enviar.addActionListener { enviar() }

        botoPartidaNova.addActionListener { partidaNova() }

        val serviceAccount = FileInputStream(&quot;xat-ad-firebase-adminsdk-my2d0-8c69944b34.json&quot;)

        val options = FirebaseOptions.builder()
            .setCredentials(GoogleCredentials.fromStream(serviceAccount))
            .setDatabaseUrl(&quot;https://xat-ad.firebaseio.com/&quot;).build()

        FirebaseApp.initializeApp(options)

        title=&quot;MASTERMIND&quot;

        // Exemple de listener de lectura única addListenerForSingleValue()
        // Per a AGAFAR SI ESTÀ LA PARTIDA EN MARXA I EL NÚMERO SECRET
        val mastermind = FirebaseDatabase.getInstance().getReference(&quot;Mastermind&quot;)

        mastermind.addListenerForSingleValueEvent(object : ValueEventListener {
            override
            fun onDataChange(dataSnapshot: DataSnapshot) {
                println(&quot;Entrem&quot;)
                if (dataSnapshot.child(&quot;finalitzada&quot;).getValue(Boolean::class.java)){
                    //partidaNova()
                    println(&quot;Patida nova&quot;)
                }
                else {
                    numSecret = dataSnapshot.child(&quot;numSecret&quot;).getValue(String::class.java)
                }
            }

            override
            fun onCancelled(error: DatabaseError) {
            }
        })


    }

    fun partidaNova(){

    }


    fun enviar(){

     }

    fun genera(): String {
        val i0 = (Math.random() * 10).toInt()
        var i1 = (Math.random() * 10).toInt()
        while (i1 == i0)
            i1 = (Math.random() * 10).toInt()
        var i2 = (Math.random() * 10).toInt()
        while (i2 == i0 || i2 == i1)
            i2 = (Math.random() * 10).toInt()
        var i3 = (Math.random() * 10).toInt()
        while (i3 == i0 || i3 == i1 || i3 == i2)
            i3 = (Math.random() * 10).toInt()
        return (i0.toString() + i1.toString() + i2.toString() + i3.toString())
    }

    fun comprova(num: String, sec: String): IntArray {
        var pos = 0
        var nopos = 0
        for (i in 0..3)
            for (j in 0..3)
                if (num[i] == sec[j])
                    if (i == j) pos++
                    else nopos++
        return intArrayOf(pos, nopos)
    }

}



fun main(args: Array&amp;lt;String&amp;gt;) {
    EventQueue.invokeLater {
        T7Ex4_Mastermind_RD().isVisible = true
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p class=&quot;titolet&quot;&gt;Aplicació en Android&lt;/p&gt;
&lt;p&gt;Crea un projecte anomenat &lt;strong&gt;T7Ex4_Mastermind_RD&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Aquest seria el &lt;strong&gt;activity_main.xml&lt;/strong&gt; amb els elements comentats abans:&lt;/p&gt;
&lt;pre style=&quot;background-color: #ffffff; color: #080808; font-family: 'DejaVu Sans Mono',monospace; font-size: 9,0pt;&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xml version&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;1.0&quot; &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;encoding&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;utf-8&quot;&lt;/span&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;?&amp;gt;&lt;br /&gt;&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;RelativeLayout &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;xmlns:&lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;tools&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;http://schemas.android.com/tools&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/activity_main&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;/span&gt;&amp;gt;&lt;/strong&gt;&lt;br /&gt;&lt;br /&gt;&lt;strong&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;Nom del jugador (preferiblement 3 caràcters):&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/eti&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentTop&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentLeft&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentStart&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_above&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/textView&quot; &lt;/span&gt;/&amp;gt;&lt;/strong&gt;&lt;br /&gt;&lt;strong&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;EditText&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/jugador&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentRight&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_toRightOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/eti&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentTop&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot; &lt;/span&gt;/&amp;gt;&lt;/strong&gt;&lt;br /&gt;&lt;br /&gt;&lt;strong&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;TextView&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/textView&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;match_parent&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_above&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/tirada&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_below&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/jugador&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentEnd&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentRight&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:scrollbars&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;vertical&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;&quot; &lt;/span&gt;/&amp;gt;&lt;/strong&gt;&lt;br /&gt;&lt;strong&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;EditText&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/tirada&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentLeft&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentStart&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentBottom&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_toLeftOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/boto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_toStartOf&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/boto&quot; &lt;/span&gt;/&amp;gt;&lt;/strong&gt;&lt;br /&gt;&lt;br /&gt;&lt;strong&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;Button&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;Enviar&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/boto&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentRight&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentEnd&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentBottom&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_below&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/textView&quot; &lt;/span&gt;/&amp;gt;&lt;/strong&gt;&lt;br /&gt;&lt;strong&gt;    &amp;lt;&lt;span style=&quot;color: #0033b3;&quot;&gt;Button&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #0033b3;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_width&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_height&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;wrap_content&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:text&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;NOVA PARTIDA&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:id&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/botoNova&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentRight&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentEnd&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentBottom&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_below&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;@+id/textView&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentLeft&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:layout_alignParentStart&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;true&quot;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #871094;&quot;&gt;android&lt;/span&gt;&lt;span style=&quot;color: #174ad4;&quot;&gt;:visibility&lt;/span&gt;&lt;span style=&quot;color: #067d17;&quot;&gt;=&quot;invisible&quot;&lt;/span&gt;/&amp;gt;&lt;/strong&gt;&lt;br /&gt;&lt;br /&gt;&lt;strong&gt;&amp;lt;/&lt;span style=&quot;color: #0033b3;&quot;&gt;RelativeLayout&lt;/span&gt;&amp;gt;&lt;/strong&gt;&lt;/pre&gt;
&lt;p&gt;&lt;/p&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="280"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="267"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="id"></string>
           <unicode value="166"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <unicode value="activity"></unicode>
           <string role="key" value="parentNode"></string>
           <reference key="267"></reference>
           <string role="key" value="systemResources"></string>
           <list>
            <string value="common.js"></string>
           </list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="12"></unicode>
        <string role="key" value="_package"></string>
        <reference key="2"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:Tema%207%3A%20FIREBASE:Exercicis"></string>
        <string role="key" value="parent"></string>
        <reference key="4"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
     </list>
    </dictionary>
   </instance>
   <unicode role="key" value="12"></unicode>
   <reference key="267"></reference>
   <unicode role="key" value="37"></unicode>
   <reference key="8"></reference>
   <unicode role="key" value="38"></unicode>
   <reference key="11"></reference>
   <unicode role="key" value="40"></unicode>
   <reference key="60"></reference>
   <unicode role="key" value="41"></unicode>
   <reference key="74"></reference>
   <unicode role="key" value="42"></unicode>
   <reference key="24"></reference>
   <unicode role="key" value="43"></unicode>
   <reference key="57"></reference>
   <unicode role="key" value="44"></unicode>
   <reference key="20"></reference>
   <unicode role="key" value="46"></unicode>
   <reference key="15"></reference>
   <unicode role="key" value="51"></unicode>
   <reference key="33"></reference>
   <unicode role="key" value="52"></unicode>
   <reference key="27"></reference>
   <unicode role="key" value="53"></unicode>
   <reference key="52"></reference>
   <unicode role="key" value="55"></unicode>
   <reference key="92"></reference>
   <unicode role="key" value="56"></unicode>
   <reference key="95"></reference>
   <unicode role="key" value="57"></unicode>
   <reference key="104"></reference>
   <unicode role="key" value="58"></unicode>
   <reference key="86"></reference>
   <unicode role="key" value="59"></unicode>
   <reference key="108"></reference>
   <unicode role="key" value="60"></unicode>
   <reference key="115"></reference>
   <unicode role="key" value="61"></unicode>
   <reference key="135"></reference>
   <unicode role="key" value="62"></unicode>
   <reference key="139"></reference>
   <unicode role="key" value="63"></unicode>
   <reference key="144"></reference>
   <unicode role="key" value="65"></unicode>
   <reference key="155"></reference>
   <unicode role="key" value="66"></unicode>
   <reference key="167"></reference>
   <unicode role="key" value="67"></unicode>
   <reference key="177"></reference>
   <unicode role="key" value="68"></unicode>
   <reference key="180"></reference>
   <unicode role="key" value="69"></unicode>
   <reference key="188"></reference>
   <unicode role="key" value="71"></unicode>
   <reference key="132"></reference>
   <unicode role="key" value="72"></unicode>
   <reference key="213"></reference>
   <unicode role="key" value="73"></unicode>
   <reference key="193"></reference>
   <unicode role="key" value="74"></unicode>
   <reference key="202"></reference>
   <unicode role="key" value="75"></unicode>
   <reference key="206"></reference>
   <unicode role="key" value="76"></unicode>
   <reference key="210"></reference>
   <unicode role="key" value="77"></unicode>
   <reference key="216"></reference>
   <unicode role="key" value="78"></unicode>
   <reference key="225"></reference>
   <unicode role="key" value="79"></unicode>
   <reference key="236"></reference>
   <unicode role="key" value="80"></unicode>
   <reference key="240"></reference>
  </dictionary>
  <string role="key" value="_objectives"></string>
  <unicode value=""></unicode>
  <string role="key" value="_preknowledge"></string>
  <unicode value=""></unicode>
  <string role="key" value="_templateFile"></string>
  <string value=""></string>
  <string role="key" value="anchor_nodes"></string>
  <list></list>
  <string role="key" value="backgroundImgTile"></string>
  <bool value="0"></bool>
  <string role="key" value="currentNode"></string>
  <reference key="216"></reference>
  <string role="key" value="dublinCore"></string>
  <instance class="exe.engine.package.DublinCore">
   <dictionary>
    <string role="key" value="contributors"></string>
    <unicode value=""></unicode>
    <string role="key" value="coverage"></string>
    <unicode value=""></unicode>
    <string role="key" value="creator"></string>
    <unicode value="Àlvar Serrano Calduch"></unicode>
    <string role="key" value="date"></string>
    <unicode value=""></unicode>
    <string role="key" value="description"></string>
    <unicode value=""></unicode>
    <string role="key" value="format"></string>
    <unicode value=""></unicode>
    <string role="key" value="identifier"></string>
    <unicode value="aa72efc9-e88a-48d6-a120-062067417389"></unicode>
    <string role="key" value="language"></string>
    <unicode value="ca"></unicode>
    <string role="key" value="publisher"></string>
    <unicode value=""></unicode>
    <string role="key" value="relation"></string>
    <unicode value=""></unicode>
    <string role="key" value="rights"></string>
    <unicode value=""></unicode>
    <string role="key" value="source"></string>
    <unicode value=""></unicode>
    <string role="key" value="subject"></string>
    <unicode value=""></unicode>
    <string role="key" value="title"></string>
    <unicode value="Bases de Dades"></unicode>
    <string role="key" value="type"></string>
    <unicode value=""></unicode>
   </dictionary>
  </instance>
  <string role="key" value="exe.engine.package.Package.persistenceVersion"></string>
  <int value="16"></int>
  <string role="key" value="exportMetadataType"></string>
  <string value="LOMES"></string>
  <string role="key" value="exportSource"></string>
  <bool value="1"></bool>
  <string role="key" value="footer"></string>
  <unicode value=""></unicode>
  <string role="key" value="isLoading"></string>
  <bool value="0"></bool>
  <string role="key" value="license"></string>
  <unicode value=""></unicode>
  <string role="key" value="lom"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.contextSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOMv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.contextValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="other"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
        <instance class="exe.engine.lom.lomsubs.contextSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOMv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.contextValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="school"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.intendedEndUserRoleSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOMv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.intendedEndUserRoleValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="learner"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.learningResourceTypeSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOMv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.learningResourceTypeValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value=""></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list></list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg "></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="aa72efc9-e88a-48d6-a120-062067417389"></unicode>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Bases de Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="281">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2016-05-06"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Data de creaci\xc3\xb3 de les metadades"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="282">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="283">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOMv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="281"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="282"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="283"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOMv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <none></none>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <none></none>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="lomEs"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.contextSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOM-ESv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.contextValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="presencial"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
        <instance class="exe.engine.lom.lomsubs.contextSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOM-ESv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.contextValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="classroom"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.intendedEndUserRoleSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOM-ESv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.intendedEndUserRoleValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="learner"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="ca"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.learningResourceTypeSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOM-ESv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.learningResourceTypeValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value=""></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list></list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="El meu catàleg "></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="aa72efc9-e88a-48d6-a120-062067417389"></unicode>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="ca"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="ca"></string>
           <string role="key" value="valueOf_"></string>
           <string value="Bases de Dades"></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub" reference="284">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2016-05-06"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="ca"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Data de creaci\xc3\xb3 de les metadades"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub" reference="285">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:\xc3\x80lvar Serrano Calduch EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub" reference="286">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOM-ESv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <reference key="284"></reference>
         <string role="key" value="entity"></string>
         <list>
          <reference key="285"></reference>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <reference key="286"></reference>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="ca"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOM-ESv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <instance class="exe.engine.lom.lomsubs.accessSub">
       <dictionary>
        <string role="key" value="accessType"></string>
        <instance class="exe.engine.lom.lomsubs.accessTypeSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOM-ESv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="uniqueElementName"></string>
          <string value="accessType"></string>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.accessTypeValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="universal"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
        <string role="key" value="description"></string>
        <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list>
           <instance class="exe.engine.lom.lomsubs.LangStringSub">
            <dictionary>
             <string role="key" value="language"></string>
             <string value="ca"></string>
             <string role="key" value="valueOf_"></string>
             <unicode value="Per defecte"></unicode>
            </dictionary>
           </instance>
          </list>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="access"></string>
       </dictionary>
      </instance>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <none></none>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <string value="rights"></string>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="mxmlforcemediaonly"></string>
  <bool value="0"></bool>
  <string role="key" value="mxmlheight"></string>
  <string value=""></string>
  <string role="key" value="mxmlprofilelist"></string>
  <string value=""></string>
  <string role="key" value="mxmlwidth"></string>
  <string value=""></string>
  <string role="key" value="release"></string>
  <string value="2.6"></string>
  <string role="key" value="resources"></string>
  <dictionary>
   <string role="key" value="09e289b6c53619599e7d4ab8996ae30c"></string>
   <list>
    <reference key="68"></reference>
   </list>
   <string role="key" value="0c67825f4282d219b2ae9db4650bebb3"></string>
   <list>
    <reference key="174"></reference>
   </list>
   <string role="key" value="0ebfa26756a28d4ee45ae03fc25be3e9"></string>
   <list>
    <reference key="184"></reference>
   </list>
   <string role="key" value="0f538c678af7f6575c126d26b9f6e913"></string>
   <list>
    <reference key="182"></reference>
   </list>
   <string role="key" value="10467746282449a0178badbd93fc516b"></string>
   <list>
    <reference key="46"></reference>
   </list>
   <string role="key" value="12804700b41f9f365fc02020471bad8c"></string>
   <list>
    <reference key="264"></reference>
   </list>
   <string role="key" value="15863e674049840afe2f61781810ba8b"></string>
   <list>
    <reference key="181"></reference>
   </list>
   <string role="key" value="1ce1fdc99565eaa4616da57bc8c84586"></string>
   <list>
    <reference key="277"></reference>
   </list>
   <string role="key" value="1dd692c51a477137a30c276f255c4b23"></string>
   <list>
    <reference key="65"></reference>
   </list>
   <string role="key" value="1ecab1bdd95ec807ed61231834fb9132"></string>
   <list>
    <reference key="220"></reference>
   </list>
   <string role="key" value="1f40c2ee9c34df625f74de39b41cf65b"></string>
   <list>
    <reference key="30"></reference>
   </list>
   <string role="key" value="254720187b887d1069d79d15a6d73e69"></string>
   <list>
    <reference key="29"></reference>
   </list>
   <string role="key" value="28d303cca8caf68be8f3eac68ba03090"></string>
   <list>
    <reference key="278"></reference>
   </list>
   <string role="key" value="2a5fab9bd436af5f5453fa33cb791b33"></string>
   <list>
    <reference key="183"></reference>
   </list>
   <string role="key" value="2aa8056910fa4d021560cc1c0dc11aa2"></string>
   <list>
    <reference key="66"></reference>
   </list>
   <string role="key" value="320fa53d7f6016b3cb5aece0feced026"></string>
   <list>
    <reference key="242"></reference>
   </list>
   <string role="key" value="3649c90d7af1b6e6752dcedd80441142"></string>
   <list>
    <reference key="116"></reference>
   </list>
   <string role="key" value="39e36bdc3fac8d21c74d03b10bcb5675"></string>
   <list>
    <reference key="272"></reference>
   </list>
   <string role="key" value="3a372a16a29b53ba43f62eab38d1568a"></string>
   <list>
    <reference key="126"></reference>
   </list>
   <string role="key" value="3c2064a177c6b6c27d111ef436898237"></string>
   <list>
    <reference key="222"></reference>
   </list>
   <string role="key" value="4075c5061a186d1fbc1b679d770a73bb"></string>
   <list>
    <reference key="101"></reference>
   </list>
   <string role="key" value="41ba16c9f3d5edc61a47e4f385d1b94d"></string>
   <list>
    <reference key="62"></reference>
    <reference key="147"></reference>
    <reference key="218"></reference>
   </list>
   <string role="key" value="41c0ab7a39fe53ac408ac417bd9733cf"></string>
   <list>
    <reference key="268"></reference>
   </list>
   <string role="key" value="4455cf39ec0d16eec4a2a0efc63f01b4"></string>
   <list>
    <reference key="219"></reference>
   </list>
   <string role="key" value="446673bd6bcc254751de89ab2faf0327"></string>
   <list>
    <reference key="217"></reference>
   </list>
   <string role="key" value="486f9fd63aa60df4c1a5232b303eb515"></string>
   <list>
    <reference key="63"></reference>
   </list>
   <string role="key" value="492ce3321b7defe01f033ed76ffb2563"></string>
   <list>
    <reference key="150"></reference>
   </list>
   <string role="key" value="4ab3030483b0c324b93bce3fdb0f797e"></string>
   <list>
    <reference key="276"></reference>
   </list>
   <string role="key" value="54b532072cba1f4f7faad6ff4476fa1c"></string>
   <list>
    <reference key="12"></reference>
   </list>
   <string role="key" value="598ce642a14205b633de94e9ead37352"></string>
   <list>
    <reference key="49"></reference>
   </list>
   <string role="key" value="5f485b0593f6f27f7c343c69bad76342"></string>
   <list>
    <reference key="47"></reference>
   </list>
   <string role="key" value="643e4c68e7886ff2d81076099a307deb"></string>
   <list>
    <reference key="269"></reference>
   </list>
   <string role="key" value="65ee0fa59875bfa7c17311ea4edaef4c"></string>
   <list>
    <reference key="121"></reference>
   </list>
   <string role="key" value="696223cc43f7a9c2b284e5e26eefad42"></string>
   <list>
    <reference key="28"></reference>
   </list>
   <string role="key" value="6a17f016c8bb0ed8ac807229ef2dda9a"></string>
   <list>
    <reference key="273"></reference>
   </list>
   <string role="key" value="6ba60e73684cf1748f9fee8d509514b1"></string>
   <list>
    <reference key="38"></reference>
   </list>
   <string role="key" value="6fd3f62818eaa9d17f1f46ce206bfabe"></string>
   <list>
    <reference key="105"></reference>
   </list>
   <string role="key" value="726ef58e28b42490a5363c1ae01c1ce6"></string>
   <list>
    <reference key="243"></reference>
   </list>
   <string role="key" value="7378c6842569e29c2560c8f0861cab93"></string>
   <list>
    <reference key="41"></reference>
   </list>
   <string role="key" value="74be1dfddf0f8e7ff459b27a1db08264"></string>
   <list>
    <reference key="164"></reference>
   </list>
   <string role="key" value="75362ed79f315f0a5c51efb13cec576f"></string>
   <list>
    <reference key="136"></reference>
   </list>
   <string role="key" value="7db701104d55557aa637536c754fe6d8"></string>
   <list>
    <reference key="185"></reference>
   </list>
   <string role="key" value="82b8eda4bc36b0627045a36301512080"></string>
   <list>
    <reference key="48"></reference>
   </list>
   <string role="key" value="8401631852e99b3dae9bc2e4ea3011fb"></string>
   <list>
    <reference key="89"></reference>
   </list>
   <string role="key" value="8483321eb9e602cb4ae3df3c6d256622"></string>
   <list>
    <reference key="67"></reference>
   </list>
   <string role="key" value="863c6b0f2b04408cfb91e55fd23c2c72"></string>
   <list>
    <reference key="241"></reference>
   </list>
   <string role="key" value="8b187885c19eef552c4556ab60e5d21f"></string>
   <list>
    <reference key="207"></reference>
   </list>
   <string role="key" value="8ec7af30ccfb77e0dd97c5a7b74886fe"></string>
   <list>
    <reference key="35"></reference>
   </list>
   <string role="key" value="9bf07688a3aab074326b8eb3b70d3f36"></string>
   <list>
    <reference key="148"></reference>
   </list>
   <string role="key" value="9cc9b7271b0c0d9f59c7db5a70272c85"></string>
   <list>
    <reference key="69"></reference>
   </list>
   <string role="key" value="9f7bdb3c1aafb6159180d36abe2045a6"></string>
   <list>
    <reference key="96"></reference>
   </list>
   <string role="key" value="a302beabc0607e70d9eb08213ecec36b"></string>
   <list>
    <reference key="151"></reference>
   </list>
   <string role="key" value="a3215dcc0649adc637e2415d53f1799f"></string>
   <list>
    <reference key="40"></reference>
   </list>
   <string role="key" value="a9ec68854ca13fd3cf8c39876860a823"></string>
   <list>
    <reference key="237"></reference>
   </list>
   <string role="key" value="ab748b73d36235e3f0cdac3b55b68714"></string>
   <list>
    <reference key="64"></reference>
   </list>
   <string role="key" value="acddc2c286dd8a2e1099190bd4e660bf"></string>
   <list>
    <reference key="145"></reference>
   </list>
   <string role="key" value="b1eb5c3b14537f196c94db4794b4e839"></string>
   <list>
    <reference key="149"></reference>
   </list>
   <string role="key" value="b59fdbc11babc86ebe58a4bdd4e541ea"></string>
   <list>
    <reference key="39"></reference>
   </list>
   <string role="key" value="b5c7f0a5f4ce6b105be633f3211dde64"></string>
   <list>
    <reference key="42"></reference>
   </list>
   <string role="key" value="bb6688e567e5656b442a59ef9d24427c"></string>
   <list>
    <reference key="117"></reference>
   </list>
   <string role="key" value="c04f479c174630e409fb181e5a8915f5"></string>
   <list>
    <reference key="83"></reference>
   </list>
   <string role="key" value="d2708d8b9e6dc272ba15246fcef92a82"></string>
   <list>
    <reference key="203"></reference>
   </list>
   <string role="key" value="d917bb1b0d299fbea5510f5479cdeeb4"></string>
   <list>
    <reference key="21"></reference>
   </list>
   <string role="key" value="dc2929eae00c5e91147045fcd25b674b"></string>
   <list>
    <reference key="34"></reference>
   </list>
   <string role="key" value="e3788e5e46d1abf7217baec17507f36c"></string>
   <list>
    <reference key="260"></reference>
   </list>
   <string role="key" value="e4349273c75c62d1e737915388e9bbf6"></string>
   <list>
    <reference key="152"></reference>
   </list>
   <string role="key" value="e4ffc730ec73aaa9d37c2e8e25604ac8"></string>
   <list>
    <reference key="125"></reference>
   </list>
   <string role="key" value="e7330f3da2f07b47e2dc2287d19ced41"></string>
   <list>
    <reference key="122"></reference>
   </list>
   <string role="key" value="e794df92ac38d6feb9640d51eb785658"></string>
   <list>
    <reference key="129"></reference>
   </list>
   <string role="key" value="ec38636b843f72e6d9fc89278da368fc"></string>
   <list>
    <reference key="120"></reference>
   </list>
   <string role="key" value="ec86611e9e88768a8858af4c40a3445d"></string>
   <list>
    <reference key="146"></reference>
   </list>
   <string role="key" value="f899e8277697c0703297d30408ad8b53"></string>
   <list>
    <reference key="221"></reference>
   </list>
   <string role="key" value="fbd34b3908b3fa758b38251f687522a8"></string>
   <list>
    <reference key="5"></reference>
   </list>
   <string role="key" value="fde357eb0df7ca1c99444373564374f9"></string>
   <list>
    <reference key="43"></reference>
   </list>
   <string role="key" value="fefeddf8a5189b661f4870871041cfcb"></string>
   <list>
    <reference key="263"></reference>
   </list>
   <string role="key" value="ffe95e5633fe844b2b39114d9ed77a34"></string>
   <list>
    <reference key="61"></reference>
   </list>
  </dictionary>
  <string role="key" value="root"></string>
  <reference key="4"></reference>
  <string role="key" value="scolinks"></string>
  <bool value="0"></bool>
  <string role="key" value="scowsinglepage"></string>
  <bool value="0"></bool>
  <string role="key" value="scowwebsite"></string>
  <bool value="0"></bool>
  <string role="key" value="style"></string>
  <unicode value="caminas 3.1"></unicode>
  <string role="key" value="sugaractivityname"></string>
  <string value=""></string>
  <string role="key" value="sugarservicename"></string>
  <string value=""></string>
  <string role="key" value="tempFile"></string>
  <bool value="0"></bool>
 </dictionary>
</instance>