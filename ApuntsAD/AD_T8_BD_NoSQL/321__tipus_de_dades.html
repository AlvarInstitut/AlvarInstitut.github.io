<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ca" xml:lang="ca" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>3.2.1 - Tipus de dades | Bases de Dades </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="ca" />
<meta name="author" content="Àlvar Serrano Calduch" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc-nd/4.0/" />
<meta name="generator" content="eXeLearning 2.6 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
</head>
<body class="exe-web-site" id="exe-node-19"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Omet navegació</a></p>
<div id="header" ><div id="headerContent">Bases de Dades</div></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Tema 8: Bases de Dades NoSQL</a></li>
   <li><a href="1__introducci.html" class="no-ch">1 - Introducció</a></li>
   <li><a href="2__bases_de_dades_clauvalor.html" class="daddy">2 - Bases de Dades Clau-Valor</a>
   <ul class="other-section">
      <li><a href="21__installaci_de_redis.html" class="no-ch">2.1 - Instal·lació de Redis</a></li>
      <li><a href="22__utilitzaci_de_redis.html" class="daddy">2.2 - Utilització de Redis</a>
      <ul class="other-section">
         <li><a href="221__strings.html" class="no-ch">2.2.1 - Strings</a></li>
         <li><a href="222__keys.html" class="no-ch">2.2.2 - Keys</a></li>
         <li><a href="223__hash.html" class="no-ch">2.2.3 - Hash</a></li>
         <li><a href="224__list.html" class="no-ch">2.2.4 - List</a></li>
         <li><a href="225__set.html" class="no-ch">2.2.5 - Set</a></li>
         <li><a href="226__set_ordenat.html" class="no-ch">2.2.6 - Set ordenat</a></li>
      </ul>
      </li>
      <li><a href="23__connexi_des_de_kotlin.html" class="no-ch">2.3 - Connexió des de Kotlin</a></li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="3__mongodb.html" class="current-page-parent daddy">3 - MongoDB</a>
   <ul>
      <li><a href="31__installaci_de_mongodb.html" class="daddy">3.1 - Instal·lació de MongoDB</a>
      <ul class="other-section">
         <li><a href="311__connexi_al_servidor_de_linstitut.html" class="no-ch">3.1.1 - Connexió al servidor de l'Institut</a></li>
      </ul>
      </li>
      <li class="current-page-parent"><a href="32__utilitzaci_de_mongodb.html" class="current-page-parent daddy">3.2 - Utilització de MongoDB</a>
      <ul>
         <li id="active"><a href="321__tipus_de_dades.html" class="active no-ch">3.2.1 - Tipus de dades</a></li>
         <li><a href="322__operacions_bsiques.html" class="no-ch">3.2.2 - Operacions bàsiques</a></li>
         <li><a href="323__operacions_dactualitzaci_avanada.html" class="daddy">3.2.3 - Operacions d'actualització avançada</a>
         <ul class="other-section">
            <li><a href="3231__set.html" class="no-ch">3.2.3.1 - $set</a></li>
            <li><a href="3232__unset.html" class="no-ch">3.2.3.2 - $unset</a></li>
            <li><a href="3233__rename.html" class="no-ch">3.2.3.3 - $rename</a></li>
            <li><a href="3234__inc.html" class="no-ch">3.2.3.4 - $inc</a></li>
            <li><a href="3235__elements_dun_array.html" class="no-ch">3.2.3.5 - Elements d'un array</a></li>
            <li><a href="3236__inserci_en_arrays_push.html" class="no-ch">3.2.3.6 - Inserció en Arrays: $push</a></li>
            <li><a href="3237__eliminaci_en_arrays_pop_i_pull.html" class="no-ch">3.2.3.7 - Eliminació en arrays: $pop i $pull</a></li>
            <li><a href="3238__upsert.html" class="no-ch">3.2.3.8 - Upsert</a></li>
         </ul>
         </li>
      </ul>
      </li>
      <li><a href="33__consulta_de_documents.html" class="daddy">3.3 - Consulta de documents</a>
      <ul class="other-section">
         <li><a href="331__parmetres_de_les_funcions_find_i_findone.html" class="no-ch">3.3.1 - Paràmetres de les funcions find() i findOne()</a></li>
         <li><a href="332__operadors_de_les_condicions.html" class="no-ch">3.3.2 - Operadors de les condicions</a></li>
         <li><a href="333__agregaci.html" class="no-ch">3.3.3 - Agregació</a></li>
      </ul>
      </li>
      <li><a href="34__connexi_des_de_kotlin.html" class="no-ch">3.4 - Connexió des de Kotlin</a></li>
      <li><a href="35__connexi_des_de_kotlin_al_servidor_de_linstitut.html" class="no-ch">3.5 - Connexió des de Kotlin al servidor de l'Institut</a></li>
   </ul>
   </li>
   <li><a href="exercicis.html" class="no-ch">Exercicis</a></li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="32__utilitzaci_de_mongodb.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="322__operacions_bsiques.html" class="next"><span>Següent<span> &raquo;</span></span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">3.2.1 - Tipus de dades</h1></div>
<div class="iDevice_wrapper FreeTextIdevice" id="id101">
<div class="iDevice emphasis0">
<div id="ta101_85" class="block iDevice_content">
<p style="text-align: justify;">Els valors dels elements, és a dir de les parelles clau valor, poden ser d'uns quants tipus. Fem un ràpid repàs.</p>
<p style="text-align: justify;">En els exemples que van a continuació definim senzillament parelles clau-valor dels diferents tipus, o en tot cas ens ho guardem en variables, però no guardarem encara en la Base de Dades (ho farem en la següent pregunta).</p>
<p style="text-align: justify;">Quan guardem en una variable es mostrarà el prompt, la definició de la variable i després el resultat d'haver guardat la variable. Utilitzarem requadres blancs. Els requadres grocs són únicament de la definició d'una clau-valor d'un determinat tipus</p>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextIdevice" id="id96">
<div class="iDevice emphasis0">
<div id="ta96_85" class="block iDevice_content">
<p class="titolet">NULL</p>
<p>Més que un tipus de dades és un valor, millor dit, l'absència de valor</p>
<p class="codi">{ "x" : null }</p>
<p></p>
<p class="titolet">BOOLEAN</p>
<p>El tipus booleà, que pot agafar els valors true o false.</p>
<p class="codi">{ "x" : true }</p>
<p class="codi">{ "y" : false }</p>
<p></p>
<p class="titolet">NUMBER</p>
<p>Per defecte, el tiups de dades numèrics serà el de coma flotant (<strong>float</strong>), simple precisió. Si volem un altre tiups (enter, doble precisió, ...) ho haurem d'indicar expressament. Així els dos següents valors són float:</p>
<p class="codi">{ "x" : 3.14 }</p>
<p class="codi">{ "y" : 3 }</p>
<p>Si volem que siga estrictament enter, per exemple, haurem d'utilitzar una funció de conversió:</p>
<p class="codi">{ "x" : NumberDouble("3.14") }</p>
<p class="codi">{ "y" : NumberInt("3") }</p>
<p></p>
<p></p>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextIdevice" id="id97">
<div class="iDevice emphasis0">
<div id="ta97_85" class="block iDevice_content">
<p class="titolet">STRING</p>
<p>Es pot guardar qualsevol cadena amb caràcters de la codificació UTF-8</p>
<p class="codi">{  x : "Hola, què tal?"}</p>
<p></p>
<p class="titolet">DATE</p>
<p>Es guarda data i hora, i internament es guarden en milisegons des de l'any inicial. No es guarda el <strong></strong><em>Time zone</em> , és a dir,<em> </em>la desviació respecte a l'hora internacional.</p>
<p class="codi">{ x : ISODate("2022-01-16T11:15:27.471Z") }</p>
<p>Normalment utilitzarem funcions de tractament de la data-hora. L'anterior era per a convertir el string en data-hora. La següent és per a obtenir la data-hora actual:</p>
<p class="codi">{ x : new Date() }</p>
<p>És a dir, que si no posem paràmetre, ens dóna la data-hora actual. Però li podem posar com a paràmetre la data-hora que volem que genere. En aquest exemple, només posem data, per tant l'hora serà les 00:00:</p>
<p class="codi2">&gt; z = new Date("2022-01-16")<br />ISODate("2022-01-16T00:00:00Z")</p>
<p>En aquest sí que posem una determinada hora, i observeu com hem deposar la T (Time) entre el dia i l'hora:</p>
<p class="codi2">&gt; z = new Date("2022-02-16T18:00")<br />ISODate("2022-01-16T18:00:00Z")</p>
<p>És molt important que posem sempre <strong>New Date()</strong> per a generar una data-hora. Si posem únicament <strong>Date()</strong>, el que estem generant és un string (segurament amb la data i hora actual, però un string):</p>
<p class="codi2">&gt; z = Date("2022-01-16")<br />Sun Jan 16 2022 22:20:09 GMT+0100 (CET)</p>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextIdevice" id="id98">
<div class="iDevice emphasis0">
<div id="ta98_85" class="block iDevice_content">
<p class="titolet">ARRAY</p>
<p>És un conjunt d'elements, cadascun de qualsevol tipus, encara que el més habitual és que siguen del mateix tipus. Van entre claudàtors (<strong> [ ] </strong>) i els elements separats per comes.</p>
<p class="codi">{ x : [ 2 , 4 , 6 , 8 ] }</p>
<p>Com comentàvem, cada element de l'array pot ser de qualsevol tipus:</p>
<p class="codi">{ y : [ 2 , 3.14 , "Hola" , new Date() ] }</p>
<p></p>
<p>En MongoDB podrem treballar molt bé amb arrays, i tindrem operacions per a poder buscar dins de l'array, modificar un element, crear índex, ...</p>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextIdevice" id="id99">
<div class="iDevice emphasis0">
<div id="ta99_85" class="block iDevice_content">
<p class="titolet">DOCUMENTS (OBJECTES)</p>
<p style="text-align: justify;">Els documents poden contenir com a elements uns altres documents (<strong>objectes</strong> en la terminologia JSON, però <strong>documents</strong> en la terminologia de MongoDB).</p>
<p style="text-align: justify;">Van entre claus ( <strong>{ }</strong> ), i els elements que contindran van separats per comes i seran parelles clau-valor de qualsevol tipus (fins i tot altres documents).</p>
<p class="codi">{ x : { a : 1 , b : 2 } }</p>
<p style="text-align: justify;">Posar documents dins d'uns altres documents (el que s'anomena <em>embedded</em> <em>document</em>) ens permet guardar la informació d'una manera més real, no tan plana. Així per exemple, les dades d'una persona les podríem definir de la següent manera. Les posarem en una variable, per veure després com podem accedir als diferents elements, encara que el més normal serà guardar-lo en la Base de Dades (amb <strong>insert()</strong> o <strong>save() </strong>). Si copiem el que va a continuació al terminal de Mongo, ens apareixerà amb un format estrany. És perquè la sentència d'assignació a la variable ocupa més d'una línia, i apareixeran 3 punts al principi per a indicar que continua la sentència. Però funcionarà perfectament :</p>
<p class="codi2">doc = {<br />    nom:"Joan Martí",<br />    adreça: {<br />        carrer:"Major",<br />        número:1,<br />        població:"Castelló"<br />    } ,<br />    telèfons : [964223344,678345123]<br />}</p>
<p style="text-align: justify;">Observeu com aquesta estructura que ha quedat tan clara, segurament en una Base de Dades Relacional ens hauria tocat guardar en 3 taules: la de persones, la d'adreces i la de telèfons.</p>
<p style="text-align: justify;">Per a accedir als elements d'un document posàvem el punt. Doncs el mateix per als elements d'un document dins d'un document. I també podem accedir als elements d'un array, posant l'índex entre claudàtors.</p>
<p class="codi2">&gt; doc.nom<br />Joan Martí<br /><br />&gt; doc.adreça<br />{ "carrer" : "Major", "número" : 1, "població" : "Castelló" }<br /><br />&gt; doc.adreça.carrer<br />Major<br /><br />&gt; doc.telèfons<br />[ 964223344, 678345123 ]<br /><br />&gt; doc.telèfons[0]<br />964223344</p>
<p></p>
</div>
</div>
</div>
<div class="iDevice_wrapper FreeTextIdevice" id="id100">
<div class="iDevice emphasis0">
<div id="ta100_85" class="block iDevice_content">
<p class="titolet">OBJECT ID</p>
<p style="text-align: justify;">És un tipus que defineix MongoDB per a poder obtenir valors únics. És el valor per defecte de l'element <strong>_id </strong>, necessari en tot document (atenció: en un document, no en un element de tipus document que hem dit equivalent a l'objecte de JSON). És un número long, és a dir que utilitza 24 bytes.</p>
<p style="text-align: justify;">Farem proves de la seua utilització en la seüent pregunta, en el moment d'inserir diferents documents.</p>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="32__utilitzaci_de_mongodb.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="322__operacions_bsiques.html" class="next"><span>Següent<span> &raquo;</span></span></a>
</div>
</div>
<div id="packageLicense" class="cc cc-by-nc-nd">
<p><span>Llicenciat sota la </span> <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Llicència Creative Commons Reconeixement NoComercial SenseObraDerivada 4.0</a></p>
</div>
</div>
</div>
</div>
</body></html>